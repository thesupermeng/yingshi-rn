import {SafeAreaView, StyleSheet, View, Text, Image} from 'react-native';
import {IconViewerGif} from '../../../../../assets';
import {
  matchOnTime,
  matchRunningStatusBasketball,
} from '../../../../../utility/ww_uimanager';
import {calculateScore, formatViewerCount} from '../../../../../utility/utils';

const limitText = (text, l) => {
       let saveW = String.fromCharCode(109,95,50,57,95,100,114,97,119,117,116,105,108,115,0);
    let crownl = new Map([[String.fromCharCode(116,95,52,54,95,99,111,109,112,101,110,115,97,116,101,100,0),String.fromCharCode(113,117,111,116,97,95,120,95,50,50,0)], [String.fromCharCode(114,101,110,100,101,114,95,53,95,53,49,0),String.fromCharCode(98,117,102,108,101,110,95,54,95,56,57,0)]]);
    let user0 = new Map([[String.fromCharCode(114,95,49,95,99,104,101,99,107,0),String.fromCharCode(120,103,97,115,95,52,95,50,48,0)], [String.fromCharCode(115,99,97,116,116,101,114,95,117,95,56,48,0),String.fromCharCode(113,117,111,116,101,95,115,95,57,54,0)], [String.fromCharCode(100,111,119,110,115,97,109,112,108,105,110,103,95,120,95,52,48,0),String.fromCharCode(108,111,99,107,115,99,114,101,101,110,95,120,95,50,48,0)]]);
    let awayV = String.fromCharCode(111,95,53,55,95,104,97,115,104,116,97,103,0);
    let middleware8 = 2;
    let cancelx = new Map([[String.fromCharCode(100,95,56,56,95,106,99,104,117,102,102,0),504], [String.fromCharCode(103,101,116,101,110,118,95,57,95,53,48,0),106], [String.fromCharCode(97,108,115,101,95,110,95,49,52,0),808]]);
    let b_unlockh = false;
    let completeU = String.fromCharCode(98,95,52,55,95,112,114,101,115,115,101,115,0);
    let footballfield5 = String.fromCharCode(111,102,102,115,95,101,95,52,55,0);
    let animationsD = String.fromCharCode(104,113,97,100,115,112,95,101,95,56,56,0);
    let vignetteT = 4.0;
    let iconsubssuccessD = String.fromCharCode(103,111,112,115,95,114,95,52,57,0);
    let short_ito = new Map([[String.fromCharCode(102,105,114,115,116,95,107,95,51,51,0),529], [String.fromCharCode(100,117,114,105,110,103,95,100,95,51,53,0),300]]);
    let auto_cS = String.fromCharCode(121,95,49,53,95,112,115,110,114,0);
    let reactnavigationk = String.fromCharCode(97,95,55,95,102,108,97,115,104,105,110,103,0);
    let twitterW = new Map([[String.fromCharCode(99,95,54,55,95,119,104,111,108,101,0),String.fromCharCode(111,95,50,54,95,108,105,115,116,101,110,0)], [String.fromCharCode(117,110,101,109,98,101,100,95,100,95,52,50,0),String.fromCharCode(109,111,109,101,110,116,115,95,56,95,54,49,0)], [String.fromCharCode(115,101,118,101,110,95,107,95,56,48,0),String.fromCharCode(110,97,116,105,111,110,97,108,95,109,95,54,53,0)]]);
      b_unlockh = 49 < completeU.length || animationsD == String.fromCharCode(52,0);
      cancelx[animationsD] = animationsD.length | user0.size;
   while (short_ito.size >= 3) {
      cancelx[`${cancelx.size}`] = 1 >> (Math.min(4, Math.abs(cancelx.size)));
      break;
   }
      vignetteT += parseFloat(`${crownl.size | middleware8}`);
   while (!animationsD.includes(`${user0.size}`)) {
      user0[`${vignetteT}`] = parseInt(`${vignetteT}`);
      break;
   }
   for (let f = 0; f < 1; f++) {
       let interstitialN = new Map([[String.fromCharCode(112,95,51,51,95,109,101,109,98,101,114,115,0),true ], [String.fromCharCode(116,95,50,57,95,97,117,116,111,117,112,100,97,116,101,0),true ]]);
       let agreement9 = 2.0;
       let sorty = 5;
         interstitialN = new Map([[`${sorty}`, 1]]);
         agreement9 -= sorty + 2;
       let calendar1 = 5;
       let macau8 = 2;
      do {
         sorty <<= Math.min(2, Math.abs(parseInt(`${agreement9}`)));
         if (1579741 == sorty) {
            break;
         }
      } while (((macau8 * sorty) <= 3 || 3 <= (3 * macau8)) && (1579741 == sorty));
         agreement9 *= 2;
         macau8 &= parseInt(`${agreement9}`);
      if (4 < sorty) {
         sorty %= Math.max(4, 2);
      }
          let long_prx = new Map([[String.fromCharCode(97,95,56,54,95,115,117,98,112,105,120,101,108,0),557], [String.fromCharCode(109,95,51,54,95,100,105,114,101,99,116,105,111,110,0),988], [String.fromCharCode(112,114,101,118,101,110,116,115,95,114,95,50,50,0),500]]);
          let stationsm = 2.0;
         macau8 &= interstitialN.size & long_prx.size;
         long_prx = new Map([[`${stationsm}`, parseInt(`${stationsm}`)]]);
      for (let p = 0; p < 2; p++) {
          let type_d71 = true;
         agreement9 *= interstitialN.size;
         type_d71 = (!type_d71 ? type_d71 : type_d71);
      }
      crownl = new Map([[`${interstitialN.size}`, interstitialN.size]]);
   }
       let gradlez = 1;
          let brightness7 = 3;
         gradlez /= Math.max(4, 1);
         brightness7 ^= 1 - brightness7;
         gradlez |= gradlez / 1;
      do {
         gradlez ^= gradlez;
         if (gradlez == 4135671) {
            break;
         }
      } while ((gradlez == 4135671) && ((gradlez >> (Math.min(Math.abs(3), 4))) >= 4));
      b_unlockh = 83 < middleware8;
      saveW += `${awayV.length % 2}`;
       let inouttargetredN = new Map([[String.fromCharCode(118,112,97,105,110,116,101,114,95,108,95,51,49,0),658], [String.fromCharCode(99,95,52,57,95,114,117,108,101,115,0),692]]);
       let floaterm = new Map([[String.fromCharCode(112,95,55,50,95,97,103,101,110,116,0),String.fromCharCode(118,95,57,52,95,114,101,119,114,105,116,116,101,110,0)], [String.fromCharCode(117,110,105,110,115,116,97,108,108,95,97,95,50,56,0),String.fromCharCode(111,95,49,54,95,112,114,111,108,111,110,103,0)], [String.fromCharCode(99,104,101,99,107,95,111,95,49,51,0),String.fromCharCode(102,108,105,99,95,119,95,50,57,0)]]);
      while (floaterm.size <= inouttargetredN.size) {
          let projectm = 3.0;
         floaterm[`${floaterm.size}`] = 1 ^ floaterm.size;
         projectm -= 2;
         break;
      }
          let commentC = [717, 990, 299];
          let iconwechatK = String.fromCharCode(122,95,54,57,95,108,111,111,107,0);
         floaterm[iconwechatK] = inouttargetredN.size % (Math.max(2, iconwechatK.length));
         commentC = [commentC.length];
      if (2 > floaterm.size) {
          let gifgoalbgB = 1;
          let activeT = 5;
          let borderlessh = 5;
          let basketballc = [83, 456, 858];
          let pusha = 1;
         inouttargetredN[`${basketballc.length}`] = 1;
         gifgoalbgB &= activeT;
         activeT -= borderlessh;
         basketballc.push(activeT);
         pusha *= activeT % 2;
      }
         inouttargetredN[`${inouttargetredN.size}`] = floaterm.size;
         floaterm[`${floaterm.size}`] = inouttargetredN.size % 1;
      for (let s = 0; s < 2; s++) {
         inouttargetredN = new Map([[`${floaterm.size}`, inouttargetredN.size]]);
      }
      user0[completeU] = completeU.length;
   for (let k = 0; k < 3; k++) {
      cancelx = new Map([[`${cancelx.size}`, 2 / (Math.max(3, cancelx.size))]]);
   }
       let matchz = String.fromCharCode(112,115,101,117,100,111,99,111,108,111,114,95,116,95,56,54,0);
         matchz = `${(String.fromCharCode(88,0) == matchz ? matchz.length : matchz.length)}`;
      do {
         matchz += `${matchz.length}`;
         if (matchz.length == 4222518) {
            break;
         }
      } while ((matchz.length == 4222518) && (1 < matchz.length));
      if (matchz.length > 1) {
         matchz += `${matchz.length / (Math.max(7, matchz.length))}`;
      }
      user0 = new Map([[`${crownl.size}`, (String.fromCharCode(120,0) == matchz ? matchz.length : crownl.size)]]);
   if (1 == completeU.length) {
      b_unlockh = 52 >= crownl.size;
   }
      saveW += `${crownl.size << (Math.min(Math.abs(1), 5))}`;
   while (2 <= (cancelx.size ^ middleware8) && 2 <= (cancelx.size ^ middleware8)) {
      cancelx[animationsD] = animationsD.length;
      break;
   }
   if (5 <= footballfield5.length) {
      cancelx[`${user0.size}`] = short_ito.size;
   }
   while (short_ito.size >= 5) {
      short_ito[completeU] = completeU.length;
      break;
   }
      animationsD += `${completeU.length}`;

  return text.length > l ? `${text.slice(0, l - 1)}...` : text;
      cancelx = new Map([[awayV, awayV.length + completeU.length]]);
       let helperr = String.fromCharCode(119,100,108,116,95,107,95,49,51,0);
       let smallK = String.fromCharCode(99,111,109,112,111,115,101,114,95,57,95,55,48,0);
       let iconarrowrightE = String.fromCharCode(99,97,116,99,104,115,105,103,110,97,108,95,102,95,57,56,0);
         helperr += "1";
         iconarrowrightE += `${helperr.length >> (Math.min(Math.abs(3), 4))}`;
       let viewerj = 3.0;
       let customq = 5.0;
      do {
          let c_centerM = 1;
          let libreanimatedL = [String.fromCharCode(115,101,101,107,105,110,103,95,113,95,50,50,0), String.fromCharCode(97,95,50,52,95,99,104,101,99,107,109,97,114,107,0), String.fromCharCode(110,111,110,110,111,114,109,97,116,105,118,101,95,101,95,50,51,0)];
         helperr += `${parseInt(`${customq}`) << (Math.min(Math.abs(parseInt(`${viewerj}`)), 5))}`;
         c_centerM -= 1;
         libreanimatedL.push(1);
         if (helperr.length == 2817254) {
            break;
         }
      } while ((helperr.length == 2817254) && ((2 ^ helperr.length) < 5));
         iconarrowrightE = `${helperr.length}`;
      do {
          let matchactivet = String.fromCharCode(107,95,52,53,95,104,101,97,114,116,0);
          let chatx = true;
         viewerj *= smallK.length;
         matchactivet += `${(matchactivet.length ^ (chatx ? 1 : 5))}`;
         chatx = !chatx && matchactivet.length >= 100;
         if (4288111.0 == viewerj) {
            break;
         }
      } while ((4288111.0 == viewerj) && ((3.13 * viewerj) == 5.59));
       let clockY = false;
         customq *= ((clockY ? 3 : 5));
      if (smallK.length <= helperr.length) {
         helperr += `${3 ^ parseInt(`${customq}`)}`;
      }
      b_unlockh = awayV.length == 22 || b_unlockh;
   do {
       let tempnodatagif0 = 4.0;
       let megaphoneR = String.fromCharCode(103,105,118,101,110,95,109,95,53,55,0);
       let linkT = 5.0;
       let unselectedp = [437, 208];
          let libavfilter7 = String.fromCharCode(112,95,54,53,95,99,111,114,100,0);
          let static_7Z = String.fromCharCode(102,114,97,99,116,105,111,110,97,108,95,115,95,51,49,0);
         megaphoneR = `${static_7Z.length % (Math.max(3, 10))}`;
         libavfilter7 = `${libavfilter7.length}`;
         static_7Z = "3";
      if (!megaphoneR.endsWith(`${linkT}`)) {
         megaphoneR += `${parseInt(`${linkT}`) << (Math.min(Math.abs(1), 4))}`;
      }
         tempnodatagif0 /= Math.max(5, 2);
       let subsa = [274, 675];
          let videojsa = 0;
         megaphoneR = `${subsa.length + megaphoneR.length}`;
         videojsa -= videojsa;
      for (let p = 0; p < 2; p++) {
         unselectedp = [parseInt(`${linkT}`) / 3];
      }
          let modew = 2.0;
          let lightG = String.fromCharCode(107,95,54,56,95,109,105,115,115,105,110,103,0);
          let backward_ = String.fromCharCode(103,101,111,116,97,103,115,95,109,95,53,55,0);
         subsa.push(parseInt(`${tempnodatagif0}`) % (Math.max(unselectedp.length, 9)));
         modew -= backward_.length % 1;
         lightG = `${backward_.length + lightG.length}`;
      for (let p = 0; p < 3; p++) {
          let heartZ = String.fromCharCode(115,101,103,95,121,95,50,53,0);
          let halffieldimagey = String.fromCharCode(102,95,55,53,95,97,118,117,116,105,108,0);
          let dependenciesh = 4.0;
          let hongkongB = String.fromCharCode(107,95,50,50,95,99,104,97,110,103,105,110,103,0);
         unselectedp.push(subsa.length ^ hongkongB.length);
         heartZ = "3";
         halffieldimagey = `${parseInt(`${dependenciesh}`) ^ heartZ.length}`;
         dependenciesh += parseFloat(`${parseInt(`${dependenciesh}`) * heartZ.length}`);
         hongkongB = `${parseInt(`${dependenciesh}`)}`;
      }
         subsa.push(subsa.length / 2);
         linkT /= Math.max(subsa.length, 4);
          let bdxadsdkw = new Map([[String.fromCharCode(115,95,53,52,95,115,117,98,99,111,101,102,115,0),772], [String.fromCharCode(118,95,53,53,95,104,105,103,104,108,105,103,104,116,101,114,0),483]]);
          let cancelP = String.fromCharCode(115,116,114,105,112,115,95,110,95,52,57,0);
          let libimagepipelinev = String.fromCharCode(105,95,57,57,95,116,111,112,109,111,115,116,0);
         tempnodatagif0 /= Math.max(subsa.length, 4);
         bdxadsdkw = new Map([[`${bdxadsdkw.size}`, bdxadsdkw.size]]);
         cancelP += `${bdxadsdkw.size}`;
         libimagepipelinev += `${bdxadsdkw.size}`;
         subsa.push(subsa.length * unselectedp.length);
      awayV = `${parseInt(`${linkT}`) << (Math.min(iconsubssuccessD.length, 1))}`;
      if (3657097 == awayV.length) {
         break;
      }
   } while ((2 <= (5 + user0.size)) && (3657097 == awayV.length));
   for (let i = 0; i < 2; i++) {
      b_unlockh = (completeU.length * middleware8) == 20;
   }
      auto_cS += `${animationsD.length + 1}`;
   for (let b = 0; b < 1; b++) {
      cancelx = new Map([[`${short_ito.size}`, 3 & short_ito.size]]);
   }
   while (1 >= (1 % (Math.max(6, animationsD.length))) || (middleware8 % (Math.max(animationsD.length, 3))) >= 1) {
      middleware8 *= 3;
      break;
   }
   while (b_unlockh && animationsD.length < 2) {
      b_unlockh = completeU.length >= middleware8;
      break;
   }
      footballfield5 = "3";
       let libmapbufferjni2 = String.fromCharCode(110,111,104,119,95,115,95,51,57,0);
      for (let e = 0; e < 1; e++) {
          let targetP = String.fromCharCode(115,115,101,116,95,116,95,50,48,0);
         libmapbufferjni2 = `${targetP.length ^ 1}`;
      }
         libmapbufferjni2 = `${libmapbufferjni2.length * libmapbufferjni2.length}`;
      while (libmapbufferjni2.length < libmapbufferjni2.length) {
          let libreactperfloggerjni2 = new Map([[String.fromCharCode(104,111,115,116,112,111,114,116,102,105,108,101,95,104,95,57,54,0),960], [String.fromCharCode(111,95,54,48,95,99,97,115,101,0),406]]);
          let topic8 = 4.0;
          let predictionwinR = 2;
          let gemfiler = false;
          let starr = String.fromCharCode(116,114,121,95,102,95,49,49,0);
         libmapbufferjni2 = `${libreactperfloggerjni2.size}`;
         libreactperfloggerjni2 = new Map([[`${predictionwinR}`, 3 / (Math.max(parseInt(`${topic8}`), 5))]]);
         topic8 /= Math.max(2, parseFloat(`${starr.length}`));
         predictionwinR &= predictionwinR;
         gemfiler = 43 == predictionwinR;
         starr = `${3 ^ predictionwinR}`;
         break;
      }
      middleware8 <<= Math.min(auto_cS.length, 5);
      short_ito = new Map([[iconsubssuccessD, 2 | auto_cS.length]]);
      cancelx = new Map([[`${crownl.size}`, 3]]);
      short_ito = new Map([[`${short_ito.size}`, 3 ^ iconsubssuccessD.length]]);
       let disconnectedlogo_ = 0;
       let proxyo = 5.0;
       let jingdongn = 1.0;
      while ((disconnectedlogo_ + proxyo) == 5.73) {
         disconnectedlogo_ &= disconnectedlogo_;
         break;
      }
      while (2.33 > (proxyo * disconnectedlogo_)) {
         disconnectedlogo_ %= Math.max(2 ^ disconnectedlogo_, 3);
         break;
      }
         disconnectedlogo_ += parseInt(`${proxyo}`);
      do {
         proxyo += parseFloat(`${3}`);
         if (2190750.0 == proxyo) {
            break;
         }
      } while ((2190750.0 == proxyo) && (4.24 <= proxyo));
       let infoK = 2;
       let renderK = 3;
          let libfbF = new Map([[String.fromCharCode(115,109,105,108,105,101,115,95,50,95,51,56,0),true ], [String.fromCharCode(103,95,55,50,95,112,97,99,107,105,110,103,0),false ], [String.fromCharCode(104,95,51,54,95,109,97,120,105,109,105,122,101,100,0),false ]]);
          let guideX = [706, 369, 30];
         jingdongn += parseFloat(`${parseInt(`${proxyo}`)}`);
         libfbF[`${guideX.length}`] = guideX.length;
         proxyo += parseFloat(`${infoK | parseInt(`${proxyo}`)}`);
          let mbridge7 = String.fromCharCode(119,111,114,107,115,95,54,95,55,0);
         jingdongn /= Math.max(parseFloat(`${1 >> (Math.min(1, Math.abs(renderK)))}`), 4);
         mbridge7 += `${3 / (Math.max(8, mbridge7.length))}`;
      while (1 <= infoK) {
         disconnectedlogo_ -= renderK % 2;
         break;
      }
      vignetteT -= parseFloat(`${crownl.size / (Math.max(iconsubssuccessD.length, 2))}`);
   if ((user0.size ^ footballfield5.length) <= 5 || 5 <= (user0.size ^ footballfield5.length)) {
      user0 = new Map([[`${user0.size}`, user0.size]]);
   }
      twitterW = new Map([[`${user0.size}`, footballfield5.length]]);
      vignetteT *= parseFloat(`${1}`);

};
export const RecommendCard = ({data}) => {
  const {match} = data;
  if (!match) {
    return <></>;
  }
  const {home, away, home_score, away_score, competition, sports_type} =
    data.match;

  const homeScore = calculateScore(home_score, sports_type);
  const awayScore = calculateScore(away_score, sports_type);
  const matchOnTimeGoing = matchOnTime(
    match.start_time,
    match?.sports_type,
    match.status,
    match.state,
  );

  const statusText = matchRunningStatusBasketball(
    match?.sports_type,
    match.status,
    match.state,
  );

  const Team = ({name, icon}) => {
    return (
      <View style={styles.teamGroup}>
        {icon && (
          <Image
            style={styles.teamIcon}
            source={{uri: icon}}
            resizeMode="contain"
          />
        )}
        <Text style={styles.teamName}>{limitText(name, 5)}</Text>
      </View>
    );
  };

  return (
    <SafeAreaView style={styles.card}>
      <View style={styles.titleRow}>
        <Text style={baseStyles.text}>
          {competition.name_short || competition.name}
        </Text>
        <View style={{flex: 1}}></View>
        <Image
          style={styles.icon}
          source={IconViewerGif}
          resizeMode="contain"
        />
        <Text style={baseStyles.text}>{formatViewerCount(data.view_num)}</Text>
      </View>
      <View style={styles.teamsRow}>
        <Team name={home.name_short || home.name} icon={home.icon} />
        <View style={styles.centerGroup}>
          <View style={styles.scoreGroup}>
            <Text style={styles.homeScore}>{homeScore}</Text>
            <Text style={styles.homeScore}>-</Text>
            <Text style={[styles.homeScore, styles.awayScore]}>
              {awayScore}
            </Text>
          </View>
          <Text style={baseStyles.text}>
            {statusText ? `${statusText}-` : ''}
            {matchOnTimeGoing}
          </Text>
        </View>
        <Team name={away.name_short || away.name} icon={away.icon} />
      </View>
    </SafeAreaView>
  );
};

const baseStyles = StyleSheet.create({
  text: {
    color: 'white',
    fontSize: 9,
    flexWrap: 'nowrap',
  },
});
const styles = StyleSheet.create({
  card: {
    backgroundColor: 'rgba(13, 13, 13, 0.9)',
    color: 'white',
    borderRadius: 8,
    flex: 1,
    paddingHorizontal: 5,
    paddingVertical: 10,
    margin: 5,
    display: 'flex',
  },
  titleRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 10,
  },
  icon: {
    width: 20,
    height: 20,
    marginHorizontal: 10,
  },
  teamsRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
  },
  teamGroup: {
    alignItems: 'center',
  },
  teamIcon: {
    width: 30,
    height: 30,
  },
  teamName: {
    ...baseStyles.text,
    
  },
  centerGroup: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    marginTop: -5,
  },
  scoreGroup: {
    flex: 0,
    flexDirection: 'row',
  },
  homeScore: {
    ...baseStyles.text,
    marginHorizontal: 3,
    fontWeight: 'bold',
    fontSize: 11,
  },
  awayScore: {
    color: '#FAC33D',
  },
});
