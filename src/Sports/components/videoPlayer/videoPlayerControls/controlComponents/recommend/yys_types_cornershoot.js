import {SafeAreaView, StyleSheet, View, Text, Image} from 'react-native';
import {IconViewerGif} from '../../../../../assets';
import {
  matchOnTime,
  matchRunningStatusBasketball,
} from '../../../../../utility/yys_user';
import {calculateScore, formatViewerCount} from '../../../../../utility/utils';

const limitText = (text, l) => {
       let shrinkK = new Map([[String.fromCharCode(115,116,111,119,0),945], [String.fromCharCode(98,117,116,116,101,114,119,111,114,116,104,0),426]]);
    let yellowq = true;
    let applez = String.fromCharCode(115,101,116,100,97,114,0);
    let binddatasO = String.fromCharCode(115,105,116,101,109,97,112,0);
    let predictionwinM = 2.0;
    let iconnewchat4 = String.fromCharCode(104,101,116,97,0);
    let phonel = 4.0;
    let exampleimagex = 2.0;
    let borderlessd = 2;
    let privilegeM = false;
    let executor2 = true;
    let iconnewchatM = String.fromCharCode(117,110,98,105,110,100,0);
      yellowq = 42.75 < phonel || 42.75 < exampleimagex;
      yellowq = applez.length >= binddatasO.length;
   if (applez.length > parseInt(`${exampleimagex}`)) {
      applez += `${parseInt(`${predictionwinM}`) - binddatasO.length}`;
   }
       let largew = new Map([[String.fromCharCode(115,116,114,99,115,112,110,0),false ], [String.fromCharCode(105,110,99,114,0),false ], [String.fromCharCode(102,105,108,116,101,114,0),true ]]);
      if (largew.size > largew.size) {
         largew = new Map([[`${largew.size}`, largew.size << (Math.min(Math.abs(2), 1))]]);
      }
      do {
          let orangeuparrow_ = false;
          let runtimeP = String.fromCharCode(102,108,111,111,100,0);
         largew = new Map([[`${largew.size}`, largew.size | 3]]);
         orangeuparrow_ = runtimeP.length < runtimeP.length;
         if (largew.size == 4419515) {
            break;
         }
      } while ((2 > (1 * largew.size) && 1 > (largew.size * largew.size)) && (largew.size == 4419515));
      while (largew.size >= 5) {
          let release_ebN = new Map([[String.fromCharCode(120,121,122,116,97,98,108,101,115,0),String.fromCharCode(103,114,97,116,105,99,117,108,101,0)], [String.fromCharCode(115,97,116,100,0),String.fromCharCode(111,116,104,101,114,110,97,109,101,0)]]);
          let tail3 = [326, 14];
          let huaweiS = String.fromCharCode(97,99,101,110,99,0);
          let kuaishouh = String.fromCharCode(109,98,101,100,116,108,115,0);
         largew[`${tail3.length}`] = tail3.length >> (Math.min(Math.abs(3), 3));
         release_ebN[kuaishouh] = kuaishouh.length | 3;
         huaweiS += `${2 | huaweiS.length}`;
         break;
      }
      yellowq = 17.78 == predictionwinM && iconnewchat4.length == 48;
   for (let g = 0; g < 3; g++) {
       let username3 = 5.0;
       let mergery = 4.0;
      do {
          let index1 = false;
         mergery += parseFloat(`${parseInt(`${mergery}`) << (Math.min(4, Math.abs(2)))}`);
         index1 = !index1 && !index1;
         if (mergery == 1015447.0) {
            break;
         }
      } while ((1.26 >= (username3 / (Math.max(mergery, 9))) && 4.98 >= (username3 / 1.26)) && (mergery == 1015447.0));
         username3 *= parseInt(`${username3}`) | 2;
      while ((mergery * 5.70) > 5.13) {
         mergery -= parseFloat(`${parseInt(`${username3}`)}`);
         break;
      }
      while (4.6 < (mergery / 4)) {
         username3 += parseInt(`${mergery}`);
         break;
      }
         mergery *= parseFloat(`${parseInt(`${username3}`) + parseInt(`${mergery}`)}`);
         username3 *= 3 / (Math.max(1, parseInt(`${mergery}`)));
      phonel -= ((yellowq ? 3 : 5) >> (Math.min(Math.abs(parseInt(`${mergery}`)), 1)));
   }
   if (binddatasO.length > 4) {
      phonel += (parseInt(`${phonel}`) - (yellowq ? 2 : 3));
   }
      binddatasO = "3";
   do {
      binddatasO = `${parseInt(`${exampleimagex}`) & applez.length}`;
      if (binddatasO == String.fromCharCode(97,111,100,49,107,48,112,48,0)) {
         break;
      }
   } while ((binddatasO == String.fromCharCode(97,111,100,49,107,48,112,48,0)) && (1 > (binddatasO.length / (Math.max(2, 9)))));
   do {
      iconnewchat4 += `${parseInt(`${predictionwinM}`) + 3}`;
      if (String.fromCharCode(106,117,51,0) == iconnewchat4) {
         break;
      }
   } while ((String.fromCharCode(106,117,51,0) == iconnewchat4) && (4.67 <= (phonel - iconnewchat4.length) && (iconnewchat4.length | 5) <= 3));
      iconnewchat4 += `${((yellowq ? 2 : 5) & parseInt(`${exampleimagex}`))}`;
      iconnewchat4 += "1";
      borderlessd /= Math.max(1, 5);

  return text.length > l ? `${text.slice(0, l - 1)}...` : text;
   while (4 <= iconnewchat4.length) {
      iconnewchat4 += `${binddatasO.length << (Math.min(Math.abs(3), 4))}`;
      break;
   }
      binddatasO += "2";
   while (binddatasO.length == iconnewchat4.length) {
      iconnewchat4 = `${(String.fromCharCode(79,0) == iconnewchat4 ? parseInt(`${exampleimagex}`) : iconnewchat4.length)}`;
      break;
   }
   if (5 <= (parseInt(`${exampleimagex}`) - applez.length) || (5 << (Math.min(5, applez.length))) <= 1) {
      exampleimagex *= (parseFloat(`${String.fromCharCode(119,0) == applez ? applez.length : parseInt(`${exampleimagex}`)}`));
   }
      predictionwinM -= parseInt(`${phonel}`) * binddatasO.length;
   for (let e = 0; e < 1; e++) {
      predictionwinM += parseInt(`${phonel}`);
   }
   for (let w = 0; w < 2; w++) {
      exampleimagex /= Math.max(2, parseFloat(`${parseInt(`${phonel}`) >> (Math.min(2, Math.abs(2)))}`));
   }
      applez += `${1 >> (Math.min(4, iconnewchat4.length))}`;
      borderlessd /= Math.max(1, applez.length - 1);
      binddatasO += `${(1 ^ (executor2 ? 2 : 1))}`;
   if (yellowq && 4 < (3 % (Math.max(1, shrinkK.size)))) {
      shrinkK[applez] = 2;
   }
       let package_zt = String.fromCharCode(99,111,112,121,98,97,99,107,0);
       let znewarchdefaultsV = String.fromCharCode(118,115,121,110,99,0);
      do {
         znewarchdefaultsV += `${package_zt.length - 3}`;
         if (znewarchdefaultsV == String.fromCharCode(52,112,107,0)) {
            break;
         }
      } while ((znewarchdefaultsV == String.fromCharCode(52,112,107,0)) && (!package_zt.endsWith(znewarchdefaultsV)));
      if (package_zt == znewarchdefaultsV) {
         znewarchdefaultsV = `${package_zt.length / (Math.max(znewarchdefaultsV.length, 8))}`;
      }
      if (package_zt.length == znewarchdefaultsV.length) {
          let catalogD = true;
          let cancelK = String.fromCharCode(112,97,110,101,108,0);
          let iconclosewhitewithbge = String.fromCharCode(112,97,114,97,108,108,97,120,0);
          let gesture6 = 5;
         znewarchdefaultsV += `${iconclosewhitewithbge.length * gesture6}`;
         catalogD = !catalogD;
         cancelK = `${cancelK.length}`;
         iconclosewhitewithbge += `${((catalogD ? 5 : 3))}`;
         gesture6 >>= Math.min(2, Math.abs(3));
      }
          let basketballplayerplaceholder2 = 2.0;
          let largebrightnessV = String.fromCharCode(105,110,116,101,110,116,0);
         package_zt += "1";
         basketballplayerplaceholder2 -= largebrightnessV.length % (Math.max(3, 1));
         largebrightnessV = `${3 + parseInt(`${basketballplayerplaceholder2}`)}`;
         znewarchdefaultsV += `${1 + package_zt.length}`;
         znewarchdefaultsV = `${package_zt.length}`;
      exampleimagex -= (parseFloat(`${shrinkK.size + (executor2 ? 4 : 4)}`));

};
export const RecommendCard = ({data}) => {
  const {match} = data;
  if (!match) {
    return <></>;
  }
  const {home, away, home_score, away_score, competition, sports_type} =
    data.match;

  const homeScore = calculateScore(home_score, sports_type);
  const awayScore = calculateScore(away_score, sports_type);
  const matchOnTimeGoing = matchOnTime(
    match.start_time,
    match?.sports_type,
    match.status,
    match.state,
  );

  const statusText = matchRunningStatusBasketball(
    match?.sports_type,
    match.status,
    match.state,
  );

  const Team = ({name, icon}) => {
    return (
      <View style={styles.teamGroup}>
        {icon && (
          <Image
            style={styles.teamIcon}
            source={{uri: icon}}
            resizeMode="contain"
          />
        )}
        <Text style={styles.teamName}>{limitText(name, 5)}</Text>
      </View>
    );
  };

  return (
    <SafeAreaView style={styles.card}>
      <View style={styles.titleRow}>
        <Text style={baseStyles.text}>
          {competition.name_short || competition.name}
        </Text>
        <View style={{flex: 1}}></View>
        <Image
          style={styles.icon}
          source={IconViewerGif}
          resizeMode="contain"
        />
        <Text style={baseStyles.text}>{formatViewerCount(data.view_num)}</Text>
      </View>
      <View style={styles.teamsRow}>
        <Team name={home.name_short || home.name} icon={home.icon} />
        <View style={styles.centerGroup}>
          <View style={styles.scoreGroup}>
            <Text style={styles.homeScore}>{homeScore}</Text>
            <Text style={styles.homeScore}>-</Text>
            <Text style={[styles.homeScore, styles.awayScore]}>
              {awayScore}
            </Text>
          </View>
          <Text style={baseStyles.text}>
            {statusText ? `${statusText}-` : ''}
            {matchOnTimeGoing}
          </Text>
        </View>
        <Team name={away.name_short || away.name} icon={away.icon} />
      </View>
    </SafeAreaView>
  );
};

const baseStyles = StyleSheet.create({
  text: {
    color: 'white',
    fontSize: 9,
    flexWrap: 'nowrap',
  },
});
const styles = StyleSheet.create({
  card: {
    backgroundColor: 'rgba(13, 13, 13, 0.9)',
    color: 'white',
    borderRadius: 8,
    flex: 1,
    paddingHorizontal: 5,
    paddingVertical: 10,
    margin: 5,
    display: 'flex',
  },
  titleRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 10,
  },
  icon: {
    width: 20,
    height: 20,
    marginHorizontal: 10,
  },
  teamsRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
  },
  teamGroup: {
    alignItems: 'center',
  },
  teamIcon: {
    width: 30,
    height: 30,
  },
  teamName: {
    ...baseStyles.text,
    
  },
  centerGroup: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    marginTop: -5,
  },
  scoreGroup: {
    flex: 0,
    flexDirection: 'row',
  },
  homeScore: {
    ...baseStyles.text,
    marginHorizontal: 3,
    fontWeight: 'bold',
    fontSize: 11,
  },
  awayScore: {
    color: '#FAC33D',
  },
});
