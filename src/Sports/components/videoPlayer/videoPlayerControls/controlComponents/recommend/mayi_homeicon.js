import {SafeAreaView, StyleSheet, View, Text, Image} from 'react-native';
import {IconViewerGif} from '../../../../../assets';
import {
  matchOnTime,
  matchRunningStatusBasketball,
} from '../../../../../utility/mayi_newinterstitial';
import {calculateScore, formatViewerCount} from '../../../../../utility/utils';

const limitText = (text, l) => {
       let entryO = 1.0;
    let videojs8 = String.fromCharCode(103,95,51,51,95,101,102,102,101,99,116,0);
    let iconlogout7 = String.fromCharCode(122,95,54,48,95,109,107,100,105,114,0);
    let team0 = [164, 510];
    let commonN = String.fromCharCode(102,95,55,57,95,104,111,114,105,122,111,110,116,97,108,108,121,0);
    let iconscheduleA = true;
    let streamingF = String.fromCharCode(113,95,49,55,95,98,117,115,121,0);
    let launch8 = String.fromCharCode(114,95,49,53,95,115,105,110,99,0);
    let qaag0 = String.fromCharCode(122,95,52,57,0);
    let gradleJ = String.fromCharCode(114,95,50,55,95,100,117,109,112,112,97,99,107,101,116,0);
   if (entryO <= iconlogout7.length) {
       let klevin6 = String.fromCharCode(111,95,53,95,118,97,114,105,110,116,0);
       let moduleO = false;
      do {
          let flipperi = 0.0;
          let small5 = [151, 137, 970];
         moduleO = small5.length >= 26;
         flipperi -= parseFloat(`${parseInt(`${flipperi}`) ^ 2}`);
         small5 = [parseInt(`${flipperi}`) | parseInt(`${flipperi}`)];
         if (moduleO ? !moduleO : moduleO) {
            break;
         }
      } while ((moduleO ? !moduleO : moduleO) && (moduleO));
      for (let c = 0; c < 1; c++) {
         klevin6 = `${3 + klevin6.length}`;
      }
      for (let w = 0; w < 1; w++) {
         klevin6 = "1";
      }
      for (let f = 0; f < 2; f++) {
         moduleO = !moduleO && klevin6.length <= 15;
      }
      for (let j = 0; j < 3; j++) {
         moduleO = !klevin6.startsWith(`${moduleO}`);
      }
      while (moduleO || klevin6.length == 3) {
          let less8 = false;
          let skipC = 5;
          let internete = String.fromCharCode(112,95,51,56,0);
          let selected6 = String.fromCharCode(115,101,110,100,105,110,103,95,117,95,48,0);
         moduleO = moduleO || selected6.length <= 16;
         less8 = !less8;
         skipC %= Math.max(1, 3);
         internete = `${internete.length}`;
         selected6 = `${(internete == String.fromCharCode(108,0) ? internete.length : skipC)}`;
         break;
      }
      iconlogout7 += `${videojs8.length & 2}`;
   }
       let carouselZ = 5.0;
       let nterstitialp = new Map([[String.fromCharCode(108,111,103,95,55,95,54,57,0),173], [String.fromCharCode(122,95,53,55,95,109,97,99,101,120,97,109,112,108,101,0),629], [String.fromCharCode(110,95,51,53,95,102,108,105,112,112,101,100,0),418]]);
       let expandP = String.fromCharCode(101,113,117,105,118,97,108,101,110,116,95,52,95,57,56,0);
       let shootyesgoal5 = true;
       let iconwechat8 = true;
       let libbufferp = 4.0;
      while ((5 / (Math.max(10, expandP.length))) > 3 && (expandP.length / 5) > 4) {
          let nendV = String.fromCharCode(114,101,99,111,118,101,114,95,117,95,53,51,0);
          let inouttargetredv = 1.0;
          let mbnativeadvancedc = String.fromCharCode(105,100,102,118,95,118,95,55,53,0);
         expandP = `${(1 * (shootyesgoal5 ? 5 : 2))}`;
         nendV = `${mbnativeadvancedc.length & nendV.length}`;
         inouttargetredv *= parseFloat(`${parseInt(`${inouttargetredv}`)}`);
         mbnativeadvancedc += `${2 ^ nendV.length}`;
         break;
      }
      do {
          let minimize_ = 4;
         nterstitialp = new Map([[`${nterstitialp.size}`, nterstitialp.size | 2]]);
         minimize_ /= Math.max(2, minimize_ >> (Math.min(Math.abs(1), 2)));
         if (901623 == nterstitialp.size) {
            break;
         }
      } while ((901623 == nterstitialp.size) && (3.55 < (2.12 * carouselZ) || 3.44 < (carouselZ * 2.12)));
       let questg = String.fromCharCode(109,111,100,101,110,97,109,101,95,113,95,51,56,0);
      videojs8 = `${streamingF.length - 2}`;
   do {
      streamingF = `${(commonN == String.fromCharCode(70,0) ? streamingF.length : commonN.length)}`;
      if (streamingF.length == 715219) {
         break;
      }
   } while ((streamingF.startsWith(`${iconlogout7.length}`)) && (streamingF.length == 715219));
   while (videojs8.length == team0.length) {
      team0.push(iconlogout7.length | 1);
      break;
   }
      iconlogout7 += `${streamingF.length >> (Math.min(Math.abs(2), 3))}`;
       let phonej = String.fromCharCode(97,116,104,95,105,95,52,57,0);
      while (phonej != phonej) {
          let redscoreballC = String.fromCharCode(105,110,116,101,114,105,116,101,109,95,103,95,49,48,0);
          let reducer0 = 3.0;
          let helperU = 3.0;
          let mimet = String.fromCharCode(106,95,56,53,95,115,117,114,101,0);
         phonej = `${redscoreballC.length >> (Math.min(2, Math.abs(parseInt(`${reducer0}`))))}`;
         redscoreballC = "1";
         reducer0 += (parseFloat(`${mimet == String.fromCharCode(113,0) ? parseInt(`${helperU}`) : mimet.length}`));
         helperU += parseFloat(`${parseInt(`${helperU}`)}`);
         break;
      }
          let debugT = String.fromCharCode(98,114,105,100,103,101,95,108,95,54,54,0);
         phonej += `${debugT.length}`;
         phonej += "2";
      videojs8 += `${commonN.length + parseInt(`${entryO}`)}`;
   for (let d = 0; d < 1; d++) {
       let auto_rG = String.fromCharCode(122,95,54,50,95,118,115,101,114,118,105,99,101,0);
       let dialog4 = 5.0;
       let megaphoney = String.fromCharCode(112,95,51,57,95,115,112,101,97,107,101,114,0);
       let bootsplash5 = true;
         bootsplash5 = !bootsplash5;
          let chinaU = 1.0;
          let humidityr = String.fromCharCode(98,95,53,57,95,116,109,109,98,0);
         bootsplash5 = 23 > auto_rG.length;
         chinaU *= parseInt(`${chinaU}`) << (Math.min(Math.abs(1), 3));
         humidityr = `${parseInt(`${chinaU}`)}`;
      while (megaphoney.startsWith(`${dialog4}`)) {
          let stationJ = 2.0;
         megaphoney += `${((bootsplash5 ? 5 : 3) ^ megaphoney.length)}`;
         stationJ /= Math.max(5, 2);
         break;
      }
      for (let y = 0; y < 2; y++) {
         bootsplash5 = dialog4 >= 41.20;
      }
       let libfollyy = [691, 206];
      while ((parseFloat(`${megaphoney.length}`) * dialog4) <= 2.82 && (2.82 * dialog4) <= 1.23) {
          let iconarrowrightwhiteu = [String.fromCharCode(98,97,114,107,95,49,95,55,56,0), String.fromCharCode(112,114,101,108,105,109,105,110,97,114,121,95,98,95,54,53,0), String.fromCharCode(98,117,116,116,101,114,102,108,105,101,115,95,112,95,52,49,0)];
         dialog4 /= Math.max(parseFloat(`${1 >> (Math.min(1, megaphoney.length))}`), 3);
         iconarrowrightwhiteu = [iconarrowrightwhiteu.length];
         break;
      }
      if (1 <= (1 & auto_rG.length) || 1 <= (auto_rG.length & libfollyy.length)) {
         libfollyy = [parseInt(`${dialog4}`) >> (Math.min(Math.abs(2), 5))];
      }
          let combinew = new Map([[String.fromCharCode(97,115,115,105,103,110,95,120,95,56,48,0),false ], [String.fromCharCode(111,118,101,114,114,105,100,105,110,103,95,108,95,52,57,0),false ]]);
         megaphoney += `${((bootsplash5 ? 1 : 1))}`;
         combinew = new Map([[`${combinew.size}`, combinew.size - 3]]);
         dialog4 -= (parseFloat(`${3 - (bootsplash5 ? 1 : 4)}`));
         bootsplash5 = !bootsplash5;
       let iconnewsshareX = [426, 224, 817];
       let runtimer = [971, 544];
         auto_rG = `${1 + parseInt(`${dialog4}`)}`;
      iconscheduleA = (74 < ((iconscheduleA ? 74 : streamingF.length) & streamingF.length));
   }
      team0.push(iconlogout7.length % 1);
   for (let w = 0; w < 2; w++) {
      streamingF = `${parseInt(`${entryO}`) + videojs8.length}`;
   }
      streamingF = `${parseInt(`${entryO}`)}`;
      entryO += 3 / (Math.max(9, commonN.length));

  return text.length > l ? `${text.slice(0, l - 1)}...` : text;
      entryO /= Math.max(parseInt(`${entryO}`) / 3, 2);
   do {
      iconlogout7 += `${launch8.length}`;
      if (iconlogout7.length == 3181122) {
         break;
      }
   } while ((iconlogout7.length == 3181122) && (streamingF == String.fromCharCode(70,0)));
      iconlogout7 += `${(String.fromCharCode(78,0) == videojs8 ? videojs8.length : qaag0.length)}`;
      launch8 = `${(String.fromCharCode(57,0) == qaag0 ? qaag0.length : team0.length)}`;
   do {
      iconscheduleA = iconlogout7.length > 7 || !iconscheduleA;
      if (iconscheduleA ? !iconscheduleA : iconscheduleA) {
         break;
      }
   } while ((iconscheduleA ? !iconscheduleA : iconscheduleA) && (!iconscheduleA));
   do {
       let reminderZ = [String.fromCharCode(109,97,120,101,100,95,51,95,53,0), String.fromCharCode(114,114,116,114,95,104,95,50,57,0)];
       let watchh = true;
       let agreementB = 5.0;
       let mergero = 0;
      while (5.13 > agreementB && 2.99 > (5.13 - agreementB)) {
         agreementB *= ((watchh ? 1 : 1) >> (Math.min(Math.abs(1), 1)));
         break;
      }
          let iconarrowleft1 = String.fromCharCode(114,101,102,111,99,117,115,95,104,95,57,49,0);
          let eabafadfadddbafeddddeeefeaafU = new Map([[String.fromCharCode(111,114,105,95,52,95,55,54,0),278], [String.fromCharCode(99,95,57,54,95,100,101,118,105,99,101,0),125]]);
         watchh = iconarrowleft1.length < 5;
         iconarrowleft1 = `${eabafadfadddbafeddddeeefeaafU.size * 1}`;
         eabafadfadddbafeddddeeefeaafU = new Map([[`${eabafadfadddbafeddddeeefeaafU.size}`, 1 | eabafadfadddbafeddddeeefeaafU.size]]);
          let tempnodatagify = 0.0;
          let helper7 = String.fromCharCode(121,95,50,49,95,108,105,112,98,111,97,114,100,0);
         mergero &= helper7.length % (Math.max(8, mergero));
         tempnodatagify /= Math.max(3, parseInt(`${tempnodatagify}`));
         helper7 = `${parseInt(`${tempnodatagify}`) % (Math.max(6, parseInt(`${tempnodatagify}`)))}`;
         agreementB /= Math.max(reminderZ.length, 3);
       let changeB = new Map([[String.fromCharCode(112,114,101,102,111,114,109,97,116,116,101,100,95,115,95,56,50,0),String.fromCharCode(105,110,116,108,101,95,109,95,55,0)], [String.fromCharCode(105,112,104,111,110,101,95,97,95,50,54,0),String.fromCharCode(100,101,114,101,102,95,53,95,55,48,0)]]);
       let interstitialY = new Map([[String.fromCharCode(122,95,55,53,95,98,105,116,109,97,112,0),438], [String.fromCharCode(119,101,105,103,104,116,95,99,95,51,0),548], [String.fromCharCode(98,111,117,110,100,97,114,105,101,115,95,102,95,57,52,0),312]]);
         changeB[`${mergero}`] = changeB.size >> (Math.min(5, Math.abs(mergero)));
      while (4 < interstitialY.size) {
          let bgvipxvodM = 4.0;
          let libhermesq = String.fromCharCode(115,119,97,112,112,101,114,95,112,95,50,48,0);
          let libswscaleo = String.fromCharCode(100,101,99,111,114,97,116,101,95,99,95,54,48,0);
          let termsl = String.fromCharCode(115,111,114,116,101,100,95,55,95,56,50,0);
         interstitialY[termsl] = parseInt(`${agreementB}`) >> (Math.min(Math.abs(1), 3));
         bgvipxvodM += parseFloat(`${libswscaleo.length}`);
         libhermesq += `${parseInt(`${bgvipxvodM}`)}`;
         libswscaleo = `${2 & libswscaleo.length}`;
         termsl = `${2 | parseInt(`${bgvipxvodM}`)}`;
         break;
      }
      if (watchh && 1 == (3 << (Math.min(1, reminderZ.length)))) {
         reminderZ.push(reminderZ.length);
      }
         changeB = new Map([[`${interstitialY.size}`, interstitialY.size + parseInt(`${agreementB}`)]]);
      while (2 < (2 - reminderZ.length) && 2 < (changeB.size - 2)) {
         reminderZ = [mergero - reminderZ.length];
         break;
      }
      do {
         mergero -= 1;
         if (1896612 == mergero) {
            break;
         }
      } while ((1896612 == mergero) && ((mergero ^ 1) > 1 && (mergero ^ reminderZ.length) > 1));
          let temperatureb = 4.0;
         interstitialY[`${agreementB}`] = 2;
         temperatureb /= Math.max(parseFloat(`${1}`), 1);
      streamingF = `${videojs8.length % 1}`;
      if (streamingF == String.fromCharCode(97,110,101,50,50,0)) {
         break;
      }
   } while ((streamingF == String.fromCharCode(97,110,101,50,50,0)) && (launch8 != streamingF));
   while (2 <= launch8.length) {
       let playt = 2.0;
       let sellmathbackgroundF = false;
       let nextp = new Map([[String.fromCharCode(99,111,101,114,99,101,95,55,95,51,48,0),441], [String.fromCharCode(98,95,53,50,95,113,105,97,110,0),469], [String.fromCharCode(98,105,103,95,101,95,56,48,0),244]]);
       let type_yq4 = 3.0;
       let rncorex = 4.0;
      for (let j = 0; j < 2; j++) {
          let logox = false;
          let episodes7 = String.fromCharCode(99,95,55,55,95,100,105,114,101,99,116,111,114,105,101,115,0);
          let bootn = String.fromCharCode(109,111,100,105,116,121,95,112,95,49,48,48,0);
          let statsz = 5.0;
         nextp = new Map([[`${sellmathbackgroundF}`, (parseInt(`${playt}`) | (sellmathbackgroundF ? 3 : 5))]]);
         logox = 65 >= bootn.length && 62.4 >= statsz;
         episodes7 = `${3 ^ bootn.length}`;
         statsz -= episodes7.length << (Math.min(Math.abs(3), 4));
      }
      if (1.12 < (type_yq4 + 4.78)) {
         type_yq4 *= parseFloat(`${nextp.size}`);
      }
         type_yq4 += parseFloat(`${1 << (Math.min(3, Math.abs(nextp.size)))}`);
      while (3.27 >= (type_yq4 / (Math.max(5, 7)))) {
          let notificationc = [629, 189];
         rncorex -= ((sellmathbackgroundF ? 2 : 1) + notificationc.length);
         break;
      }
         rncorex /= Math.max(3, (parseInt(`${rncorex}`) << (Math.min(5, Math.abs((sellmathbackgroundF ? 4 : 5))))));
      do {
         nextp = new Map([[`${rncorex}`, 1]]);
         if (3225246 == nextp.size) {
            break;
         }
      } while ((sellmathbackgroundF) && (3225246 == nextp.size));
      while ((nextp.size - parseInt(`${rncorex}`)) > 2) {
         rncorex /= Math.max(3, ((sellmathbackgroundF ? 3 : 5) % (Math.max(parseInt(`${playt}`), 3))));
         break;
      }
         nextp = new Map([[`${nextp.size}`, nextp.size]]);
         nextp = new Map([[`${playt}`, parseInt(`${playt}`) * 2]]);
       let updatesw = 0.0;
       let main_xz = 3.0;
         sellmathbackgroundF = sellmathbackgroundF || updatesw > 54.75;
         sellmathbackgroundF = (98 > (nextp.size & (!sellmathbackgroundF ? nextp.size : 77)));
      for (let k = 0; k < 3; k++) {
         main_xz += (parseFloat(`${(sellmathbackgroundF ? 3 : 5) / (Math.max(4, parseInt(`${playt}`)))}`));
      }
       let modulesn = String.fromCharCode(113,95,55,52,95,109,118,99,111,110,116,101,120,116,115,0);
      if ((modulesn.length * rncorex) <= 2.56) {
         rncorex *= ((sellmathbackgroundF ? 2 : 2) | parseInt(`${rncorex}`));
      }
      launch8 += `${((sellmathbackgroundF ? 2 : 2) << (Math.min(Math.abs(parseInt(`${type_yq4}`)), 1)))}`;
      break;
   }
   do {
       let starC = 3;
         starC *= 1 * starC;
      if ((5 | starC) == 1 && (starC | starC) == 5) {
         starC *= starC;
      }
      while (starC == starC) {
         starC *= starC << (Math.min(1, Math.abs(starC)));
         break;
      }
      launch8 = `${2 & starC}`;
      if (launch8.length == 4513545) {
         break;
      }
   } while ((!launch8.endsWith(`${entryO}`)) && (launch8.length == 4513545));
      qaag0 += "1";
       let trashZ = 5.0;
      for (let i = 0; i < 1; i++) {
         trashZ += parseInt(`${trashZ}`);
      }
         trashZ += 1;
       let code3 = 4.0;
       let spinnerk = 0.0;
      streamingF += "3";
      entryO -= 3 ^ iconlogout7.length;

};
export const RecommendCard = ({data}) => {
  const {match} = data;
  if (!match) {
    return <></>;
  }
  const {home, away, home_score, away_score, competition, sports_type} =
    data.match;

  const homeScore = calculateScore(home_score, sports_type);
  const awayScore = calculateScore(away_score, sports_type);
  const matchOnTimeGoing = matchOnTime(
    match.start_time,
    match?.sports_type,
    match.status,
    match.state,
  );

  const statusText = matchRunningStatusBasketball(
    match?.sports_type,
    match.status,
    match.state,
  );

  const Team = ({name, icon}) => {
    return (
      <View style={styles.teamGroup}>
        {icon && (
          <Image
            style={styles.teamIcon}
            source={{uri: icon}}
            resizeMode="contain"
          />
        )}
        <Text style={styles.teamName}>{limitText(name, 5)}</Text>
      </View>
    );
  };

  return (
    <SafeAreaView style={styles.card}>
      <View style={styles.titleRow}>
        <Text style={baseStyles.text}>
          {competition.name_short || competition.name}
        </Text>
        <View style={{flex: 1}}></View>
        <Image
          style={styles.icon}
          source={IconViewerGif}
          resizeMode="contain"
        />
        <Text style={baseStyles.text}>{formatViewerCount(data.view_num)}</Text>
      </View>
      <View style={styles.teamsRow}>
        <Team name={home.name_short || home.name} icon={home.icon} />
        <View style={styles.centerGroup}>
          <View style={styles.scoreGroup}>
            <Text style={styles.homeScore}>{homeScore}</Text>
            <Text style={styles.homeScore}>-</Text>
            <Text style={[styles.homeScore, styles.awayScore]}>
              {awayScore}
            </Text>
          </View>
          <Text style={baseStyles.text}>
            {statusText ? `${statusText}-` : ''}
            {matchOnTimeGoing}
          </Text>
        </View>
        <Team name={away.name_short || away.name} icon={away.icon} />
      </View>
    </SafeAreaView>
  );
};

const baseStyles = StyleSheet.create({
  text: {
    color: 'white',
    fontSize: 9,
    flexWrap: 'nowrap',
  },
});
const styles = StyleSheet.create({
  card: {
    backgroundColor: 'rgba(13, 13, 13, 0.9)',
    color: 'white',
    borderRadius: 8,
    flex: 1,
    paddingHorizontal: 5,
    paddingVertical: 10,
    margin: 5,
    display: 'flex',
  },
  titleRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 10,
  },
  icon: {
    width: 20,
    height: 20,
    marginHorizontal: 10,
  },
  teamsRow: {
    flex: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
  },
  teamGroup: {
    alignItems: 'center',
  },
  teamIcon: {
    width: 30,
    height: 30,
  },
  teamName: {
    ...baseStyles.text,
    
  },
  centerGroup: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    marginTop: -5,
  },
  scoreGroup: {
    flex: 0,
    flexDirection: 'row',
  },
  homeScore: {
    ...baseStyles.text,
    marginHorizontal: 3,
    fontWeight: 'bold',
    fontSize: 11,
  },
  awayScore: {
    color: '#FAC33D',
  },
});
