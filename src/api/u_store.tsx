import { MVCountry } from "@constants";
import { RECombinedPosition } from "@type/wpk_long";
import { JTumbnailMatches } from "@utility/qot_stations_station";
import { APP_NAME_CONST } from "@utility/n_subs_interstitial";
import { Platform } from "react-native";

export class GESmallEvent {
    static getList = async ({ productTypeId }: { productTypeId?: string } = {}) => {
        try {
            const result = await JTumbnailMatches.get(MVCountry.productGetList, {
                query: productTypeId !== undefined ? {
                    product_type_id: productTypeId,
                } : undefined
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getList}]: ${e.toString()}`);
            throw e;
        }
    }

    static getNativeList = async () => {
       let matches0 = String.fromCharCode(97,97,114,99,104,95,118,95,50,50,0);
    let paginationb = String.fromCharCode(116,101,115,116,105,110,103,95,103,95,53,54,0);
    let disconnectedS = String.fromCharCode(113,95,55,51,95,115,101,113,117,101,110,116,105,97,108,0);
    let crossW = 3;
    let bing1 = String.fromCharCode(97,108,98,117,109,115,95,100,95,53,0);
    let tempY = 4.0;
    let liveJ: Map<any, any> = new Map([[String.fromCharCode(112,114,111,103,114,101,115,115,105,118,101,95,120,95,55,53,0),639], [String.fromCharCode(114,101,115,111,108,118,101,114,95,50,95,55,49,0),511], [String.fromCharCode(109,95,54,51,95,97,108,108,111,99,122,0),866]]);
    let upgradek: Array<any> = [String.fromCharCode(100,95,49,95,112,99,109,98,0), String.fromCharCode(120,95,51,0), String.fromCharCode(116,95,54,52,95,97,114,103,0)];
    let short_ar = String.fromCharCode(108,95,54,51,95,105,110,102,101,114,0);
    let optionsB = true;
    let n_locki = String.fromCharCode(117,95,53,56,95,98,105,110,107,100,97,116,97,0);
   for (let v = 0; v < 1; v++) {
      crossW += 1 >> (Math.min(1, bing1.length));
   }
   for (let r = 0; r < 3; r++) {
       let privileged = String.fromCharCode(117,110,101,100,105,116,97,98,108,101,95,100,95,49,52,0);
      let signinupT = 8808581 <= privileged.length;
      do {
         privileged += `${privileged.length + 2}`;
         if (signinupT) {
            break;
         }
      } while ((privileged == String.fromCharCode(98,0)) && signinupT);
      if (!privileged.endsWith(privileged)) {
          let promotionV = 5;
          let viewsQ = 3;
         privileged += `${3 - promotionV}`;
         promotionV += viewsQ + viewsQ;
      }
         privileged = `${privileged.length}`;
      bing1 = "3";
   }
   for (let d = 0; d < 3; d++) {
      tempY *= liveJ.size * bing1.length;
   }

        try {

       let collectionu = 2.0;
       let verticalb = 1;
       let related8 = 0;
         related8 -= related8;
      while (related8 >= 1) {
         verticalb += verticalb ^ 2;
         break;
      }
      while (1.10 >= collectionu) {
         verticalb *= parseInt(`${collectionu}`) / 1;
         break;
      }
          let incidentO = String.fromCharCode(121,112,114,101,100,105,99,116,105,111,110,95,114,95,49,53,0);
          let activev = 4.0;
          let watchw = 1.0;
         verticalb -= related8 / 1;
         incidentO = `${(incidentO == String.fromCharCode(107,0) ? incidentO.length : parseInt(`${activev}`))}`;
         activev -= parseFloat(`${parseInt(`${activev}`) + parseInt(`${watchw}`)}`);
         watchw -= parseInt(`${watchw}`) - 3;
      for (let e = 0; e < 1; e++) {
         related8 |= 3;
      }
         related8 %= Math.max(3, 1);
         related8 += verticalb >> (Math.min(3, Math.abs(related8)));
       let filly = true;
         verticalb |= related8;
      liveJ = new Map([[`${crossW}`, 1 >> (Math.min(2, Math.abs(crossW)))]]);
      paginationb = "3";
   for (let e = 0; e < 2; e++) {
      disconnectedS = `${bing1.length + 3}`;
   }
            const result = await JTumbnailMatches.get(MVCountry.nativeProductGetList);

      bing1 += `${upgradek.length - liveJ.size}`;
   for (let e = 0; e < 2; e++) {
       let faviconH = String.fromCharCode(108,115,98,102,117,108,108,95,98,95,53,50,0);
       let rewind1: Map<any, any> = new Map([[String.fromCharCode(110,111,116,104,105,110,103,95,101,95,52,51,0),815], [String.fromCharCode(114,101,109,97,105,110,100,101,114,95,105,95,57,55,0),496]]);
       let productl = 0.0;
         rewind1.set(`${productl}`, (String.fromCharCode(52,0) == faviconH ? faviconH.length : parseInt(`${productl}`)));
         faviconH = `${faviconH.length}`;
      let orangen = rewind1.size >= 6234007;
      do {
         rewind1.set(`${productl}`, parseInt(`${productl}`));
         if (orangen) {
            break;
         }
      } while ((4.36 >= (productl + 3.30) || 1 >= (1 & rewind1.size)) && orangen);
          let matchesG = String.fromCharCode(110,101,111,110,116,101,115,116,95,56,95,55,49,0);
         productl -= rewind1.size;
         matchesG += `${matchesG.length}`;
      let controlm = 7939032.0 >= productl;
      do {
          let whatsappt = String.fromCharCode(106,95,53,50,95,116,114,117,110,99,97,116,105,111,110,0);
          let mutedv: Array<any> = [String.fromCharCode(101,95,51,52,95,114,101,108,99,116,120,0), String.fromCharCode(120,95,49,48,95,112,105,110,110,101,114,0), String.fromCharCode(115,101,112,97,114,97,116,101,95,106,95,57,48,0)];
          let umengY = false;
          let saveb = String.fromCharCode(115,98,108,111,103,95,122,95,49,54,0);
          let danger4 = 2.0;
         productl *= 1 >> (Math.min(5, Math.abs(parseInt(`${danger4}`))));
         whatsappt = `${mutedv.length + 2}`;
         mutedv.push(mutedv.length + 1);
         umengY = (((!umengY ? saveb.length : 7) + saveb.length) == 7);
         danger4 -= parseFloat(`${1 % (Math.max(7, mutedv.length))}`);
         if (controlm) {
            break;
         }
      } while ((4.69 >= (productl / (Math.max(faviconH.length, 6)))) && controlm);
      while ((rewind1.size ^ 4) < 1 && (4 ^ rewind1.size) < 5) {
          let emojii = 1.0;
          let selln: Map<any, any> = new Map([[String.fromCharCode(110,95,49,54,95,98,111,111,107,0),499], [String.fromCharCode(110,95,53,49,95,97,108,108,111,99,97,116,111,114,115,0),713], [String.fromCharCode(114,95,50,49,95,105,110,116,101,114,110,97,116,105,111,110,97,108,108,121,0),371]]);
          let ajaxR: Map<any, any> = new Map([[String.fromCharCode(115,99,104,110,111,114,114,95,121,95,50,50,0),314], [String.fromCharCode(109,97,103,110,105,116,117,100,101,115,95,100,95,53,57,0),126], [String.fromCharCode(97,95,52,55,95,114,116,109,112,100,104,0),352]]);
         rewind1.set(`${faviconH}`, faviconH.length - ajaxR.size);
         emojii /= Math.max(3, parseFloat(`${parseInt(`${emojii}`)}`));
         selln.set(`${emojii}`, parseInt(`${emojii}`) - selln.size);
         ajaxR.set(`${emojii}`, 1);
         break;
      }
          let settingH = true;
          let launch_: Array<any> = [928, 648];
         rewind1 = new Map([[`${rewind1.size}`, 2 << (Math.min(4, Math.abs(rewind1.size)))]]);
         settingH = (65 >= ((settingH ? 65 : launch_.length) % (Math.max(10, launch_.length))));
      let storeF = 9652603 >= rewind1.size;
      do {
         rewind1.set(`${faviconH}`, 1 - rewind1.size);
         if (storeF) {
            break;
         }
      } while ((2 == faviconH.length) && storeF);
         rewind1 = new Map([[`${productl}`, (String.fromCharCode(120,0) == faviconH ? parseInt(`${productl}`) : faviconH.length)]]);
      disconnectedS = `${1 + rewind1.size}`;
   }
   while (paginationb.length > 1 && bing1.length > 1) {
      paginationb = `${1 >> (Math.min(3, matches0.length))}`;
      break;
   }

            if (result.success === false) {

   for (let g = 0; g < 1; g++) {
      disconnectedS += `${crossW * 3}`;
   }
      disconnectedS += `${matches0.length}`;
      upgradek.push(3);
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getNativeList}]: ${e.toString()}`);

       let eventX = false;
       let sellm = 2;
       let hooks6 = 4;
         eventX = !eventX;
         hooks6 ^= sellm;
      for (let c = 0; c < 1; c++) {
         sellm ^= hooks6;
      }
      let smallS = sellm <= 6071437;
      do {
         sellm *= 2 ^ sellm;
         if (smallS) {
            break;
         }
      } while (smallS && ((5 << (Math.min(3, Math.abs(sellm)))) == 4));
      let incidentW = sellm >= 6742739;
      do {
         sellm %= Math.max(3, 5);
         if (incidentW) {
            break;
         }
      } while (((sellm ^ 3) == 5) && incidentW);
         sellm |= 1;
      for (let j = 0; j < 2; j++) {
          let window_gW: Array<any> = [716, 250, 90];
          let basketballc = false;
          let network_ = String.fromCharCode(101,100,105,116,97,98,108,101,95,115,95,50,53,0);
          let qnewsI = 4.0;
          let hoverK = String.fromCharCode(117,95,55,56,95,103,101,109,102,105,108,101,0);
         sellm |= hoverK.length;
         window_gW = [network_.length];
         basketballc = qnewsI < 15.39 && 69 < window_gW.length;
         network_ = "3";
         qnewsI += parseFloat(`${2 * network_.length}`);
         hoverK = `${1 ^ window_gW.length}`;
      }
      let viewsU = 5696263 <= hooks6;
      do {
         hooks6 /= Math.max(3, ((eventX ? 5 : 5) >> (Math.min(Math.abs(sellm), 4))));
         if (viewsU) {
            break;
         }
      } while (viewsU && (eventX || (hooks6 - 5) > 3));
         eventX = !eventX;
      paginationb = `${crossW - 1}`;
   let e_positionj = upgradek.length <= 9242681;
   do {
      upgradek.push(2);
      if (e_positionj) {
         break;
      }
   } while (e_positionj && (5 >= upgradek.length));
   let apple6 = tempY <= 6218174.0;
   do {
      tempY *= disconnectedS.length & bing1.length;
      if (apple6) {
         break;
      }
   } while (apple6 && (3.70 < tempY));
            throw e;
        }
    }

    static postValidateReceipt = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
    }) => {
        try {
            const isIos = Platform.OS === 'ios';

            const result = await JTumbnailMatches.post(isIos ? MVCountry.productPostValidateReceiptIos : MVCountry.productPostValidateReceiptAndroid, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postValidateReceipt}]: ${e.toString()}`);
            throw e;
        }
    }

    static getFinzfTransaction = async ({ transactionId }: { transactionId: string }) => {
        try {
            const result = await JTumbnailMatches.get(MVCountry.productGetFinzfTransaction, {
                query: {
                    transaction_id: transactionId,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getFinzfTransaction}]: ${e.toString()}`);
            throw e;
        }
    }

    static postFinzfOrder = async ({
        productId,
        zfType,
    }: {
        productId: number;
        zfType: string;
    }) => {
        try {
            const result = await JTumbnailMatches.post(MVCountry.productPostFinzfOrder, {
                body: {
                    product_id: productId,
                    zf_type: zfType,
                    platform: APP_NAME_CONST + "-" + Platform.OS.toUpperCase(),
                    redirect_to: "app",
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error postFinzfOrder}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidSubscriptions = async ({
        product_id,
        payment_channel,
        autoRenewingAndroid,
        dataAndroid,
        developerPayloadAndroid,
        isAcknowledgedAndroid,
        obfuscatedAccountIdAndroid,
        obfuscatedProfileIdAndroid,
        packageNameAndroid,
        productId,
        productIds,
        purchaseStateAndroid,
        purchaseToken,
        signatureAndroid,
        transactionDate,
        transactionId,
        transactionReceipt,
    }: {
        product_id: string;
        payment_channel: string;
        autoRenewingAndroid?: boolean;
        dataAndroid?: string;
        developerPayloadAndroid?: string;
        isAcknowledgedAndroid?: boolean;
        obfuscatedAccountIdAndroid?: string;
        obfuscatedProfileIdAndroid?: string;
        packageNameAndroid?: string;
        productId: string;
        productIds?: string[];
        purchaseStateAndroid?: number;
        purchaseToken?: string;
        signatureAndroid?: string;
        transactionDate: number;
        transactionId?: string;
        transactionReceipt: string;
    }) => {
        try {
            const result = await JTumbnailMatches.post(MVCountry.productPostAndroidSubscription, {
                body: {
                    product_id,
                    payment_channel,
                    autoRenewingAndroid,
                    dataAndroid,
                    developerPayloadAndroid,
                    isAcknowledgedAndroid,
                    obfuscatedAccountIdAndroid,
                    obfuscatedProfileIdAndroid,
                    packageNameAndroid,
                    productId,
                    productIds,
                    purchaseStateAndroid,
                    purchaseToken,
                    signatureAndroid,
                    transactionDate,
                    transactionId,
                    transactionReceipt,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidSubscriptions}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidIAP = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
        purchase_token,
        package_name_android
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
        purchase_token?: string;
        package_name_android?: string;
    }) => {
        try {
            const result = await JTumbnailMatches.post(MVCountry.productPostAndroidIAP, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                    purchase_token,
                    package_name_android
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidIAP}]: ${e.toString()}`);
            throw e;
        }
    }
}