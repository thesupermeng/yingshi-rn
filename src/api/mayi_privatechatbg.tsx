import { mayi_Iconclosewhitewithbg } from "@constants";
import { mayi_ActivityIconarrowleft } from "@type/mayi_green";
import { mayi_ReactBang } from "@utility/mayi_zhubo";
import { APP_NAME_CONST } from "@utility/mayi_middleware_apps";
import { Platform } from "react-native";

export class mayi_StyleShrink {
    static getList = async ({ productTypeId }: { productTypeId?: string } = {}) => {
        try {
            const result = await mayi_ReactBang.get(mayi_Iconclosewhitewithbg.productGetList, {
                query: productTypeId !== undefined ? {
                    product_type_id: productTypeId,
                } : undefined
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getList}]: ${e.toString()}`);
            throw e;
        }
    }

    static getNativeList = async () => {
       let predictionbuttonr = String.fromCharCode(118,95,49,57,95,114,116,114,101,101,100,101,112,116,104,0);
    let currentq = 3.0;
    let infoo = String.fromCharCode(118,95,49,48,95,114,101,119,114,105,116,101,114,0);
    let private_4X: Map<any, any> = new Map([[String.fromCharCode(102,95,53,54,95,115,101,116,98,105,116,0),false ], [String.fromCharCode(118,105,100,101,111,112,114,111,99,101,115,115,111,114,95,119,95,55,56,0),true ], [String.fromCharCode(113,117,111,116,97,95,117,95,50,57,0),false ]]);
    let downloadedu = String.fromCharCode(116,99,109,105,95,120,95,54,52,0);
    let bgvipsportM: Array<any> = [434, 848];
    let unimplementedviewC = true;
    let bootsplashE = String.fromCharCode(102,95,49,95,110,105,99,101,0);
    let smallorangeman0 = false;
    let delegate_gL = true;
    let leaguer: Map<any, any> = new Map([[String.fromCharCode(99,111,109,112,111,110,101,110,116,95,118,95,56,0),false ], [String.fromCharCode(110,95,53,95,100,111,119,110,108,105,110,107,0),true ], [String.fromCharCode(104,95,56,95,100,97,114,107,0),false ]]);
    let circleL = 5.0;
   if (smallorangeman0 && unimplementedviewC) {
      smallorangeman0 = bootsplashE == String.fromCharCode(115,0) && infoo.length > 67;
   }
   let pushK = infoo.length <= 8379163;
   do {
      infoo += `${predictionbuttonr.length}`;
      if (pushK) {
         break;
      }
   } while ((downloadedu != infoo) && pushK);
   if (currentq < 4.72 || 1.16 < (currentq * 4.72)) {
       let downarrowe = String.fromCharCode(120,95,57,51,95,106,109,101,109,115,121,115,0);
       let profileactivee: Array<any> = [413, 649];
       let smallorangemane = String.fromCharCode(105,111,101,114,114,110,111,109,101,109,95,55,95,50,54,0);
       let gradlewi: Array<any> = [347, 708];
         gradlewi.push(downarrowe.length / 1);
         profileactivee.push(downarrowe.length);
         downarrowe = `${downarrowe.length}`;
         gradlewi.push(3);
      if (1 > profileactivee.length) {
         profileactivee.push((String.fromCharCode(89,0) == smallorangemane ? smallorangemane.length : profileactivee.length));
      }
          let predictiondefaultE = String.fromCharCode(113,95,57,49,95,119,97,116,99,104,101,114,115,0);
          let splashL = 5;
          let agreementc: Array<any> = [67, 67];
         downarrowe += `${predictiondefaultE.length / 2}`;
         predictiondefaultE = `${splashL << (Math.min(agreementc.length, 5))}`;
         splashL &= agreementc.length;
         gradlewi.push(2 / (Math.max(3, smallorangemane.length)));
      while ((gradlewi.length / (Math.max(10, smallorangemane.length))) == 2) {
          let fille: Array<any> = [String.fromCharCode(102,95,51,51,95,119,101,120,112,97,110,100,0), String.fromCharCode(109,111,114,101,95,97,95,50,53,0), String.fromCharCode(101,115,115,101,110,99,101,95,107,95,56,49,0)];
         smallorangemane += `${smallorangemane.length}`;
         fille = [fille.length];
         break;
      }
         gradlewi = [(String.fromCharCode(99,0) == smallorangemane ? profileactivee.length : smallorangemane.length)];
         downarrowe += `${downarrowe.length}`;
      let basketballawayteam3 = String.fromCharCode(53,54,109,49,115,54,107,52,100,106,0) == smallorangemane;
      do {
          let videoC = 0;
          let combineh = 1.0;
          let downI = 3.0;
         smallorangemane += "1";
         videoC >>= Math.min(4, Math.abs(videoC & parseInt(`${combineh}`)));
         combineh -= 3 >> (Math.min(Math.abs(parseInt(`${downI}`)), 5));
         downI -= parseFloat(`${parseInt(`${combineh}`) / (Math.max(parseInt(`${downI}`), 9))}`);
         if (basketballawayteam3) {
            break;
         }
      } while (basketballawayteam3 && (5 > (smallorangemane.length - 1) || 1 > (1 - smallorangemane.length)));
      if (smallorangemane.endsWith(downarrowe)) {
         downarrowe += `${gradlewi.length | 3}`;
      }
      currentq *= parseFloat(`${predictionbuttonr.length}`);
   }

        try {

   if (private_4X.size > predictionbuttonr.length) {
      predictionbuttonr += `${(2 >> (Math.min(4, Math.abs((smallorangeman0 ? 1 : 5)))))}`;
   }
   if (3.74 <= (currentq / (Math.max(parseFloat(`${predictionbuttonr.length}`), 6))) || 4.15 <= (currentq / 3.74)) {
      predictionbuttonr += "1";
   }
   while (!downloadedu.includes(`${bgvipsportM.length}`)) {
      bgvipsportM.push((bootsplashE.length * (smallorangeman0 ? 3 : 5)));
      break;
   }
            const result = await mayi_ReactBang.get(mayi_Iconclosewhitewithbg.nativeProductGetList);

   for (let e = 0; e < 3; e++) {
      downloadedu += "2";
   }
   for (let m = 0; m < 1; m++) {
      unimplementedviewC = downloadedu.endsWith(`${delegate_gL}`);
   }
   while (1.73 <= (currentq / (Math.max(parseFloat(`${bootsplashE.length}`), 8))) && 4 <= (5 << (Math.min(2, bootsplashE.length)))) {
      currentq += parseFloat(`${bootsplashE.length}`);
      break;
   }

            if (result.success === false) {

      downloadedu += `${bootsplashE.length}`;
      private_4X = new Map([[infoo, (String.fromCharCode(98,0) == infoo ? (smallorangeman0 ? 5 : 5) : infoo.length)]]);
   if (predictionbuttonr.length == 2) {
      smallorangeman0 = predictionbuttonr.length <= 54;
   }
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getNativeList}]: ${e.toString()}`);

      bootsplashE = `${3 ^ bootsplashE.length}`;
   let anythink3 = downloadedu == String.fromCharCode(116,95,49,100,0);
   do {
      downloadedu += `${2 + bgvipsportM.length}`;
      if (anythink3) {
         break;
      }
   } while ((downloadedu.length >= 5) && anythink3);
   if (!delegate_gL) {
      delegate_gL = !delegate_gL;
   }
            throw e;
        }
    }

    static postValidateReceipt = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
    }) => {
        try {
            const isIos = Platform.OS === 'ios';

            const result = await mayi_ReactBang.post(isIos ? mayi_Iconclosewhitewithbg.productPostValidateReceiptIos : mayi_Iconclosewhitewithbg.productPostValidateReceiptAndroid, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postValidateReceipt}]: ${e.toString()}`);
            throw e;
        }
    }

    static getFinzfTransaction = async ({ transactionId }: { transactionId: string }) => {
        try {
            const result = await mayi_ReactBang.get(mayi_Iconclosewhitewithbg.productGetFinzfTransaction, {
                query: {
                    transaction_id: transactionId,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getFinzfTransaction}]: ${e.toString()}`);
            throw e;
        }
    }

    static postFinzfOrder = async ({
        productId,
        zfType,
    }: {
        productId: number;
        zfType: string;
    }) => {
        try {
            const result = await mayi_ReactBang.post(mayi_Iconclosewhitewithbg.productPostFinzfOrder, {
                body: {
                    product_id: productId,
                    zf_type: zfType,
                    platform: APP_NAME_CONST + "-" + Platform.OS.toUpperCase(),
                    redirect_to: "app",
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error postFinzfOrder}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidSubscriptions = async ({
        product_id,
        payment_channel,
        autoRenewingAndroid,
        dataAndroid,
        developerPayloadAndroid,
        isAcknowledgedAndroid,
        obfuscatedAccountIdAndroid,
        obfuscatedProfileIdAndroid,
        packageNameAndroid,
        productId,
        productIds,
        purchaseStateAndroid,
        purchaseToken,
        signatureAndroid,
        transactionDate,
        transactionId,
        transactionReceipt,
    }: {
        product_id: string;
        payment_channel: string;
        autoRenewingAndroid?: boolean;
        dataAndroid?: string;
        developerPayloadAndroid?: string;
        isAcknowledgedAndroid?: boolean;
        obfuscatedAccountIdAndroid?: string;
        obfuscatedProfileIdAndroid?: string;
        packageNameAndroid?: string;
        productId: string;
        productIds?: string[];
        purchaseStateAndroid?: number;
        purchaseToken?: string;
        signatureAndroid?: string;
        transactionDate: number;
        transactionId?: string;
        transactionReceipt: string;
    }) => {
        try {
            const result = await mayi_ReactBang.post(mayi_Iconclosewhitewithbg.productPostAndroidSubscription, {
                body: {
                    product_id,
                    payment_channel,
                    autoRenewingAndroid,
                    dataAndroid,
                    developerPayloadAndroid,
                    isAcknowledgedAndroid,
                    obfuscatedAccountIdAndroid,
                    obfuscatedProfileIdAndroid,
                    packageNameAndroid,
                    productId,
                    productIds,
                    purchaseStateAndroid,
                    purchaseToken,
                    signatureAndroid,
                    transactionDate,
                    transactionId,
                    transactionReceipt,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidSubscriptions}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidIAP = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
        purchase_token,
        package_name_android
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
        purchase_token?: string;
        package_name_android?: string;
    }) => {
        try {
            const result = await mayi_ReactBang.post(mayi_Iconclosewhitewithbg.productPostAndroidIAP, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                    purchase_token,
                    package_name_android
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidIAP}]: ${e.toString()}`);
            throw e;
        }
    }
}