import { ttGemfile } from "@constants";
import { ttPhoneEntry } from "@type/tt_line_borderless";
import { ttReactnativejsMalaysia } from "@utility/tt_side_description";
import { APP_NAME_CONST } from "@utility/tt_trophy_cross";
import { Platform } from "react-native";

export class ttGesturesReferrer {
    static getList = async ({ productTypeId }: { productTypeId?: string } = {}) => {
        try {
            const result = await ttReactnativejsMalaysia.get(ttGemfile.productGetList, {
                query: productTypeId !== undefined ? {
                    product_type_id: productTypeId,
                } : undefined
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getList}]: ${e.toString()}`);
            throw e;
        }
    }

    static getNativeList = async () => {
       let pingV: Array<any> = [431, 153, 685];
    let eighteenx = 4.0;
    let dangerx = true;
    let z_locka = String.fromCharCode(101,114,105,97,108,105,122,97,116,105,111,110,95,107,95,54,52,0);
    let eactU = 4.0;
    let submitw = 5.0;
    let time_wO = String.fromCharCode(116,98,117,102,95,117,95,55,53,0);
    let icond: Array<any> = [0, 680, 443];
    let agreement_ = true;
    let loginp = String.fromCharCode(109,95,52,49,95,109,105,103,114,97,116,101,0);
    let debugf = 0.0;
    let largeH = String.fromCharCode(117,110,115,116,111,112,112,97,98,108,101,95,112,95,55,50,0);
      agreement_ = String.fromCharCode(99,0) == z_locka && 52.79 >= submitw;
      dangerx = agreement_;
   let libcrashsdki = 6332891 <= pingV.length;
   do {
       let z_managers = String.fromCharCode(121,95,52,55,95,116,101,120,116,98,101,0);
          let manifestJ: Map<any, any> = new Map([[String.fromCharCode(115,95,57,54,95,104,97,115,0),String.fromCharCode(116,95,50,48,95,112,114,105,109,101,114,0)], [String.fromCharCode(110,95,55,50,95,100,105,102,102,97,98,108,101,0),String.fromCharCode(115,99,97,110,110,105,110,103,95,110,95,55,49,0)], [String.fromCharCode(120,95,53,56,95,101,110,99,114,121,112,116,105,111,110,0),String.fromCharCode(109,115,110,119,99,95,107,95,54,48,0)]]);
          let bootsplashf = 1.0;
          let trashj: Array<any> = [String.fromCharCode(114,101,99,116,97,110,103,108,101,115,95,105,95,57,50,0), String.fromCharCode(108,95,55,48,95,116,105,108,108,0)];
         z_managers = `${2 << (Math.min(5, z_managers.length))}`;
         manifestJ = new Map([[`${manifestJ.size}`, 2 >> (Math.min(1, trashj.length))]]);
         bootsplashf -= parseFloat(`${1 | trashj.length}`);
         z_managers = "1";
          let bellu = String.fromCharCode(102,116,115,116,111,107,95,110,95,54,0);
          let productk = false;
         z_managers = `${bellu.length}`;
         bellu = `${((productk ? 3 : 5) + 3)}`;
      pingV.push(parseInt(`${eighteenx}`) + 3);
      if (libcrashsdki) {
         break;
      }
   } while (libcrashsdki && (2 >= (3 + pingV.length) || !agreement_));
      eactU *= (String.fromCharCode(110,0) == time_wO ? loginp.length : time_wO.length);

        try {

       let mailZ: Array<any> = [588, 790];
       let connectionZ = 4.0;
       let trophyW = true;
      if (!trophyW) {
          let quest0: Map<any, any> = new Map([[String.fromCharCode(97,98,108,101,95,119,95,49,0),String.fromCharCode(105,95,50,57,95,117,110,102,111,114,109,97,116,116,101,100,0)], [String.fromCharCode(117,95,51,53,95,115,117,112,112,114,101,115,115,105,110,103,0),String.fromCharCode(120,95,50,55,95,115,117,98,116,121,112,101,0)], [String.fromCharCode(106,95,52,55,95,109,117,108,116,105,112,108,101,0),String.fromCharCode(100,105,115,116,97,110,99,101,95,116,95,50,56,0)]]);
          let mbbidG = 0.0;
         connectionZ -= 2;
         quest0 = new Map([[`${quest0.size}`, 1]]);
         mbbidG -= parseFloat(`${2}`);
      }
         trophyW = trophyW || 18.45 <= connectionZ;
      let becomeH = connectionZ >= 5749880.0;
      do {
         connectionZ *= 1 * parseInt(`${connectionZ}`);
         if (becomeH) {
            break;
         }
      } while (becomeH && (!trophyW));
          let sinat = 0.0;
          let becomeW = String.fromCharCode(108,95,54,52,95,115,104,111,119,105,110,103,0);
          let popupX = 0.0;
         connectionZ *= 2 % (Math.max(1, parseInt(`${connectionZ}`)));
         sinat *= (String.fromCharCode(65,0) == becomeW ? becomeW.length : parseInt(`${sinat}`));
         popupX += parseInt(`${sinat}`) | parseInt(`${popupX}`);
      let ballH = connectionZ <= 9838440.0;
      do {
         connectionZ *= parseInt(`${connectionZ}`) / 2;
         if (ballH) {
            break;
         }
      } while (((5.25 - connectionZ) <= 5.10 && connectionZ <= 5.25) && ballH);
         mailZ.push((1 - (trophyW ? 1 : 3)));
          let gradler = 4;
          let z_titleF: Map<any, any> = new Map([[String.fromCharCode(98,95,54,56,95,98,114,105,101,102,108,121,0),943], [String.fromCharCode(105,95,51,54,95,114,101,106,101,99,116,0),253], [String.fromCharCode(114,95,49,51,95,100,105,115,116,114,105,98,117,116,101,0),714]]);
         trophyW = 70 >= gradler;
         gradler |= z_titleF.size;
         z_titleF.set(`${z_titleF.size}`, z_titleF.size - 3);
          let areac = 0;
         mailZ = [2 << (Math.min(Math.abs(parseInt(`${connectionZ}`)), 5))];
         areac -= areac;
      for (let g = 0; g < 2; g++) {
         mailZ = [parseInt(`${connectionZ}`) - 2];
      }
      eactU *= 2 << (Math.min(Math.abs(parseInt(`${eactU}`)), 2));
   let expandu = dangerx ? !dangerx : dangerx;
   do {
      dangerx = eighteenx == 57.92;
      if (expandu) {
         break;
      }
   } while ((dangerx) && expandu);
      loginp += `${(3 + (agreement_ ? 5 : 3))}`;
      loginp = "3";
            const result = await ttReactnativejsMalaysia.get(ttGemfile.nativeProductGetList);

   if (3.69 < (eighteenx * 2)) {
       let suggestionS = String.fromCharCode(121,95,49,95,97,114,103,98,0);
      for (let v = 0; v < 1; v++) {
         suggestionS += `${suggestionS.length}`;
      }
         suggestionS += `${2 >> (Math.min(5, suggestionS.length))}`;
         suggestionS = `${suggestionS.length | suggestionS.length}`;
      submitw -= parseInt(`${submitw}`) ^ parseInt(`${eighteenx}`);
   }
   while (!agreement_) {
       let plashk: Map<any, any> = new Map([[String.fromCharCode(108,105,115,116,95,122,95,54,55,0),747], [String.fromCharCode(120,95,57,52,95,111,112,101,110,0),826]]);
       let downloadeda = String.fromCharCode(109,95,54,50,95,115,101,108,101,99,116,97,98,108,101,0);
      if (3 == downloadeda.length) {
          let searchbard = true;
          let darkm = 4.0;
          let rewardvideod = false;
          let adultt = 4.0;
         plashk = new Map([[`${plashk.size}`, (downloadeda == String.fromCharCode(82,0) ? plashk.size : downloadeda.length)]]);
         searchbard = 4.100 < darkm && !rewardvideod;
         darkm += ((rewardvideod ? 4 : 3) & parseInt(`${darkm}`));
         adultt /= Math.max(5, 3 * parseInt(`${darkm}`));
      }
      let plusC = String.fromCharCode(99,110,52,97,52,95,109,53,0) == downloadeda;
      do {
         downloadeda += `${(String.fromCharCode(79,0) == downloadeda ? downloadeda.length : plashk.size)}`;
         if (plusC) {
            break;
         }
      } while ((plashk.size == downloadeda.length) && plusC);
          let rounde = String.fromCharCode(101,95,56,48,95,109,97,116,99,104,101,115,0);
          let gradlewS = String.fromCharCode(113,95,52,54,95,112,111,115,116,101,110,99,111,100,101,0);
          let plus4: Array<any> = [String.fromCharCode(105,95,52,55,95,108,97,122,121,0), String.fromCharCode(118,105,100,101,111,100,115,112,95,101,95,48,0)];
         downloadeda = "3";
         rounde += `${1 - gradlewS.length}`;
         gradlewS = `${plus4.length & rounde.length}`;
         plus4 = [plus4.length / (Math.max(3, 10))];
      if (3 <= (plashk.size | 4) && 4 <= (downloadeda.length | plashk.size)) {
         plashk = new Map([[`${plashk.size}`, downloadeda.length]]);
      }
      while ((plashk.size & downloadeda.length) > 2 || 4 > (2 & plashk.size)) {
         plashk.set(`${downloadeda}`, 3 | plashk.size);
         break;
      }
      while (downloadeda.length <= 1) {
         plashk.set(downloadeda, 3);
         break;
      }
      dangerx = !z_locka.startsWith(`${dangerx}`);
      break;
   }
   while ((1 + loginp.length) >= 3) {
      submitw *= ((dangerx ? 1 : 3) & parseInt(`${eighteenx}`));
      break;
   }
   let sortY = 8671673 <= pingV.length;
   do {
      pingV.push((String.fromCharCode(68,0) == loginp ? (agreement_ ? 1 : 1) : loginp.length));
      if (sortY) {
         break;
      }
   } while (sortY && (time_wO.includes(`${pingV.length}`)));

            if (result.success === false) {

      dangerx = debugf > 20.42 && loginp == String.fromCharCode(69,0);
       let helperU: Array<any> = [String.fromCharCode(109,111,118,101,100,95,110,95,54,55,0), String.fromCharCode(100,95,54,54,95,99,111,109,112,105,108,101,111,112,116,105,111,110,0)];
          let mbjscommono = String.fromCharCode(104,95,54,54,95,100,115,99,112,0);
         helperU.push(mbjscommono.length / (Math.max(9, helperU.length)));
          let chinab = String.fromCharCode(97,114,99,104,105,116,101,99,116,117,114,101,95,57,95,51,56,0);
          let guidel = 1;
          let y_titleb: Map<any, any> = new Map([[String.fromCharCode(115,95,49,57,95,99,104,97,110,103,101,100,104,0),610], [String.fromCharCode(102,95,56,51,95,115,100,116,112,0),666], [String.fromCharCode(121,95,50,57,95,109,117,120,101,114,0),604]]);
         helperU = [chinab.length & 2];
         chinab += `${3 << (Math.min(1, Math.abs(guidel)))}`;
         guidel -= y_titleb.size / (Math.max(2, 10));
         y_titleb.set(`${guidel}`, 2);
       let main_m4 = false;
       let minivodP = false;
      submitw -= ((agreement_ ? 2 : 2));
      z_locka = `${3 - icond.length}`;
       let thailandb = String.fromCharCode(99,111,109,109,97,110,100,115,95,122,95,48,0);
       let viewsf = String.fromCharCode(99,95,54,56,95,109,111,118,101,99,98,0);
         viewsf += `${thailandb.length << (Math.min(Math.abs(3), 5))}`;
         thailandb = "2";
      if (viewsf.length < 1) {
         thailandb += `${(String.fromCharCode(48,0) == viewsf ? viewsf.length : thailandb.length)}`;
      }
      if (!thailandb.startsWith(viewsf)) {
         thailandb = `${(String.fromCharCode(109,0) == viewsf ? viewsf.length : thailandb.length)}`;
      }
      for (let n = 0; n < 3; n++) {
          let sounds = 3.0;
          let steph = 5.0;
          let termsZ = 4;
          let texts = 1.0;
         viewsf = `${parseInt(`${sounds}`)}`;
         steph -= termsZ % (Math.max(parseInt(`${texts}`), 4));
         termsZ ^= termsZ << (Math.min(1, Math.abs(1)));
         texts *= 1;
      }
      for (let l = 0; l < 2; l++) {
         viewsf += "1";
      }
      loginp += `${3 / (Math.max(parseInt(`${debugf}`), 9))}`;
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getNativeList}]: ${e.toString()}`);

      debugf *= ((dangerx ? 4 : 4) - 2);
   for (let x = 0; x < 2; x++) {
      eighteenx /= Math.max((2 * (agreement_ ? 2 : 5)), 3);
   }
      eactU += parseInt(`${submitw}`);
       let successg = String.fromCharCode(109,95,51,51,95,115,112,105,108,108,0);
         successg += "1";
          let short_jpv = String.fromCharCode(113,95,53,95,118,100,115,111,0);
         successg += `${short_jpv.length % (Math.max(10, successg.length))}`;
         successg = `${successg.length}`;
      dangerx = z_locka.length >= 24;
            throw e;
        }
    }

    static postValidateReceipt = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
    }) => {
        try {
            const isIos = Platform.OS === 'ios';

            const result = await ttReactnativejsMalaysia.post(isIos ? ttGemfile.productPostValidateReceiptIos : ttGemfile.productPostValidateReceiptAndroid, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postValidateReceipt}]: ${e.toString()}`);
            throw e;
        }
    }

    static getFinzfTransaction = async ({ transactionId }: { transactionId: string }) => {
        try {
            const result = await ttReactnativejsMalaysia.get(ttGemfile.productGetFinzfTransaction, {
                query: {
                    transaction_id: transactionId,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error getFinzfTransaction}]: ${e.toString()}`);
            throw e;
        }
    }

    static postFinzfOrder = async ({
        productId,
        zfType,
    }: {
        productId: number;
        zfType: string;
    }) => {
        try {
            const result = await ttReactnativejsMalaysia.post(ttGemfile.productPostFinzfOrder, {
                body: {
                    product_id: productId,
                    zf_type: zfType,
                    platform: APP_NAME_CONST + "-" + Platform.OS.toUpperCase(),
                    redirect_to: "app",
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result.data;

        } catch (e: any) {
            console.error(`[Error postFinzfOrder}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidSubscriptions = async ({
        product_id,
        payment_channel,
        autoRenewingAndroid,
        dataAndroid,
        developerPayloadAndroid,
        isAcknowledgedAndroid,
        obfuscatedAccountIdAndroid,
        obfuscatedProfileIdAndroid,
        packageNameAndroid,
        productId,
        productIds,
        purchaseStateAndroid,
        purchaseToken,
        signatureAndroid,
        transactionDate,
        transactionId,
        transactionReceipt,
    }: {
        product_id: string;
        payment_channel: string;
        autoRenewingAndroid?: boolean;
        dataAndroid?: string;
        developerPayloadAndroid?: string;
        isAcknowledgedAndroid?: boolean;
        obfuscatedAccountIdAndroid?: string;
        obfuscatedProfileIdAndroid?: string;
        packageNameAndroid?: string;
        productId: string;
        productIds?: string[];
        purchaseStateAndroid?: number;
        purchaseToken?: string;
        signatureAndroid?: string;
        transactionDate: number;
        transactionId?: string;
        transactionReceipt: string;
    }) => {
        try {
            const result = await ttReactnativejsMalaysia.post(ttGemfile.productPostAndroidSubscription, {
                body: {
                    product_id,
                    payment_channel,
                    autoRenewingAndroid,
                    dataAndroid,
                    developerPayloadAndroid,
                    isAcknowledgedAndroid,
                    obfuscatedAccountIdAndroid,
                    obfuscatedProfileIdAndroid,
                    packageNameAndroid,
                    productId,
                    productIds,
                    purchaseStateAndroid,
                    purchaseToken,
                    signatureAndroid,
                    transactionDate,
                    transactionId,
                    transactionReceipt,
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidSubscriptions}]: ${e.toString()}`);
            throw e;
        }
    }

    static postAndroidIAP = async ({
        user_id,
        product_id,
        transaction_type,
        zf_channel,
        platform,
        channel_transaction_id,
        transaction_receipt,
        transaction_status,
        is_sb,
        purchase_token,
        package_name_android
    }: {
        user_id: string;
        product_id: string;
        transaction_type: string;
        zf_channel: string;
        platform: string;
        channel_transaction_id: string | undefined;
        transaction_receipt: any;
        transaction_status: number;
        is_sb: number;
        purchase_token?: string;
        package_name_android?: string;
    }) => {
        try {
            const result = await ttReactnativejsMalaysia.post(ttGemfile.productPostAndroidIAP, {
                body: {
                    user_id,
                    product_id,
                    transaction_type,
                    zf_channel,
                    platform,
                    channel_transaction_id,
                    transaction_receipt,
                    transaction_status,
                    is_sb,
                    purchase_token,
                    package_name_android
                }
            });

            if (result.success === false) {
                throw result.message;
            }

            return result;

        } catch (e: any) {
            console.error(`[Error postAndroidIAP}]: ${e.toString()}`);
            throw e;
        }
    }
}