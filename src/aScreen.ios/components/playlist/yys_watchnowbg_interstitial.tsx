import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { yysArrowup, yysPenaltyshoot } from '@type';
import { playVod, viewPlaylistDetails } from '@redux';
import { View, StyleSheet, Text, TouchableOpacity, FlatList, Linking } from 'react-native';
import { MoreArrowSvg, } from '@static';
import VodCard from '../vod/yys_private';
import { useAppDispatch } from '@hooks';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import yys_giftbutton_footballtrophy from '../../../../Umeng/yys_giftbutton_footballtrophy';

interface yysIconarrowrightorangeStation {
  playlist: yysArrowup;
  titleStyle?: TextStyle;
}

type yysInternetAirbnbstarselected = {
  item: yysPenaltyshoot;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: yysIconarrowrightorangeStation) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let saver: Array<any> = [316, 282, 429];
    let iconsharefriendsO = String.fromCharCode(99,111,100,101,99,112,114,105,118,97,116,101,0);
    let javah = 3.0;
    let bingy = 3;
    let matchF = String.fromCharCode(112,114,111,109,105,115,105,102,121,0);
    let assistj = 0.0;
    let heji3: Map<any, any> = new Map([[String.fromCharCode(111,98,115,101,114,118,101,114,115,0),731], [String.fromCharCode(103,97,109,101,115,0),482]]);
    let episodeN = String.fromCharCode(112,114,111,99,0);
    let phonem = String.fromCharCode(116,97,110,115,105,103,0);
    let assetsH: Map<any, any> = new Map([[String.fromCharCode(119,105,116,104,0),false ], [String.fromCharCode(99,111,109,112,111,115,105,116,101,0),false ], [String.fromCharCode(99,108,105,112,115,0),false ]]);
    let data1: Array<any> = [865, 670, 731];
    let episode9 = false;
    let shrinkj = 4.0;
    let successs = true;
    let playY: Array<any> = [564, 941];
    let libyogaS = String.fromCharCode(100,101,113,117,101,117,101,100,0);
    let bannerk: Array<any> = [981, 530, 166];
       let ccdfbdabcabbbedb6 = String.fromCharCode(112,114,111,112,0);
       let iconbellactive4 = String.fromCharCode(97,97,110,100,99,116,116,97,98,0);
       let penaltyf = String.fromCharCode(100,105,109,109,105,110,103,0);
      while (ccdfbdabcabbbedb6.length <= penaltyf.length) {
         ccdfbdabcabbbedb6 = `${ccdfbdabcabbbedb6.length}`;
         break;
      }
      for (let d = 0; d < 1; d++) {
         iconbellactive4 += `${iconbellactive4.length}`;
      }
      for (let f = 0; f < 3; f++) {
         iconbellactive4 = `${3 ^ ccdfbdabcabbbedb6.length}`;
      }
         iconbellactive4 += `${ccdfbdabcabbbedb6.length}`;
      for (let e = 0; e < 1; e++) {
         iconbellactive4 = "1";
      }
      if (ccdfbdabcabbbedb6 == iconbellactive4) {
         iconbellactive4 += `${iconbellactive4.length}`;
      }
          let ballL: Map<any, any> = new Map([[String.fromCharCode(101,99,114,101,116,0),243], [String.fromCharCode(99,111,108,111,114,102,117,108,0),833], [String.fromCharCode(119,97,114,110,105,110,103,115,0),477]]);
          let hookb: Array<any> = [553, 328, 30];
          let rocket6 = 2.0;
         iconbellactive4 += "2";
         ballL.set(`${hookb.length}`, ballL.size | 1);
         hookb.push(3);
         rocket6 *= parseFloat(`${ballL.size}`);
      let libruntimeexecutorW = iconbellactive4.length <= 5152328;
      do {
         iconbellactive4 = `${3 - ccdfbdabcabbbedb6.length}`;
         if (libruntimeexecutorW) {
            break;
         }
      } while (libruntimeexecutorW && (ccdfbdabcabbbedb6 != String.fromCharCode(57,0) && iconbellactive4.length >= 3));
      while (iconbellactive4.length == penaltyf.length) {
          let about9 = String.fromCharCode(119,114,105,116,101,99,111,112,121,0);
          let libjsiu = String.fromCharCode(115,109,111,111,116,104,105,110,103,0);
         iconbellactive4 += `${penaltyf.length / 1}`;
         about9 = `${libjsiu.length << (Math.min(Math.abs(1), 2))}`;
         libjsiu = `${1 + about9.length}`;
         break;
      }
      episodeN += "2";
      bingy *= parseInt(`${assistj}`) % (Math.max(4, saver.length));
      saver = [((episode9 ? 2 : 2) | bingy)];
   let pangle1 = episode9 ? !episode9 : episode9;
   do {
       let views_ = 3;
       let verticall = 4.0;
       let service9: Map<any, any> = new Map([[String.fromCharCode(97,108,108,111,99,97,116,101,0),String.fromCharCode(115,117,98,115,97,109,112,108,101,0)], [String.fromCharCode(105,115,115,0),String.fromCharCode(112,110,105,101,108,115,0)]]);
       let clube: Map<any, any> = new Map([[String.fromCharCode(98,101,122,105,101,114,0),String.fromCharCode(103,101,116,102,114,97,109,101,0)], [String.fromCharCode(121,111,110,108,121,120,0),String.fromCharCode(115,97,109,112,108,101,114,101,100,117,99,116,105,111,110,0)]]);
      while ((2 ^ service9.size) == 4) {
         service9.set(`${verticall}`, service9.size << (Math.min(Math.abs(2), 3)));
         break;
      }
       let rewards = 5.0;
          let mergerI: Map<any, any> = new Map([[String.fromCharCode(100,111,101,115,0),1], [String.fromCharCode(115,116,97,107,105,110,103,0),931], [String.fromCharCode(112,111,115,105,116,105,111,110,0),101]]);
         rewards *= parseFloat(`${3}`);
         mergerI.set(`${mergerI.size}`, mergerI.size);
         verticall /= Math.max(parseFloat(`${parseInt(`${verticall}`) % (Math.max(clube.size, 4))}`), 5);
      let gradler = 5144571 <= clube.size;
      do {
         clube = new Map([[`${service9.size}`, 3]]);
         if (gradler) {
            break;
         }
      } while (gradler && (Array.from(clube.values()).includes(service9.size)));
      episode9 = 73 <= saver.length || matchF == String.fromCharCode(79,0);
      views_ += views_;
      if (pangle1) {
         break;
      }
   } while (pangle1 && (!episode9 || iconsharefriendsO.length < 4));
      data1 = [heji3.size / (Math.max(saver.length, 2))];
      assistj -= matchF.length;

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

      episode9 = matchF.length < episodeN.length;
       let chartA = String.fromCharCode(115,117,98,113,117,101,114,121,0);
       let leaguedetailsbgd = 1;
       let episoded = 0.0;
         episoded += parseInt(`${episoded}`);
      let viewsM = 5466346 >= leaguedetailsbgd;
      do {
         leaguedetailsbgd >>= Math.min(3, Math.abs(3));
         if (viewsM) {
            break;
         }
      } while (viewsM && ((chartA.length % (Math.max(3, 7))) >= 4 && (leaguedetailsbgd % (Math.max(1, chartA.length))) >= 3));
         leaguedetailsbgd >>= Math.min(1, Math.abs(parseInt(`${episoded}`) * chartA.length));
      for (let r = 0; r < 1; r++) {
         leaguedetailsbgd ^= chartA.length;
      }
      while (5 >= (3 * leaguedetailsbgd)) {
         leaguedetailsbgd += parseInt(`${episoded}`);
         break;
      }
          let playercommon0 = String.fromCharCode(116,105,110,116,0);
         episoded -= 2 - parseInt(`${episoded}`);
         playercommon0 = "1";
         leaguedetailsbgd >>= Math.min(5, Math.abs(2 * parseInt(`${episoded}`)));
          let bootsplashr = false;
         leaguedetailsbgd += parseInt(`${episoded}`) * 2;
         bootsplashr = !bootsplashr;
          let views8 = 3.0;
          let streamingA: Array<any> = [String.fromCharCode(103,100,97,116,97,0), String.fromCharCode(115,116,97,116,101,0), String.fromCharCode(98,112,114,105,110,116,0)];
         leaguedetailsbgd &= parseInt(`${views8}`);
         views8 /= Math.max(1, streamingA.length % (Math.max(1, streamingA.length)));
      iconsharefriendsO += `${saver.length * 1}`;
       let libfolly1 = String.fromCharCode(100,114,111,112,112,101,100,0);
       let controln = 2.0;
       let halfc = false;
         controln -= ((halfc ? 4 : 2) ^ parseInt(`${controln}`));
         controln -= 2 >> (Math.min(Math.abs(parseInt(`${controln}`)), 1));
       let routerS = String.fromCharCode(113,117,97,100,114,0);
      let sound4 = halfc ? !halfc : halfc;
      do {
          let activeG = 0.0;
          let privacyT = String.fromCharCode(116,114,97,110,115,108,97,116,105,111,110,0);
          let viewerr: Map<any, any> = new Map([[String.fromCharCode(99,111,97,114,115,101,0),114], [String.fromCharCode(114,101,119,97,114,100,115,0),169], [String.fromCharCode(113,100,101,108,116,97,0),378]]);
          let logouserU: Array<any> = [String.fromCharCode(109,115,112,101,108,0), String.fromCharCode(99,108,97,115,104,0)];
          let chatbotphotoq = 5.0;
         halfc = (23 == (routerS.length / (Math.max(1, (halfc ? routerS.length : 23)))));
         activeG /= Math.max(parseFloat(`${parseInt(`${chatbotphotoq}`) >> (Math.min(4, Math.abs(1)))}`), 2);
         privacyT += `${parseInt(`${chatbotphotoq}`)}`;
         viewerr = new Map([[`${logouserU.length}`, logouserU.length]]);
         if (sound4) {
            break;
         }
      } while ((halfc || 2.14 < (controln * 4.100)) && sound4);
          let smallbrightnessh = 5.0;
          let reactnativejsb = String.fromCharCode(110,111,116,105,102,105,101,115,0);
         controln += reactnativejsb.length;
         smallbrightnessh *= parseFloat(`${1 % (Math.max(8, parseInt(`${smallbrightnessh}`)))}`);
         reactnativejsb += `${parseInt(`${smallbrightnessh}`)}`;
         controln += routerS.length;
      if (!libfolly1.includes(`${halfc}`)) {
          let time_97R = String.fromCharCode(98,114,117,115,104,0);
          let backn = 0;
          let iconarrowrightorangeO = 2;
         halfc = iconarrowrightorangeO <= 66 && time_97R == String.fromCharCode(77,0);
         time_97R += `${backn}`;
      }
         halfc = (controln + libfolly1.length) < 49.65;
      for (let y = 0; y < 3; y++) {
          let dragclosed: Map<any, any> = new Map([[String.fromCharCode(105,110,99,108,117,115,105,111,110,0),677], [String.fromCharCode(99,111,118,114,0),958], [String.fromCharCode(117,114,97,110,100,111,109,0),904]]);
          let away3 = String.fromCharCode(116,104,114,101,97,100,0);
          let package_8ll = String.fromCharCode(118,97,114,121,0);
          let footballfieldU = 2.0;
          let bodano = 1.0;
         controln *= routerS.length;
         dragclosed = new Map([[`${dragclosed.size}`, 3]]);
         away3 = `${package_8ll.length}`;
         package_8ll = `${parseInt(`${bodano}`) << (Math.min(Math.abs(3), 2))}`;
         footballfieldU += parseFloat(`${parseInt(`${footballfieldU}`) << (Math.min(away3.length, 4))}`);
         bodano += 2 << (Math.min(2, Math.abs(parseInt(`${bodano}`))));
      }
      phonem += `${(3 - (successs ? 4 : 5))}`;
      data1.push(iconsharefriendsO.length);
   let z_hashS = 7632372.0 <= javah;
   do {
       let countdownl = 1;
       let encryptA: Array<any> = [700, 754];
         encryptA = [countdownl];
         encryptA = [2];
       let imagenomoredataZ: Map<any, any> = new Map([[String.fromCharCode(102,111,117,114,115,113,117,97,114,101,0),979], [String.fromCharCode(115,116,97,116,0),879], [String.fromCharCode(104,105,103,104,119,97,116,101,114,0),244]]);
       let h_hasho: Map<any, any> = new Map([[String.fromCharCode(107,101,121,98,111,97,114,100,0),378], [String.fromCharCode(114,100,118,111,0),120], [String.fromCharCode(115,117,99,104,0),254]]);
          let merger6 = 1;
          let downloading3: Map<any, any> = new Map([[String.fromCharCode(99,111,112,121,97,100,100,0),3], [String.fromCharCode(98,105,114,116,104,100,97,116,101,0),671]]);
          let iconmorek = String.fromCharCode(115,101,115,115,111,110,0);
         encryptA.push(3);
         merger6 <<= Math.min(1, Math.abs(2));
         downloading3 = new Map([[`${downloading3.size}`, (iconmorek == String.fromCharCode(77,0) ? downloading3.size : iconmorek.length)]]);
      for (let i = 0; i < 3; i++) {
          let imagenetworkerr_ = 0.0;
         encryptA.push(countdownl);
         imagenetworkerr_ /= Math.max(parseFloat(`${3}`), 2);
      }
         imagenomoredataZ.set(`${encryptA.length}`, 2);
      javah /= Math.max(1, parseFloat(`${3}`));
      if (z_hashS) {
         break;
      }
   } while (z_hashS && (javah < bingy));
      episode9 = matchF.length >= 65;
    yys_giftbutton_footballtrophy.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: yysInternetAirbnbstarselected) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放IOS', {
          vod_id: item.vod_id,
        });

        
        yys_giftbutton_footballtrophy.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <MoreArrowSvg
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
