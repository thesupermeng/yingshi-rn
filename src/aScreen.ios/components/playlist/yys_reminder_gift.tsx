import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { yys_BrightnessCopy, yys_Bing } from '@type/yys_libzeus';
import { playVod, viewPlaylistDetails } from '@redux/actions/yys_player_style';
import { View, StyleSheet, Text, TouchableOpacity, FlatList, Linking } from 'react-native';
import RightIcon from '@static/images/toponLang.svg';
import VodCard from '../vod/yys_singapore';
import { useAppDispatch } from '@hooks/yys_frame';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import yys_event_common from '../../../../Umeng/yys_event_common';

interface yys_ConfigureUimanager {
  playlist: yys_BrightnessCopy;
  titleStyle?: TextStyle;
}

type yys_Mbsplash = {
  item: yys_Bing;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: yys_ConfigureUimanager) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let carouselu: Array<any> = [802, 536];
    let incidentJ = 5.0;
    let schedule7 = 3.0;
    let logouta: Array<any> = [String.fromCharCode(97,114,114,97,121,115,105,122,101,0), String.fromCharCode(102,95,57,52,95,105,110,116,101,114,114,117,112,116,105,111,110,0)];
    let statsy = String.fromCharCode(115,111,108,118,101,95,99,95,54,51,0);
    let policyA = 2.0;
    let h_imagef: Array<any> = [String.fromCharCode(108,95,49,54,0), String.fromCharCode(112,111,108,113,97,95,110,95,57,52,0), String.fromCharCode(115,116,114,105,110,103,98,117,102,102,101,114,95,55,95,54,50,0)];
    let libruntimeexecutorN = 1;
    let ajax2 = String.fromCharCode(102,95,51,48,95,109,111,100,105,102,121,0);
    let videojsj = 3.0;
    let entry0: Map<any, any> = new Map([[String.fromCharCode(115,101,108,102,105,101,95,51,95,52,57,0),true ], [String.fromCharCode(115,116,114,105,112,115,0),true ], [String.fromCharCode(109,98,103,114,97,112,104,0),false ]]);
    let grey4 = 3;
    let mailG = String.fromCharCode(108,119,115,115,112,110,0);
    let targetp: Array<any> = [52, 564, 968];
    let plash4 = String.fromCharCode(97,108,116,105,118,101,99,0);
      schedule7 -= parseFloat(`${1 & ajax2.length}`);
       let showk = String.fromCharCode(101,95,57,48,95,98,117,102,102,101,114,105,110,103,0);
       let viewsm = 1.0;
          let nativemodule3 = String.fromCharCode(109,95,56,51,95,121,97,109,97,104,97,0);
          let uimanagert = true;
          let pcopy_xV = true;
         viewsm -= (3 & (uimanagert ? 3 : 5));
         nativemodule3 += `${nativemodule3.length}`;
         uimanagert = nativemodule3.length > 52;
         pcopy_xV = (((!pcopy_xV ? nativemodule3.length : 5) << (Math.min(nativemodule3.length, 2))) >= 5);
         showk = `${3 & showk.length}`;
          let popupn = String.fromCharCode(118,97,99,97,110,116,0);
          let splashu = String.fromCharCode(104,100,108,114,95,111,95,50,53,0);
          let modelk: Map<any, any> = new Map([[String.fromCharCode(116,106,117,116,105,108,0),904], [String.fromCharCode(97,114,103,98,0),430], [String.fromCharCode(97,117,116,111,112,108,97,121,105,110,103,0),745]]);
         viewsm += 1 - parseInt(`${viewsm}`);
         popupn += `${(splashu == String.fromCharCode(104,0) ? modelk.size : splashu.length)}`;
         modelk.set(popupn, 3 - popupn.length);
          let bootsplashx = String.fromCharCode(116,95,52,51,95,116,112,101,108,0);
         viewsm *= (String.fromCharCode(51,0) == showk ? showk.length : parseInt(`${viewsm}`));
         bootsplashx += `${3 ^ bootsplashx.length}`;
          let tick7 = true;
         showk += `${((tick7 ? 1 : 3))}`;
         showk += "3";
      incidentJ -= parseFloat(`${1}`);
      statsy = `${h_imagef.length}`;
      schedule7 *= parseFloat(`${parseInt(`${schedule7}`)}`);
   let google3 = 7698265 >= logouta.length;
   do {
      logouta = [parseInt(`${videojsj}`) + 3];
      if (google3) {
         break;
      }
   } while ((1.17 == (videojsj + logouta.length)) && google3);
   if (3 == (libruntimeexecutorN - h_imagef.length) || (h_imagef.length - 3) == 1) {
       let selecty = 5.0;
       let alertK = 2.0;
      if (2.76 <= (selecty - alertK) && (selecty - 2.76) <= 1.14) {
          let pangle8: Array<any> = [String.fromCharCode(112,111,115,116,99,111,100,101,95,52,95,53,57,0), String.fromCharCode(110,98,105,116,115,0)];
          let libfollyL = 2.0;
         selecty *= parseFloat(`${parseInt(`${libfollyL}`) ^ parseInt(`${selecty}`)}`);
         pangle8.push(3 ^ pangle8.length);
         libfollyL /= Math.max(pangle8.length, 5);
      }
       let middleC: Map<any, any> = new Map([[String.fromCharCode(100,117,114,103,101,114,0),920], [String.fromCharCode(102,105,120,116,117,114,101,0),467]]);
       let baidub: Map<any, any> = new Map([[String.fromCharCode(101,95,52,52,95,117,114,97,110,100,111,109,0),305], [String.fromCharCode(118,105,115,105,98,108,101,95,107,95,52,0),137]]);
      let layoutA = baidub.size >= 8103112;
      do {
         baidub = new Map([[`${middleC.size}`, parseInt(`${alertK}`)]]);
         if (layoutA) {
            break;
         }
      } while ((!Array.from(baidub.values()).includes(selecty)) && layoutA);
          let frame_oxM: Array<any> = [String.fromCharCode(115,105,109,117,108,116,97,110,101,111,117,115,0), String.fromCharCode(114,111,108,101,0)];
         selecty += parseFloat(`${parseInt(`${alertK}`) >> (Math.min(Math.abs(3), 2))}`);
         frame_oxM.push(frame_oxM.length);
      while ((selecty + 5) == 5.55) {
         alertK /= Math.max(parseInt(`${alertK}`), 3);
         break;
      }
         baidub.set(`${middleC.size}`, 2);
      libruntimeexecutorN |= parseInt(`${videojsj}`) | 2;
   }

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

      videojsj /= Math.max(1 | logouta.length, 4);
      schedule7 += parseFloat(`${carouselu.length}`);
       let robotoS: Array<any> = [697, 488, 296];
       let zhengpianD = String.fromCharCode(102,101,116,99,104,95,51,95,48,0);
       let source8: Map<any, any> = new Map([[String.fromCharCode(104,101,97,118,121,0),825], [String.fromCharCode(99,95,49,52,0),598], [String.fromCharCode(121,95,49,56,95,99,114,101,100,105,98,105,108,105,116,121,0),249]]);
          let specw: Map<any, any> = new Map([[String.fromCharCode(115,116,114,101,114,114,111,114,0),961], [String.fromCharCode(97,105,116,101,114,0),363], [String.fromCharCode(100,101,115,105,114,101,100,95,97,95,49,48,48,0),943]]);
          let starb = String.fromCharCode(102,105,108,116,0);
          let libreactm = String.fromCharCode(110,95,50,56,95,122,101,114,111,115,0);
         zhengpianD += `${robotoS.length | 3}`;
         specw = new Map([[starb, starb.length % (Math.max(libreactm.length, 8))]]);
         libreactm += "3";
         source8.set(`${zhengpianD}`, 2 << (Math.min(1, Math.abs(source8.size))));
      for (let t = 0; t < 1; t++) {
          let filedj = String.fromCharCode(104,97,97,114,95,108,95,57,54,0);
          let countryd = 2.0;
         robotoS.push(parseInt(`${countryd}`));
         filedj = `${1 | filedj.length}`;
         countryd += parseFloat(`${filedj.length / (Math.max(7, filedj.length))}`);
      }
      while (source8.get(`${robotoS.length}`) == null) {
         robotoS = [robotoS.length % (Math.max(2, source8.size))];
         break;
      }
         robotoS = [(String.fromCharCode(72,0) == zhengpianD ? robotoS.length : zhengpianD.length)];
      libruntimeexecutorN /= Math.max(1, 2);
       let actionsf = String.fromCharCode(97,105,114,105,110,103,95,103,95,52,0);
       let mode6: Map<any, any> = new Map([[String.fromCharCode(112,111,108,121,108,105,110,101,0),false ], [String.fromCharCode(115,107,101,121,108,105,115,116,0),true ]]);
          let drag6 = 0.0;
         mode6 = new Map([[`${mode6.size}`, actionsf.length | mode6.size]]);
         drag6 /= Math.max(3, 2);
      for (let u = 0; u < 3; u++) {
          let crossW = 1;
          let runtimeT = String.fromCharCode(117,112,100,97,116,101,100,0);
         mode6 = new Map([[`${crossW}`, 2]]);
         crossW ^= (String.fromCharCode(54,0) == runtimeT ? runtimeT.length : runtimeT.length);
      }
      if (4 == actionsf.length) {
         actionsf = `${2 << (Math.min(3, Math.abs(mode6.size)))}`;
      }
         mode6.set(`${actionsf}`, (actionsf == String.fromCharCode(55,0) ? mode6.size : actionsf.length));
      for (let v = 0; v < 3; v++) {
          let setting2 = String.fromCharCode(97,103,101,110,116,0);
          let bingk = true;
          let logoutH: Map<any, any> = new Map([[String.fromCharCode(111,95,51,53,95,98,105,116,115,112,117,108,115,101,115,0),247], [String.fromCharCode(98,101,110,105,103,110,95,53,95,53,50,0),489]]);
         actionsf += `${(actionsf == String.fromCharCode(104,0) ? (bingk ? 2 : 5) : actionsf.length)}`;
         setting2 += `${setting2.length ^ logoutH.size}`;
         bingk = 48 >= setting2.length;
         logoutH.set(setting2, setting2.length);
      }
       let x_playerr = 1.0;
      libruntimeexecutorN &= logouta.length;
   if (4 == (libruntimeexecutorN - grey4)) {
       let rncorez = 5;
       let libruntimeexecutor9: Array<any> = [208, 160, 986];
       let buttonI = 4.0;
       let gmailp: Array<any> = [845, 59, 10];
       let mimoE = String.fromCharCode(107,95,56,52,95,110,111,104,101,97,100,101,114,0);
      for (let c = 0; c < 3; c++) {
         gmailp = [libruntimeexecutor9.length];
      }
      for (let e = 0; e < 1; e++) {
         gmailp.push(rncorez << (Math.min(5, Math.abs(1))));
      }
       let indicator7 = 2.0;
       let matchesu = 3.0;
         buttonI -= parseInt(`${buttonI}`);
      if ((indicator7 + buttonI) >= 5.37) {
          let suggestionN = String.fromCharCode(117,110,115,101,116,0);
          let graph1: Map<any, any> = new Map([[String.fromCharCode(102,105,112,115,0),String.fromCharCode(112,114,101,101,110,99,111,100,101,0)], [String.fromCharCode(114,101,115,105,100,117,101,0),String.fromCharCode(104,115,99,114,111,108,108,0)], [String.fromCharCode(113,111,115,0),String.fromCharCode(112,117,110,99,116,117,97,116,105,111,110,0)]]);
          let libavcodec5 = false;
          let search1 = 4.0;
         indicator7 *= parseInt(`${buttonI}`) % (Math.max(6, gmailp.length));
         suggestionN += `${graph1.size}`;
         graph1 = new Map([[`${search1}`, ((libavcodec5 ? 3 : 5) + parseInt(`${search1}`))]]);
      }
          let models4: Map<any, any> = new Map([[String.fromCharCode(99,117,108,115,104,105,102,116,95,98,95,54,51,0),161], [String.fromCharCode(114,101,109,98,95,117,95,54,54,0),213]]);
          let libloggers = String.fromCharCode(112,114,101,0);
         libruntimeexecutor9 = [2];
         models4.set(`${libloggers}`, 3);
         libloggers += `${libloggers.length}`;
      if ((libruntimeexecutor9.length ^ 5) < 1) {
         gmailp.push(3 * parseInt(`${matchesu}`));
      }
         buttonI += (mimoE == String.fromCharCode(49,0) ? mimoE.length : parseInt(`${indicator7}`));
      while (2.79 > (matchesu + 5.11) || (matchesu + 5.11) > 3.13) {
         matchesu += 2;
         break;
      }
      while ((buttonI + 3.40) > 2.15) {
         buttonI += parseInt(`${matchesu}`);
         break;
      }
      let package_5Y = libruntimeexecutor9.length >= 9517719;
      do {
         libruntimeexecutor9 = [parseInt(`${buttonI}`) >> (Math.min(4, Math.abs(2)))];
         if (package_5Y) {
            break;
         }
      } while (package_5Y && (!libruntimeexecutor9.includes(matchesu)));
          let changeR = 3.0;
          let modeI = String.fromCharCode(108,111,99,108,0);
         libruntimeexecutor9.push(modeI.length & libruntimeexecutor9.length);
         changeR += parseFloat(`${parseInt(`${changeR}`)}`);
         modeI = `${parseInt(`${changeR}`) | 3}`;
      if (1 >= rncorez) {
         buttonI -= 3;
      }
         matchesu /= Math.max(5, 2 >> (Math.min(5, libruntimeexecutor9.length)));
          let zoom1 = 0.0;
         buttonI /= Math.max(4, parseInt(`${zoom1}`));
      libruntimeexecutorN %= Math.max(1, gmailp.length);
   }
      libruntimeexecutorN *= logouta.length % (Math.max(2, 3));
    yys_event_common.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: yys_Mbsplash) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放IOS', {
          vod_id: item.vod_id,
        });

        
        yys_event_common.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <RightIcon
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
