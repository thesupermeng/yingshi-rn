import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { wwFirebase, wwControl } from '@type/ww_dycreator_result';
import { playVod, viewPlaylistDetails } from '@redux/actions/ww_floater';
import { View, StyleSheet, Text, TouchableOpacity, FlatList, Linking } from 'react-native';
import RightIcon from '@static/images/libcxxcomponentsPrivilege.svg';
import VodCard from '../vod/ww_accepted_current';
import { useAppDispatch } from '@hooks/ww_catagory_neon';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import ww_runtime from '../../../../Umeng/ww_runtime';

interface wwIndexDice {
  playlist: wwFirebase;
  titleStyle?: TextStyle;
}

type wwCasting = {
  item: wwControl;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: wwIndexDice) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let short_ny7: Array<any> = [217, 245, 210];
    let storeB: Map<any, any> = new Map([[String.fromCharCode(114,101,112,114,101,115,101,110,116,97,98,108,101,95,121,95,54,57,0),339], [String.fromCharCode(109,111,110,111,116,111,110,105,99,95,122,95,50,54,0),496]]);
    let webviewi = String.fromCharCode(106,112,101,103,95,99,95,55,54,0);
    let formJ: Array<any> = [String.fromCharCode(101,95,49,52,95,110,111,109,101,109,0), String.fromCharCode(115,116,114,105,110,103,95,109,95,55,53,0)];
    let basketballh: Array<any> = [513, 657, 746];
    let filledp = 0.0;
    let middlebrightnessK = 3.0;
    let rewardvideo2 = String.fromCharCode(119,95,53,50,95,115,101,108,101,99,116,97,98,108,101,0);
    let yellowvideoliveP = String.fromCharCode(118,95,52,53,95,103,101,116,119,105,110,116,105,109,101,111,102,100,97,121,0);
    let data8 = 3;
    let libflippern = 4;
    let singaporeq: Map<any, any> = new Map([[String.fromCharCode(108,95,51,50,95,111,108,100,0),false ], [String.fromCharCode(115,95,52,49,95,115,101,116,117,112,100,0),false ], [String.fromCharCode(107,95,50,49,95,102,111,114,101,104,101,97,100,0),true ]]);
    let gradlewU = String.fromCharCode(117,95,49,48,95,99,97,110,99,101,108,108,97,98,108,101,0);
    let iconclosewhitebgM = 0.0;
   while (4 < yellowvideoliveP.length) {
       let iconpipexpandS = 2.0;
       let commonb = 1;
      let predictionbannersharedA = iconpipexpandS >= 6589641.0;
      do {
         iconpipexpandS += parseFloat(`${commonb << (Math.min(Math.abs(parseInt(`${iconpipexpandS}`)), 4))}`);
         if (predictionbannersharedA) {
            break;
         }
      } while ((1 == (2 * commonb) && 2 == (parseInt(`${iconpipexpandS}`) / (Math.max(9, commonb)))) && predictionbannersharedA);
         commonb *= parseInt(`${iconpipexpandS}`);
         iconpipexpandS *= parseFloat(`${2 % (Math.max(commonb, 7))}`);
         commonb /= Math.max(commonb - 2, 1);
         iconpipexpandS += parseFloat(`${3}`);
       let baiduN = String.fromCharCode(99,111,111,114,100,105,110,97,116,101,95,57,95,50,54,0);
       let minimizev = String.fromCharCode(101,110,118,95,52,95,50,57,0);
      webviewi += `${basketballh.length / (Math.max(3, 5))}`;
      break;
   }
       let eventZ = String.fromCharCode(109,111,117,116,104,95,100,95,50,48,0);
       let iconsettingf = false;
         eventZ = `${((iconsettingf ? 3 : 4) << (Math.min(Math.abs(1), 5)))}`;
         iconsettingf = eventZ.length >= 23;
         eventZ += `${((iconsettingf ? 4 : 3) * 2)}`;
      for (let u = 0; u < 1; u++) {
          let predictionZ = 2;
         eventZ = `${(predictionZ * (iconsettingf ? 1 : 2))}`;
      }
      while (iconsettingf && eventZ.length > 1) {
          let downloadingX = 5.0;
          let ajax7 = String.fromCharCode(122,95,53,50,95,112,114,111,116,101,99,116,0);
         eventZ = `${(String.fromCharCode(78,0) == ajax7 ? parseInt(`${downloadingX}`) : ajax7.length)}`;
         break;
      }
      let neon8 = String.fromCharCode(97,109,111,101,109,0) == eventZ;
      do {
          let pauseP = 4.0;
          let lines = String.fromCharCode(115,111,97,99,99,101,112,116,95,117,95,48,0);
          let starc = String.fromCharCode(109,97,120,98,117,114,115,116,95,50,95,51,52,0);
          let area6 = String.fromCharCode(114,95,51,54,95,101,110,100,112,111,105,110,116,115,0);
          let libane1 = true;
         eventZ += `${(String.fromCharCode(119,0) == lines ? lines.length : parseInt(`${pauseP}`))}`;
         pauseP -= area6.length;
         starc += "3";
         area6 = `${starc.length - 3}`;
         libane1 = (((libane1 ? 70 : starc.length) << (Math.min(starc.length, 3))) >= 70);
         if (neon8) {
            break;
         }
      } while (neon8 && (!eventZ.includes(`${iconsettingf}`)));
      libflippern <<= Math.min(5, Math.abs(data8 / (Math.max(libflippern, 4))));
       let weibop = 4.0;
       let splash9 = String.fromCharCode(117,95,52,52,95,103,101,116,115,103,110,99,116,120,110,111,0);
      let trophy7 = weibop <= 4989703.0;
      do {
          let temperatureX = 2;
         weibop *= splash9.length;
         temperatureX &= temperatureX;
         if (trophy7) {
            break;
         }
      } while (((weibop - splash9.length) > 2.26 || 2 > (splash9.length | 2)) && trophy7);
       let abidetectj = 4.0;
         abidetectj /= Math.max(4, parseInt(`${weibop}`) / (Math.max(splash9.length, 3)));
      let emojiO = 6594698 >= splash9.length;
      do {
         splash9 = `${1 >> (Math.min(Math.abs(parseInt(`${weibop}`)), 5))}`;
         if (emojiO) {
            break;
         }
      } while (emojiO && (1.24 < (3.74 / (Math.max(5, abidetectj))) || 2 < (parseInt(`${abidetectj}`) / (Math.max(4, 8)))));
       let yellowV = String.fromCharCode(117,95,49,53,95,119,105,116,104,105,110,0);
      if ((yellowV.length * 3) > 2 || 4 > (yellowV.length << (Math.min(Math.abs(3), 4)))) {
         yellowV += `${1 + splash9.length}`;
      }
      data8 %= Math.max(2, 1 + data8);
   for (let m = 0; m < 2; m++) {
       let dycreatorM: Array<any> = [652, 78, 125];
       let reactnavigationl: Array<any> = [613, 766, 497];
       let statsU = String.fromCharCode(111,95,53,55,95,116,121,112,101,115,101,116,116,101,114,0);
       let telegram_ = 3;
         reactnavigationl = [2 & reactnavigationl.length];
         reactnavigationl = [reactnavigationl.length * 2];
         statsU += `${(String.fromCharCode(102,0) == statsU ? telegram_ : statsU.length)}`;
      let kuaishou9 = 6691116 >= telegram_;
      do {
         telegram_ <<= Math.min(4, Math.abs(dycreatorM.length << (Math.min(Math.abs(2), 4))));
         if (kuaishou9) {
            break;
         }
      } while (kuaishou9 && (dycreatorM.includes(telegram_)));
       let hongkongr = true;
       let uploadw = false;
         reactnavigationl.push(1);
      let minivodi = 7748322 >= telegram_;
      do {
         telegram_ /= Math.max(((uploadw ? 3 : 4) | dycreatorM.length), 5);
         if (minivodi) {
            break;
         }
      } while (minivodi && (uploadw));
       let const_yS: Map<any, any> = new Map([[String.fromCharCode(120,95,51,57,95,117,110,109,111,118,101,100,0),994], [String.fromCharCode(108,95,49,51,95,116,111,100,97,121,0),862]]);
       let containerV: Map<any, any> = new Map([[String.fromCharCode(118,97,108,105,100,97,116,105,111,110,115,95,109,95,49,50,0),97], [String.fromCharCode(119,95,57,48,95,106,117,115,116,105,102,121,0),509]]);
      while (!Array.from(const_yS.values()).includes(telegram_)) {
          let with_3Z: Array<any> = [532, 367, 133];
         const_yS = new Map([[`${containerV.size}`, statsU.length << (Math.min(4, Math.abs(containerV.size)))]]);
         with_3Z = [with_3Z.length];
         break;
      }
         const_yS = new Map([[`${reactnavigationl.length}`, 1]]);
         reactnavigationl.push(2 / (Math.max(telegram_, 5)));
      let qaagu = hongkongr ? !hongkongr : hongkongr;
      do {
         hongkongr = (telegram_ | statsU.length) == 46;
         if (qaagu) {
            break;
         }
      } while (qaagu && (!hongkongr));
      basketballh = [storeB.size];
   }
      basketballh.push(yellowvideoliveP.length);
   while (webviewi.startsWith(`${basketballh.length}`)) {
      basketballh.push((String.fromCharCode(121,0) == webviewi ? libflippern : webviewi.length));
      break;
   }

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

   let tnewarchdefaultsU = 7909097 <= storeB.size;
   do {
      storeB = new Map([[`${singaporeq.size}`, libflippern]]);
      if (tnewarchdefaultsU) {
         break;
      }
   } while (tnewarchdefaultsU && (storeB.get(`${libflippern}`) == null));
       let shielddoneK = 1.0;
       let vipsportj: Map<any, any> = new Map([[String.fromCharCode(101,118,111,108,118,101,95,98,95,56,0),772], [String.fromCharCode(114,101,97,100,102,117,108,108,95,50,95,53,57,0),427], [String.fromCharCode(105,115,110,111,110,122,101,114,111,95,118,95,56,54,0),699]]);
      let fieldz = 7589579.0 >= shielddoneK;
      do {
         shielddoneK += 3;
         if (fieldz) {
            break;
         }
      } while ((2 > (vipsportj.size % 1) && 2.48 > (1.27 - shielddoneK)) && fieldz);
      let middlewareQ = 7543571.0 <= shielddoneK;
      do {
         shielddoneK -= 2;
         if (middlewareQ) {
            break;
         }
      } while (((shielddoneK / (Math.max(vipsportj.size, 10))) == 1.97 && 5 == (1 & vipsportj.size)) && middlewareQ);
          let shielddoneV: Array<any> = [352, 680, 785];
         shielddoneK /= Math.max(1, vipsportj.size);
         shielddoneV = [2 / (Math.max(9, shielddoneV.length))];
      let telemetryk = shielddoneK <= 6549469.0;
      do {
          let carouselO: Array<any> = [591, 930];
          let topich: Map<any, any> = new Map([[String.fromCharCode(99,100,110,95,102,95,56,52,0),137], [String.fromCharCode(100,111,119,110,115,97,109,112,108,101,100,95,113,95,52,49,0),114]]);
          let whiteanimationlivel = String.fromCharCode(115,111,102,97,108,105,122,101,114,0);
          let libavformatq = String.fromCharCode(114,95,52,50,95,97,105,116,101,114,0);
          let yellowanimationliveD = false;
         shielddoneK *= vipsportj.size / (Math.max(2, whiteanimationlivel.length));
         carouselO = [(libavformatq == String.fromCharCode(116,0) ? libavformatq.length : carouselO.length)];
         topich.set(libavformatq, 2 * libavformatq.length);
         whiteanimationlivel += `${carouselO.length}`;
         yellowanimationliveD = carouselO.length > topich.size;
         if (telemetryk) {
            break;
         }
      } while (telemetryk && (Array.from(vipsportj.values()).includes(shielddoneK)));
         shielddoneK /= Math.max(2, 5);
      while ((shielddoneK * 5.7) < 5.97 || 5.7 < (vipsportj.size * shielddoneK)) {
         vipsportj = new Map([[`${vipsportj.size}`, parseInt(`${shielddoneK}`)]]);
         break;
      }
      storeB = new Map([[`${vipsportj.size}`, data8 / (Math.max(vipsportj.size, 5))]]);
   for (let z = 0; z < 2; z++) {
      middlebrightnessK += 1 & singaporeq.size;
   }
      libflippern %= Math.max(2, rewardvideo2.length);
   while (2 > (formJ.length - webviewi.length)) {
      formJ = [1 ^ storeB.size];
      break;
   }
   let activityu = libflippern >= 8794487;
   do {
       let greytickN = String.fromCharCode(119,95,52,57,95,115,104,97,100,101,114,0);
       let reward8 = 3;
       let moduled: Array<any> = [678, 771, 245];
       let predictionx = 0.0;
       let iconusero = String.fromCharCode(114,95,57,48,95,116,111,107,101,104,0);
      let libavcodecT = 7399057 >= reward8;
      do {
          let adulto = 4;
          let libreactnativeblobq: Map<any, any> = new Map([[String.fromCharCode(116,104,105,115,95,103,95,57,51,0),356], [String.fromCharCode(106,95,56,49,95,109,101,103,101,100,0),466], [String.fromCharCode(100,101,97,100,105,110,101,95,109,95,57,52,0),180]]);
          let nativeK = false;
          let notificationfillempty9 = 1.0;
         reward8 <<= Math.min(4, Math.abs(3));
         adulto /= Math.max(5, 2 | libreactnativeblobq.size);
         libreactnativeblobq.set(`${adulto}`, 1 + libreactnativeblobq.size);
         nativeK = 91.7 >= notificationfillempty9;
         notificationfillempty9 -= parseFloat(`${1}`);
         if (libavcodecT) {
            break;
         }
      } while ((4 <= (moduled.length + 4)) && libavcodecT);
          let bottomO: Array<any> = [805, 266, 751];
          let armvaL = String.fromCharCode(116,116,114,105,98,117,116,101,100,95,118,95,51,54,0);
         reward8 %= Math.max(3, 2);
         bottomO.push(bottomO.length);
         armvaL += "3";
         moduled = [parseInt(`${predictionx}`) ^ 2];
      if (3 > (reward8 << (Math.min(Math.abs(3), 1)))) {
         reward8 /= Math.max(2, greytickN.length);
      }
      if ((moduled.length << (Math.min(4, Math.abs(reward8)))) > 1 && (moduled.length << (Math.min(Math.abs(1), 1))) > 4) {
         moduled = [moduled.length ^ 2];
      }
      for (let v = 0; v < 1; v++) {
         reward8 &= moduled.length;
      }
      if (5 == (reward8 % 5) && 3 == (iconusero.length % (Math.max(5, 3)))) {
          let buttonk = 3.0;
         reward8 &= parseInt(`${predictionx}`);
         buttonk += 1;
      }
         moduled = [reward8];
      for (let c = 0; c < 2; c++) {
         reward8 %= Math.max(4, 2);
      }
      let native8 = String.fromCharCode(120,112,101,117,0) == iconusero;
      do {
         iconusero += `${iconusero.length}`;
         if (native8) {
            break;
         }
      } while ((reward8 < 4) && native8);
         moduled = [reward8 * 1];
         reward8 >>= Math.min(greytickN.length, 5);
      while (!greytickN.endsWith(`${predictionx}`)) {
         predictionx /= Math.max(1, (parseFloat(`${greytickN == String.fromCharCode(75,0) ? parseInt(`${predictionx}`) : greytickN.length}`)));
         break;
      }
      while ((reward8 + greytickN.length) > 5) {
         reward8 %= Math.max(parseInt(`${predictionx}`) & 2, 1);
         break;
      }
       let splashQ = false;
      libflippern &= moduled.length;
      if (activityu) {
         break;
      }
   } while ((1 == (data8 / 1)) && activityu);
    ww_runtime.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: wwCasting) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放IOS', {
          vod_id: item.vod_id,
        });

        
        ww_runtime.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <RightIcon
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
