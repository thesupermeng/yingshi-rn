import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { wawaWithCrown, wawaSellProfileinactive } from '@type/wawa_gradlew';
import { playVod, viewPlaylistDetails } from '@redux/actions/wawa_indicator';
import { View, StyleSheet, Text, TouchableOpacity, FlatList, Linking } from 'react-native';
import RightIcon from '@static/images/combinePredictionbuttonSelect.svg';
import VodCard from '../vod/wawa_mimo_footballtrophy';
import { useAppDispatch } from '@hooks/wawa_root';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import wawa_dacccfaabfbcbadeebddcabacdffdbc_video from '../../../../Umeng/wawa_dacccfaabfbcbadeebddcabacdffdbc_video';

interface wawaAwayShow {
  playlist: wawaWithCrown;
  titleStyle?: TextStyle;
}

type wawaBellreminderDisconnected = {
  item: wawaSellProfileinactive;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: wawaAwayShow) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let iconsettingw = 5;
    let iconorientationu = 1.0;
    let inouttargetyellow7 = String.fromCharCode(108,117,104,110,0);
    let trophyB = 5.0;
    let smallbrightnessV = String.fromCharCode(98,97,107,101,100,0);
    let airbnbstarselected9 = 3.0;
    let right0 = 0.0;
    let mimo4 = 2.0;
    let fileA = String.fromCharCode(112,105,100,0);
    let shrinkl = String.fromCharCode(114,101,117,112,108,111,97,100,105,110,103,0);
    let iconarrowrightJ = String.fromCharCode(97,114,114,97,121,115,0);
    let goalu = String.fromCharCode(103,101,116,105,110,116,0);
    let iconclosewhitewithbgA: Map<any, any> = new Map([[String.fromCharCode(97,114,114,97,121,0),String.fromCharCode(100,105,102,0)], [String.fromCharCode(97,110,97,108,121,115,105,115,0),String.fromCharCode(101,120,112,114,101,115,115,0)], [String.fromCharCode(109,97,100,101,98,121,0),String.fromCharCode(105,110,116,116,121,112,101,115,0)]]);
    let link3: Map<any, any> = new Map([[String.fromCharCode(117,116,99,0),647], [String.fromCharCode(109,97,120,105,109,117,109,0),884], [String.fromCharCode(114,103,116,99,117,0),183]]);
       let paginationV: Array<any> = [369, 49, 556];
         paginationV.push(paginationV.length);
         paginationV.push(paginationV.length * 1);
          let whatsappP = 0;
          let awayo = 4;
         paginationV.push(2);
         whatsappP %= Math.max(1, 2 << (Math.min(2, Math.abs(whatsappP))));
         awayo -= whatsappP;
      shrinkl = `${parseInt(`${mimo4}`) << (Math.min(5, Math.abs(iconsettingw)))}`;
      smallbrightnessV = `${1 & parseInt(`${airbnbstarselected9}`)}`;
       let weiboB = 4;
       let reactnavigationD = String.fromCharCode(115,121,115,99,116,108,0);
       let acceptedB = 0;
      while (reactnavigationD.length > 1) {
         reactnavigationD = `${acceptedB % (Math.max(2, weiboB))}`;
         break;
      }
         reactnavigationD += "2";
      let shootyesgoalS = 9724833 <= weiboB;
      do {
         weiboB <<= Math.min(Math.abs(reactnavigationD.length >> (Math.min(Math.abs(1), 5))), 4);
         if (shootyesgoalS) {
            break;
         }
      } while ((!reactnavigationD.includes(`${weiboB}`)) && shootyesgoalS);
      for (let o = 0; o < 2; o++) {
         acceptedB /= Math.max(reactnavigationD.length + 2, 2);
      }
         acceptedB += (reactnavigationD == String.fromCharCode(115,0) ? acceptedB : reactnavigationD.length);
         reactnavigationD = `${acceptedB ^ reactnavigationD.length}`;
       let overlayu = true;
       let shielddonex = 2;
       let u_county = 3;
      while (u_county > shielddonex) {
         u_county >>= Math.min(3, Math.abs(reactnavigationD.length - u_county));
         break;
      }
      trophyB += parseFloat(`${parseInt(`${trophyB}`) ^ 1}`);
   if (5 > (fileA.length >> (Math.min(Math.abs(4), 5)))) {
      trophyB *= parseFloat(`${2}`);
   }
      iconarrowrightJ = "1";

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

   for (let q = 0; q < 3; q++) {
      iconarrowrightJ = `${parseInt(`${iconorientationu}`) ^ 3}`;
   }
   let iconuserm = 9071411.0 >= right0;
   do {
      right0 /= Math.max(3, parseFloat(`${iconarrowrightJ.length - parseInt(`${right0}`)}`));
      if (iconuserm) {
         break;
      }
   } while ((5.32 < (airbnbstarselected9 + right0) || 5.32 < (airbnbstarselected9 + right0)) && iconuserm);
   if (fileA.startsWith(`${mimo4}`)) {
       let whitey = 3.0;
       let reddownarrowf = 3.0;
       let applicationx = String.fromCharCode(113,99,101,108,112,0);
       let internetW = String.fromCharCode(97,117,116,111,97,114,99,104,105,118,101,0);
       let encryptl = 2.0;
          let friendsY = String.fromCharCode(115,101,109,105,98,111,108,100,0);
         reddownarrowf *= parseInt(`${encryptl}`);
         friendsY += `${1 - friendsY.length}`;
      for (let k = 0; k < 3; k++) {
          let telegramL = 1.0;
          let sellmathbackgroundE: Map<any, any> = new Map([[String.fromCharCode(97,99,99,101,115,115,105,98,108,101,0),false ], [String.fromCharCode(100,111,110,97,116,105,111,110,0),false ], [String.fromCharCode(100,97,112,112,0),false ]]);
          let favoriteU = true;
         applicationx += "3";
         telegramL /= Math.max(3, 3);
         sellmathbackgroundE.set(`${telegramL}`, (parseInt(`${telegramL}`) >> (Math.min(5, Math.abs((favoriteU ? 4 : 5))))));
      }
         applicationx += `${applicationx.length}`;
       let matchdetailbgF: Map<any, any> = new Map([[String.fromCharCode(97,108,108,111,99,97,116,101,100,0),867], [String.fromCharCode(99,114,111,112,112,105,110,103,0),246], [String.fromCharCode(115,119,97,112,0),886]]);
       let gradleE: Map<any, any> = new Map([[String.fromCharCode(109,97,112,112,105,110,103,0),727], [String.fromCharCode(99,119,114,115,105,0),952]]);
       let defaultbasketballbg4 = 2.0;
       let noded = String.fromCharCode(99,97,118,101,97,116,0);
         defaultbasketballbg4 -= parseFloat(`${2 / (Math.max(4, noded.length))}`);
       let homeinactiveS: Map<any, any> = new Map([[String.fromCharCode(101,120,114,100,115,112,0),647], [String.fromCharCode(119,111,114,107,115,0),536], [String.fromCharCode(99,111,109,109,97,0),703]]);
       let dialog7: Map<any, any> = new Map([[String.fromCharCode(112,111,110,103,0),String.fromCharCode(110,105,103,104,116,0)], [String.fromCharCode(115,116,121,108,101,100,95,112,95,51,49,0),String.fromCharCode(115,105,103,104,97,110,100,108,101,114,0)]]);
      let roundC = 8352220 >= dialog7.size;
      do {
         dialog7 = new Map([[`${encryptl}`, parseInt(`${encryptl}`) * parseInt(`${reddownarrowf}`)]]);
         if (roundC) {
            break;
         }
      } while (((dialog7.size & gradleE.size) == 1 || 5 == (gradleE.size & 1)) && roundC);
         whitey -= parseFloat(`${gradleE.size ^ parseInt(`${whitey}`)}`);
         encryptl *= 1;
          let materialR = false;
         homeinactiveS = new Map([[`${matchdetailbgF.size}`, parseInt(`${encryptl}`)]]);
         materialR = !materialR;
       let entryQ = String.fromCharCode(115,116,114,105,107,101,116,104,114,111,117,103,104,0);
       let downloadK = String.fromCharCode(116,121,112,101,100,101,102,0);
         gradleE = new Map([[downloadK, entryQ.length]]);
          let closeW: Array<any> = [196, 535, 171];
         reddownarrowf -= (downloadK == String.fromCharCode(56,0) ? gradleE.size : downloadK.length);
         closeW.push(1);
      mimo4 += parseFloat(`${1}`);
   }
      airbnbstarselected9 *= parseFloat(`${shrinkl.length & parseInt(`${mimo4}`)}`);
   let settings7 = 8701223 >= shrinkl.length;
   do {
      shrinkl += `${(String.fromCharCode(121,0) == smallbrightnessV ? smallbrightnessV.length : parseInt(`${airbnbstarselected9}`))}`;
      if (settings7) {
         break;
      }
   } while (settings7 && (shrinkl.includes(`${fileA.length}`)));
    wawa_dacccfaabfbcbadeebddcabacdffdbc_video.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: wawaBellreminderDisconnected) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放IOS', {
          vod_id: item.vod_id,
        });

        
        wawa_dacccfaabfbcbadeebddcabacdffdbc_video.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <RightIcon
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
