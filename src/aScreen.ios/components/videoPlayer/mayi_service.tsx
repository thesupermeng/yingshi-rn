import React, { useState, memo, useCallback } from 'react';
import ShortVideoPlayer from '../../components/videoPlayer/mayi_footballfield';
import CollectionBottomSheet from '../../../components/miniCollection/mayi_small_guide';
import { IconGroup } from '../watchAnytime';

interface mayi_GoogleViews {
    thumbnail?: string;
    displayHeight: number;
    vod: any;
    inCollectionView?: boolean;
    setCollectionEpisode?: any;
    isPause: boolean;
    onManualPause: (value: boolean) => void;
    isShowVideo: boolean,
    currentDuration: number,
    updateVideoDuration: (duration: number) => any,
}

function ShortVod({
    vod,
    thumbnail,
    displayHeight = 0,
    inCollectionView = false,
    setCollectionEpisode,
    isPause = true,
    onManualPause,
    isShowVideo,
    currentDuration,
    updateVideoDuration,
}: mayi_GoogleViews) {
    const [isShowBottomSheet, setShowBottomSheet] = useState(false);
    const [currentVod, setVod] = useState(vod);

    const changeEpisode = useCallback((item: any, index: number) => {
        setVod(item);
        setCollectionEpisode(index);
        setShowBottomSheet(false);
    }, []);

    const openSheet = () => {
       let delegate_6ft = String.fromCharCode(116,104,114,101,115,104,111,108,100,115,95,110,95,56,57,0);
    let tickedo = 0.0;
    let iconlogout4 = 5.0;
    let analyticsS: Array<any> = [837, 761, 991];
    let exampleimageH = 0;
    let turn8 = String.fromCharCode(118,95,50,95,115,111,99,114,101,97,116,101,0);
    let shrinkH = String.fromCharCode(112,101,114,109,117,116,101,95,118,95,52,55,0);
    let typesL: Array<any> = [191, 653, 593];
    let pointO = 5.0;
    let iconarrowrightx: Map<any, any> = new Map([[String.fromCharCode(117,110,114,101,115,111,108,118,97,98,108,101,95,112,95,49,49,0),true ], [String.fromCharCode(97,95,53,54,95,115,117,98,105,109,97,103,101,0),false ]]);
    let iconbackwhitey = String.fromCharCode(104,97,118,105,110,103,95,118,95,50,51,0);
   let fullscreenmax2 = String.fromCharCode(118,57,54,0) == shrinkH;
   do {
      shrinkH += `${parseInt(`${iconlogout4}`)}`;
      if (fullscreenmax2) {
         break;
      }
   } while ((shrinkH.length <= turn8.length) && fullscreenmax2);
   let libturbomodulejsijnil = 5616028 >= typesL.length;
   do {
       let classesP = 5;
      let source5 = classesP <= 7418995;
      do {
         classesP |= classesP;
         if (source5) {
            break;
         }
      } while (source5 && (classesP < classesP));
          let formE: Array<any> = [402, 108];
          let nendJ: Array<any> = [959, 251];
         classesP /= Math.max(formE.length, 5);
         formE = [3 * nendJ.length];
         nendJ = [nendJ.length];
      let yellowtoredQ = classesP <= 6602380;
      do {
         classesP ^= classesP >> (Math.min(5, Math.abs(classesP)));
         if (yellowtoredQ) {
            break;
         }
      } while (yellowtoredQ && ((classesP ^ classesP) < 2 || (classesP ^ classesP) < 2));
      typesL.push(1 + typesL.length);
      if (libturbomodulejsijnil) {
         break;
      }
   } while (((iconlogout4 * 1.60) >= 2.41) && libturbomodulejsijnil);
   for (let x = 0; x < 2; x++) {
      tickedo -= parseFloat(`${exampleimageH}`);
   }
   if (delegate_6ft.length == shrinkH.length) {
      delegate_6ft += "1";
   }
      iconlogout4 *= parseFloat(`${exampleimageH}`);
   if (2.51 >= (tickedo - iconlogout4)) {
      tickedo -= parseFloat(`${exampleimageH + parseInt(`${iconlogout4}`)}`);
   }
       let penaltyshootnogoalm = String.fromCharCode(105,97,100,115,116,95,100,95,57,48,0);
       let progressk = String.fromCharCode(99,104,101,99,107,95,113,95,52,53,0);
       let leakcheckeru = 3.0;
          let sans2 = false;
         leakcheckeru /= Math.max(parseFloat(`${2 >> (Math.min(5, progressk.length))}`), 4);
         sans2 = (sans2 ? !sans2 : !sans2);
         progressk += `${progressk.length}`;
      for (let p = 0; p < 3; p++) {
         penaltyshootnogoalm += `${1 + parseInt(`${leakcheckeru}`)}`;
      }
       let profilepic5: Array<any> = [160, 611];
       let mode4: Array<any> = [String.fromCharCode(97,100,114,109,95,101,95,53,57,0), String.fromCharCode(112,114,101,99,111,109,112,111,115,101,100,95,107,95,57,56,0)];
         profilepic5 = [1 & mode4.length];
      if (penaltyshootnogoalm.endsWith(`${profilepic5.length}`)) {
         profilepic5 = [parseInt(`${leakcheckeru}`)];
      }
         leakcheckeru /= Math.max(parseFloat(`${profilepic5.length}`), 2);
         leakcheckeru += parseFloat(`${2}`);
          let iconarrowrightoranger = 0.0;
          let v_hash3 = String.fromCharCode(105,95,50,54,95,99,104,101,99,107,109,97,114,107,115,0);
          let homeloadingP = true;
         penaltyshootnogoalm += `${(penaltyshootnogoalm == String.fromCharCode(56,0) ? penaltyshootnogoalm.length : mode4.length)}`;
         iconarrowrightoranger /= Math.max(2, parseFloat(`${v_hash3.length >> (Math.min(2, Math.abs(parseInt(`${iconarrowrightoranger}`))))}`));
         v_hash3 += "1";
         homeloadingP = String.fromCharCode(120,0) == v_hash3;
      delegate_6ft += `${(delegate_6ft == String.fromCharCode(122,0) ? delegate_6ft.length : parseInt(`${leakcheckeru}`))}`;
      analyticsS.push(exampleimageH >> (Math.min(2, Math.abs(3))));
   while (!typesL.includes(tickedo)) {
      typesL = [parseInt(`${tickedo}`)];
      break;
   }
   if ((iconlogout4 - 4.78) >= 3.30) {
      iconlogout4 *= parseFloat(`${parseInt(`${tickedo}`)}`);
   }
   let submitt = exampleimageH <= 7274306;
   do {
       let hongkongn = String.fromCharCode(102,100,101,99,95,118,95,55,54,0);
          let buttonW = String.fromCharCode(108,95,50,54,95,111,118,112,97,103,101,0);
         hongkongn += `${buttonW.length << (Math.min(4, hongkongn.length))}`;
      while (hongkongn.length == hongkongn.length) {
         hongkongn = `${hongkongn.length}`;
         break;
      }
      while (hongkongn != String.fromCharCode(102,0) || hongkongn != String.fromCharCode(106,0)) {
         hongkongn = `${hongkongn.length + 3}`;
         break;
      }
      exampleimageH += exampleimageH;
      if (submitt) {
         break;
      }
   } while (submitt && (exampleimageH > 1));
       let weather_ = String.fromCharCode(114,101,97,99,104,97,98,105,108,105,116,121,95,108,95,51,51,0);
         weather_ += `${weather_.length}`;
       let predictiondefaultl = true;
       let modalK = true;
          let libapminsightaB = String.fromCharCode(115,105,110,100,101,120,95,50,95,53,53,0);
          let dangerd = String.fromCharCode(103,95,52,95,97,116,116,0);
          let disconnectedH: Map<any, any> = new Map([[String.fromCharCode(105,109,112,114,101,115,115,105,111,110,115,95,122,95,51,57,0),true ], [String.fromCharCode(103,114,111,117,112,105,110,103,95,117,95,52,49,0),true ]]);
         weather_ += `${(2 >> (Math.min(3, Math.abs((modalK ? 1 : 3)))))}`;
         libapminsightaB += `${dangerd.length}`;
         dangerd += `${3 & disconnectedH.size}`;
         disconnectedH.set(dangerd, dangerd.length >> (Math.min(Math.abs(2), 3)));
      shrinkH += `${delegate_6ft.length + 1}`;
   let predictionactivec = typesL.length >= 6916188;
   do {
      typesL.push(typesL.length);
      if (predictionactivec) {
         break;
      }
   } while (predictionactivec && ((5 | shrinkH.length) > 1 || 1 > (shrinkH.length | 5)));
      tickedo += parseFloat(`${1 << (Math.min(5, analyticsS.length))}`);
      pointO += parseFloat(`${shrinkH.length}`);
      analyticsS.push(analyticsS.length >> (Math.min(typesL.length, 5)));
      exampleimageH += shrinkH.length;
   for (let o = 0; o < 2; o++) {
      shrinkH = `${(String.fromCharCode(116,0) == turn8 ? turn8.length : parseInt(`${iconlogout4}`))}`;
   }

        setShowBottomSheet(true);
    }

    const maxLength = 10;
    const vodName = currentVod?.mini_video_original_video_name.length > maxLength
        ? currentVod?.mini_video_original_video_name.substring(0, maxLength) + '...'
        : currentVod?.mini_video_original_video_name;

    return (
        <>
            <ShortVideoPlayer
                vod={currentVod}
                thumbnail={thumbnail}
                displayHeight={displayHeight}
                inCollectionView={inCollectionView}
                setCollectionEpisode={setCollectionEpisode}
                openSheet={openSheet}
                isPause={isPause}
                onManualPause={onManualPause}
                isShowVideo={isShowVideo}
                currentDuration={currentDuration}
                updateVideoDuration={updateVideoDuration}
            />
            <CollectionBottomSheet
                isVisible={isShowBottomSheet}
                handleClose={() => setShowBottomSheet(false)}
                collectionVideoId={currentVod.mini_video_id}
                collectionId={currentVod.mini_video_heji_id}
                collectionName={currentVod.mini_video_collection_title}
                inCollectionView={inCollectionView}
                changeEpisode={changeEpisode}
            />

            <IconGroup
                vodId={currentVod.mini_video_id}
                vodName={vodName}
                comments={currentVod?.comments}
            />
        </>
    )

}

export default memo(ShortVod)