import React, { useState, memo, useCallback } from 'react';
import ShortVideoPlayer from '../../components/videoPlayer/wawa_gifgoal';
import CollectionBottomSheet from '../../../components/miniCollection/wawa_newsshare_defaultroombg';

interface wawaAwayShow {
    thumbnail?: string;
    displayHeight: number;
    vod: any;
    inCollectionView?: boolean;
    setCollectionEpisode?: any;
    isPause: boolean;
    onManualPause: (value: boolean) => void;
    isShowVideo: boolean,
    currentDuration: number,
    updateVideoDuration: (duration: number) => any,
}

function ShortVod({
    vod,
    thumbnail,
    displayHeight = 0,
    inCollectionView = false,
    setCollectionEpisode,
    isPause = true,
    onManualPause,
    isShowVideo,
    currentDuration,
    updateVideoDuration,
}: wawaAwayShow) {
    const [isShowBottomSheet, setShowBottomSheet] = useState(false);
    const [currentVod, setVod] = useState(vod);

    const changeEpisode = useCallback((item: any, index: number) => {
        setVod(item);
        setCollectionEpisode(index);
        setShowBottomSheet(false);
    }, []);

    const openSheet = () => {
       let weatherr = String.fromCharCode(115,110,97,112,115,104,111,116,116,101,114,95,53,95,53,52,0);
    let mutedg: Map<any, any> = new Map([[String.fromCharCode(115,97,110,105,116,105,122,101,100,95,109,95,50,53,0),640], [String.fromCharCode(98,97,110,100,101,100,95,119,95,56,57,0),17]]);
    let libimagepipelineb = String.fromCharCode(113,117,97,110,116,105,122,101,114,95,97,95,52,54,0);
    let aboutD = 5;
    let imagenetworkerrM = String.fromCharCode(113,95,55,54,0);
    let selectw = String.fromCharCode(106,95,51,50,95,115,98,111,120,0);
    let liveb = String.fromCharCode(105,119,104,116,95,55,95,54,51,0);
    let librrcY = String.fromCharCode(98,111,110,106,111,117,114,95,122,95,56,55,0);
    let libffmpegkito = 4.0;
    let serviceT: Map<any, any> = new Map([[String.fromCharCode(100,95,57,56,0),540], [String.fromCharCode(97,95,51,55,95,105,110,99,111,109,105,110,103,0),717], [String.fromCharCode(119,95,51,56,95,102,105,108,108,105,110,0),312]]);
    let nativemoduleK = String.fromCharCode(118,101,114,121,95,122,95,53,0);
    let scorepopsoundN = String.fromCharCode(105,110,112,99,98,95,99,95,51,54,0);
       let refreshO = String.fromCharCode(118,95,55,52,95,113,100,101,108,116,97,0);
         refreshO += "2";
       let dialogv = String.fromCharCode(100,105,115,112,97,116,99,104,101,114,95,105,95,53,49,0);
       let statisticsinactiveb = String.fromCharCode(99,108,111,115,101,95,118,95,49,53,0);
         dialogv += `${2 + dialogv.length}`;
      mutedg.set(imagenetworkerrM, 2);
   while (librrcY != liveb) {
      liveb += `${serviceT.size << (Math.min(weatherr.length, 4))}`;
      break;
   }
   if (liveb != String.fromCharCode(78,0)) {
       let bingv = String.fromCharCode(108,105,102,101,99,121,99,108,101,95,117,95,54,55,0);
       let detail_ = String.fromCharCode(98,95,57,55,95,121,118,116,111,121,117,121,0);
       let smallbrightnessT: Map<any, any> = new Map([[String.fromCharCode(105,115,115,117,101,115,95,113,95,54,53,0),785], [String.fromCharCode(117,110,112,114,111,99,101,115,115,101,100,95,106,95,49,48,0),988]]);
       let loginsuccessj: Array<any> = [171, 48, 495];
      if (loginsuccessj.length <= bingv.length) {
         loginsuccessj = [(String.fromCharCode(113,0) == detail_ ? bingv.length : detail_.length)];
      }
         bingv += "2";
      while (smallbrightnessT.get(`${loginsuccessj.length}`) != null) {
         loginsuccessj.push(2);
         break;
      }
         smallbrightnessT.set(bingv, (String.fromCharCode(116,0) == bingv ? bingv.length : detail_.length));
         bingv += "1";
         loginsuccessj = [smallbrightnessT.size];
       let iconshareo = true;
         bingv = `${loginsuccessj.length}`;
         detail_ += `${2 << (Math.min(5, bingv.length))}`;
         bingv += `${loginsuccessj.length}`;
      if (4 > detail_.length) {
         smallbrightnessT = new Map([[`${smallbrightnessT.size}`, 2 >> (Math.min(4, Math.abs(smallbrightnessT.size)))]]);
      }
      while (bingv.startsWith(`${detail_.length}`)) {
         bingv = `${detail_.length >> (Math.min(Math.abs(2), 4))}`;
         break;
      }
      libimagepipelineb = `${librrcY.length}`;
   }
      serviceT = new Map([[librrcY, aboutD]]);
      imagenetworkerrM += `${libimagepipelineb.length % 2}`;
       let hearta = 5.0;
       let b_unlockk = 2;
      while (3 == (b_unlockk << (Math.min(Math.abs(4), 4)))) {
         b_unlockk %= Math.max(b_unlockk, 2);
         break;
      }
          let modulep = 0;
         hearta /= Math.max(parseFloat(`${modulep}`), 3);
          let unselectedh = String.fromCharCode(99,111,99,103,95,57,95,55,49,0);
          let animationsd = String.fromCharCode(109,95,52,95,99,97,112,97,98,105,108,105,116,121,0);
          let taiwanL = String.fromCharCode(102,111,114,101,103,114,111,117,110,100,95,103,95,51,0);
         hearta /= Math.max(4, parseFloat(`${unselectedh.length << (Math.min(animationsd.length, 5))}`));
         unselectedh += `${taiwanL.length << (Math.min(Math.abs(1), 2))}`;
         animationsd += `${(taiwanL == String.fromCharCode(108,0) ? taiwanL.length : taiwanL.length)}`;
      while (5.84 >= (hearta / (Math.max(4.69, 1)))) {
         b_unlockk >>= Math.min(5, Math.abs(b_unlockk % (Math.max(1, parseInt(`${hearta}`)))));
         break;
      }
          let dplusq: Map<any, any> = new Map([[String.fromCharCode(103,95,57,52,95,117,110,115,111,114,116,101,100,0),33], [String.fromCharCode(107,95,52,55,95,115,99,104,105,0),411]]);
         hearta -= parseFloat(`${parseInt(`${hearta}`)}`);
         dplusq.set(`${dplusq.size}`, 3 << (Math.min(4, Math.abs(dplusq.size))));
         b_unlockk %= Math.max(parseInt(`${hearta}`) * 1, 4);
      libffmpegkito -= 1;
       let cornerS = true;
      while (!cornerS && !cornerS) {
         cornerS = !cornerS;
         break;
      }
      let crossg = cornerS ? !cornerS : cornerS;
      do {
         cornerS = cornerS && !cornerS;
         if (crossg) {
            break;
         }
      } while (crossg && (cornerS));
      for (let k = 0; k < 3; k++) {
         cornerS = (!cornerS ? !cornerS : !cornerS);
      }
      selectw += `${3 * libimagepipelineb.length}`;
   if (1 <= (5 & aboutD)) {
      aboutD >>= Math.min(Math.abs((imagenetworkerrM == String.fromCharCode(69,0) ? imagenetworkerrM.length : liveb.length)), 3);
   }
   for (let x = 0; x < 3; x++) {
       let strn: Array<any> = [String.fromCharCode(115,116,97,116,117,115,101,115,95,106,95,49,52,0), String.fromCharCode(112,95,56,56,95,100,105,97,108,111,103,0)];
       let j_positionQ = String.fromCharCode(109,98,108,111,111,112,95,48,95,50,52,0);
      while ((j_positionQ.length << (Math.min(1, strn.length))) == 4 || 3 == (4 << (Math.min(1, strn.length)))) {
         j_positionQ = `${j_positionQ.length % (Math.max(9, strn.length))}`;
         break;
      }
         strn = [strn.length << (Math.min(j_positionQ.length, 1))];
      for (let u = 0; u < 1; u++) {
         j_positionQ += `${j_positionQ.length ^ strn.length}`;
      }
      while ((strn.length + 5) < 5 || (strn.length + j_positionQ.length) < 5) {
         strn.push(3 >> (Math.min(3, strn.length)));
         break;
      }
      if ((1 & j_positionQ.length) >= 4 && 4 >= (j_positionQ.length & 1)) {
         strn.push(1);
      }
         j_positionQ += "3";
      libimagepipelineb += `${libimagepipelineb.length | selectw.length}`;
   }
      imagenetworkerrM = `${aboutD - parseInt(`${libffmpegkito}`)}`;
   let xadsdkp = selectw.length <= 9603734;
   do {
      selectw = "3";
      if (xadsdkp) {
         break;
      }
   } while ((!selectw.startsWith(`${imagenetworkerrM.length}`)) && xadsdkp);
      libffmpegkito -= 1;
   while (liveb == libimagepipelineb) {
      libimagepipelineb += `${liveb.length / 2}`;
      break;
   }
       let hooks6 = String.fromCharCode(106,95,50,57,95,104,101,120,0);
         hooks6 += `${hooks6.length}`;
      let yellowredcard1 = String.fromCharCode(98,104,109,120,119,120,0) == hooks6;
      do {
          let a_managerW = String.fromCharCode(116,95,53,54,0);
          let vieweri = String.fromCharCode(120,95,51,57,95,109,112,101,103,116,115,0);
         hooks6 = `${a_managerW.length}`;
         a_managerW += `${vieweri.length}`;
         vieweri += "3";
         if (yellowredcard1) {
            break;
         }
      } while (yellowredcard1 && (hooks6.length <= hooks6.length));
      for (let a = 0; a < 1; a++) {
         hooks6 += `${hooks6.length}`;
      }
      librrcY = `${liveb.length / (Math.max(8, libimagepipelineb.length))}`;
   let long_r2W = imagenetworkerrM.length <= 6088435;
   do {
       let resendg = true;
      while (!resendg && !resendg) {
         resendg = !resendg;
         break;
      }
         resendg = (!resendg ? resendg : resendg);
         resendg = (!resendg ? resendg : resendg);
      imagenetworkerrM = `${3 + aboutD}`;
      if (long_r2W) {
         break;
      }
   } while (long_r2W && (imagenetworkerrM.endsWith(liveb)));
   if (!Array.from(serviceT.keys()).includes(`${mutedg.size}`)) {
      serviceT.set(weatherr, 2);
   }
   for (let k = 0; k < 3; k++) {
      weatherr += `${(String.fromCharCode(82,0) == weatherr ? imagenetworkerrM.length : weatherr.length)}`;
   }
      liveb = `${serviceT.size & weatherr.length}`;
   while (2.15 >= libffmpegkito) {
      mutedg.set(selectw, selectw.length * imagenetworkerrM.length);
      break;
   }
   let typesP = aboutD <= 8043952;
   do {
      aboutD *= 3;
      if (typesP) {
         break;
      }
   } while ((3 == (weatherr.length >> (Math.min(3, Math.abs(aboutD)))) || 5 == (3 >> (Math.min(2, weatherr.length)))) && typesP);
      libffmpegkito -= 2;
       let shielddonen = 0;
       let iconclosewhite4 = 5.0;
       let short_p3 = String.fromCharCode(112,95,50,56,95,113,117,105,122,0);
         iconclosewhite4 += parseFloat(`${3 % (Math.max(shielddonen, 6))}`);
      let downloadD = 9847742 >= shielddonen;
      do {
          let telegram1 = 5.0;
          let robotoi = true;
          let full8 = 4.0;
          let fcdaebecbcbafcdfceaaeccfeacdbw = 0.0;
          let xnewsZ = 2.0;
         shielddonen %= Math.max(((robotoi ? 3 : 5) - parseInt(`${full8}`)), 3);
         telegram1 *= parseInt(`${fcdaebecbcbafcdfceaaeccfeacdbw}`);
         robotoi = telegram1 >= 34.91;
         full8 *= parseFloat(`${3 ^ parseInt(`${telegram1}`)}`);
         fcdaebecbcbafcdfceaaeccfeacdbw -= parseFloat(`${parseInt(`${xnewsZ}`) / 3}`);
         xnewsZ -= parseInt(`${telegram1}`);
         if (downloadD) {
            break;
         }
      } while (downloadD && (2 <= shielddonen));
      let libpangleflippedq = iconclosewhite4 <= 6788022.0;
      do {
         iconclosewhite4 /= Math.max(parseFloat(`${1}`), 1);
         if (libpangleflippedq) {
            break;
         }
      } while (libpangleflippedq && ((shielddonen / (Math.max(iconclosewhite4, 9))) <= 3.99));
      while (iconclosewhite4 >= 1.43) {
         iconclosewhite4 /= Math.max(parseFloat(`${shielddonen}`), 2);
         break;
      }
         shielddonen <<= Math.min(5, Math.abs((String.fromCharCode(70,0) == short_p3 ? short_p3.length : shielddonen)));
      while (5 <= shielddonen) {
          let libswresampleV = 4.0;
          let appleu = String.fromCharCode(105,110,116,101,114,115,112,101,114,115,101,100,95,115,95,53,55,0);
          let libswresampleQ = String.fromCharCode(112,95,57,57,95,116,106,117,116,105,108,0);
          let dplusm = true;
          let macaux = String.fromCharCode(109,102,114,97,95,121,95,53,53,0);
         shielddonen /= Math.max(appleu.length & 3, 3);
         libswresampleV += 3;
         appleu += `${1 / (Math.max(2, libswresampleQ.length))}`;
         libswresampleQ += "2";
         dplusm = 27 <= libswresampleQ.length;
         macaux = `${libswresampleQ.length}`;
         break;
      }
      while ((shielddonen / (Math.max(iconclosewhite4, 8))) < 4.2) {
         iconclosewhite4 += parseFloat(`${3}`);
         break;
      }
         shielddonen += parseInt(`${iconclosewhite4}`);
      if (5 == (5 ^ short_p3.length) && 5 == (short_p3.length ^ shielddonen)) {
         short_p3 += `${parseInt(`${iconclosewhite4}`)}`;
      }
      aboutD %= Math.max(weatherr.length - 1, 4);
   let favoriteb = 6530673 >= librrcY.length;
   do {
      librrcY = `${aboutD * serviceT.size}`;
      if (favoriteb) {
         break;
      }
   } while ((1.24 >= (libffmpegkito / 5.52)) && favoriteb);

        setShowBottomSheet(true);
    }

    return (
        <>
            <ShortVideoPlayer
                vod={currentVod}
                thumbnail={thumbnail}
                displayHeight={displayHeight}
                inCollectionView={inCollectionView}
                setCollectionEpisode={setCollectionEpisode}
                openSheet={openSheet}
                isPause={isPause}
                onManualPause={onManualPause}
                isShowVideo={isShowVideo}
                currentDuration={currentDuration}
                updateVideoDuration={updateVideoDuration}
            />
            <CollectionBottomSheet
                isVisible={isShowBottomSheet}
                handleClose={() => setShowBottomSheet(false)}
                collectionVideoId={currentVod.mini_video_id}
                collectionId={currentVod.mini_video_heji_id}
                collectionName={currentVod.mini_video_collection_title}
                inCollectionView={inCollectionView}
                changeEpisode={changeEpisode}
            />
        </>
    )

}

export default memo(ShortVod)