import { useTheme } from "@react-navigation/native";
import React, { useState } from "react";
import { View, Text, TouchableOpacity, StyleSheet, ActionSheetIOS } from "react-native";
import FastImage from "react-native-fast-image";
import { WQRReducer } from "@type/wpk_long";
import { SMBing } from "@utility/sa_crown";
import { useAppDispatch } from "@hooks/kg_index";
import { ReportBottomSheet } from "../bottomSheet/r_upgrade";

interface XFillButton {
  commentItem: WQRReducer;
}

enum FTempUnread {
  色情低俗 = '色情低俗',
  广告 = '广告',
  令人恶心 = '令人恶心',
  违纪违法 = '违纪违法',
  政治敏感 = '政治敏感',
}

export const CommentCard = ({ commentItem }: XFillButton) => {
  const { textVariants, colors } = useTheme();
  const dispatch = useAppDispatch();

  const [showReportModel, setShowReportModel] = useState(false);

  const handlePress = async () => {
       let line5 = String.fromCharCode(102,116,115,121,121,0);
    let alerti: Map<any, any> = new Map([[String.fromCharCode(99,121,99,108,101,115,0),381], [String.fromCharCode(102,114,111,109,102,101,0),430]]);
    let watchj = 1.0;
    let sendB: Map<any, any> = new Map([[String.fromCharCode(104,97,115,104,100,101,115,116,114,111,121,0),String.fromCharCode(116,114,97,110,115,102,111,114,109,101,114,0)], [String.fromCharCode(101,120,101,99,117,116,101,100,0),String.fromCharCode(117,110,105,116,121,0)]]);
    let hejiY: Array<any> = [String.fromCharCode(105,110,115,101,110,115,105,116,105,118,101,0), String.fromCharCode(105,119,97,108,115,104,0)];
    let long_qk = String.fromCharCode(117,110,115,105,103,110,101,100,0);
    let middlewareF = 0.0;
    let privilegeV = String.fromCharCode(107,98,100,119,105,110,0);
    let stringx: Map<any, any> = new Map([[String.fromCharCode(109,105,103,114,97,116,105,111,110,0),214], [String.fromCharCode(109,107,118,109,117,120,101,114,0),898]]);
    let sheetS = 2;
    let leftz = String.fromCharCode(115,111,114,116,105,110,103,0);
   while ((long_qk.length >> (Math.min(Math.abs(2), 1))) == 3 || 3 == (hejiY.length >> (Math.min(Math.abs(2), 4)))) {
       let plusH = 5;
       let memberQ = 2.0;
       let sheetF: Map<any, any> = new Map([[String.fromCharCode(115,116,114,105,100,101,97,98,108,101,0),633], [String.fromCharCode(100,111,117,98,108,101,115,115,116,114,0),490], [String.fromCharCode(114,101,116,97,105,110,115,0),458]]);
       let network0: Array<any> = [990, 733, 875];
      if ((4 << (Math.min(4, Math.abs(sheetF.size)))) > 3) {
          let controlF = String.fromCharCode(101,120,99,101,112,116,0);
         sheetF = new Map([[`${sheetF.size}`, 3 % (Math.max(4, controlF.length))]]);
      }
      for (let j = 0; j < 3; j++) {
         sheetF = new Map([[`${sheetF.size}`, plusH / (Math.max(3, 10))]]);
      }
         plusH &= sheetF.size - 3;
       let feedback2: Array<any> = [String.fromCharCode(114,101,108,105,97,98,108,101,0), String.fromCharCode(103,114,97,110,112,111,115,0), String.fromCharCode(100,111,119,110,115,116,114,101,97,109,0)];
       let auto_kA: Array<any> = [String.fromCharCode(101,115,99,97,112,101,115,0), String.fromCharCode(110,101,111,110,0)];
      let combineB = 9239750 <= feedback2.length;
      do {
         feedback2 = [sheetF.size >> (Math.min(Math.abs(3), 5))];
         if (combineB) {
            break;
         }
      } while ((sheetF.get(`${feedback2.length}`) == null) && combineB);
      for (let r = 0; r < 1; r++) {
          let logoZ = 5.0;
         feedback2.push(1 - parseInt(`${logoZ}`));
      }
         plusH /= Math.max(parseInt(`${memberQ}`), 4);
          let xvodi: Array<any> = [String.fromCharCode(108,105,109,105,116,101,100,0), String.fromCharCode(115,107,105,112,112,101,100,0), String.fromCharCode(97,110,111,110,121,109,111,117,115,0)];
          let arrowq: Array<any> = [207, 303, 561];
          let championq: Array<any> = [76, 73];
         auto_kA = [championq.length / (Math.max(10, auto_kA.length))];
         xvodi = [arrowq.length % (Math.max(xvodi.length, 5))];
         arrowq.push(xvodi.length ^ arrowq.length);
         championq.push(2 * arrowq.length);
      while ((network0.length / (Math.max(10, memberQ))) > 2.44 || (2 << (Math.min(3, network0.length))) > 3) {
         memberQ /= Math.max(1, 3);
         break;
      }
         sheetF = new Map([[`${feedback2.length}`, feedback2.length]]);
      for (let d = 0; d < 1; d++) {
          let anythinkk: Array<any> = [String.fromCharCode(103,101,111,103,114,97,112,104,105,99,97,108,0), String.fromCharCode(99,114,111,112,0)];
          let downloaderE = String.fromCharCode(117,105,110,116,0);
          let string3: Array<any> = [String.fromCharCode(109,117,108,116,105,112,108,121,105,110,103,0), String.fromCharCode(116,101,97,109,115,0), String.fromCharCode(97,116,111,102,0)];
          let awayv = 4.0;
          let carouselI = String.fromCharCode(99,112,108,120,0);
         auto_kA = [string3.length >> (Math.min(5, Math.abs(parseInt(`${awayv}`))))];
         anythinkk.push(downloaderE.length);
         downloaderE = `${downloaderE.length}`;
         string3.push(3);
         awayv *= parseFloat(`${anythinkk.length / (Math.max(3, 8))}`);
         carouselI += `${downloaderE.length}`;
      }
          let modalo = 2.0;
          let t_lockL = 4.0;
         memberQ /= Math.max(network0.length | parseInt(`${t_lockL}`), 4);
         modalo += 1 % (Math.max(parseInt(`${modalo}`), 9));
         t_lockL += parseFloat(`${parseInt(`${modalo}`)}`);
      hejiY = [1 / (Math.max(7, alerti.size))];
      break;
   }
       let minivod4: Array<any> = [836, 581, 759];
       let report_ = String.fromCharCode(121,117,118,97,0);
         report_ = "1";
      let morez = minivod4.length <= 6550129;
      do {
         minivod4.push((report_ == String.fromCharCode(104,0) ? minivod4.length : report_.length));
         if (morez) {
            break;
         }
      } while (morez && (4 >= (minivod4.length % 5) && 4 >= (minivod4.length % 5)));
      for (let w = 0; w < 3; w++) {
         report_ += "2";
      }
         minivod4 = [report_.length >> (Math.min(Math.abs(1), 5))];
         report_ = `${minivod4.length | report_.length}`;
         minivod4.push(report_.length ^ 1);
      line5 += "1";
   let statisticsR = alerti.size >= 8754620;
   do {
      alerti.set(`${long_qk}`, alerti.size);
      if (statisticsR) {
         break;
      }
   } while (statisticsR && ((alerti.size & 5) >= 2));
   while (4 == line5.length) {
      middlewareF /= Math.max((parseFloat(`${String.fromCharCode(75,0) == line5 ? parseInt(`${watchj}`) : line5.length}`)), 2);
      break;
   }
   let renew7 = middlewareF <= 5189728.0;
   do {
      middlewareF *= parseFloat(`${sendB.size % 1}`);
      if (renew7) {
         break;
      }
   } while ((5.13 <= (middlewareF + 4.51)) && renew7);
   while (middlewareF == parseFloat(`${sendB.size}`)) {
       let inviteC = String.fromCharCode(115,98,97,100,0);
       let whatsapp7 = 2.0;
       let bootsplash4 = String.fromCharCode(105,109,112,108,101,109,101,110,116,97,116,105,111,110,0);
      for (let i = 0; i < 2; i++) {
          let page9: Map<any, any> = new Map([[String.fromCharCode(109,111,110,111,115,112,97,99,101,100,0),856], [String.fromCharCode(105,102,105,108,116,101,114,0),235]]);
          let backwardk = false;
          let appsq = String.fromCharCode(100,101,115,116,105,110,97,116,105,111,110,115,0);
         bootsplash4 = `${(inviteC == String.fromCharCode(103,0) ? appsq.length : inviteC.length)}`;
         page9.set(`${backwardk}`, 2);
         appsq += `${1 << (Math.min(2, Math.abs(page9.size)))}`;
      }
         whatsapp7 /= Math.max(bootsplash4.length, 4);
       let moreg = 1.0;
       let backwardv = false;
      for (let f = 0; f < 3; f++) {
         moreg -= (parseFloat(`${(backwardv ? 2 : 2) >> (Math.min(Math.abs(parseInt(`${whatsapp7}`)), 5))}`));
      }
         backwardv = parseFloat(`${bootsplash4.length}`) == moreg;
      while (1.24 > whatsapp7) {
          let leaguet = 2.0;
         whatsapp7 += inviteC.length / (Math.max(4, parseInt(`${moreg}`)));
         leaguet *= parseInt(`${leaguet}`) << (Math.min(4, Math.abs(3)));
         break;
      }
          let heart6: Map<any, any> = new Map([[String.fromCharCode(116,101,109,112,108,97,116,101,100,0),String.fromCharCode(115,117,112,101,114,118,105,101,119,0)], [String.fromCharCode(112,101,114,99,101,110,116,0),String.fromCharCode(112,114,111,103,114,101,115,105,118,101,0)]]);
          let user5 = 4;
         bootsplash4 += `${1 / (Math.max(2, heart6.size))}`;
         heart6.set(`${user5}`, user5);
      for (let o = 0; o < 1; o++) {
         whatsapp7 *= (parseInt(`${moreg}`) * (backwardv ? 1 : 1));
      }
      middlewareF /= Math.max((parseFloat(`${String.fromCharCode(109,0) == privilegeV ? hejiY.length : privilegeV.length}`)), 4);
      break;
   }
      middlewareF += parseFloat(`${alerti.size * 3}`);
      privilegeV = `${(String.fromCharCode(90,0) == privilegeV ? long_qk.length : privilegeV.length)}`;
       let circleQ = String.fromCharCode(104,101,97,118,121,0);
       let disconnectedP = true;
       let pagination0 = 0.0;
       let pressurey = 4.0;
         pagination0 /= Math.max((parseFloat(`${circleQ.length << (Math.min(4, Math.abs((disconnectedP ? 1 : 1))))}`)), 3);
         disconnectedP = (23 == (circleQ.length / (Math.max(3, (disconnectedP ? circleQ.length : 23)))));
         pressurey += parseFloat(`${parseInt(`${pagination0}`)}`);
      for (let e = 0; e < 2; e++) {
          let telegramt = 2.0;
          let emoji0 = 0.0;
          let robotod = String.fromCharCode(99,104,111,111,115,105,110,103,0);
          let rankR = 0.0;
          let usernameY = String.fromCharCode(102,101,116,99,104,0);
         disconnectedP = (parseFloat(`${robotod.length}`) - telegramt) == 36.70;
         telegramt *= (parseFloat(`${String.fromCharCode(67,0) == usernameY ? usernameY.length : parseInt(`${emoji0}`)}`));
         emoji0 *= parseFloat(`${parseInt(`${rankR}`)}`);
         robotod = `${parseInt(`${emoji0}`)}`;
      }
       let configurex: Map<any, any> = new Map([[String.fromCharCode(97,101,115,110,105,0),String.fromCharCode(98,97,115,101,105,115,107,101,121,0)], [String.fromCharCode(112,117,116,110,117,109,112,97,115,115,101,115,0),String.fromCharCode(100,98,112,97,103,101,0)]]);
      line5 = `${parseInt(`${watchj}`) ^ long_qk.length}`;
   if (2.46 >= (watchj - 3.1)) {
      watchj -= parseFloat(`${1 - alerti.size}`);
   }
       let dangerC = 2.0;
       let moonl: Array<any> = [295, 905, 39];
         moonl.push(1);
      if (5 == (moonl.length >> (Math.min(Math.abs(3), 1))) && (parseInt(`${dangerC}`) - moonl.length) == 3) {
          let area1 = false;
          let short_zE = String.fromCharCode(116,101,97,114,0);
         moonl = [(3 >> (Math.min(4, Math.abs((area1 ? 4 : 5)))))];
         area1 = short_zE == short_zE;
      }
      for (let o = 0; o < 3; o++) {
          let animationG = String.fromCharCode(102,117,110,99,115,0);
          let stores = String.fromCharCode(104,101,118,99,100,101,99,0);
         dangerC *= parseFloat(`${1}`);
         animationG = `${stores.length}`;
         stores = `${animationG.length}`;
      }
      for (let o = 0; o < 2; o++) {
          let analyticsj = String.fromCharCode(100,105,115,97,108,108,111,119,0);
         moonl.push(analyticsj.length);
      }
         dangerC += parseFloat(`${parseInt(`${dangerC}`) * 2}`);
      for (let h = 0; h < 3; h++) {
          let zhengpianq = 5.0;
          let switch_62I = String.fromCharCode(109,109,120,101,120,116,0);
         dangerC /= Math.max((parseFloat(`${switch_62I == String.fromCharCode(121,0) ? switch_62I.length : moonl.length}`)), 5);
         zhengpianq /= Math.max(parseFloat(`${parseInt(`${zhengpianq}`) / (Math.max(parseInt(`${zhengpianq}`), 3))}`), 2);
      }
      watchj *= parseFloat(`${2}`);
   while (alerti.get(`${middlewareF}`) != null) {
      alerti = new Map([[`${sendB.size}`, 2 ^ parseInt(`${watchj}`)]]);
      break;
   }
   for (let k = 0; k < 1; k++) {
      long_qk += `${(long_qk == String.fromCharCode(89,0) ? hejiY.length : long_qk.length)}`;
   }
   if (5.58 == (parseFloat(`${hejiY.length}`) - watchj) || 3.19 == (watchj - 5.58)) {
      hejiY.push(2 ^ parseInt(`${watchj}`));
   }
   if (sendB.size > 3) {
       let downZ = String.fromCharCode(117,112,103,114,97,100,101,0);
          let typesd: Array<any> = [558, 576];
          let acceptedr = String.fromCharCode(101,108,115,101,0);
         downZ = `${acceptedr.length + downZ.length}`;
         typesd = [1];
         acceptedr += `${typesd.length}`;
       let annerr = String.fromCharCode(119,105,112,101,0);
       let halfO = String.fromCharCode(99,95,49,50,0);
         annerr = `${downZ.length + 3}`;
      line5 += `${parseInt(`${middlewareF}`) + 1}`;
   }
   let viewsE = alerti.size >= 7667145;
   do {
      alerti.set(privilegeV, hejiY.length);
      if (viewsE) {
         break;
      }
   } while ((line5.length > alerti.size) && viewsE);

    setShowReportModel(true);
  };

  const onReportSubmit = (type: FTempUnread) => {
    setShowReportModel(false);
    console.log('type: ', type)
    setTimeout(() => {
      SMBing.showToast('我们将在24小时内处理您的请求，并在确认存在违规行为后才去适当的措施来处理相关内容。');
    }, 100);
  }

  return (
    <View style={styles.container}>
      {/* <DefaultProfileIcon
        width={42}
        height={42}
      /> */}
      <View style={{ ...styles.commentContainer }}>
        <View style={{ flexDirection: 'row', gap: 10, alignItems: 'center' }}>
          <Text style={{ ...textVariants.bodyBold, flex: 1 }}>
            {commentItem.user_name}
          </Text>
          <TouchableOpacity activeOpacity={0.85}
            onPress={handlePress}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              举报
            </Text>
          </TouchableOpacity>
          <TouchableOpacity activeOpacity={0.85}
            onPress={() => SMBing.showToast("拉黑成功！已不能在接受对方的消息！")}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              拉黑
            </Text>
          </TouchableOpacity>
        </View>

        <Text
          style={{ ...textVariants.subBody, color: colors.muted }}
          numberOfLines={3}
        >
          {commentItem.user_review}
        </Text>
      </View>

      <ReportBottomSheet
        isVisible={showReportModel}
        selections={Object.values(FTempUnread)}
        onButtonPress={(type) => onReportSubmit(type as FTempUnread)}
        onBackdropPress={() => setShowReportModel(false)}
        onCancelPress={() => setShowReportModel(false)}
      />
    </View>
  )
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    gap: 5,
    marginTop: 15,
  },
  commentContainer: {
    flex: 5,
    gap: 5,
  },
  btnContainer: {
    backgroundColor: '#EF1F1F',
    borderRadius: 4,
    paddingHorizontal: 4,
    paddingVertical: 1,
  }
})