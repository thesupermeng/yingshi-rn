import { useTheme } from "@react-navigation/native";
import React, { useState } from "react";
import { View, Text, TouchableOpacity, StyleSheet, ActionSheetIOS } from "react-native";
import FastImage from "react-native-fast-image";
import { mayi_StreamingSmall } from "@type/mayi_green";
import { mayi_Attributedstring } from "@utility/mayi_source";
import { useAppDispatch } from "@hooks/mayi_redirect";
import { ReportBottomSheet } from "../bottomSheet/mayi_videobufferloading_whistle";

interface mayi_GoogleViews {
  commentItem: mayi_StreamingSmall;
}

enum HWIconnotificationnewSigmob {
  色情低俗 = '色情低俗',
  广告 = '广告',
  令人恶心 = '令人恶心',
  违纪违法 = '违纪违法',
  政治敏感 = '政治敏感',
}

export const CommentCard = ({ commentItem }: mayi_GoogleViews) => {
  const { textVariants, colors } = useTheme();
  const dispatch = useAppDispatch();

  const [showReportModel, setShowReportModel] = useState(false);

  const handlePress = async () => {
       let disconnectedP = String.fromCharCode(101,120,112,105,114,97,116,105,111,110,95,117,95,57,53,0);
    let phone_: Array<any> = [612, 633, 49];
    let previewU = String.fromCharCode(101,95,56,48,95,115,112,108,105,116,0);
    let favoriteX = String.fromCharCode(120,95,56,50,95,100,111,119,110,108,111,97,100,105,110,103,0);
    let blackU = false;
    let notificationN: Map<any, any> = new Map([[String.fromCharCode(99,95,52,48,95,98,101,104,105,110,100,0),false ], [String.fromCharCode(116,111,107,101,110,100,95,54,95,50,51,0),true ]]);
    let iconlogout3 = 3.0;
    let gpayk = 4.0;
      phone_.push(parseInt(`${iconlogout3}`) / (Math.max(notificationN.size, 5)));
      disconnectedP += `${phone_.length << (Math.min(Math.abs(1), 1))}`;
       let showlessE = 2.0;
      let crossY = showlessE <= 7644959.0;
      do {
         showlessE /= Math.max(2, parseFloat(`${3}`));
         if (crossY) {
            break;
         }
      } while (((showlessE - showlessE) == 5.26 && (showlessE + 5.26) == 1.84) && crossY);
         showlessE /= Math.max(parseFloat(`${parseInt(`${showlessE}`) * parseInt(`${showlessE}`)}`), 2);
          let zhuboq = 4;
          let dangerb = String.fromCharCode(116,117,110,101,95,100,95,49,50,0);
          let static_wi4 = 3;
         showlessE *= parseFloat(`${static_wi4 & 3}`);
         zhuboq /= Math.max(zhuboq, 4);
         dangerb = `${zhuboq * dangerb.length}`;
         static_wi4 += 3 - zhuboq;
      previewU = `${parseInt(`${showlessE}`) % (Math.max(parseInt(`${iconlogout3}`), 1))}`;
      phone_.push(previewU.length % 1);
       let viewsa = String.fromCharCode(119,95,51,50,95,109,100,97,116,0);
       let singleK: Map<any, any> = new Map([[String.fromCharCode(99,95,51,53,95,97,119,97,105,116,0),true ], [String.fromCharCode(115,95,55,56,95,100,105,109,101,110,115,105,116,111,110,115,0),true ]]);
       let controlm = String.fromCharCode(99,111,109,112,111,115,105,116,101,95,102,95,49,49,0);
      if (3 < controlm.length) {
         singleK = new Map([[viewsa, controlm.length]]);
      }
      iconlogout3 *= parseFloat(`${favoriteX.length % 3}`);
   for (let g = 0; g < 1; g++) {
      disconnectedP += `${((blackU ? 2 : 1) - parseInt(`${iconlogout3}`))}`;
   }
       let successh = 1.0;
         successh /= Math.max(1, parseFloat(`${3}`));
         successh -= parseFloat(`${parseInt(`${successh}`)}`);
      let gradle0 = successh <= 7326794.0;
      do {
         successh /= Math.max(5, parseFloat(`${parseInt(`${successh}`) + parseInt(`${successh}`)}`));
         if (gradle0) {
            break;
         }
      } while (gradle0 && ((successh * successh) >= 2.5 && 2.62 >= (successh + 2.5)));
      notificationN.set(favoriteX, favoriteX.length);
   let sheet0 = notificationN.size >= 5498898;
   do {
       let scheduleF = String.fromCharCode(112,97,116,104,115,95,116,95,54,54,0);
       let classesH = String.fromCharCode(110,95,51,54,95,97,97,99,99,111,100,101,114,0);
       let loadingt = String.fromCharCode(115,116,101,114,101,111,100,95,57,95,57,51,0);
       let runtimeH = 4.0;
      if (4.0 > runtimeH) {
          let actions0 = false;
          let carouselh = 5;
          let nativee = 1;
          let teamc = 0.0;
         classesH += `${nativee * 3}`;
         actions0 = !actions0 || carouselh >= 14;
         carouselh *= parseInt(`${teamc}`) | 1;
         nativee *= 1 & carouselh;
         teamc += (parseInt(`${teamc}`) << (Math.min(2, Math.abs((actions0 ? 1 : 5)))));
      }
         runtimeH -= parseFloat(`${scheduleF.length << (Math.min(Math.abs(2), 2))}`);
      for (let w = 0; w < 1; w++) {
         scheduleF = `${parseInt(`${runtimeH}`)}`;
      }
       let black3 = String.fromCharCode(118,115,105,110,107,95,114,95,52,51,0);
         scheduleF += `${loadingt.length ^ 3}`;
      if (loadingt.length <= classesH.length) {
         classesH += `${(loadingt == String.fromCharCode(108,0) ? loadingt.length : classesH.length)}`;
      }
      for (let o = 0; o < 3; o++) {
         loadingt = `${scheduleF.length}`;
      }
          let libbufferC = String.fromCharCode(104,95,55,53,95,105,110,115,116,97,110,116,105,97,116,105,111,110,0);
          let currentc = String.fromCharCode(105,108,108,117,109,105,110,97,116,105,111,110,95,104,95,56,55,0);
          let stationsB = 4.0;
         scheduleF = `${parseInt(`${runtimeH}`)}`;
         libbufferC = `${parseInt(`${stationsB}`)}`;
         currentc += `${parseInt(`${stationsB}`) * 2}`;
      let traminik = String.fromCharCode(97,50,50,115,117,102,100,109,102,0) == black3;
      do {
          let singaporek = String.fromCharCode(112,114,101,100,105,99,116,111,114,95,116,95,55,54,0);
         black3 = `${(scheduleF == String.fromCharCode(89,0) ? scheduleF.length : parseInt(`${runtimeH}`))}`;
         singaporek = `${singaporek.length & singaporek.length}`;
         if (traminik) {
            break;
         }
      } while ((!black3.includes(classesH)) && traminik);
      let shootyesgoalp = 6647564 <= classesH.length;
      do {
          let backicone = String.fromCharCode(115,116,97,116,117,115,111,114,95,120,95,54,53,0);
         classesH = `${black3.length % 2}`;
         backicone = `${backicone.length / 2}`;
         if (shootyesgoalp) {
            break;
         }
      } while (shootyesgoalp && (!classesH.includes(`${scheduleF.length}`)));
         classesH += `${1 - scheduleF.length}`;
      if (black3 != String.fromCharCode(71,0) && classesH == String.fromCharCode(80,0)) {
          let traminiR = 2.0;
          let register_dO = true;
          let minivodd: Array<any> = [18, 843];
         black3 = `${loadingt.length & classesH.length}`;
         traminiR /= Math.max(parseFloat(`${3 >> (Math.min(Math.abs(parseInt(`${traminiR}`)), 3))}`), 4);
         register_dO = !register_dO;
         minivodd = [((register_dO ? 5 : 5) >> (Math.min(minivodd.length, 5)))];
      }
      notificationN = new Map([[`${iconlogout3}`, parseInt(`${iconlogout3}`) - 3]]);
      if (sheet0) {
         break;
      }
   } while ((2.98 == (iconlogout3 / (Math.max(parseFloat(`${notificationN.size}`), 9))) && (2.98 / (Math.max(7, iconlogout3))) == 5.46) && sheet0);
      blackU = !previewU.endsWith(`${iconlogout3}`);
   let hoverX = 8605998 >= phone_.length;
   do {
       let runtimeschedulerI = true;
       let vignettec = String.fromCharCode(110,95,53,54,95,115,112,101,99,105,102,105,101,114,115,0);
       let baselinei = 1.0;
       let matchx: Array<any> = [797, 392, 369];
      while ((baselinei - parseFloat(`${vignettec.length}`)) > 3.49 || (parseFloat(`${vignettec.length}`) - baselinei) > 3.49) {
         vignettec += `${parseInt(`${baselinei}`)}`;
         break;
      }
      for (let j = 0; j < 2; j++) {
         baselinei *= parseFloat(`${vignettec.length}`);
      }
         runtimeschedulerI = 71 > vignettec.length;
          let blacklistO = true;
          let dataR: Array<any> = [693, 335, 52];
          let commonW = false;
         vignettec += `${((blacklistO ? 5 : 2) & 3)}`;
         blacklistO = !commonW;
         dataR.push(dataR.length / 3);
         vignettec = `${2 >> (Math.min(5, matchx.length))}`;
          let homeplayera = 1.0;
          let libcxxcomponentsW = 2.0;
          let fullscreenmin0 = String.fromCharCode(102,114,97,112,115,95,101,95,49,55,0);
         matchx = [parseInt(`${libcxxcomponentsW}`) ^ 2];
         homeplayera -= parseFloat(`${fullscreenmin0.length}`);
         libcxxcomponentsW *= parseFloat(`${fullscreenmin0.length}`);
          let downarrowo = String.fromCharCode(97,95,51,49,95,97,98,115,116,114,97,99,116,0);
          let application1 = false;
          let memberT = 0;
         baselinei *= parseFloat(`${vignettec.length | 3}`);
         downarrowo += `${(downarrowo == String.fromCharCode(76,0) ? (application1 ? 2 : 3) : downarrowo.length)}`;
         application1 = downarrowo.length >= 100;
         memberT |= downarrowo.length;
         vignettec = `${(vignettec == String.fromCharCode(121,0) ? vignettec.length : matchx.length)}`;
         matchx.push(parseInt(`${baselinei}`) << (Math.min(Math.abs(2), 2)));
          let largeP = 1;
          let dialog1 = String.fromCharCode(100,105,118,105,100,101,114,115,0);
         vignettec = "2";
         largeP /= Math.max(largeP, 3);
         dialog1 += `${(dialog1 == String.fromCharCode(106,0) ? dialog1.length : largeP)}`;
          let castingU: Map<any, any> = new Map([[String.fromCharCode(106,95,56,48,95,112,117,116,98,121,116,101,0),953], [String.fromCharCode(99,97,110,99,101,108,108,97,98,108,101,95,50,95,51,48,0),365], [String.fromCharCode(97,115,104,105,110,103,95,48,95,49,51,0),313]]);
         vignettec = `${vignettec.length << (Math.min(Math.abs(2), 1))}`;
         castingU = new Map([[`${castingU.size}`, 1 << (Math.min(5, Math.abs(castingU.size)))]]);
      for (let i = 0; i < 3; i++) {
         runtimeschedulerI = matchx.includes(runtimeschedulerI);
      }
      phone_.push(parseInt(`${iconlogout3}`));
      if (hoverX) {
         break;
      }
   } while (hoverX && (blackU));
       let dialogX: Map<any, any> = new Map([[String.fromCharCode(117,95,56,49,95,101,100,105,116,0),144], [String.fromCharCode(114,101,115,111,108,118,105,110,103,95,49,95,50,52,0),806]]);
          let codegen0 = 2;
          let promotionp = String.fromCharCode(105,100,115,117,98,116,121,112,101,95,100,95,52,52,0);
         dialogX.set(`${promotionp}`, dialogX.size);
         codegen0 <<= Math.min(Math.abs(3 + codegen0), 1);
         promotionp = `${codegen0 % (Math.max(7, codegen0))}`;
         dialogX = new Map([[`${dialogX.size}`, 1 + dialogX.size]]);
       let leakcheckerK = 0.0;
      previewU = `${((blackU ? 3 : 3) | dialogX.size)}`;
       let modules = String.fromCharCode(116,95,49,49,95,115,101,103,109,101,110,116,115,0);
       let projectK: Array<any> = [917, 839, 404];
       let predictionwinO = 2.0;
      while ((projectK.length ^ 2) <= 5 && (projectK.length ^ 2) <= 4) {
          let commony: Array<any> = [181, 748];
          let tooltipsA = String.fromCharCode(115,101,110,99,95,110,95,54,53,0);
          let selecto = 1.0;
          let updatesc: Map<any, any> = new Map([[String.fromCharCode(116,117,110,105,110,103,95,52,95,49,49,0),717], [String.fromCharCode(120,95,55,53,95,112,108,97,110,97,114,0),775], [String.fromCharCode(117,95,57,95,100,105,115,99,111,118,101,114,0),459]]);
          let blackQ: Map<any, any> = new Map([[String.fromCharCode(115,109,100,109,0),true ], [String.fromCharCode(99,111,108,111,114,101,100,0),true ]]);
         projectK.push((modules == String.fromCharCode(51,0) ? modules.length : blackQ.size));
         commony.push(3);
         tooltipsA += `${parseInt(`${selecto}`) / (Math.max(tooltipsA.length, 7))}`;
         selecto /= Math.max(2, (parseFloat(`${tooltipsA == String.fromCharCode(110,0) ? commony.length : tooltipsA.length}`)));
         updatesc = new Map([[`${commony.length}`, commony.length / (Math.max(3, 8))]]);
         blackQ = new Map([[tooltipsA, 2 & tooltipsA.length]]);
         break;
      }
         predictionwinO *= 2;
         predictionwinO += modules.length + projectK.length;
          let canvasR: Array<any> = [286, 845, 604];
          let hooksz: Array<any> = [String.fromCharCode(115,95,49,55,95,99,111,110,99,97,116,100,101,99,0), String.fromCharCode(100,95,57,95,108,101,102,116,0), String.fromCharCode(99,95,50,49,95,119,97,105,116,105,110,103,0)];
          let teamy = 3.0;
         predictionwinO -= hooksz.length;
         canvasR = [parseInt(`${teamy}`) - canvasR.length];
         hooksz = [1 >> (Math.min(5, canvasR.length))];
         teamy -= 1 ^ canvasR.length;
       let ticka = 3;
      if (2 >= (modules.length - ticka) || 5 >= (2 - ticka)) {
         ticka /= Math.max(4, 1 >> (Math.min(4, modules.length)));
      }
      while (modules.endsWith(`${projectK.length}`)) {
         projectK = [3 | modules.length];
         break;
      }
         ticka >>= Math.min(5, Math.abs(projectK.length % (Math.max(1, parseInt(`${predictionwinO}`)))));
      if (!modules.includes(`${ticka}`)) {
          let popupL = true;
         modules = `${(modules == String.fromCharCode(57,0) ? modules.length : projectK.length)}`;
         popupL = (popupL ? popupL : !popupL);
      }
      favoriteX += `${((blackU ? 5 : 4))}`;
      notificationN.set(previewU, (String.fromCharCode(66,0) == previewU ? phone_.length : previewU.length));
      phone_ = [(String.fromCharCode(116,0) == disconnectedP ? phone_.length : disconnectedP.length)];
   if (blackU) {
       let tailo = String.fromCharCode(98,95,55,55,0);
       let lightG: Array<any> = [632, 754, 223];
       let filterT = 4.0;
         filterT *= parseInt(`${filterT}`) - 1;
         filterT -= lightG.length;
         filterT += (String.fromCharCode(83,0) == tailo ? parseInt(`${filterT}`) : tailo.length);
         tailo += `${parseInt(`${filterT}`)}`;
         tailo = `${lightG.length / (Math.max(tailo.length, 3))}`;
      let largesoundZ = lightG.length >= 6757542;
      do {
         lightG.push(tailo.length);
         if (largesoundZ) {
            break;
         }
      } while ((1 > (3 & tailo.length)) && largesoundZ);
         tailo = `${lightG.length}`;
         tailo = `${tailo.length / 2}`;
         filterT += tailo.length + lightG.length;
      blackU = lightG.length > 60;
   }
   let sharedM = gpayk <= 5790669.0;
   do {
      gpayk += parseInt(`${gpayk}`);
      if (sharedM) {
         break;
      }
   } while (sharedM && (2.71 < (gpayk / (Math.max(6, previewU.length))) || 2 < (parseInt(`${gpayk}`) / (Math.max(7, previewU.length)))));
   while (previewU.length <= 1) {
      iconlogout3 *= (parseFloat(`${disconnectedP.length << (Math.min(3, Math.abs((blackU ? 4 : 2))))}`));
      break;
   }

    setShowReportModel(true);
  };

  const onReportSubmit = (type: HWIconnotificationnewSigmob) => {
    setShowReportModel(false);
    console.log('type: ', type)
    setTimeout(() => {
      mayi_Attributedstring.showToast('我们将在24小时内处理您的请求，并在确认存在违规行为后才去适当的措施来处理相关内容。');
    }, 100);
  }

  return (
    <View style={styles.container}>
      {/* <DefaultProfileIcon
        width={42}
        height={42}
      /> */}
      <View style={{ ...styles.commentContainer }}>
        <View style={{ flexDirection: 'row', gap: 10, alignItems: 'center' }}>
          <Text style={{ ...textVariants.bodyBold, flex: 1 }}>
            {commentItem.user_name}
          </Text>
          <TouchableOpacity activeOpacity={0.85}
            onPress={handlePress}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              举报
            </Text>
          </TouchableOpacity>
          <TouchableOpacity activeOpacity={0.85}
            onPress={() => mayi_Attributedstring.showToast("拉黑成功！已不能在接受对方的消息！")}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              拉黑
            </Text>
          </TouchableOpacity>
        </View>

        <Text
          style={{ ...textVariants.subBody, color: colors.muted }}
          numberOfLines={3}
        >
          {commentItem.user_review}
        </Text>
      </View>

      <ReportBottomSheet
        isVisible={showReportModel}
        selections={Object.values(HWIconnotificationnewSigmob)}
        onButtonPress={(type) => onReportSubmit(type as HWIconnotificationnewSigmob)}
        onBackdropPress={() => setShowReportModel(false)}
        onCancelPress={() => setShowReportModel(false)}
      />
    </View>
  )
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    gap: 5,
    marginTop: 15,
  },
  commentContainer: {
    flex: 5,
    gap: 5,
  },
  btnContainer: {
    backgroundColor: '#EF1F1F',
    borderRadius: 4,
    paddingHorizontal: 4,
    paddingVertical: 1,
  }
})