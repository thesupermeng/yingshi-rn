import { useTheme } from "@react-navigation/native";
import React, { useState } from "react";
import { View, Text, TouchableOpacity, StyleSheet, ActionSheetIOS } from "react-native";
import FastImage from "react-native-fast-image";
import { ttTempGift } from "@type/tt_line_borderless";
import { ttGray } from "@utility/tt_selection";
import { useAppDispatch } from "@hooks/tt_spec_download";
import { ReportBottomSheet } from "../bottomSheet/tt_internet_handler";

interface ttSmall {
  commentItem: ttTempGift;
}

enum VLNUpgradeBasketball {
  色情低俗 = '色情低俗',
  广告 = '广告',
  令人恶心 = '令人恶心',
  违纪违法 = '违纪违法',
  政治敏感 = '政治敏感',
}

export const CommentCard = ({ commentItem }: ttSmall) => {
  const { textVariants, colors } = useTheme();
  const dispatch = useAppDispatch();

  const [showReportModel, setShowReportModel] = useState(false);

  const handlePress = async () => {
       let moviesu = String.fromCharCode(101,95,57,52,95,102,114,97,109,101,110,117,109,0);
    let next9 = false;
    let moon1 = 2.0;
    let mathB = String.fromCharCode(99,95,55,52,95,105,110,116,101,114,110,101,116,0);
    let matchesA = 5;
    let eactH = String.fromCharCode(109,105,110,117,116,101,95,49,95,57,56,0);
    let floaterM = 0.0;
    let pauseh = false;
    let toponC = 5.0;
    let foregroundj = String.fromCharCode(114,95,50,56,95,112,117,108,115,101,0);
    let showS = 2;
    let chinasameI = String.fromCharCode(121,95,56,57,95,102,97,110,116,111,109,0);
    let time_ta3 = 5;
    let eactw = 0;
    let customN = String.fromCharCode(101,95,57,53,95,101,118,101,114,0);
   while ((toponC + 4.29) <= 3.80 && (foregroundj.length + parseInt(`${toponC}`)) <= 3) {
      foregroundj = `${parseInt(`${floaterM}`)}`;
      break;
   }
      moviesu += `${2 & parseInt(`${toponC}`)}`;
   while ((moon1 / 1.73) == 3.76 || (moon1 / 1.73) == 3.30) {
       let dycreatorQ = String.fromCharCode(104,95,54,50,95,104,97,110,100,108,101,115,0);
       let chatJ = String.fromCharCode(115,117,112,112,111,114,116,95,101,95,49,54,0);
       let firebaseT = String.fromCharCode(103,95,53,52,95,117,110,114,101,108,105,97,98,108,101,0);
      let show7 = firebaseT == String.fromCharCode(112,57,50,0);
      do {
         firebaseT += `${dycreatorQ.length}`;
         if (show7) {
            break;
         }
      } while ((dycreatorQ.endsWith(firebaseT)) && show7);
       let nextI: Map<any, any> = new Map([[String.fromCharCode(109,101,115,115,115,97,103,101,95,100,95,55,56,0),true ], [String.fromCharCode(99,111,110,110,101,99,116,120,95,112,95,57,54,0),true ]]);
       let untickA: Map<any, any> = new Map([[String.fromCharCode(122,95,51,50,95,115,104,105,102,116,101,100,0),false ], [String.fromCharCode(107,95,53,57,95,115,99,114,111,108,108,101,100,0),true ], [String.fromCharCode(114,97,100,105,120,95,101,95,57,52,0),false ]]);
         nextI = new Map([[`${nextI.size}`, 2 >> (Math.min(3, chatJ.length))]]);
         dycreatorQ += `${chatJ.length}`;
       let firebaseO = 5;
       let pointh = String.fromCharCode(100,95,50,51,95,97,114,102,113,0);
       let chinasamem = String.fromCharCode(107,95,54,50,95,101,110,117,109,115,0);
         untickA.set(`${firebaseO}`, 1 & untickA.size);
      if (untickA.get(`${firebaseO}`) == null) {
         firebaseO *= (String.fromCharCode(75,0) == pointh ? firebaseT.length : pointh.length);
      }
      let blackk = untickA.size <= 5261131;
      do {
          let fullM = String.fromCharCode(99,111,110,118,101,114,116,111,114,95,99,95,56,57,0);
          let ajaxz = 0;
         untickA = new Map([[`${firebaseO}`, (firebaseT == String.fromCharCode(100,0) ? firebaseO : firebaseT.length)]]);
         fullM = "2";
         ajaxz &= fullM.length;
         if (blackk) {
            break;
         }
      } while (((untickA.size - 2) < 1) && blackk);
      moon1 += eactH.length ^ 2;
      break;
   }
   while (pauseh) {
      showS >>= Math.min(3, Math.abs(mathB.length % 1));
      break;
   }
      next9 = 6.38 >= toponC;
   let sans8 = 5480779 <= showS;
   do {
      showS ^= showS & 2;
      if (sans8) {
         break;
      }
   } while ((3 == (4 << (Math.min(2, Math.abs(showS))))) && sans8);
      eactH += `${eactH.length}`;
   for (let k = 0; k < 3; k++) {
      moviesu = `${(parseInt(`${toponC}`) ^ (pauseh ? 3 : 1))}`;
   }
       let predictionv = 3.0;
       let lightz = 5.0;
      let fastz = 7823892.0 <= lightz;
      do {
         lightz /= Math.max(4, parseFloat(`${parseInt(`${predictionv}`)}`));
         if (fastz) {
            break;
         }
      } while (((predictionv / (Math.max(lightz, 4))) < 2.42) && fastz);
         lightz += parseFloat(`${parseInt(`${lightz}`) << (Math.min(Math.abs(parseInt(`${predictionv}`)), 3))}`);
         predictionv -= parseFloat(`${parseInt(`${lightz}`) & 3}`);
      if (5.9 <= (predictionv / (Math.max(lightz, 4)))) {
         lightz /= Math.max(parseFloat(`${3}`), 2);
      }
       let utilso: Map<any, any> = new Map([[String.fromCharCode(117,110,100,101,114,114,117,110,95,107,95,50,48,0),String.fromCharCode(109,100,97,121,95,103,95,56,49,0)], [String.fromCharCode(118,95,53,49,95,109,111,110,105,116,111,114,105,110,103,0),String.fromCharCode(97,95,57,95,99,111,112,121,98,97,99,107,0)]]);
       let largeG: Map<any, any> = new Map([[String.fromCharCode(117,110,104,105,100,101,95,49,95,53,51,0),9], [String.fromCharCode(119,97,118,101,115,121,110,116,104,95,50,95,54,48,0),577]]);
      if ((predictionv / 2) == 5.67) {
         lightz *= parseFloat(`${2 / (Math.max(7, parseInt(`${predictionv}`)))}`);
      }
      showS &= parseInt(`${predictionv}`);
      showS -= (String.fromCharCode(81,0) == foregroundj ? mathB.length : foregroundj.length);
   let typing6 = pauseh ? !pauseh : pauseh;
   do {
      pauseh = parseInt(`${moon1}`) <= mathB.length;
      if (typing6) {
         break;
      }
   } while (typing6 && (!pauseh));
      floaterM += eactH.length;
       let weiboo = 0;
      while (1 < (weiboo / (Math.max(weiboo, 1)))) {
         weiboo |= weiboo >> (Math.min(Math.abs(3), 3));
         break;
      }
      let matchL = weiboo <= 7092198;
      do {
          let langkeyZ = 1;
          let countrya = 1.0;
          let assistW = 0.0;
          let playn = String.fromCharCode(97,95,53,55,95,112,101,101,108,0);
         weiboo |= parseInt(`${countrya}`) + langkeyZ;
         langkeyZ |= parseInt(`${assistW}`);
         countrya += playn.length ^ 2;
         assistW -= (parseFloat(`${String.fromCharCode(100,0) == playn ? playn.length : parseInt(`${assistW}`)}`));
         if (matchL) {
            break;
         }
      } while (matchL && (weiboo > weiboo));
         weiboo /= Math.max(3 | weiboo, 1);
      showS += weiboo * 2;
      pauseh = moviesu.length <= eactH.length;
      moviesu = "1";
   for (let n = 0; n < 2; n++) {
      pauseh = moviesu.length == 24;
   }
   let viewert = 7274998 <= eactH.length;
   do {
       let googleg: Map<any, any> = new Map([[String.fromCharCode(107,95,49,48,95,117,110,109,97,112,102,105,108,101,0),49], [String.fromCharCode(108,95,55,55,95,99,116,120,116,0),72], [String.fromCharCode(112,117,98,105,99,95,119,95,54,55,0),264]]);
       let malaysiai = String.fromCharCode(103,109,116,105,109,101,95,111,95,57,56,0);
       let darkj = 1;
          let math_ = String.fromCharCode(106,95,52,53,95,115,117,98,101,120,112,114,0);
         malaysiai = `${darkj}`;
         math_ = `${math_.length}`;
      for (let j = 0; j < 2; j++) {
         darkj &= malaysiai.length * 1;
      }
      if (malaysiai.length > darkj) {
          let guidel = 2.0;
          let file8: Array<any> = [632, 775, 554];
          let topong = String.fromCharCode(112,114,115,99,116,112,95,100,95,52,49,0);
          let downloaderu = String.fromCharCode(105,111,118,101,99,105,110,95,56,95,52,49,0);
          let libcrashsdkv = String.fromCharCode(117,95,54,49,95,111,117,98,108,101,0);
         darkj -= libcrashsdkv.length / (Math.max(1, 9));
         guidel *= 2;
         file8.push((String.fromCharCode(101,0) == downloaderu ? downloaderu.length : topong.length));
         topong += `${topong.length}`;
         libcrashsdkv += `${topong.length}`;
      }
      if (3 <= (darkj / 3) && 3 <= (malaysiai.length / (Math.max(7, darkj)))) {
         darkj ^= (malaysiai == String.fromCharCode(111,0) ? googleg.size : malaysiai.length);
      }
      if (1 > (1 & googleg.size)) {
         googleg.set(`${malaysiai}`, 3 | malaysiai.length);
      }
         malaysiai = `${googleg.size ^ 3}`;
      if (malaysiai.includes(`${darkj}`)) {
         malaysiai = `${(String.fromCharCode(95,0) == malaysiai ? darkj : malaysiai.length)}`;
      }
         malaysiai = `${malaysiai.length}`;
         googleg = new Map([[`${googleg.size}`, malaysiai.length]]);
      eactH += `${darkj}`;
      if (viewert) {
         break;
      }
   } while (viewert && (eactH.length == chinasameI.length));
   if (pauseh) {
       let dragx = String.fromCharCode(120,95,55,95,115,116,97,116,105,99,0);
       let editG = 5.0;
       let screenR = false;
       let regengO = false;
      let live4 = regengO ? !regengO : regengO;
      do {
         regengO = editG <= 93.79;
         if (live4) {
            break;
         }
      } while (live4 && (!screenR));
          let confirmation8: Array<any> = [205, 528, 219];
         screenR = !screenR;
         confirmation8.push(confirmation8.length >> (Math.min(Math.abs(1), 2)));
         dragx += `${1 & dragx.length}`;
      while (regengO) {
          let closeL: Map<any, any> = new Map([[String.fromCharCode(106,95,51,55,95,115,111,99,107,115,0),997], [String.fromCharCode(100,101,116,97,99,104,95,111,95,53,51,0),53], [String.fromCharCode(105,95,57,57,95,119,105,100,101,102,101,108,101,109,0),199]]);
          let mintegralG = 0.0;
          let middleware3: Array<any> = [String.fromCharCode(109,106,112,101,103,106,112,101,103,95,114,95,49,53,0), String.fromCharCode(101,95,55,53,95,116,111,111,108,0)];
          let morex: Map<any, any> = new Map([[String.fromCharCode(104,101,99,111,95,99,95,53,51,0),String.fromCharCode(97,117,114,97,95,121,95,53,50,0)], [String.fromCharCode(101,95,50,51,95,97,99,107,110,111,119,108,101,100,103,101,100,0),String.fromCharCode(111,95,55,49,95,115,115,101,116,0)]]);
         regengO = dragx.length >= 49;
         closeL.set(`${mintegralG}`, parseInt(`${mintegralG}`) / 3);
         middleware3.push(3 >> (Math.min(3, middleware3.length)));
         morex = new Map([[`${middleware3.length}`, 2]]);
         break;
      }
       let frame_z5E = String.fromCharCode(115,97,118,101,112,111,105,110,116,115,95,48,95,49,51,0);
         screenR = !dragx.startsWith(`${editG}`);
          let searchbari = String.fromCharCode(100,111,109,101,115,116,105,99,95,56,95,51,50,0);
          let foundo = true;
         editG += parseFloat(`${searchbari.length}`);
         searchbari += `${((foundo ? 3 : 3) & 1)}`;
          let halfD = String.fromCharCode(102,95,56,51,95,103,100,105,103,114,97,98,0);
          let related5 = false;
         dragx = "3";
         halfD = `${(String.fromCharCode(76,0) == halfD ? halfD.length : halfD.length)}`;
         related5 = halfD.length >= 37;
      for (let e = 0; e < 3; e++) {
          let weiboh = String.fromCharCode(110,111,116,101,115,95,99,95,54,54,0);
          let zhuboQ = 2.0;
          let fillu = String.fromCharCode(97,116,116,114,105,98,117,116,101,95,112,95,49,55,0);
         screenR = !fillu.includes(`${screenR}`);
         weiboh = `${weiboh.length - 3}`;
         zhuboQ += parseFloat(`${weiboh.length}`);
         fillu += `${3 << (Math.min(2, Math.abs(parseInt(`${zhuboQ}`))))}`;
      }
      for (let t = 0; t < 3; t++) {
         dragx = `${((regengO ? 5 : 5) / 2)}`;
      }
      if (4.80 == (editG * 5.22) || editG == 5.22) {
          let orangef = 3;
         editG *= parseFloat(`${parseInt(`${editG}`) / (Math.max(10, dragx.length))}`);
         orangef %= Math.max(2, 2);
      }
      if (frame_z5E.length >= 1) {
          let modityn = String.fromCharCode(106,95,51,53,95,100,101,110,111,105,115,101,114,0);
          let regengR = String.fromCharCode(109,111,116,105,111,110,112,105,120,101,108,115,95,98,95,56,51,0);
          let downloadingW: Map<any, any> = new Map([[String.fromCharCode(106,95,52,57,95,115,105,110,103,108,101,0),165], [String.fromCharCode(99,111,109,112,97,99,116,95,50,95,50,51,0),451], [String.fromCharCode(110,111,105,115,101,95,100,95,53,53,0),856]]);
          let mbridgeJ = 3.0;
          let footballf = true;
         regengO = frame_z5E.length > 72 && !footballf;
         modityn = `${downloadingW.size - 1}`;
         regengR = `${3 | parseInt(`${mbridgeJ}`)}`;
         downloadingW.set(`${mbridgeJ}`, downloadingW.size);
         footballf = regengR == modityn;
      }
      pauseh = !pauseh;
   }
      toponC /= Math.max(4, parseFloat(`${eactH.length}`));
      pauseh = foregroundj.length <= 22 && !pauseh;
      next9 = String.fromCharCode(80,0) == eactH;
       let yellowV = 2;
       let langkeyN = 0.0;
         langkeyN /= Math.max(parseFloat(`${parseInt(`${langkeyN}`)}`), 5);
      if (langkeyN <= yellowV) {
          let downloadedX = String.fromCharCode(120,95,57,95,98,110,108,101,0);
          let traminiB = String.fromCharCode(97,100,100,105,116,105,111,110,95,54,95,54,54,0);
          let mbridge3 = String.fromCharCode(111,95,57,49,95,98,111,114,105,110,103,115,115,108,0);
          let dangerU: Array<any> = [196, 538];
          let anytimeN = String.fromCharCode(114,101,110,111,114,109,101,95,116,95,50,50,0);
         langkeyN *= parseFloat(`${dangerU.length >> (Math.min(Math.abs(2), 3))}`);
         downloadedX = `${(anytimeN == String.fromCharCode(88,0) ? traminiB.length : anytimeN.length)}`;
         traminiB = `${1 + traminiB.length}`;
         mbridge3 += `${2 + downloadedX.length}`;
         dangerU.push(3);
      }
          let morea = 4;
         langkeyN += parseFloat(`${1 + yellowV}`);
         morea &= 3;
      let currentX = langkeyN >= 9709913.0;
      do {
         langkeyN /= Math.max(1, parseFloat(`${yellowV % (Math.max(parseInt(`${langkeyN}`), 6))}`));
         if (currentX) {
            break;
         }
      } while (currentX && (5.54 >= (langkeyN * 1.66)));
      let traminif = 6544839 <= yellowV;
      do {
         yellowV ^= 1;
         if (traminif) {
            break;
         }
      } while (((1 - yellowV) < 4) && traminif);
       let header5 = true;
       let reports = true;
      eactH += "1";
      floaterM -= 1;
   if (matchesA < chinasameI.length) {
       let yingj: Array<any> = [10, 804];
       let tickY = String.fromCharCode(101,95,52,52,95,99,104,101,98,121,115,104,101,118,0);
      let emptyz = 8731566 >= yingj.length;
      do {
         yingj.push(3 - yingj.length);
         if (emptyz) {
            break;
         }
      } while (emptyz && ((tickY.length % (Math.max(9, yingj.length))) <= 1));
      for (let k = 0; k < 2; k++) {
         tickY += "2";
      }
         tickY = `${(String.fromCharCode(53,0) == tickY ? tickY.length : yingj.length)}`;
         yingj = [(tickY == String.fromCharCode(74,0) ? yingj.length : tickY.length)];
          let resultl = 5;
          let bodanN: Map<any, any> = new Map([[String.fromCharCode(122,95,57,57,95,102,101,110,99,0),String.fromCharCode(112,101,114,99,101,110,116,97,103,101,95,115,95,54,50,0)], [String.fromCharCode(116,114,117,115,116,95,107,95,53,50,0),String.fromCharCode(97,95,55,51,95,101,99,114,101,99,111,118,101,114,0)], [String.fromCharCode(120,95,53,55,95,102,97,105,108,105,110,103,0),String.fromCharCode(113,95,55,57,95,107,110,111,98,0)]]);
         yingj.push(yingj.length);
         resultl &= bodanN.size;
         bodanN.set(`${resultl}`, resultl % (Math.max(bodanN.size, 4)));
      if (!tickY.endsWith(`${yingj.length}`)) {
         tickY += `${yingj.length % (Math.max(5, tickY.length))}`;
      }
      chinasameI += `${parseInt(`${toponC}`) | 3}`;
   }
       let member1 = 3.0;
          let areaa: Array<any> = [448, 33];
          let chinaZ = String.fromCharCode(112,95,52,53,95,116,111,112,105,99,0);
         member1 += parseFloat(`${areaa.length & 3}`);
         areaa.push(chinaZ.length - chinaZ.length);
      let whatsappt = 8354152.0 <= member1;
      do {
         member1 += parseFloat(`${parseInt(`${member1}`) % (Math.max(parseInt(`${member1}`), 10))}`);
         if (whatsappt) {
            break;
         }
      } while (((5.40 - member1) == 2.14) && whatsappt);
         member1 /= Math.max(2, parseFloat(`${parseInt(`${member1}`) | 2}`));
      mathB += "2";
       let modal8 = false;
       let catalogx = 0;
       let whistleP = String.fromCharCode(114,101,118,97,108,105,100,97,116,101,95,97,95,49,57,0);
         catalogx /= Math.max(catalogx, 4);
      let fileY = whistleP == String.fromCharCode(102,107,117,117,0);
      do {
         whistleP += `${whistleP.length}`;
         if (fileY) {
            break;
         }
      } while ((!modal8 || whistleP.length < 4) && fileY);
         modal8 = whistleP == String.fromCharCode(109,0) && 22 >= catalogx;
      for (let w = 0; w < 3; w++) {
          let fill5 = String.fromCharCode(122,95,55,50,95,109,101,109,110,0);
          let circleQ = 3;
          let moonT = 2.0;
         catalogx >>= Math.min(Math.abs(1 - whistleP.length), 1);
         fill5 += `${parseInt(`${moonT}`) * 2}`;
         circleQ /= Math.max(parseInt(`${moonT}`) - circleQ, 1);
      }
         whistleP += `${2 & whistleP.length}`;
      moviesu = `${catalogx + showS}`;
   while (3.7 <= floaterM) {
      next9 = 89.18 <= moon1 || String.fromCharCode(102,0) == moviesu;
      break;
   }

    setShowReportModel(true);
  };

  const onReportSubmit = (type: VLNUpgradeBasketball) => {
    setShowReportModel(false);
    console.log('type: ', type)
    setTimeout(() => {
      ttGray.showToast('我们将在24小时内处理您的请求，并在确认存在违规行为后才去适当的措施来处理相关内容。');
    }, 100);
  }

  return (
    <View style={styles.container}>
      {/* <DefaultProfileIcon
        width={42}
        height={42}
      /> */}
      <View style={{ ...styles.commentContainer }}>
        <View style={{ flexDirection: 'row', gap: 10, alignItems: 'center' }}>
          <Text style={{ ...textVariants.bodyBold, flex: 1 }}>
            {commentItem.user_name}
          </Text>
          <TouchableOpacity activeOpacity={0.85}
            onPress={handlePress}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              举报
            </Text>
          </TouchableOpacity>
          <TouchableOpacity activeOpacity={0.85}
            onPress={() => ttGray.showToast("拉黑成功！已不能在接受对方的消息！")}
            style={styles.btnContainer}>
            <Text style={{ ...textVariants.small, textAlign: 'center' }}>
              拉黑
            </Text>
          </TouchableOpacity>
        </View>

        <Text
          style={{ ...textVariants.subBody, color: colors.muted }}
          numberOfLines={3}
        >
          {commentItem.user_review}
        </Text>
      </View>

      <ReportBottomSheet
        isVisible={showReportModel}
        selections={Object.values(VLNUpgradeBasketball)}
        onButtonPress={(type) => onReportSubmit(type as VLNUpgradeBasketball)}
        onBackdropPress={() => setShowReportModel(false)}
        onCancelPress={() => setShowReportModel(false)}
      />
    </View>
  )
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    gap: 5,
    marginTop: 15,
  },
  commentContainer: {
    flex: 5,
    gap: 5,
  },
  btnContainer: {
    backgroundColor: '#EF1F1F',
    borderRadius: 4,
    paddingHorizontal: 4,
    paddingVertical: 1,
  }
})