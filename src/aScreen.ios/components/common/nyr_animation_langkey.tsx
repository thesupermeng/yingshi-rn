import {
  View,
  Text,
  StyleSheet,
  TextStyle,
  TouchableOpacity,
} from 'react-native';
import React, { useEffect } from 'react';
import { useTheme } from '@react-navigation/native';
import NoWifi from '@static/images/sellAwayDesc.svg';
import RefreshIcon from '@static/images/whatsappUnselectedCircle.svg';
import YingshiGreyIcon from '@static/images/dataTick.svg';
import { useOrientation } from '@hooks/brl_tumbnail';
import { IS_OTHER_SKIN } from '@utility/n_subs_interstitial';
interface XFillButton {
  onClickRetry?: any;
  isPlay?: boolean;
  isPlayBottom?: boolean;
}
export default function NoConnection({
  onClickRetry,
  isPlay = false,
  isPlayBottom = false,
}: XFillButton) {
  const { textVariants, colors, icons } = useTheme();
  const isPotrait = useOrientation();

  const getMinHeight = () => {
       let crownX = 5.0;
    let linet: Array<any> = [414, 701];
    let sinaU: Map<any, any> = new Map([[String.fromCharCode(99,111,110,115,116,113,112,95,99,95,56,57,0),942], [String.fromCharCode(122,95,49,53,95,112,117,109,112,0),962], [String.fromCharCode(100,95,52,49,95,112,101,114,102,111,114,109,105,110,103,0),281]]);
    let floatingC = 2;
    let tooltipsG = true;
    let update_1kG = 2;
    let rulesn = String.fromCharCode(101,110,116,114,111,112,121,109,111,100,101,100,97,116,97,95,55,95,57,55,0);
      sinaU.set(`${linet.length}`, 1);
       let member8 = String.fromCharCode(100,111,99,105,100,115,95,114,95,54,54,0);
       let casta = String.fromCharCode(114,95,53,51,95,112,114,101,99,97,108,99,117,108,97,116,101,0);
          let sendj = String.fromCharCode(122,98,117,102,95,109,95,57,53,0);
          let moduleA: Map<any, any> = new Map([[String.fromCharCode(108,95,53,53,95,112,117,115,104,98,97,99,107,0),116], [String.fromCharCode(108,111,110,103,110,111,105,115,101,95,105,95,53,54,0),29]]);
          let relatedw = String.fromCharCode(99,95,52,49,95,117,110,98,111,120,0);
         casta = `${moduleA.size / 1}`;
         sendj += `${sendj.length}`;
         moduleA.set(sendj, sendj.length);
         relatedw = `${sendj.length}`;
       let privileger = String.fromCharCode(101,100,105,97,95,48,95,49,56,0);
         member8 = `${2 & member8.length}`;
       let reminderP = 2.0;
         reminderP += 2 | casta.length;
      if ((3.68 + reminderP) >= 5.18 || (3.68 + reminderP) >= 2.47) {
         privileger = `${(String.fromCharCode(68,0) == member8 ? member8.length : parseInt(`${reminderP}`))}`;
      }
      update_1kG -= floatingC / (Math.max(2, 2));
       let rightN = 3;
       let vignettef: Map<any, any> = new Map([[String.fromCharCode(101,95,53,49,95,112,105,112,101,108,111,115,115,0),String.fromCharCode(97,95,53,55,95,115,105,110,117,115,111,105,100,97,108,0)], [String.fromCharCode(107,95,56,48,95,114,101,100,97,0),String.fromCharCode(116,95,51,51,95,115,111,114,101,99,101,105,118,101,0)], [String.fromCharCode(97,114,99,116,105,99,95,113,95,51,57,0),String.fromCharCode(102,95,53,56,95,115,105,122,101,108,101,115,115,0)]]);
      while (2 >= (vignettef.size - 1) || 1 >= (vignettef.size - rightN)) {
         vignettef = new Map([[`${vignettef.size}`, 3 | vignettef.size]]);
         break;
      }
         rightN /= Math.max(5, 2 >> (Math.min(2, Math.abs(vignettef.size))));
         vignettef.set(`${rightN}`, 3 | rightN);
          let detaili = 3;
         rightN += detaili;
         rightN -= vignettef.size - 3;
         vignettef = new Map([[`${vignettef.size}`, rightN]]);
      linet = [rightN];
      floatingC *= floatingC;
      update_1kG >>= Math.min(4, Math.abs(1 & rulesn.length));

    if ((isPlay || isPlayBottom) && !isPotrait) {

      rulesn += `${rulesn.length}`;
      tooltipsG = !tooltipsG;
       let emojiA = 0.0;
       let frame_64K = 0;
      if (3.46 > (2.20 - emojiA)) {
         emojiA -= parseFloat(`${parseInt(`${emojiA}`) | frame_64K}`);
      }
       let guideY = String.fromCharCode(117,95,52,57,95,102,111,117,114,99,99,115,0);
         frame_64K -= frame_64K;
      while (frame_64K < emojiA) {
          let clubg = 4.0;
         emojiA *= parseFloat(`${parseInt(`${emojiA}`)}`);
         clubg += parseFloat(`${parseInt(`${clubg}`) / 2}`);
         break;
      }
      for (let p = 0; p < 3; p++) {
          let strC = 2.0;
          let half0 = String.fromCharCode(116,114,97,110,115,102,111,114,109,101,114,95,119,95,48,0);
          let forward6 = false;
          let kickT = String.fromCharCode(107,105,110,103,95,121,95,51,0);
         emojiA *= parseFloat(`${2 * parseInt(`${emojiA}`)}`);
         strC *= parseFloat(`${half0.length >> (Math.min(Math.abs(3), 3))}`);
         half0 += `${(String.fromCharCode(84,0) == half0 ? (forward6 ? 1 : 4) : half0.length)}`;
         kickT += `${(half0 == String.fromCharCode(77,0) ? (forward6 ? 3 : 1) : half0.length)}`;
      }
      for (let q = 0; q < 2; q++) {
          let hookG = String.fromCharCode(106,95,50,54,95,100,105,102,102,101,114,101,110,99,101,115,0);
          let shareda = false;
          let targetd: Array<any> = [String.fromCharCode(100,117,109,112,112,97,99,107,101,116,95,100,95,56,0), String.fromCharCode(114,101,118,111,107,97,98,108,101,95,109,95,55,49,0), String.fromCharCode(113,95,49,48,95,103,101,111,98,116,97,103,0)];
         frame_64K ^= ((shareda ? 3 : 2) - targetd.length);
         hookG = `${2 + hookG.length}`;
         shareda = 46 >= hookG.length || hookG.length >= 46;
      }
      crownX -= 3;
       let sportC = 1.0;
       let winde = 5.0;
      while ((winde + sportC) <= 3.36 && (sportC + 3.36) <= 4.14) {
         winde -= 2 | parseInt(`${winde}`);
         break;
      }
      for (let w = 0; w < 1; w++) {
         sportC += parseFloat(`${3}`);
      }
         sportC += parseFloat(`${parseInt(`${winde}`) % (Math.max(parseInt(`${sportC}`), 8))}`);
          let bufferY = String.fromCharCode(109,117,108,116,105,112,108,101,120,101,100,95,118,95,50,52,0);
          let sortr = String.fromCharCode(102,95,55,56,95,97,115,110,116,0);
         sportC *= parseFloat(`${parseInt(`${sportC}`) * parseInt(`${winde}`)}`);
         bufferY += `${sortr.length % (Math.max(6, bufferY.length))}`;
         sortr = `${sortr.length | bufferY.length}`;
         sportC += parseFloat(`${3 & parseInt(`${winde}`)}`);
         sportC /= Math.max(5, parseFloat(`${2}`));
      floatingC >>= Math.min(3, Math.abs(parseInt(`${winde}`)));
       let blacklistI = true;
      for (let s = 0; s < 3; s++) {
         blacklistI = (!blacklistI ? !blacklistI : !blacklistI);
      }
          let stars = true;
          let malaysia7 = 5.0;
          let calendarQ = String.fromCharCode(115,116,99,111,95,48,95,52,53,0);
         blacklistI = 49.28 >= malaysia7;
         stars = calendarQ.includes(`${stars}`);
         malaysia7 *= (String.fromCharCode(101,0) == calendarQ ? calendarQ.length : (stars ? 3 : 2));
         blacklistI = (blacklistI ? !blacklistI : blacklistI);
      crownX *= floatingC;
      return '100%';
    } else if (isPlay || isPlayBottom) {

      sinaU.set(`${crownX}`, parseInt(`${crownX}`));
   for (let h = 0; h < 2; h++) {
      linet.push(rulesn.length);
   }
   while ((floatingC + sinaU.size) >= 3) {
      floatingC %= Math.max(2, 1);
      break;
   }
      update_1kG %= Math.max(3, ((tooltipsG ? 3 : 5)));
      update_1kG ^= ((tooltipsG ? 1 : 5) | sinaU.size);
      return 200;
    } else {

      sinaU.set(rulesn, (rulesn.length ^ (tooltipsG ? 4 : 4)));
   if (!tooltipsG) {
      floatingC &= 3;
   }
   while ((crownX - 1.77) > 4.56 && 1.77 > crownX) {
       let club6 = String.fromCharCode(112,108,97,110,97,114,95,112,95,56,53,0);
       let shootx = 4;
          let stationI = 2;
         shootx -= 2 << (Math.min(5, Math.abs(shootx)));
         stationI ^= stationI;
         club6 += `${shootx & club6.length}`;
      if ((club6.length % 1) < 1 || (club6.length % 1) < 2) {
         shootx &= shootx;
      }
      for (let v = 0; v < 2; v++) {
         club6 = `${shootx ^ 1}`;
      }
          let zhubom: Map<any, any> = new Map([[String.fromCharCode(119,95,56,48,95,102,116,118,99,108,0),821], [String.fromCharCode(99,111,110,116,105,110,117,101,95,122,95,57,57,0),649]]);
         club6 = `${shootx - 2}`;
         zhubom = new Map([[`${zhubom.size}`, zhubom.size]]);
      for (let u = 0; u < 1; u++) {
          let questa = 1.0;
          let progressY: Map<any, any> = new Map([[String.fromCharCode(115,117,112,101,114,119,105,110,100,111,119,95,55,95,49,51,0),String.fromCharCode(102,95,50,53,95,116,105,108,101,0)], [String.fromCharCode(97,103,114,101,101,109,101,110,116,95,105,95,57,55,0),String.fromCharCode(115,117,98,112,97,114,116,105,116,105,111,110,95,51,95,49,50,0)]]);
          let weibom = 3.0;
          let thailandE = true;
          let acceptedC = 4;
         club6 += `${shootx + club6.length}`;
         questa /= Math.max(progressY.size, 1);
         progressY.set(`${questa}`, progressY.size);
         weibom += parseFloat(`${parseInt(`${questa}`) << (Math.min(4, Math.abs(2)))}`);
         thailandE = progressY.size <= 20 && !thailandE;
         acceptedC /= Math.max(5, acceptedC % 1);
      }
      tooltipsG = club6.length >= 33 || String.fromCharCode(80,0) == rulesn;
      break;
   }
      sinaU.set(rulesn, floatingC);
   let fastforwardX = 6979462 >= linet.length;
   do {
      linet.push(linet.length);
      if (fastforwardX) {
         break;
      }
   } while (((linet.length >> (Math.min(Math.abs(3), 1))) >= 5) && fastforwardX);
      return 0;
    }
  };

  return (
    <View
      style={{
        ...styles.container,
        marginBottom: isPlay ? 150 : '50%',
        backgroundColor: isPlay ? '#000000' : colors.background,
        minHeight: getMinHeight(),
      }}>
      {!isPlay && isPotrait && (
        <>
          <NoWifi />
          <Text
            style={{
              ...textVariants.subBody,
              color: colors.text,
              textAlign: 'center',
              paddingTop: 10,
            }}>
            无网络
          </Text>
          <Text
            style={{
              ...textVariants.subBody,
              color: colors.muted,
              textAlign: 'center',
              paddingTop: 12,
            }}>
            网络连接失败，请刷新重试
          </Text>
          <TouchableOpacity activeOpacity={0.85} onPress={onClickRetry}>
            <View
              style={{
                ...styles.refreshBtn,
                backgroundColor: IS_OTHER_SKIN ? 'white' : colors.title,
              }}>
              <View style={{ position: 'relative', top: 2, paddingRight: 3 }}>
                <RefreshIcon />
              </View>
              <Text
                style={{
                  ...styles.head,
                  color: IS_OTHER_SKIN ? colors.text : colors.background,
                }}>
                点击重试
              </Text>
            </View>
          </TouchableOpacity>
        </>
      )}
      {isPlay && (
        <>
          {/* <View>
            <YingshiGreyIcon />
          </View> */}
          <Text
            style={{
              ...textVariants.subBody,
              color: colors.muted,
              textAlign: 'center',
              paddingTop: 12,
            }}>
            无网络或断网，请刷新视频
          </Text>
          <TouchableOpacity activeOpacity={0.85} onPress={onClickRetry}>
            <View
              style={{
                ...styles.refreshBtn,
                backgroundColor: IS_OTHER_SKIN ? 'white' : colors.title,
              }}>
              <View style={{ position: 'relative', top: 2, paddingRight: 3 }}>
                <RefreshIcon />
              </View>
              <Text
                style={{
                  ...styles.head,
                  color: IS_OTHER_SKIN ? colors.text : colors.background,
                }}>
                刷新
              </Text>
            </View>
          </TouchableOpacity>
        </>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    display: 'flex',
    flexGrow: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  btns: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  btn: {
    flex: 1,
  },
  head: {
    color: 'white',
    textAlign: 'center',
  },
  refreshBtn: {
    marginTop: 20,
    borderRadius: 30,
    display: 'flex',
    flexDirection: 'row',
    paddingVertical: 8,
    paddingHorizontal: 15,
    alignItems: 'center',
    justifyContent: 'center',
    fontWeight: 'bold',
  },
});
