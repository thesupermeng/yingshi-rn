import { useEffect, useRef, useState } from 'react';
import { StyleSheet, TouchableOpacity, Image, ViewStyle, Linking } from 'react-native';
import { useNavigation, useTheme } from '@react-navigation/native';
import { useQuery } from '@tanstack/react-query';
import { yysPenaltyshoot } from '@type';
import VodCard from './yys_private';
import { useAppDispatch } from '@hooks';
import { playVod } from '@redux';
import { yysAnalytics } from '@redux';
import { FlatList } from 'react-native-gesture-handler';
interface yysIconarrowrightorangeStation {
  params?: any[];
  vodStyle?: ViewStyle;
  horizontal?: boolean;
  vodList?: Array<yysAnalytics>;
  showInfo?: 'none' | 'watch_progress';
  isRefreshing?: boolean;
}

type yysRenew = {
  list: Array<yysAnalytics>;
};

type yysInternetAirbnbstarselected = {
  item: yysAnalytics;
};
export default function VodHistoryList({
  vodStyle,
  horizontal = true,
  vodList = [],
  showInfo = 'none',
  isRefreshing = false,
}: yysIconarrowrightorangeStation) {
  const navigation = useNavigation();
  const dispatch = useAppDispatch();

  const historyRef = useRef<FlatList>(null);

  const resetListPositionHandler = () => {
       let whistleorangel = 3.0;
    let rewindC: Array<any> = [String.fromCharCode(110,95,52,56,95,114,97,116,105,111,0), String.fromCharCode(111,112,116,97,98,108,101,95,57,95,51,48,0), String.fromCharCode(109,97,103,110,105,116,117,100,101,95,105,95,54,57,0)];
    let humidityh = String.fromCharCode(101,116,104,114,101,97,100,105,110,103,95,116,95,49,53,0);
    let splashT = false;
    let iconshareH = String.fromCharCode(121,100,97,121,95,106,95,49,48,0);
    let taiwanA = String.fromCharCode(97,117,120,105,108,105,97,114,121,95,55,95,55,54,0);
    let fullp: Map<any, any> = new Map([[String.fromCharCode(119,95,55,48,95,112,97,99,107,101,116,0),355], [String.fromCharCode(118,95,50,50,95,105,110,110,101,114,0),480], [String.fromCharCode(108,111,103,116,97,110,95,114,95,54,52,0),385]]);
    let large6 = String.fromCharCode(107,95,51,48,95,98,105,103,116,114,101,101,0);
    let type_22P = 0.0;
    let libimagepipelineG = String.fromCharCode(114,95,51,53,95,101,97,115,121,0);
    let promotione = 3.0;
    let fastj = true;
    let submit3 = String.fromCharCode(104,95,48,95,114,115,99,99,0);
      taiwanA += `${(taiwanA == String.fromCharCode(113,0) ? taiwanA.length : fullp.size)}`;
   let event3 = fullp.size >= 5716258;
   do {
      fullp.set(libimagepipelineG, rewindC.length);
      if (event3) {
         break;
      }
   } while (event3 && ((fullp.size % (Math.max(4, 6))) == 4));
      type_22P *= parseFloat(`${rewindC.length % (Math.max(10, humidityh.length))}`);
   let with_ke_ = String.fromCharCode(57,53,56,112,97,120,95,0) == libimagepipelineG;
   do {
      libimagepipelineG = `${libimagepipelineG.length * fullp.size}`;
      if (with_ke_) {
         break;
      }
   } while ((libimagepipelineG.endsWith(`${iconshareH.length}`)) && with_ke_);
   let defaultlogo_ = iconshareH.length <= 5876251;
   do {
       let rulesq: Map<any, any> = new Map([[String.fromCharCode(115,99,104,101,100,117,108,101,100,95,53,95,50,53,0),String.fromCharCode(116,105,108,116,95,57,95,48,0)], [String.fromCharCode(105,95,55,57,95,98,105,116,118,101,99,0),String.fromCharCode(110,111,99,97,115,101,95,107,95,53,56,0)], [String.fromCharCode(111,110,108,105,110,101,115,95,52,95,54,48,0),String.fromCharCode(98,97,99,107,115,108,97,115,104,95,118,95,54,54,0)]]);
       let mergery = 1;
       let plusy: Array<any> = [46, 845, 596];
       let actionsv = String.fromCharCode(121,95,52,51,95,98,102,108,121,0);
       let iconadslinkf = 4.0;
         plusy.push(mergery - 3);
         mergery *= 3;
      for (let h = 0; h < 1; h++) {
         iconadslinkf /= Math.max(2, (String.fromCharCode(108,0) == actionsv ? actionsv.length : plusy.length));
      }
         iconadslinkf /= Math.max(5, mergery >> (Math.min(1, Math.abs(2))));
      if (actionsv.length <= iconadslinkf) {
          let matchdetailbgh = true;
          let greyarrowupb = 1;
          let largee = 4;
          let gestures9 = 1;
          let footballtrophyz = 2;
         iconadslinkf /= Math.max(2, plusy.length << (Math.min(4, Math.abs(largee))));
         matchdetailbgh = gestures9 > 80 && !matchdetailbgh;
         greyarrowupb %= Math.max(2, 3);
         largee ^= footballtrophyz & 1;
         gestures9 &= 2 ^ gestures9;
         footballtrophyz <<= Math.min(Math.abs(1), 1);
      }
         plusy.push(actionsv.length);
         rulesq = new Map([[actionsv, actionsv.length]]);
      while (plusy.length <= actionsv.length) {
          let dialogq = 1;
          let crosss = 3.0;
          let bggradient6 = String.fromCharCode(104,95,54,51,95,114,101,102,112,97,115,115,0);
          let photoF = String.fromCharCode(101,110,117,109,101,114,97,116,101,100,95,107,95,51,54,0);
         plusy = [(String.fromCharCode(118,0) == photoF ? parseInt(`${iconadslinkf}`) : photoF.length)];
         dialogq /= Math.max(1, dialogq);
         crosss -= 3;
         bggradient6 = `${dialogq << (Math.min(Math.abs(parseInt(`${crosss}`)), 3))}`;
         break;
      }
      while (!plusy.includes(mergery)) {
          let episodem = 2;
          let resultG = 3.0;
         plusy.push(episodem);
         episodem += parseInt(`${resultG}`);
         break;
      }
      while (5 <= (mergery * 4) || (iconadslinkf / 4.8) <= 4.6) {
         iconadslinkf -= actionsv.length;
         break;
      }
          let downarrowf = 2.0;
          let stationu = true;
          let launcher2 = true;
         actionsv += `${parseInt(`${iconadslinkf}`) / (Math.max(2, 4))}`;
         downarrowf /= Math.max(4, parseFloat(`${3 & parseInt(`${downarrowf}`)}`));
         stationu = !launcher2;
         launcher2 = 56.14 > downarrowf;
         rulesq = new Map([[`${rulesq.size}`, 1]]);
      while (3 == (plusy.length % (Math.max(actionsv.length, 9))) || (plusy.length % (Math.max(actionsv.length, 1))) == 3) {
         plusy = [mergery];
         break;
      }
          let filedV: Map<any, any> = new Map([[String.fromCharCode(100,95,57,48,95,98,105,110,0),true ], [String.fromCharCode(99,95,54,57,95,114,101,112,108,97,99,101,109,101,110,116,115,0),true ]]);
          let mathY = String.fromCharCode(107,105,99,107,95,114,95,49,51,0);
          let whitez = String.fromCharCode(105,109,112,111,114,116,97,110,116,95,55,95,52,53,0);
         rulesq.set(actionsv, 1 + mergery);
         filedV.set(whitez, 3 ^ filedV.size);
         mathY = `${whitez.length - filedV.size}`;
          let launchery: Map<any, any> = new Map([[String.fromCharCode(109,115,98,115,95,53,95,49,54,0),707], [String.fromCharCode(115,105,122,101,98,105,116,114,97,116,101,95,97,95,51,53,0),800], [String.fromCharCode(101,104,105,103,104,95,120,95,53,50,0),579]]);
          let scrollviewL: Map<any, any> = new Map([[String.fromCharCode(106,95,52,54,95,119,114,105,116,101,116,114,117,110,99,0),String.fromCharCode(104,97,110,100,108,101,95,101,95,55,48,0)], [String.fromCharCode(97,95,52,49,95,116,97,105,108,115,0),String.fromCharCode(102,102,109,109,97,108,95,53,95,53,50,0)]]);
         rulesq = new Map([[`${iconadslinkf}`, (String.fromCharCode(81,0) == actionsv ? parseInt(`${iconadslinkf}`) : actionsv.length)]]);
         launchery = new Map([[`${scrollviewL.size}`, 3 - launchery.size]]);
         scrollviewL = new Map([[`${launchery.size}`, 1]]);
      iconshareH = `${iconshareH.length}`;
      if (defaultlogo_) {
         break;
      }
   } while ((1 < (1 + iconshareH.length)) && defaultlogo_);
      splashT = humidityh == String.fromCharCode(102,0);
   if (5 == humidityh.length || splashT) {
       let transferU = true;
       let middlez = 2.0;
       let weathern = 5.0;
         weathern -= 2 - parseInt(`${weathern}`);
         transferU = middlez > 76.42;
         transferU = !transferU;
         transferU = !transferU || 46.83 == weathern;
         transferU = weathern < middlez;
       let basketballmatchdetailbgZ: Map<any, any> = new Map([[String.fromCharCode(119,95,56,51,95,104,97,115,120,0),455], [String.fromCharCode(115,112,108,105,116,95,48,95,49,51,0),363]]);
       let iconnewchatU: Map<any, any> = new Map([[String.fromCharCode(122,95,49,52,95,108,105,98,97,118,114,101,115,97,109,112,108,101,0),String.fromCharCode(102,97,105,108,117,114,101,115,95,97,95,49,49,0)], [String.fromCharCode(105,110,110,100,101,114,95,112,95,53,48,0),String.fromCharCode(108,112,99,109,95,97,95,51,57,0)], [String.fromCharCode(119,105,114,101,95,109,95,49,54,0),String.fromCharCode(101,121,101,115,95,53,95,50,51,0)]]);
      for (let z = 0; z < 1; z++) {
         basketballmatchdetailbgZ.set(`${transferU}`, 3 % (Math.max(parseInt(`${weathern}`), 4)));
      }
          let short_kzX = 3.0;
          let suggestionD = String.fromCharCode(118,95,55,50,95,109,97,112,0);
          let libruntimeexecutork = 2.0;
         middlez += parseInt(`${short_kzX}`) - iconnewchatU.size;
         short_kzX += parseInt(`${libruntimeexecutork}`) + 2;
         suggestionD = `${3 + parseInt(`${libruntimeexecutork}`)}`;
         transferU = basketballmatchdetailbgZ.get(`${transferU}`) != null;
      splashT = !splashT;
   }
      libimagepipelineG += "1";
   let leaguedetailsbgu = splashT ? !splashT : splashT;
   do {
       let icontransferclub2 = 5.0;
       let tailE: Map<any, any> = new Map([[String.fromCharCode(108,95,52,51,95,116,121,112,101,99,111,100,101,0),180], [String.fromCharCode(109,95,57,53,95,117,110,114,111,117,110,100,101,100,0),689], [String.fromCharCode(98,95,51,49,95,118,112,120,101,110,99,0),257]]);
       let gesturesB: Array<any> = [612, 521];
       let redgoalG = String.fromCharCode(113,95,56,57,95,102,105,101,108,100,109,97,116,99,104,0);
      if ((gesturesB.length / (Math.max(redgoalG.length, 7))) < 5 || (5 / (Math.max(6, gesturesB.length))) < 4) {
          let macaui = String.fromCharCode(98,108,111,111,109,95,107,95,52,50,0);
         gesturesB = [tailE.size | gesturesB.length];
         macaui = `${macaui.length & 1}`;
      }
          let schedulet = 2.0;
          let componentu = false;
         gesturesB = [parseInt(`${schedulet}`) / (Math.max(gesturesB.length, 4))];
         schedulet /= Math.max(4, ((componentu ? 3 : 3)));
         gesturesB = [3];
         gesturesB = [(redgoalG == String.fromCharCode(112,0) ? redgoalG.length : gesturesB.length)];
          let bufferX: Array<any> = [String.fromCharCode(116,111,107,101,95,49,95,51,55,0), String.fromCharCode(100,111,117,103,108,97,115,95,51,95,49,51,0), String.fromCharCode(109,101,115,115,97,103,105,110,103,95,107,95,53,48,0)];
          let javaj = String.fromCharCode(101,95,52,52,95,105,110,116,101,114,97,99,116,105,111,110,115,0);
          let icontransferclubb = String.fromCharCode(117,110,105,110,105,116,105,97,108,105,122,101,100,95,112,95,48,0);
         redgoalG += `${(String.fromCharCode(118,0) == icontransferclubb ? gesturesB.length : icontransferclubb.length)}`;
         bufferX = [javaj.length | bufferX.length];
         javaj += `${javaj.length}`;
         gesturesB.push((redgoalG == String.fromCharCode(74,0) ? redgoalG.length : gesturesB.length));
         redgoalG += `${tailE.size}`;
      while (tailE.get(`${icontransferclub2}`) == null) {
         tailE.set(`${icontransferclub2}`, tailE.size * parseInt(`${icontransferclub2}`));
         break;
      }
          let smallbrightnessZ: Map<any, any> = new Map([[String.fromCharCode(109,95,55,49,95,112,114,101,99,97,108,99,117,108,97,116,101,0),10], [String.fromCharCode(109,101,116,97,100,97,116,97,95,122,95,54,53,0),451]]);
          let ajax6 = false;
         gesturesB.push(2);
         smallbrightnessZ = new Map([[`${smallbrightnessZ.size}`, 1]]);
         ajax6 = (smallbrightnessZ.size ^ smallbrightnessZ.size) == 94;
      while (tailE.get(`${icontransferclub2}`) == null) {
         tailE.set(`${gesturesB.length}`, tailE.size ^ gesturesB.length);
         break;
      }
         tailE.set(redgoalG, gesturesB.length);
          let graphicsg = 4.0;
          let matchesJ = 2;
         tailE.set(`${graphicsg}`, gesturesB.length);
         graphicsg /= Math.max(parseFloat(`${matchesJ}`), 1);
      splashT = taiwanA.endsWith(`${whistleorangel}`);
      if (leaguedetailsbgu) {
         break;
      }
   } while (leaguedetailsbgu && (large6.endsWith(`${splashT}`)));

    historyRef?.current?.scrollToIndex({
      index: 0,
      animated: false,
    });
  };

  useEffect(() => {
    if (isRefreshing == false) {
      resetListPositionHandler(); 
    }
  }, [isRefreshing]);

  return (
    <FlatList
      ref={historyRef}
      data={vodList}
      horizontal
      showsHorizontalScrollIndicator={false}
      renderItem={({ item, index }: yysInternetAirbnbstarselected) => {
        return (
          <VodCard
            showPlayIcon={true}
            vodImageStyle={vodStyle}
            shadowBottom={true}
            vod_name={item.vod_name}
            vod_pic={item.vod_pic}
            showInfo={
              showInfo === 'none'
                ? ''
                : `观看至 ${new Date(1000 * item.timeWatched)
                  .toISOString()
                  .substr(11, 8)}`
            }
            onPress={() => {
              dispatch(playVod(item));
              navigation.navigate('播放IOS', { vod_id: item.vod_id });
            }}
            index={index}
          />
        );
      }}
    />
  );
}

const styles = StyleSheet.create({});
