import {useEffect, useRef, useState} from 'react';
import {StyleSheet, TouchableOpacity, Image, ViewStyle, Linking} from 'react-native';
import {useNavigation, useTheme} from '@react-navigation/native';
import {useQuery} from '@tanstack/react-query';
import {wawaSellProfileinactive} from '@type/wawa_gradlew';
import VodCard from './wawa_mimo_footballtrophy';
import {useAppDispatch} from '@hooks/wawa_root';
import {playVod} from '@redux/actions/wawa_indicator';
import {wawaGuideSelect} from '@redux/reducers/wawa_quest_ping';
import {FlatList} from 'react-native-gesture-handler';
interface wawaAwayShow {
  params?: any[];
  vodStyle?: ViewStyle;
  horizontal?: boolean;
  vodList?: Array<wawaGuideSelect>;
  showInfo?: 'none' | 'watch_progress';
  isRefreshing?: boolean;
}

type wawaEwardedEmoji = {
  list: Array<wawaGuideSelect>;
};

type wawaBellreminderDisconnected = {
  item: wawaGuideSelect;
};
export default function VodHistoryList({
  vodStyle,
  horizontal = true,
  vodList = [],
  showInfo = 'none',
  isRefreshing = false,
}: wawaAwayShow) {
  const navigation = useNavigation();
  const dispatch = useAppDispatch();

  const historyRef = useRef<FlatList>(null);

  const resetListPositionHandler = () => {
       let iconclosewhiteG = 3.0;
    let castm = String.fromCharCode(97,108,97,98,97,115,116,101,114,95,120,95,50,0);
    let greytickr = true;
    let rulesP = String.fromCharCode(112,97,100,95,97,95,53,56,0);
    let orangel = String.fromCharCode(98,95,49,57,95,99,100,108,109,115,0);
    let giftbutton4 = 4.0;
    let clubg = 3;
    let inactiveB = 5;
    let runtimee = 2;
    let type_lR = 1.0;
    let singapore1 = false;
    let activeM: Array<any> = [573, 106, 897];
    let pausea: Map<any, any> = new Map([[String.fromCharCode(100,112,97,103,101,95,118,95,51,0),949], [String.fromCharCode(97,97,99,99,111,100,101,114,95,121,95,51,54,0),540], [String.fromCharCode(104,95,52,48,95,116,117,112,108,101,115,0),941]]);
    let gradlew = 3.0;
    let phonek = String.fromCharCode(106,95,57,49,95,114,108,109,0);
    let arrowupB = 2.0;
   for (let a = 0; a < 2; a++) {
      iconclosewhiteG /= Math.max(5, (parseFloat(`${(greytickr ? 5 : 1) % (Math.max((singapore1 ? 4 : 2), 3))}`)));
   }
       let libswscaleQ = true;
       let libjsit = String.fromCharCode(102,105,114,101,98,97,115,101,95,53,95,57,51,0);
       let privacyM = String.fromCharCode(114,101,106,101,99,116,101,100,95,115,95,56,57,0);
       let saveS = 0.0;
         saveS /= Math.max((parseFloat(`${String.fromCharCode(80,0) == libjsit ? privacyM.length : libjsit.length}`)), 3);
      rulesP += `${parseInt(`${giftbutton4}`)}`;
      libswscaleQ = !libswscaleQ;
   let searchbarZ = runtimee >= 8120266;
   do {
       let unimplementedviewY: Array<any> = [125, 332, 649];
       let feedbackg: Map<any, any> = new Map([[String.fromCharCode(112,105,120,101,108,115,120,95,118,95,51,49,0),797], [String.fromCharCode(117,95,55,48,95,97,115,115,111,99,108,105,115,116,0),969], [String.fromCharCode(115,95,52,52,95,97,110,110,111,116,97,116,105,111,110,115,0),98]]);
         feedbackg = new Map([[`${feedbackg.size}`, feedbackg.size]]);
      for (let c = 0; c < 1; c++) {
          let iconcalendarz = String.fromCharCode(115,115,115,101,0);
          let disconnectedlogoZ = String.fromCharCode(103,101,116,104,111,115,116,98,121,110,97,109,101,95,56,95,49,53,0);
          let fieldw = 4.0;
          let runtimeschedulerC = 4;
         feedbackg.set(`${unimplementedviewY.length}`, 3 | feedbackg.size);
         iconcalendarz += `${iconcalendarz.length / (Math.max(disconnectedlogoZ.length, 2))}`;
         disconnectedlogoZ = `${1 ^ iconcalendarz.length}`;
         fieldw *= 1 / (Math.max(1, parseInt(`${fieldw}`)));
         runtimeschedulerC += iconcalendarz.length;
      }
         unimplementedviewY.push(unimplementedviewY.length | feedbackg.size);
      if (3 == (2 + unimplementedviewY.length)) {
          let downloadingn = 3.0;
          let eyeclosey: Map<any, any> = new Map([[String.fromCharCode(97,95,54,56,95,97,112,112,114,101,99,97,116,105,111,110,104,111,117,114,0),791], [String.fromCharCode(116,105,109,101,103,109,95,122,95,53,52,0),546], [String.fromCharCode(112,97,114,115,101,114,115,95,117,95,51,48,0),911]]);
         feedbackg = new Map([[`${unimplementedviewY.length}`, unimplementedviewY.length]]);
         downloadingn /= Math.max(parseFloat(`${1}`), 3);
         eyeclosey.set(`${downloadingn}`, 1);
      }
       let penaltyT = String.fromCharCode(117,110,112,114,111,116,101,99,116,95,49,95,53,49,0);
      if (feedbackg.size >= 4) {
         feedbackg.set(penaltyT, unimplementedviewY.length);
      }
      runtimee += 1;
      if (searchbarZ) {
         break;
      }
   } while (searchbarZ && ((runtimee >> (Math.min(Math.abs(4), 1))) < 2));
   while (orangel.includes(`${clubg}`)) {
      clubg >>= Math.min(2, Math.abs(3));
      break;
   }
   while ((5 ^ inactiveB) >= 5 || singapore1) {
       let fcdaebecbcbafcdfceaaeccfeacdbV: Map<any, any> = new Map([[String.fromCharCode(116,95,56,49,95,101,110,115,117,114,101,0),985], [String.fromCharCode(112,105,120,100,101,115,99,95,111,95,57,50,0),159], [String.fromCharCode(117,116,105,108,105,116,105,101,115,95,110,95,54,49,0),267]]);
       let mails = String.fromCharCode(105,95,53,55,95,116,100,115,102,0);
       let predictionloss8 = false;
       let armvaq = true;
       let androids = String.fromCharCode(111,112,101,110,95,97,95,51,50,0);
      let filledr = predictionloss8 ? !predictionloss8 : predictionloss8;
      do {
         predictionloss8 = armvaq && predictionloss8;
         if (filledr) {
            break;
         }
      } while (filledr && (!armvaq));
      while (androids.length >= 2 && !predictionloss8) {
         androids += `${((predictionloss8 ? 1 : 2) - fcdaebecbcbafcdfceaaeccfeacdbV.size)}`;
         break;
      }
      while (predictionloss8) {
         predictionloss8 = fcdaebecbcbafcdfceaaeccfeacdbV.size == 97;
         break;
      }
      if (!predictionloss8) {
         fcdaebecbcbafcdfceaaeccfeacdbV.set(androids, ((predictionloss8 ? 1 : 1) / 2));
      }
         androids = `${((predictionloss8 ? 4 : 5))}`;
      while (!predictionloss8) {
          let iconarrowleftA = 5;
         armvaq = (androids.length * iconarrowleftA) >= 48;
         break;
      }
         armvaq = androids.endsWith(`${armvaq}`);
         armvaq = mails == String.fromCharCode(102,0);
         predictionloss8 = (14 >= ((!predictionloss8 ? fcdaebecbcbafcdfceaaeccfeacdbV.size : 47) % (Math.max(5, fcdaebecbcbafcdfceaaeccfeacdbV.size))));
      while (predictionloss8) {
          let flagp = String.fromCharCode(111,95,52,55,95,100,100,114,97,110,103,101,0);
          let combine0 = 1;
          let update_u7T = false;
         armvaq = predictionloss8;
         flagp += `${combine0}`;
         combine0 ^= (flagp.length << (Math.min(4, Math.abs((update_u7T ? 3 : 2)))));
         update_u7T = 70 >= combine0;
         break;
      }
         androids += `${((predictionloss8 ? 4 : 5) * 3)}`;
         androids = `${androids.length & 1}`;
      while (androids.startsWith(`${armvaq}`)) {
         armvaq = fcdaebecbcbafcdfceaaeccfeacdbV.size <= 86 || 86 <= androids.length;
         break;
      }
      while (5 < (androids.length & fcdaebecbcbafcdfceaaeccfeacdbV.size) && 2 < (fcdaebecbcbafcdfceaaeccfeacdbV.size & 5)) {
         androids += `${((armvaq ? 1 : 2) * 2)}`;
         break;
      }
      while ((mails.length * fcdaebecbcbafcdfceaaeccfeacdbV.size) <= 5 || (5 * fcdaebecbcbafcdfceaaeccfeacdbV.size) <= 1) {
         fcdaebecbcbafcdfceaaeccfeacdbV.set(androids, androids.length);
         break;
      }
      inactiveB %= Math.max(3, 5);
      break;
   }
   let entryl = 6790340.0 <= type_lR;
   do {
      type_lR -= rulesP.length ^ parseInt(`${iconclosewhiteG}`);
      if (entryl) {
         break;
      }
   } while ((4 > (castm.length - 2)) && entryl);
       let blackf: Map<any, any> = new Map([[String.fromCharCode(115,112,97,99,101,114,115,95,118,95,52,51,0),String.fromCharCode(117,95,51,51,95,109,105,100,105,0)], [String.fromCharCode(97,100,114,109,95,117,95,49,54,0),String.fromCharCode(119,95,56,54,95,105,110,98,111,120,0)], [String.fromCharCode(112,95,56,55,95,112,97,108,98,97,114,115,0),String.fromCharCode(119,95,56,53,95,114,101,102,115,0)]]);
       let weibop: Array<any> = [204, 966, 876];
       let iconrefresh0 = 2.0;
      for (let v = 0; v < 1; v++) {
         weibop = [blackf.size - 2];
      }
      if (!Array.from(blackf.values()).includes(weibop.length)) {
          let security2 = String.fromCharCode(117,95,55,52,95,111,117,116,108,105,110,107,0);
         weibop = [blackf.size];
         security2 = `${security2.length}`;
      }
         weibop.push(parseInt(`${iconrefresh0}`));
      let greyarrowupG = iconrefresh0 >= 7417057.0;
      do {
          let imagenomoredataN = String.fromCharCode(108,95,52,55,95,112,114,105,118,97,99,121,0);
         iconrefresh0 -= parseFloat(`${3 ^ parseInt(`${iconrefresh0}`)}`);
         imagenomoredataN += `${(imagenomoredataN == String.fromCharCode(119,0) ? imagenomoredataN.length : imagenomoredataN.length)}`;
         if (greyarrowupG) {
            break;
         }
      } while (((parseInt(`${iconrefresh0}`) / (Math.max(7, blackf.size))) < 1 && (iconrefresh0 / (Math.max(3.59, 6))) < 4.76) && greyarrowupG);
      while (!Array.from(blackf.values()).includes(weibop.length)) {
          let launchert = 2.0;
          let animationsL = 5.0;
          let defaultlogoG: Map<any, any> = new Map([[String.fromCharCode(103,114,101,101,110,95,101,95,54,54,0),372], [String.fromCharCode(110,95,54,57,95,110,111,116,105,102,105,101,114,0),65], [String.fromCharCode(115,105,110,100,101,120,95,103,95,50,51,0),797]]);
          let iconclosewhitewithbgQ = 3;
         blackf.set(`${iconrefresh0}`, parseInt(`${iconrefresh0}`) | 3);
         launchert *= parseInt(`${animationsL}`);
         defaultlogoG = new Map([[`${defaultlogoG.size}`, parseInt(`${launchert}`) % (Math.max(defaultlogoG.size, 5))]]);
         iconclosewhitewithbgQ |= defaultlogoG.size * 3;
         break;
      }
         weibop.push(2 / (Math.max(6, parseInt(`${iconrefresh0}`))));
      let sellmathbackgroundm = 7358481 <= weibop.length;
      do {
         weibop.push(weibop.length);
         if (sellmathbackgroundm) {
            break;
         }
      } while (sellmathbackgroundm && (!weibop.includes(iconrefresh0)));
          let videobufferloadingg = 0.0;
         iconrefresh0 *= parseFloat(`${blackf.size}`);
         videobufferloadingg -= parseFloat(`${1 << (Math.min(Math.abs(parseInt(`${videobufferloadingg}`)), 1))}`);
          let chata = String.fromCharCode(119,95,49,49,95,116,114,117,101,104,100,0);
         weibop = [(String.fromCharCode(72,0) == chata ? weibop.length : chata.length)];
      castm += `${1 * parseInt(`${giftbutton4}`)}`;
   while (1.8 <= (iconclosewhiteG + parseFloat(`${castm.length}`)) && 1.54 <= (1.8 + iconclosewhiteG)) {
      castm = `${castm.length % 3}`;
      break;
   }
      inactiveB += (2 | (singapore1 ? 3 : 2));
      type_lR *= rulesP.length | parseInt(`${giftbutton4}`);

    historyRef?.current?.scrollToIndex({
      index: 0,
      animated: false,
    });
  };

  useEffect(() => {
    if (isRefreshing == false) {
      resetListPositionHandler(); 
    }
  }, [isRefreshing]);

  return (
    <FlatList
      ref={historyRef}
      data={vodList}
      horizontal
      showsHorizontalScrollIndicator={false}
      renderItem={({item, index}: wawaBellreminderDisconnected) => {
        return (
          <VodCard
            showPlayIcon={true}
            vodImageStyle={vodStyle}
            shadowBottom={true}
            vod_name={item.vod_name}
            vod_pic={item.vod_pic}
            showInfo={
              showInfo === 'none'
                ? ''
                : `观看至 ${new Date(1000 * item.timeWatched)
                    .toISOString()
                    .substr(11, 8)}`
            }
            onPress={() => {
              dispatch(playVod(item));
              navigation.navigate('播放IOS', {vod_id: item.vod_id});
            }}
            index={index}
          />
        );
      }}
    />
  );
}

const styles = StyleSheet.create({});
