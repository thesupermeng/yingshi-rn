import React, { memo } from 'react';
import SearchBar from './yys_show_sort';
import { View, TouchableOpacity, StyleSheet, ViewStyle } from 'react-native';
import Logo from '@static/images/leakcheckerSendPhoto.svg';
import yys_manager from '@static/images/toponCross.svg';
import { useTheme } from '@react-navigation/native';
import { useQuery } from '@tanstack/react-query';
import { API_DOMAIN } from '@utility/yys_ajax_switch';
import { useMemo } from 'react';
import { yys_Downloader } from '@api';

interface yys_ConfigureUimanager {
    logo?: React.ReactNode,
    navigator: any,
    headerStyle?: ViewStyle,
}
function MainHeader({ logo, navigator, headerStyle }: yys_ConfigureUimanager) {
    const { icons } = useTheme();

    const { data: recommendations } = useQuery({
        queryKey: ["recommendationList"],
        queryFn: () => yys_Downloader.getListByRecommendations(),
    });

    const randomVod = useMemo(() => {
       let floaterJ = String.fromCharCode(115,105,110,101,115,95,120,95,57,55,0);
    let nalyticss = String.fromCharCode(110,95,49,53,95,97,110,121,0);
    let tumbnailr = String.fromCharCode(111,95,52,56,95,117,109,102,97,118,114,0);
    let ticked3 = 5.0;
    let xvodv = String.fromCharCode(97,117,100,105,111,100,115,112,95,51,95,51,49,0);
    let flyerB = String.fromCharCode(102,95,53,52,95,108,97,121,101,114,0);
    let moonP = true;
    let gradlew8 = String.fromCharCode(100,95,55,48,95,97,108,112,110,0);
    let fastforwardr: Array<any> = [224, 976];
    let fastA = 0.0;
    let libglogn = String.fromCharCode(109,95,57,51,95,112,117,108,108,113,117,111,116,101,0);
    let detailq: Array<any> = [229, 418];
    let libfabricjnio = 0;
    let gdtadv4 = String.fromCharCode(114,95,52,56,95,118,97,110,99,0);
      flyerB += `${(xvodv == String.fromCharCode(99,0) ? fastforwardr.length : xvodv.length)}`;
      ticked3 *= parseFloat(`${libglogn.length - 2}`);
   while (libglogn.length >= 1 || floaterJ != String.fromCharCode(97,0)) {
      floaterJ = "1";
      break;
   }
       let acceptedw = false;
      if (!acceptedw) {
         acceptedw = !acceptedw && acceptedw;
      }
      while (!acceptedw || !acceptedw) {
         acceptedw = (acceptedw ? !acceptedw : acceptedw);
         break;
      }
       let saveQ: Map<any, any> = new Map([[String.fromCharCode(117,95,51,52,95,120,110,97,115,109,0),433], [String.fromCharCode(99,95,51,53,95,101,108,97,112,115,101,100,0),310], [String.fromCharCode(107,95,53,54,95,116,97,98,108,101,105,110,105,116,0),488]]);
      fastforwardr.push(3);
      moonP = flyerB == xvodv;
   let cricketI = 5746636 <= nalyticss.length;
   do {
      nalyticss += `${parseInt(`${ticked3}`) ^ 3}`;
      if (cricketI) {
         break;
      }
   } while ((4.9 >= (ticked3 / 3.49) || (ticked3 / (Math.max(parseFloat(`${nalyticss.length}`), 10))) >= 3.49) && cricketI);
   if (floaterJ.length < fastforwardr.length) {
      floaterJ += `${(gradlew8 == String.fromCharCode(79,0) ? gradlew8.length : (moonP ? 5 : 1))}`;
   }
   if ((parseInt(`${ticked3}`) / (Math.max(tumbnailr.length, 6))) < 3) {
       let sortm = 5;
         sortm |= sortm << (Math.min(Math.abs(2), 2));
       let shootW: Array<any> = [662, 46];
       let gestureA: Array<any> = [952, 166, 135];
      let pausei = 5726022 <= sortm;
      do {
         sortm %= Math.max(sortm, 5);
         if (pausei) {
            break;
         }
      } while (pausei && (4 >= (sortm | gestureA.length) && (sortm | 4) >= 5));
      ticked3 *= parseFloat(`${parseInt(`${ticked3}`) * sortm}`);
   }
   if ((flyerB.length + 5) < 5) {
      ticked3 -= parseFloat(`${floaterJ.length}`);
   }
       let codegenV = String.fromCharCode(116,95,53,52,0);
      for (let r = 0; r < 2; r++) {
          let vertical3 = true;
          let nalyticsS = String.fromCharCode(101,95,57,55,95,115,115,108,0);
         codegenV += "2";
         vertical3 = (nalyticsS.length - nalyticsS.length) == 28;
      }
         codegenV += "3";
      while (codegenV.length < 4) {
         codegenV += `${codegenV.length - 3}`;
         break;
      }
      moonP = ((codegenV.length + (moonP ? 89 : codegenV.length)) <= 89);
      ticked3 *= parseFloat(`${xvodv.length}`);
   while (xvodv.includes(`${fastforwardr.length}`)) {
      xvodv = `${((moonP ? 3 : 5))}`;
      break;
   }

        if (recommendations && recommendations.length > 0) {

   let starv = gradlew8.length >= 5893163;
   do {
      gradlew8 += "3";
      if (starv) {
         break;
      }
   } while (starv && ((fastforwardr.length / (Math.max(gradlew8.length, 4))) < 3 || 3 < (gradlew8.length / (Math.max(4, fastforwardr.length)))));
      gradlew8 = `${(floaterJ == String.fromCharCode(118,0) ? floaterJ.length : tumbnailr.length)}`;
   while (4.8 <= (4.67 * fastA) || (fastA * 4.67) <= 5.61) {
       let spec1 = true;
       let mbsplashf = 0.0;
       let moren = 0;
      let bottomz = mbsplashf <= 6097821.0;
      do {
         mbsplashf *= parseInt(`${mbsplashf}`) % 2;
         if (bottomz) {
            break;
         }
      } while ((5 >= (moren & 4)) && bottomz);
      for (let i = 0; i < 3; i++) {
         mbsplashf += parseInt(`${mbsplashf}`) * 2;
      }
      if (5.71 == mbsplashf) {
          let directu = String.fromCharCode(114,101,113,117,101,115,116,95,116,95,54,0);
          let downloadedn = String.fromCharCode(109,95,56,54,95,109,101,97,115,117,114,105,110,103,0);
         mbsplashf -= 2;
         directu += "2";
         downloadedn = `${(String.fromCharCode(88,0) == directu ? directu.length : downloadedn.length)}`;
      }
      while (1.26 <= (mbsplashf * 4.100) && 4.100 <= mbsplashf) {
          let orientationf = String.fromCharCode(99,95,51,54,95,120,112,117,98,0);
          let trash6 = 5;
          let formx = 5.0;
          let analyticV = 3;
         mbsplashf *= analyticV & trash6;
         orientationf += "3";
         trash6 <<= Math.min(Math.abs((orientationf == String.fromCharCode(82,0) ? orientationf.length : parseInt(`${formx}`))), 5);
         formx -= parseFloat(`${parseInt(`${formx}`) << (Math.min(orientationf.length, 5))}`);
         analyticV |= parseInt(`${formx}`);
         break;
      }
      if (5.70 == (mbsplashf - 1.86)) {
         spec1 = (mbsplashf * moren) < 58;
      }
         mbsplashf *= ((spec1 ? 2 : 2) ^ parseInt(`${mbsplashf}`));
          let graphK = String.fromCharCode(116,104,114,111,117,103,104,95,55,95,53,55,0);
          let traminiL = String.fromCharCode(98,95,51,51,95,97,99,116,105,118,97,116,105,111,110,0);
         mbsplashf *= (parseInt(`${mbsplashf}`) >> (Math.min(5, Math.abs((spec1 ? 1 : 5)))));
         graphK += `${(String.fromCharCode(95,0) == traminiL ? traminiL.length : graphK.length)}`;
      let sentryw = 5627754.0 >= mbsplashf;
      do {
          let liveC = 0.0;
          let rootR: Map<any, any> = new Map([[String.fromCharCode(98,95,57,57,95,121,97,109,97,104,97,0),208], [String.fromCharCode(97,110,110,111,117,110,99,101,95,120,95,52,50,0),879], [String.fromCharCode(112,95,54,56,95,98,97,115,101,112,111,105,110,116,0),958]]);
          let cricket9 = String.fromCharCode(103,95,51,49,95,115,117,98,115,116,114,97,99,116,101,100,0);
          let targetP = String.fromCharCode(117,110,115,112,101,99,105,102,105,101,100,95,56,95,51,51,0);
         mbsplashf /= Math.max(5, rootR.size);
         liveC += parseFloat(`${1}`);
         rootR.set(cricket9, cricket9.length ^ 3);
         targetP = `${targetP.length}`;
         if (sentryw) {
            break;
         }
      } while (((3.91 + mbsplashf) > 4.47 || !spec1) && sentryw);
      let membershipN = spec1 ? !spec1 : spec1;
      do {
         spec1 = mbsplashf >= 75.6;
         if (membershipN) {
            break;
         }
      } while (membershipN && ((moren ^ 4) > 3 && 4 > moren));
      libglogn += `${fastforwardr.length}`;
      break;
   }
   if (!moonP) {
      moonP = floaterJ.length >= xvodv.length;
   }
      nalyticss += `${2 - xvodv.length}`;
   while (gradlew8 == String.fromCharCode(109,0) || nalyticss.length > 5) {
       let darkx = String.fromCharCode(110,111,110,108,105,110,101,97,114,95,121,95,53,50,0);
       let football2 = 4;
       let n_centerg = 5.0;
       let with_45V: Map<any, any> = new Map([[String.fromCharCode(100,95,52,57,95,117,115,101,114,99,116,120,0),531], [String.fromCharCode(122,95,56,55,95,117,110,102,114,101,101,122,101,0),851], [String.fromCharCode(99,111,110,115,116,115,95,100,95,57,54,0),721]]);
       let floatingC = 4;
          let templateprocessorQ = String.fromCharCode(111,95,57,50,95,118,98,101,122,105,101,114,0);
         darkx = `${football2 - parseInt(`${n_centerg}`)}`;
         templateprocessorQ += `${templateprocessorQ.length << (Math.min(Math.abs(2), 1))}`;
         n_centerg += parseFloat(`${with_45V.size}`);
      for (let h = 0; h < 3; h++) {
         n_centerg *= parseFloat(`${with_45V.size & football2}`);
      }
      for (let w = 0; w < 3; w++) {
          let readl = 1;
         with_45V.set(`${readl}`, 3 - floatingC);
      }
      for (let v = 0; v < 1; v++) {
          let matchesE = 4.0;
          let penalty8 = String.fromCharCode(119,95,57,48,95,115,99,104,109,0);
          let mbbidf = true;
         floatingC >>= Math.min(parseInt(`${Math.abs(((mbbidf ? 4 : 3) >> (Math.min(Math.abs(floatingC), 3))))}`), 2);
         matchesE -= (parseFloat(`${String.fromCharCode(65,0) == penalty8 ? parseInt(`${matchesE}`) : penalty8.length}`));
         mbbidf = penalty8 == String.fromCharCode(86,0);
      }
      while (5 == (with_45V.size + 4)) {
         floatingC *= 3 % (Math.max(2, floatingC));
         break;
      }
      for (let p = 0; p < 3; p++) {
          let controlsc = String.fromCharCode(120,102,97,99,101,95,114,95,51,52,0);
         n_centerg *= parseFloat(`${darkx.length}`);
         controlsc = "3";
      }
         darkx = `${football2 / 2}`;
       let libsentryc = 1;
         libsentryc /= Math.max(3, football2 ^ 2);
          let moviesc = 1.0;
         football2 /= Math.max(3, darkx.length * 2);
         moviesc *= parseFloat(`${3}`);
         floatingC += 1 | libsentryc;
       let libzeusn = 1.0;
       let libswresamplem = 5.0;
         n_centerg /= Math.max(parseFloat(`${parseInt(`${libswresamplem}`) % (Math.max(darkx.length, 9))}`), 2);
         libzeusn /= Math.max(2, parseFloat(`${parseInt(`${n_centerg}`)}`));
      nalyticss += "1";
      break;
   }
      fastA += parseFloat(`${tumbnailr.length}`);
   if (floaterJ != String.fromCharCode(69,0) && tumbnailr != String.fromCharCode(97,0)) {
      tumbnailr += `${flyerB.length}`;
   }
      xvodv += "1";
      fastforwardr.push(flyerB.length ^ parseInt(`${fastA}`));
   for (let r = 0; r < 2; r++) {
      gradlew8 = "3";
   }
   for (let j = 0; j < 3; j++) {
       let videojsm = 0.0;
       let related9 = String.fromCharCode(99,105,112,104,101,114,116,101,120,116,95,100,95,50,0);
       let mbnativef = 4;
       let executorQ = 0.0;
       let relatedE = 5.0;
      for (let x = 0; x < 1; x++) {
         relatedE -= parseFloat(`${related9.length * 3}`);
      }
          let reactv = 0.0;
          let executor4 = 2.0;
         videojsm *= parseFloat(`${related9.length}`);
         reactv -= parseFloat(`${1 - parseInt(`${executor4}`)}`);
         executor4 *= 2;
      while (5.95 >= (parseFloat(`${mbnativef}`) + videojsm) && (mbnativef | 5) >= 4) {
         videojsm += parseFloat(`${1}`);
         break;
      }
      let p_playerF = related9.length >= 5999661;
      do {
         related9 = `${parseInt(`${videojsm}`)}`;
         if (p_playerF) {
            break;
         }
      } while (((4 << (Math.min(5, related9.length))) >= 1 && 1 >= (related9.length / 4)) && p_playerF);
       let changeH = 1.0;
       let paginationY = 4.0;
      let googlek = videojsm >= 8919004.0;
      do {
         videojsm *= parseFloat(`${2 & parseInt(`${paginationY}`)}`);
         if (googlek) {
            break;
         }
      } while (googlek && (1.77 == (executorQ / (Math.max(videojsm, 2)))));
      if (paginationY > mbnativef) {
         paginationY += parseInt(`${changeH}`);
      }
         changeH /= Math.max(4, parseInt(`${executorQ}`) << (Math.min(2, Math.abs(2))));
         related9 += `${1 / (Math.max(parseInt(`${paginationY}`), 8))}`;
      let render1 = mbnativef <= 6776981;
      do {
         mbnativef ^= 2;
         if (render1) {
            break;
         }
      } while (((3 % (Math.max(9, mbnativef))) <= 1) && render1);
      for (let s = 0; s < 3; s++) {
         mbnativef <<= Math.min(Math.abs((related9 == String.fromCharCode(102,0) ? parseInt(`${executorQ}`) : related9.length)), 2);
      }
         related9 = `${parseInt(`${executorQ}`) & parseInt(`${paginationY}`)}`;
      let starh = related9 == String.fromCharCode(102,110,113,56,100,118,49,0);
      do {
         related9 = `${1 << (Math.min(Math.abs(parseInt(`${paginationY}`)), 3))}`;
         if (starh) {
            break;
         }
      } while ((5 == (related9.length & 1) && 2.6 == (2.74 + executorQ)) && starh);
          let indicatorF = String.fromCharCode(108,105,115,116,110,101,114,115,95,119,95,55,49,0);
          let nnewinterstitialD = String.fromCharCode(102,101,97,116,117,114,101,100,95,122,95,55,54,0);
          let fileD = 0;
         changeH *= parseInt(`${videojsm}`);
         indicatorF = "3";
         nnewinterstitialD = `${fileD}`;
         fileD -= (String.fromCharCode(67,0) == indicatorF ? indicatorF.length : fileD);
         videojsm *= parseFloat(`${parseInt(`${changeH}`) << (Math.min(3, Math.abs(1)))}`);
      fastA += parseFloat(`${mbnativef}`);
   }
            return recommendations[Math.floor(Math.random() * recommendations.length)]
        }
    }, [recommendations])

    return (
        <View style={{ ...styles.container, ...headerStyle }}>
            {
                logo
                    ? logo
                    : <Logo height={36} />
            }
            {/* <SearchBar onPress={() => navigator.navigate('搜索', { initial: randomVod?.vod_name })} defaultValue={randomVod !== undefined ? randomVod.vod_name : ''} /> */}
            {/* <TouchableOpacity onPress={() => navigator.navigate('播放历史')}>
                {
                    icons.iconColor !== undefined &&
                    <yys_manager height={26} width={26} color={icons.iconColor} />
                }
            </TouchableOpacity> */}
        </View>
    );
}

export default memo(MainHeader);

const styles = StyleSheet.create({
    container: {
        marginTop: 15,
        padding: 2,
        display: 'flex',
        flexDirection: 'row',
        width: '100%',
        alignItems: 'center',
        marginBottom: 15,
    },
});