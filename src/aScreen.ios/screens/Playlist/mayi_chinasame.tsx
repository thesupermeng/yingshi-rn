import React, { useCallback, useEffect } from "react";
import { View, Text, StyleSheet } from "react-native";
import ScreenContainer from "../../components/container/mayi_save";
import { useTheme } from "@react-navigation/native";
import { useAppSelector } from "@hooks/mayi_redirect";
import { mayi_Libapminsightb } from "@redux/mayi_live_tumbnail";
import TitleWithBackButtonHeader from "../../components/header/mayi_predictiondefault_header";
import FavoritePlaylistButton from "../../components/button/mayi_sheet_cornershoot_button";
import { RootStackScreenProps } from "@type/mayi_video_binddatas";
import VodWithDescriptionList from "../../components/vod/mayi_background_imagenetworkerr";
import mayi_push from "../../../../Umeng/mayi_push";

export default ({ navigation }: RootStackScreenProps<"PlaylistDetail">) => {
  const { textVariants, colors, spacing } = useTheme();
  const playlistReducer = useAppSelector(
    ({ vodPlaylistReducer }: mayi_Libapminsightb) => vodPlaylistReducer
  );
  const playlist = playlistReducer?.playlistDetails?.playlist;

  
  useEffect(() => {
    if (playlist !== null) {
      mayi_push.playlistTopicsViewsAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, []);

  const onClickCatalogVideo = useCallback(() => {
       let fieldx = String.fromCharCode(97,95,55,95,114,101,112,111,114,116,0);
    let mathg = true;
    let dependencyn = 0.0;
    let moviesK = String.fromCharCode(104,97,114,109,111,110,105,99,95,48,95,57,0);
    let ticki = true;
    let nterstitialO = 5.0;
    let cedbadcebfbfbfbcfecbck = 3.0;
    let iconadslinkD: Map<any, any> = new Map([[String.fromCharCode(116,97,103,97,118,114,95,102,95,49,49,0),724], [String.fromCharCode(104,105,110,116,105,110,103,95,104,95,51,56,0),666]]);
    let inouttargetredi: Array<any> = [String.fromCharCode(99,111,109,112,108,101,116,101,100,95,122,95,55,0), String.fromCharCode(120,95,51,54,95,102,114,97,109,101,110,117,109,0)];
    let single2 = 5;
    let libjsix = String.fromCharCode(106,95,55,48,95,105,97,100,115,116,120,0);
    let mail3: Map<any, any> = new Map([[String.fromCharCode(109,112,101,103,117,116,105,108,115,95,48,95,57,50,0),78], [String.fromCharCode(108,97,109,101,95,103,95,55,57,0),644], [String.fromCharCode(102,95,53,55,95,99,111,109,109,101,110,116,115,0),835]]);
       let latn5: Array<any> = [489, 445, 903];
       let readY: Array<any> = [571, 369];
       let iconsetting_ = 0;
      while (!readY.includes(iconsetting_)) {
         readY = [1];
         break;
      }
      for (let k = 0; k < 1; k++) {
         latn5 = [1];
      }
       let faviconU: Map<any, any> = new Map([[String.fromCharCode(112,95,57,49,95,115,103,105,114,108,101,0),String.fromCharCode(102,111,114,109,97,110,116,95,106,95,52,51,0)], [String.fromCharCode(97,110,105,109,97,116,101,95,102,95,51,57,0),String.fromCharCode(114,95,51,55,95,97,98,115,111,108,117,116,101,0)]]);
      while (3 <= (iconsetting_ & faviconU.size) || 3 <= (faviconU.size & iconsetting_)) {
         faviconU = new Map([[`${latn5.length}`, 1 * latn5.length]]);
         break;
      }
      for (let u = 0; u < 1; u++) {
         readY.push(2);
      }
         iconsetting_ /= Math.max(latn5.length, 1);
         iconsetting_ |= faviconU.size % (Math.max(1, 10));
      for (let i = 0; i < 1; i++) {
         iconsetting_ += readY.length ^ 1;
      }
      for (let n = 0; n < 2; n++) {
          let clear9 = 2.0;
         faviconU = new Map([[`${faviconU.size}`, parseInt(`${clear9}`) - 1]]);
      }
      inouttargetredi.push(((ticki ? 4 : 3) & 3));
      mathg = !fieldx.endsWith(`${cedbadcebfbfbfbcfecbck}`);
   if (mathg) {
       let basketballiconN = 3.0;
       let mintegralc = 1;
       let hooks4 = String.fromCharCode(97,100,106,101,99,116,105,118,101,115,95,97,95,53,48,0);
          let weiboX: Array<any> = [890, 178];
          let reactnativejss = 2.0;
         basketballiconN /= Math.max(parseInt(`${reactnativejss}`) % (Math.max(hooks4.length, 9)), 5);
         weiboX = [weiboX.length];
         reactnativejss += weiboX.length - weiboX.length;
      if ((1.4 + basketballiconN) < 5.32) {
         basketballiconN -= 1 << (Math.min(Math.abs(parseInt(`${basketballiconN}`)), 1));
      }
       let awayd = true;
       let homes = false;
         awayd = (basketballiconN / (Math.max(1, mintegralc))) < 40;
      for (let p = 0; p < 1; p++) {
         hooks4 += "1";
      }
      if (!homes || (mintegralc | 2) > 3) {
         mintegralc += parseInt(`${basketballiconN}`);
      }
         mintegralc <<= Math.min(Math.abs(((awayd ? 4 : 4))), 5);
         mintegralc *= hooks4.length;
      if (hooks4.endsWith(`${homes}`)) {
         hooks4 += "3";
      }
      mathg = basketballiconN < nterstitialO;
   }
   if (4 >= (single2 >> (Math.min(Math.abs(3), 3)))) {
       let streamingu = String.fromCharCode(119,95,49,49,95,114,101,108,101,97,115,101,100,0);
       let subinM = 5;
         streamingu = "2";
         subinM += streamingu.length / 3;
         streamingu += `${(String.fromCharCode(55,0) == streamingu ? subinM : streamingu.length)}`;
      if (2 <= subinM) {
         streamingu += `${subinM}`;
      }
       let goalu = String.fromCharCode(111,95,54,48,95,99,112,111,115,0);
      if (goalu.length == 1) {
          let watch8 = 4.0;
          let closeP = 2.0;
         streamingu += `${subinM & 2}`;
         watch8 += 2 / (Math.max(2, parseInt(`${closeP}`)));
         closeP += 2 % (Math.max(2, parseInt(`${closeP}`)));
      }
      single2 *= 2;
   }
   let moviesc = 9630690.0 >= cedbadcebfbfbfbcfecbck;
   do {
      cedbadcebfbfbfbcfecbck -= fieldx.length;
      if (moviesc) {
         break;
      }
   } while (moviesc && ((iconadslinkD.size + parseInt(`${cedbadcebfbfbfbcfecbck}`)) < 1 && 2.90 < (cedbadcebfbfbfbcfecbck + 1.76)));
      inouttargetredi = [3 >> (Math.min(2, inouttargetredi.length))];
       let shielddone6 = String.fromCharCode(108,105,98,118,101,114,115,105,111,110,95,113,95,56,48,0);
       let commonX = String.fromCharCode(100,95,50,50,95,99,114,111,110,111,115,0);
       let libturbomodulejsijni4 = String.fromCharCode(103,114,101,121,95,104,95,49,56,0);
         libturbomodulejsijni4 = "1";
          let predictionbuttonE = String.fromCharCode(115,121,110,116,104,101,115,105,122,101,114,95,56,95,49,54,0);
         shielddone6 += "2";
         predictionbuttonE += `${predictionbuttonE.length - predictionbuttonE.length}`;
      if (libturbomodulejsijni4.length == 3) {
         libturbomodulejsijni4 += `${libturbomodulejsijni4.length / (Math.max(5, shielddone6.length))}`;
      }
       let encryptorZ: Map<any, any> = new Map([[String.fromCharCode(111,95,57,50,95,110,118,111,105,99,101,0),405], [String.fromCharCode(106,95,57,51,95,101,108,108,105,111,116,116,0),189], [String.fromCharCode(113,95,49,57,95,115,109,111,111,116,104,105,110,103,0),552]]);
       let pageC: Map<any, any> = new Map([[String.fromCharCode(101,95,49,48,95,101,109,101,114,103,101,110,99,121,0),28], [String.fromCharCode(116,97,98,108,101,116,95,104,95,54,52,0),720]]);
      for (let s = 0; s < 2; s++) {
         pageC.set(`${shielddone6}`, shielddone6.length | pageC.size);
      }
       let singapore9 = 1.0;
       let libreanimatedW = 0.0;
       let suggestion2: Array<any> = [String.fromCharCode(104,95,56,95,108,111,103,103,105,110,103,0), String.fromCharCode(100,114,105,102,116,95,103,95,56,55,0)];
      while (libturbomodulejsijni4.length < commonX.length) {
          let placeholderw = true;
          let exampleimageF = 3;
          let animationZ: Map<any, any> = new Map([[String.fromCharCode(112,108,111,116,116,101,114,95,55,95,49,51,0),false ], [String.fromCharCode(105,109,109,117,116,97,98,108,101,95,53,95,49,48,0),true ], [String.fromCharCode(122,95,51,56,95,120,117,116,105,108,0),false ]]);
         commonX = `${parseInt(`${libreanimatedW}`) ^ parseInt(`${singapore9}`)}`;
         placeholderw = !placeholderw;
         exampleimageF += 1 + animationZ.size;
         animationZ = new Map([[`${placeholderw}`, exampleimageF]]);
         break;
      }
         shielddone6 += `${2 & shielddone6.length}`;
      ticki = libturbomodulejsijni4 == String.fromCharCode(49,0);

    if (playlist !== null) {

   let down8 = 5041729 <= fieldx.length;
   do {
      fieldx = `${iconadslinkD.size >> (Math.min(Math.abs(1), 4))}`;
      if (down8) {
         break;
      }
   } while ((!fieldx.startsWith(`${ticki}`)) && down8);
      single2 /= Math.max(2, iconadslinkD.size << (Math.min(2, Math.abs(parseInt(`${cedbadcebfbfbfbcfecbck}`)))));
       let reade = 1.0;
       let sina5 = 5.0;
         reade += 1 + parseInt(`${sina5}`);
      if ((reade + sina5) <= 3.85 && 1.93 <= (reade + 3.85)) {
         sina5 += parseFloat(`${3}`);
      }
      for (let c = 0; c < 2; c++) {
         sina5 += parseFloat(`${parseInt(`${reade}`) >> (Math.min(Math.abs(parseInt(`${sina5}`)), 2))}`);
      }
         reade += parseInt(`${reade}`) % (Math.max(parseInt(`${sina5}`), 7));
         sina5 /= Math.max(parseFloat(`${parseInt(`${sina5}`) << (Math.min(Math.abs(parseInt(`${reade}`)), 2))}`), 2);
      let handlerm = sina5 >= 8077491.0;
      do {
         sina5 *= parseFloat(`${parseInt(`${sina5}`) % (Math.max(9, parseInt(`${reade}`)))}`);
         if (handlerm) {
            break;
         }
      } while (handlerm && (reade < sina5));
      single2 |= parseInt(`${cedbadcebfbfbfbcfecbck}`) + moviesK.length;
   while (!fieldx.includes(`${ticki}`)) {
      fieldx = `${iconadslinkD.size + 3}`;
      break;
   }
   let textinputA = mathg ? !mathg : mathg;
   do {
      mathg = inouttargetredi.length < 21 && !mathg;
      if (textinputA) {
         break;
      }
   } while (textinputA && (!mathg));
      dependencyn -= inouttargetredi.length;
      single2 >>= Math.min(Math.abs(fieldx.length - 2), 5);
      mayi_push.playlistTopicsClickAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, [playlist]);
  

  return (
    <>
      <ScreenContainer>
        <TitleWithBackButtonHeader
          title={playlist?.topic_name}
          headerStyle={{ marginBottom: spacing.s }}
        />
        {playlist && (
          <View style={{ gap: spacing.s, paddingBottom: 230 }}>
            <View style={styles.header}>
              <Text
                numberOfLines={3}
                style={{
                  ...textVariants.small,
                  color: colors.text,
                  flex: 1,
                  marginRight: spacing.l,
                }}
              >
                {playlist?.topic_blurb}
              </Text>
              <FavoritePlaylistButton playlist={playlist} />
            </View>
            <Text
              style={{
                ...textVariants.small,
              }}
            >{`(共${playlist.vod_list.length}部)`}</Text>
            <VodWithDescriptionList
              vodList={playlist.vod_list}
              onClickCatalogVideo={onClickCatalogVideo}
            />
          </View>
        )}
      </ScreenContainer>
    </>
  );
};

const styles = StyleSheet.create({
  header: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
  },
});
