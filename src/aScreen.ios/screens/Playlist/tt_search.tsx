import React, { useCallback, useEffect } from "react";
import { View, Text, StyleSheet } from "react-native";
import ScreenContainer from "../../components/container/tt_backward";
import { useTheme } from "@react-navigation/native";
import { useAppSelector } from "@hooks/tt_spec_download";
import { ttOrange } from "@redux/tt_updates_bottom";
import TitleWithBackButtonHeader from "../../components/header/tt_typing_tail_header";
import FavoritePlaylistButton from "../../components/button/tt_quest_active_button";
import { RootStackScreenProps } from "@type/tt_temperature";
import VodWithDescriptionList from "../../components/vod/tt_carousel_circle";
import tt_humidity_guide from "../../../../Umeng/tt_humidity_guide";

export default ({ navigation }: RootStackScreenProps<"PlaylistDetail">) => {
  const { textVariants, colors, spacing } = useTheme();
  const playlistReducer = useAppSelector(
    ({ vodPlaylistReducer }: ttOrange) => vodPlaylistReducer
  );
  const playlist = playlistReducer?.playlistDetails?.playlist;

  
  useEffect(() => {
    if (playlist !== null) {
      tt_humidity_guide.playlistTopicsViewsAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, []);

  const onClickCatalogVideo = useCallback(() => {
       let selectedL = true;
    let bridge1 = String.fromCharCode(106,95,57,0);
    let weiboD = String.fromCharCode(118,99,100,97,116,97,95,122,95,54,52,0);
    let subs8: Map<any, any> = new Map([[String.fromCharCode(101,99,114,101,100,95,109,95,56,48,0),678], [String.fromCharCode(109,111,118,101,100,95,104,95,52,54,0),741], [String.fromCharCode(115,102,114,97,109,101,95,105,95,56,51,0),612]]);
    let popupu = String.fromCharCode(114,101,112,115,116,114,95,109,95,56,53,0);
    let saveD = String.fromCharCode(99,111,110,115,116,114,117,99,116,105,118,101,95,50,95,50,57,0);
    let settings9 = 0.0;
    let thailandW = String.fromCharCode(120,105,110,99,95,122,95,50,51,0);
    let chartA: Array<any> = [String.fromCharCode(103,95,51,56,95,105,110,115,116,114,117,109,101,110,116,97,116,105,111,110,0), String.fromCharCode(99,108,111,115,101,100,95,55,95,53,0)];
    let notification3: Map<any, any> = new Map([[String.fromCharCode(119,95,56,55,95,118,101,99,116,111,114,115,0),786], [String.fromCharCode(117,95,54,52,95,110,105,100,99,98,98,0),398]]);
    let adultp = String.fromCharCode(117,95,51,50,95,116,111,97,115,116,0);
   for (let a = 0; a < 3; a++) {
      saveD += `${subs8.size - 2}`;
   }
   if (1 == (3 % (Math.max(2, popupu.length)))) {
      settings9 += popupu.length;
   }
      thailandW += `${2 << (Math.min(4, weiboD.length))}`;
      bridge1 = `${chartA.length >> (Math.min(3, Math.abs(subs8.size)))}`;
       let clockK = false;
      for (let d = 0; d < 3; d++) {
         clockK = (clockK ? clockK : !clockK);
      }
         clockK = (clockK ? clockK : clockK);
      let update_a2g = clockK ? !clockK : clockK;
      do {
         clockK = (clockK ? clockK : clockK);
         if (update_a2g) {
            break;
         }
      } while (update_a2g && (!clockK));
      settings9 /= Math.max(4, chartA.length << (Math.min(weiboD.length, 2)));
       let rewardvideo4: Array<any> = [987, 135, 852];
       let auto_w7 = 5.0;
         rewardvideo4.push(1 ^ parseInt(`${auto_w7}`));
          let mbnativet = String.fromCharCode(100,95,54,57,95,115,111,114,101,99,101,105,118,101,0);
          let toponT = false;
          let videocommonz = 3.0;
         rewardvideo4 = [rewardvideo4.length];
         mbnativet += `${mbnativet.length}`;
         toponT = !mbnativet.includes(`${toponT}`);
         videocommonz -= parseInt(`${videocommonz}`) + 1;
         auto_w7 += rewardvideo4.length;
      while (3 <= rewardvideo4.length) {
         auto_w7 += rewardvideo4.length;
         break;
      }
       let anner4 = false;
       let kuaishouR = false;
       let cast9 = 4.0;
       let gpayN = 4.0;
      saveD += `${(parseInt(`${settings9}`) << (Math.min(1, Math.abs((selectedL ? 2 : 2)))))}`;
   let tramini8 = subs8.size >= 6229120;
   do {
      subs8.set(bridge1, bridge1.length);
      if (tramini8) {
         break;
      }
   } while (tramini8 && ((settings9 - subs8.size) >= 2.45 && 2.45 >= (settings9 - subs8.size)));

    if (playlist !== null) {

       let tailq = 0.0;
       let selectionO: Map<any, any> = new Map([[String.fromCharCode(98,108,111,98,115,105,122,101,95,101,95,51,50,0),String.fromCharCode(111,95,54,51,95,112,111,114,116,115,0)], [String.fromCharCode(118,103,108,111,98,97,108,95,118,95,50,51,0),String.fromCharCode(100,95,49,95,114,101,99,104,117,110,107,0)]]);
         selectionO = new Map([[`${selectionO.size}`, parseInt(`${tailq}`)]]);
      let rightU = 9287378.0 <= tailq;
      do {
         tailq /= Math.max(parseFloat(`${selectionO.size << (Math.min(3, Math.abs(parseInt(`${tailq}`))))}`), 4);
         if (rightU) {
            break;
         }
      } while (((5 + selectionO.size) > 4 || 1.33 > (tailq + 5.14)) && rightU);
         tailq -= parseFloat(`${parseInt(`${tailq}`)}`);
      let filterz = 5305636 <= selectionO.size;
      do {
          let read0 = String.fromCharCode(111,116,104,95,108,95,54,49,0);
          let sortd = String.fromCharCode(115,101,112,105,97,95,57,95,51,51,0);
          let acceptedx: Array<any> = [381, 469];
          let volume2 = String.fromCharCode(103,101,116,115,105,103,99,116,120,110,111,95,99,95,49,48,0);
          let favicons = String.fromCharCode(118,112,109,116,95,99,95,56,51,0);
         selectionO = new Map([[read0, parseInt(`${tailq}`)]]);
         read0 = `${favicons.length >> (Math.min(Math.abs(3), 1))}`;
         sortd = `${(String.fromCharCode(82,0) == volume2 ? volume2.length : sortd.length)}`;
         acceptedx.push(acceptedx.length);
         favicons = `${acceptedx.length / (Math.max(4, volume2.length))}`;
         if (filterz) {
            break;
         }
      } while (((tailq / (Math.max(7, parseFloat(`${selectionO.size}`)))) > 2.72 && (1 >> (Math.min(3, Math.abs(selectionO.size)))) > 1) && filterz);
          let networkg: Array<any> = [String.fromCharCode(119,95,49,48,48,0), String.fromCharCode(98,108,97,107,101,95,111,95,52,48,0), String.fromCharCode(105,110,100,105,99,97,116,111,114,95,56,95,54,0)];
         tailq /= Math.max(parseFloat(`${3 << (Math.min(2, networkg.length))}`), 2);
         selectionO = new Map([[`${selectionO.size}`, parseInt(`${tailq}`)]]);
      saveD += `${weiboD.length ^ bridge1.length}`;
      adultp = `${((selectedL ? 2 : 1))}`;
      adultp += "3";
       let policyO: Map<any, any> = new Map([[String.fromCharCode(111,95,57,55,95,100,101,116,97,105,108,115,0),188], [String.fromCharCode(117,95,49,51,95,99,112,111,115,0),153], [String.fromCharCode(120,95,50,95,97,117,116,111,98,97,110,104,0),320]]);
       let bottomo = String.fromCharCode(114,95,50,51,95,112,108,97,116,101,97,117,0);
          let componentT = String.fromCharCode(110,95,48,95,117,105,111,109,111,118,101,0);
          let backgroundY = 1;
          let langL = 5;
         bottomo += `${componentT.length}`;
         componentT = `${backgroundY}`;
         langL |= backgroundY;
       let pressureN = 2.0;
      for (let d = 0; d < 2; d++) {
         bottomo = `${parseInt(`${pressureN}`)}`;
      }
      if (5 == (bottomo.length % (Math.max(2, 3))) || 2.18 == (5.67 / (Math.max(8, pressureN)))) {
          let downf = 0;
          let statisticst: Array<any> = [698, 541];
          let navigationH = String.fromCharCode(101,95,49,49,95,100,97,117,100,0);
          let debugY: Map<any, any> = new Map([[String.fromCharCode(99,95,53,51,95,98,111,117,110,100,97,108,108,0),858], [String.fromCharCode(117,95,54,49,95,115,101,114,105,97,108,105,122,101,0),662]]);
          let clockA = true;
         bottomo = `${parseInt(`${pressureN}`) >> (Math.min(Math.abs(policyO.size), 1))}`;
         downf ^= 2 & statisticst.length;
         statisticst = [2 >> (Math.min(1, Math.abs(debugY.size)))];
         navigationH = `${statisticst.length}`;
         debugY = new Map([[`${statisticst.length}`, 2 ^ statisticst.length]]);
      }
          let mbsplashG = String.fromCharCode(97,114,114,97,121,95,118,95,54,51,0);
          let logina = String.fromCharCode(108,95,57,54,95,109,111,100,101,109,118,99,111,115,116,0);
         bottomo += `${parseInt(`${pressureN}`)}`;
         mbsplashG += `${logina.length}`;
         logina += `${logina.length}`;
          let storeu = false;
          let downg: Array<any> = [821, 215, 571];
         bottomo += `${((storeu ? 1 : 4) << (Math.min(bottomo.length, 4)))}`;
         storeu = downg.includes(downg[downg.length - 1]);
      weiboD = "3";
   while (weiboD.length == 2) {
       let videocommone = 5.0;
       let assistE: Array<any> = [558, 600];
       let bannerk = String.fromCharCode(114,95,56,57,95,97,117,116,111,97,114,99,104,105,118,101,0);
       let z_countk = 0.0;
         z_countk += parseFloat(`${parseInt(`${z_countk}`) & 3}`);
          let whatsappx = 2.0;
          let regengU = false;
          let thumbnail6 = String.fromCharCode(117,95,56,54,0);
         bannerk += "1";
         whatsappx *= parseInt(`${whatsappx}`) << (Math.min(3, Math.abs(1)));
         regengU = !thumbnail6.endsWith(`${whatsappx}`);
         thumbnail6 = `${2 % (Math.max(parseInt(`${whatsappx}`), 6))}`;
      while ((4.99 * videocommone) >= 4.65) {
         videocommone += parseFloat(`${assistE.length % (Math.max(2, 5))}`);
         break;
      }
      if (3.63 < (z_countk / (Math.max(parseFloat(`${bannerk.length}`), 5))) && (bannerk.length & 4) < 4) {
         z_countk -= parseFloat(`${parseInt(`${videocommone}`)}`);
      }
         assistE.push(assistE.length);
         assistE = [parseInt(`${videocommone}`)];
         bannerk = `${2 >> (Math.min(Math.abs(parseInt(`${videocommone}`)), 4))}`;
         videocommone += parseFloat(`${parseInt(`${videocommone}`)}`);
      while (3.29 == (5 - videocommone)) {
          let data2: Map<any, any> = new Map([[String.fromCharCode(118,97,116,97,114,95,113,95,50,0),String.fromCharCode(111,116,111,102,95,105,95,56,55,0)], [String.fromCharCode(114,95,50,95,99,97,116,97,108,111,103,0),String.fromCharCode(109,97,116,104,111,112,115,95,113,95,50,53,0)]]);
         z_countk -= parseFloat(`${data2.size | parseInt(`${z_countk}`)}`);
         break;
      }
          let helperI = String.fromCharCode(116,100,108,115,95,109,95,50,54,0);
          let dicek = 5;
         assistE.push(assistE.length);
         helperI += `${dicek + 2}`;
         dicek %= Math.max(2, dicek);
      let crownK = 9232647.0 >= z_countk;
      do {
         z_countk += parseFloat(`${parseInt(`${videocommone}`) * parseInt(`${z_countk}`)}`);
         if (crownK) {
            break;
         }
      } while (((parseFloat(`${bannerk.length}`) * z_countk) >= 5.97) && crownK);
         bannerk = `${parseInt(`${z_countk}`) / (Math.max(bannerk.length, 4))}`;
      weiboD += `${bannerk.length >> (Math.min(2, adultp.length))}`;
      break;
   }
      bridge1 = `${weiboD.length}`;
   if (popupu.length == saveD.length) {
      popupu = "1";
   }
      tt_humidity_guide.playlistTopicsClickAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, [playlist]);
  

  return (
    <>
      <ScreenContainer>
        <TitleWithBackButtonHeader
          title={playlist?.topic_name}
          headerStyle={{ marginBottom: spacing.s }}
        />
        {playlist && (
          <View style={{ gap: spacing.s, paddingBottom: 230 }}>
            <View style={styles.header}>
              <Text
                numberOfLines={3}
                style={{
                  ...textVariants.small,
                  color: colors.text,
                  flex: 1,
                  marginRight: spacing.l,
                }}
              >
                {playlist?.topic_blurb}
              </Text>
              <FavoritePlaylistButton playlist={playlist} />
            </View>
            <Text
              style={{
                ...textVariants.small,
              }}
            >{`(共${playlist.vod_list.length}部)`}</Text>
            <VodWithDescriptionList
              vodList={playlist.vod_list}
              onClickCatalogVideo={onClickCatalogVideo}
            />
          </View>
        )}
      </ScreenContainer>
    </>
  );
};

const styles = StyleSheet.create({
  header: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
  },
});
