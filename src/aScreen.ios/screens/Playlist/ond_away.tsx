import React, { useCallback, useEffect } from "react";
import { View, Text, StyleSheet } from "react-native";
import ScreenContainer from "../../components/container/ypy_fast";
import { useTheme } from "@react-navigation/native";
import { useAppSelector } from "@hooks/kg_index";
import { PSmall } from "@redux/fj_prediction_thailand";
import TitleWithBackButtonHeader from "../../components/header/cio_news_types_header";
import FavoritePlaylistButton from "../../components/button/ep_video_thailand_button";
import { RootStackScreenProps } from "@type/vrm_thailand";
import VodWithDescriptionList from "../../components/vod/of_main_sheet";
import umb_center_carousel from "../../../../Umeng/umb_center_carousel";

export default ({ navigation }: RootStackScreenProps<"PlaylistDetail">) => {
  const { textVariants, colors, spacing } = useTheme();
  const playlistReducer = useAppSelector(
    ({ vodPlaylistReducer }: PSmall) => vodPlaylistReducer
  );
  const playlist = playlistReducer?.playlistDetails?.playlist;

  
  useEffect(() => {
    if (playlist !== null) {
      umb_center_carousel.playlistTopicsViewsAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, []);

  const onClickCatalogVideo = useCallback(() => {
       let shirt6 = 2.0;
    let profile2 = String.fromCharCode(110,95,51,56,95,121,117,118,114,103,98,0);
    let analyticC = String.fromCharCode(102,116,118,110,115,95,104,95,50,53,0);
    let confirmationP = false;
    let default_vT: Array<any> = [840, 75];
    let customd = String.fromCharCode(105,95,51,55,95,99,117,101,112,111,105,110,116,0);
    let paginationK = String.fromCharCode(115,95,51,49,95,115,116,97,116,117,115,0);
    let fastj = String.fromCharCode(115,95,56,56,95,99,100,97,116,97,0);
    let station0: Array<any> = [String.fromCharCode(101,110,99,111,100,101,95,116,95,51,55,0), String.fromCharCode(119,95,56,49,95,114,101,99,97,108,99,0)];
    let type_9j = String.fromCharCode(105,110,116,101,114,112,111,108,97,116,101,102,95,55,95,52,56,0);
    let product_ = String.fromCharCode(111,95,57,52,95,105,110,116,101,114,110,97,116,105,111,110,97,108,0);
    let progressu = false;
    let dangern = 0.0;
    let cluba = 4.0;
    let hooksh = String.fromCharCode(119,97,118,101,102,111,114,109,97,116,101,120,95,116,95,49,51,0);
       let modityt = 5;
       let show3 = String.fromCharCode(113,105,110,100,101,120,95,119,95,54,0);
       let phone5 = 2.0;
          let sansc = 1;
          let recommendationk = false;
         show3 += `${((recommendationk ? 2 : 5))}`;
         sansc |= 1;
         recommendationk = sansc >= sansc;
          let ajaxg = 2.0;
          let inactiveN = 3;
         show3 += `${show3.length}`;
         ajaxg += parseFloat(`${parseInt(`${ajaxg}`) * inactiveN}`);
         inactiveN ^= parseInt(`${ajaxg}`) - inactiveN;
      for (let b = 0; b < 1; b++) {
         phone5 /= Math.max(2, 3 >> (Math.min(3, Math.abs(modityt))));
      }
         phone5 -= parseInt(`${phone5}`) % (Math.max(1, 8));
          let animation3 = false;
          let appsh = 4.0;
         show3 = `${3 ^ modityt}`;
         animation3 = !animation3;
         appsh += ((animation3 ? 1 : 3) - parseInt(`${appsh}`));
         show3 = `${show3.length % (Math.max(3, 5))}`;
      for (let i = 0; i < 1; i++) {
          let memberH = 3;
         phone5 /= Math.max(5, (show3 == String.fromCharCode(120,0) ? show3.length : modityt));
         memberH /= Math.max(memberH * 3, 5);
      }
      let h_title_ = modityt >= 7816276;
      do {
         modityt *= parseInt(`${phone5}`);
         if (h_title_) {
            break;
         }
      } while ((3 >= (show3.length >> (Math.min(1, Math.abs(modityt))))) && h_title_);
      for (let e = 0; e < 1; e++) {
         phone5 += modityt;
      }
      progressu = customd == String.fromCharCode(77,0);
   let filterd = String.fromCharCode(57,105,56,99,0) == type_9j;
   do {
      type_9j = `${type_9j.length - 1}`;
      if (filterd) {
         break;
      }
   } while ((5 < (type_9j.length | 4) || 4 < (4 | type_9j.length)) && filterd);
   if (profile2.length == product_.length) {
       let playW = 0;
       let commentJ = 0;
       let readL = 2.0;
       let canvasA: Array<any> = [96, 576];
      if (1 >= (3 * commentJ) || 3 >= (commentJ * 3)) {
         commentJ *= playW << (Math.min(2, Math.abs(commentJ)));
      }
      let emoji6 = commentJ >= 9244176;
      do {
         commentJ -= canvasA.length / (Math.max(7, commentJ));
         if (emoji6) {
            break;
         }
      } while ((canvasA.includes(commentJ)) && emoji6);
          let ewardedT = 2.0;
         commentJ ^= commentJ;
         ewardedT += parseFloat(`${parseInt(`${ewardedT}`) - parseInt(`${ewardedT}`)}`);
         canvasA.push(commentJ);
         commentJ %= Math.max(2, canvasA.length & parseInt(`${readL}`));
         canvasA = [canvasA.length * parseInt(`${readL}`)];
      let middleQ = 9028010 >= canvasA.length;
      do {
          let backE = 3.0;
          let referrer6 = 5;
         canvasA = [canvasA.length & 3];
         backE *= parseFloat(`${parseInt(`${backE}`) + referrer6}`);
         referrer6 |= referrer6;
         if (middleQ) {
            break;
         }
      } while (middleQ && (!canvasA.includes(playW)));
       let langkeyS = String.fromCharCode(112,95,57,51,95,104,111,108,100,0);
       let network7 = String.fromCharCode(118,101,114,115,105,111,110,95,50,95,49,48,0);
       let starG = String.fromCharCode(118,95,53,95,99,104,101,99,107,112,111,105,110,116,0);
         starG = "2";
      if ((langkeyS.length << (Math.min(Math.abs(3), 1))) > 5 && 3 > (langkeyS.length << (Math.min(2, Math.abs(commentJ))))) {
         langkeyS = "2";
      }
         network7 += `${playW}`;
      product_ += `${canvasA.length}`;
   }
       let darkj = 4.0;
       let groupc: Array<any> = [943, 305];
      let cornerS = groupc.length >= 9395901;
      do {
          let sell1 = String.fromCharCode(97,118,103,120,95,120,95,49,57,0);
          let default_j7: Array<any> = [String.fromCharCode(107,95,57,49,95,97,112,112,101,97,114,97,110,99,101,0), String.fromCharCode(112,114,105,110,116,102,95,55,95,57,56,0)];
          let delegate_wf = String.fromCharCode(105,95,50,95,100,105,115,109,105,115,115,101,100,0);
         groupc = [sell1.length / 3];
         sell1 = `${default_j7.length >> (Math.min(Math.abs(1), 3))}`;
         default_j7.push(delegate_wf.length + 3);
         delegate_wf = "3";
         if (cornerS) {
            break;
         }
      } while ((darkj > groupc.length) && cornerS);
      for (let c = 0; c < 1; c++) {
         groupc = [3 - groupc.length];
      }
         darkj -= 1;
         groupc = [groupc.length ^ parseInt(`${darkj}`)];
          let googleQ = 0;
          let football4 = true;
          let terms0 = String.fromCharCode(105,95,55,53,95,119,97,107,101,0);
         darkj *= googleQ;
         googleQ -= (String.fromCharCode(66,0) == terms0 ? (football4 ? 5 : 3) : terms0.length);
         football4 = (((football4 ? 55 : terms0.length) & terms0.length) == 55);
      if ((5 << (Math.min(5, groupc.length))) > 4 || (groupc.length % 5) > 2) {
         darkj /= Math.max(3 ^ parseInt(`${darkj}`), 4);
      }
      confirmationP = !confirmationP && shirt6 == 82.41;
       let vignetteg = 0;
       let complete6 = String.fromCharCode(106,95,53,48,95,100,117,109,112,101,114,0);
       let middlewarei: Map<any, any> = new Map([[String.fromCharCode(108,95,56,49,95,99,117,114,114,0),656], [String.fromCharCode(115,117,98,99,99,95,56,95,54,50,0),638], [String.fromCharCode(108,95,52,95,111,110,101,115,99,97,108,101,0),721]]);
         complete6 += `${complete6.length}`;
         complete6 += `${2 & middlewarei.size}`;
      for (let k = 0; k < 3; k++) {
         middlewarei.set(`${vignetteg}`, vignetteg);
      }
          let trashL = String.fromCharCode(110,95,49,51,95,109,117,116,97,98,108,101,0);
          let castingq: Map<any, any> = new Map([[String.fromCharCode(97,95,50,49,95,114,100,109,117,108,116,0),String.fromCharCode(101,95,56,54,95,99,111,109,112,108,101,116,105,111,110,115,0)], [String.fromCharCode(112,95,52,56,95,119,104,105,108,101,0),String.fromCharCode(104,95,55,50,95,109,117,108,120,0)], [String.fromCharCode(100,121,110,97,109,105,99,115,95,103,95,56,48,0),String.fromCharCode(114,95,55,57,95,109,97,108,101,0)]]);
         complete6 += "3";
         trashL += `${castingq.size}`;
         castingq.set(trashL, castingq.size + trashL.length);
         complete6 = "3";
      let blacke = String.fromCharCode(121,119,111,54,103,100,105,95,0) == complete6;
      do {
         complete6 = `${vignetteg + complete6.length}`;
         if (blacke) {
            break;
         }
      } while (blacke && (3 >= (4 | middlewarei.size)));
         complete6 += `${complete6.length}`;
      let middleware9 = 7639577 <= middlewarei.size;
      do {
         middlewarei.set(`${vignetteg}`, vignetteg);
         if (middleware9) {
            break;
         }
      } while ((2 > middlewarei.size) && middleware9);
      if (middlewarei.size == 5) {
          let pressureG = String.fromCharCode(104,101,97,100,105,110,103,95,55,95,52,53,0);
          let connectionc = String.fromCharCode(114,95,52,53,95,102,99,117,110,112,117,98,108,105,115,104,0);
         middlewarei = new Map([[`${middlewarei.size}`, 1 >> (Math.min(2, Math.abs(vignetteg)))]]);
         pressureG = "1";
         connectionc += "1";
      }
      profile2 += `${customd.length ^ default_vT.length}`;
   for (let t = 0; t < 2; t++) {
       let sliderY = String.fromCharCode(118,95,51,51,95,115,105,109,112,108,101,116,105,109,101,111,117,116,0);
       let overg: Map<any, any> = new Map([[String.fromCharCode(114,101,103,105,115,116,101,114,95,115,95,49,56,0),371], [String.fromCharCode(99,97,118,115,95,114,95,50,51,0),787], [String.fromCharCode(116,95,56,55,95,101,120,112,111,115,117,114,101,0),562]]);
         overg.set(`${sliderY}`, sliderY.length ^ overg.size);
      let thumbnailY = 9200529 <= overg.size;
      do {
          let styleM: Map<any, any> = new Map([[String.fromCharCode(109,95,53,55,95,99,111,109,112,111,115,105,116,105,110,103,0),false ], [String.fromCharCode(108,111,115,115,121,95,110,95,52,54,0),false ]]);
          let anythinke = false;
          let tumbnailt = String.fromCharCode(101,95,50,55,95,99,111,110,115,116,114,117,99,116,111,114,0);
         overg.set(`${overg.size}`, 1 | overg.size);
         styleM = new Map([[tumbnailt, tumbnailt.length]]);
         anythinke = tumbnailt.length >= 58 || !anythinke;
         if (thumbnailY) {
            break;
         }
      } while (thumbnailY && (!sliderY.includes(`${overg.size}`)));
         overg.set(sliderY, (sliderY == String.fromCharCode(116,0) ? sliderY.length : overg.size));
      for (let m = 0; m < 1; m++) {
          let icon0: Array<any> = [420, 584, 37];
          let actions2 = String.fromCharCode(117,95,56,52,95,105,110,116,101,114,115,101,99,116,105,110,103,0);
          let datap = 3.0;
         sliderY += `${(String.fromCharCode(50,0) == actions2 ? actions2.length : parseInt(`${datap}`))}`;
         icon0.push(icon0.length + icon0.length);
      }
          let brightnessy = String.fromCharCode(105,95,55,48,95,99,97,118,115,105,100,99,116,0);
          let componentz = 1;
          let downloading6: Map<any, any> = new Map([[String.fromCharCode(107,95,50,52,95,115,116,111,114,109,98,105,114,100,0),558], [String.fromCharCode(102,95,50,50,95,104,111,115,116,0),529], [String.fromCharCode(101,99,114,101,99,111,118,101,114,95,98,95,49,52,0),554]]);
         overg.set(`${componentz}`, 3 & downloading6.size);
         brightnessy += `${brightnessy.length}`;
         componentz *= brightnessy.length;
         sliderY += `${overg.size & 1}`;
      product_ = `${(2 * (confirmationP ? 5 : 2))}`;
   }
       let baiduv = false;
      let smallA = baiduv ? !baiduv : baiduv;
      do {
          let reminderi: Array<any> = [953, 848];
          let apps8 = 2.0;
          let foundR = String.fromCharCode(115,98,112,114,111,95,101,95,49,56,0);
         baiduv = reminderi.length == 55 || baiduv;
         reminderi = [(foundR == String.fromCharCode(87,0) ? foundR.length : parseInt(`${apps8}`))];
         apps8 += parseFloat(`${1}`);
         if (smallA) {
            break;
         }
      } while (smallA && (baiduv || !baiduv));
      let taiwan9 = baiduv ? !baiduv : baiduv;
      do {
         baiduv = (baiduv ? baiduv : baiduv);
         if (taiwan9) {
            break;
         }
      } while ((!baiduv) && taiwan9);
       let userf: Map<any, any> = new Map([[String.fromCharCode(106,95,56,48,95,115,97,116,100,120,0),545], [String.fromCharCode(114,97,99,105,110,103,95,113,95,53,55,0),369]]);
       let sportsb: Map<any, any> = new Map([[String.fromCharCode(100,101,98,117,103,103,101,114,95,120,95,54,0),506], [String.fromCharCode(118,97,114,105,110,116,115,95,109,95,48,0),447], [String.fromCharCode(108,97,114,112,111,108,121,95,117,95,56,54,0),520]]);
      type_9j += `${((progressu ? 5 : 5))}`;
       let mappings = String.fromCharCode(107,95,55,48,95,112,114,101,99,101,100,101,110,99,101,0);
       let accepted6 = 0;
       let clears = String.fromCharCode(114,95,48,95,112,114,101,99,97,108,99,0);
      while (!mappings.startsWith(`${clears.length}`)) {
         clears += `${mappings.length}`;
         break;
      }
      let humidity0 = mappings.length >= 7271339;
      do {
         mappings = `${mappings.length}`;
         if (humidity0) {
            break;
         }
      } while (humidity0 && (clears.length <= 5));
         mappings += `${accepted6}`;
      if (3 > (mappings.length >> (Math.min(2, Math.abs(accepted6))))) {
         accepted6 -= accepted6 % (Math.max(1, 10));
      }
      for (let j = 0; j < 3; j++) {
          let sportsi = 5.0;
          let hongkongx = 5.0;
          let currentd = false;
          let mailf: Map<any, any> = new Map([[String.fromCharCode(104,95,56,54,95,111,112,112,111,114,116,117,110,105,115,116,105,99,97,108,108,121,0),943], [String.fromCharCode(100,101,97,100,95,117,95,49,48,48,0),651], [String.fromCharCode(109,95,57,49,95,99,105,114,99,117,108,97,114,0),259]]);
         clears += "3 ^ accepted6";
         sportsi /= Math.max(((currentd ? 3 : 4) + mailf.size), 1);
         hongkongx *= parseInt(`${sportsi}`) % 3;
         currentd = (((!currentd ? mailf.size : 95) >> (Math.min(Math.abs(mailf.size), 2))) < 88);
      }
       let full4 = 1;
       let navigationK = 1;
       let screen6 = 5;
      for (let m = 0; m < 1; m++) {
         full4 |= (mappings == String.fromCharCode(75,0) ? mappings.length : navigationK);
      }
         clears += `${1 >> (Math.min(5, mappings.length))}`;
      paginationK += `${clears.length * mappings.length}`;

    if (playlist !== null) {

   let google6 = analyticC.length <= 8108837;
   do {
      analyticC = `${parseInt(`${shirt6}`) ^ 3}`;
      if (google6) {
         break;
      }
   } while (google6 && (customd != analyticC));
   if (1.4 == (parseFloat(`${default_vT.length}`) * shirt6) || 1 == (default_vT.length | 1)) {
      shirt6 /= Math.max(3, parseFloat(`${2 & paginationK.length}`));
   }
   if (!confirmationP && analyticC.length >= 1) {
       let commonU: Map<any, any> = new Map([[String.fromCharCode(105,95,53,53,95,97,118,105,97,108,97,98,108,101,0),384], [String.fromCharCode(112,114,111,98,101,114,95,120,95,54,56,0),824], [String.fromCharCode(105,95,57,51,95,99,114,121,115,116,97,108,104,100,0),595]]);
      let placeholder5 = commonU.size >= 8973066;
      do {
         commonU.set(`${commonU.size}`, commonU.size);
         if (placeholder5) {
            break;
         }
      } while (((commonU.size ^ 1) == 4 && 4 == (1 ^ commonU.size)) && placeholder5);
       let register_rC = 3;
       let matchesz = 4;
         register_rC -= commonU.size;
      analyticC = "2";
   }
   for (let o = 0; o < 2; o++) {
      paginationK = "1";
   }
      default_vT = [default_vT.length | 1];
   if (profile2.startsWith(`${product_.length}`)) {
      product_ += `${(String.fromCharCode(53,0) == type_9j ? station0.length : type_9j.length)}`;
   }
   for (let u = 0; u < 3; u++) {
       let storeM = 4;
       let mutedz = true;
          let mail5 = 0.0;
          let indicatort = 5.0;
          let green8: Map<any, any> = new Map([[String.fromCharCode(97,99,99,114,117,101,100,95,104,95,52,52,0),String.fromCharCode(121,95,55,95,99,100,108,109,115,0)], [String.fromCharCode(108,95,50,95,109,105,115,99,0),String.fromCharCode(108,95,51,48,95,116,97,105,108,115,0)], [String.fromCharCode(115,112,101,99,116,114,117,109,95,55,95,50,57,0),String.fromCharCode(105,110,116,101,114,109,105,100,105,97,116,101,95,112,95,50,50,0)]]);
         mutedz = mail5 > 74.70 || 74.70 > indicatort;
         mail5 *= green8.size * 2;
         indicatort *= green8.size;
         storeM ^= storeM % 3;
         mutedz = storeM <= 19;
         mutedz = !mutedz || 67 < storeM;
      if (storeM >= 3) {
          let emojiy = String.fromCharCode(101,95,50,48,95,97,118,114,101,115,97,109,112,108,101,0);
          let viewerK = 0.0;
          let placeholderA = 0.0;
          let a_lockq = String.fromCharCode(107,97,108,109,97,110,95,121,95,55,0);
         mutedz = !mutedz && storeM <= 52;
         emojiy = `${parseInt(`${viewerK}`) ^ parseInt(`${placeholderA}`)}`;
         viewerK += a_lockq.length * 3;
         placeholderA *= parseFloat(`${2}`);
         a_lockq += `${parseInt(`${viewerK}`)}`;
      }
         storeM /= Math.max(2, (storeM + (mutedz ? 5 : 3)));
      analyticC += `${customd.length}`;
   }
       let fnewsn = 0.0;
       let scheduleZ = String.fromCharCode(114,101,118,101,114,115,101,95,116,95,54,55,0);
         fnewsn -= scheduleZ.length;
      let downX = scheduleZ == String.fromCharCode(112,118,50,102,50,0);
      do {
         scheduleZ += "2";
         if (downX) {
            break;
         }
      } while ((1 <= (5 + scheduleZ.length)) && downX);
         fnewsn -= parseInt(`${fnewsn}`);
      while (4 > (scheduleZ.length * parseInt(`${fnewsn}`))) {
          let settingL = 5.0;
          let changeH = String.fromCharCode(111,95,57,49,95,100,101,112,97,114,116,109,101,110,116,0);
          let r_titleX = String.fromCharCode(103,95,52,54,95,99,97,108,108,115,0);
          let userZ: Map<any, any> = new Map([[String.fromCharCode(104,95,50,53,95,109,115,101,120,0),false ], [String.fromCharCode(107,95,52,52,95,113,117,101,114,121,0),true ], [String.fromCharCode(100,101,108,105,118,101,114,101,100,95,109,95,57,56,0),true ]]);
          let formO: Array<any> = [347, 883, 674];
         fnewsn -= formO.length;
         settingL *= parseFloat(`${changeH.length - parseInt(`${settingL}`)}`);
         changeH = `${(changeH == String.fromCharCode(51,0) ? parseInt(`${settingL}`) : changeH.length)}`;
         r_titleX += "1";
         userZ.set(`${settingL}`, changeH.length);
         formO = [2];
         break;
      }
      while (1.37 == (fnewsn - 2.89) && 3 == (5 * scheduleZ.length)) {
         scheduleZ += `${parseInt(`${fnewsn}`)}`;
         break;
      }
      for (let j = 0; j < 2; j++) {
         scheduleZ = `${1 << (Math.min(4, scheduleZ.length))}`;
      }
      type_9j = `${(String.fromCharCode(97,0) == customd ? (progressu ? 4 : 1) : customd.length)}`;
      umb_center_carousel.playlistTopicsClickAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, [playlist]);
  

  return (
    <>
      <ScreenContainer>
        <TitleWithBackButtonHeader
          title={playlist?.topic_name}
          headerStyle={{ marginBottom: spacing.s }}
        />
        {playlist && (
          <View style={{ gap: spacing.s, paddingBottom: 230 }}>
            <View style={styles.header}>
              <Text
                numberOfLines={3}
                style={{
                  ...textVariants.small,
                  color: colors.text,
                  flex: 1,
                  marginRight: spacing.l,
                }}
              >
                {playlist?.topic_blurb}
              </Text>
              <FavoritePlaylistButton playlist={playlist} />
            </View>
            <Text
              style={{
                ...textVariants.small,
              }}
            >{`(共${playlist.vod_list.length}部)`}</Text>
            <VodWithDescriptionList
              vodList={playlist.vod_list}
              onClickCatalogVideo={onClickCatalogVideo}
            />
          </View>
        )}
      </ScreenContainer>
    </>
  );
};

const styles = StyleSheet.create({
  header: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
  },
});
