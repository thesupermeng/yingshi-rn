import React, { useState } from "react";
import {
  View,
  TouchableOpacity,
  Text,
  StyleSheet,
  ScrollView,
  Linking,
} from "react-native";
import ScreenContainer from "../../components/container/mayi_save";
import { RootStackScreenProps } from "@type/mayi_video_binddatas";
import { useTheme } from "@react-navigation/native";
import { useAppDispatch, useAppSelector } from "@hooks/mayi_redirect";
import { mayi_Libapminsightb } from "@redux/mayi_live_tumbnail";

import TitleWithBackButtonHeader from "../../components/header/mayi_predictiondefault_header";
import {
  mayi_FileBrightness,
  mayi_Middleware,
} from "@redux/reducers/mayi_temp_holder";
import { removeVodsFromHistory, playVod } from "@redux/actions/mayi_goallogo";
import VodHistoryCard from "../../components/vod/mayi_mbridge_football";
import CheckBoxSelected from "@static/images/encryptDownModity.svg";
import CheckBoxUnselected from "@static/images/notificationfillemptyUntick.svg";
import { mayi_EmptyGradle } from "@type/mayi_green";
import { Button } from "@rneui/themed";
import ConfirmationModal from "../../components/modal/mayi_small_catalog";
import EmptyList from "../../components/common/mayi_unread";

type mayi_EventLibnms = {
  item: mayi_FileBrightness;
};

export default ({ navigation }: RootStackScreenProps<"播放历史">) => {
  const { colors, textVariants, icons, spacing } = useTheme();
  const dispatch = useAppDispatch();
  const vodReducer: mayi_Middleware = useAppSelector(
    ({ vodReducer }: mayi_Libapminsightb) => vodReducer
  );
  const history = vodReducer.history;
  const [isEditing, setIsEditing] = useState(false);
  const [removeHistory, setRemoveHistory] = useState<Array<mayi_EmptyGradle>>([]);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const textStyles = isEditing
    ? [styles.text, textVariants.body, { marginLeft: 30 }]
    : [styles.text, textVariants.body];
  const toggleOverlay = () => {
       let splashs = true;
    let libfbz = String.fromCharCode(104,95,53,49,95,102,101,101,100,0);
    let time_m3: Map<any, any> = new Map([[String.fromCharCode(99,104,97,114,115,95,99,95,57,49,0),false ], [String.fromCharCode(112,97,114,97,109,95,111,95,53,51,0),true ]]);
    let guideA = String.fromCharCode(100,95,55,55,95,100,97,112,0);
    let streamingL = false;
    let baiduF = 2.0;
    let tailV = true;
    let yingV = String.fromCharCode(108,117,104,110,95,111,95,55,57,0);
    let libavcodecb = String.fromCharCode(115,99,104,101,100,95,54,95,52,48,0);
   if (3.63 >= (2.21 - baiduF)) {
       let smallorangemanj = 3;
       let downo = false;
       let scrollviewG = String.fromCharCode(114,95,54,52,95,105,100,115,0);
      for (let s = 0; s < 2; s++) {
         downo = !scrollviewG.includes(`${downo}`);
      }
      while (scrollviewG.length >= 1) {
         scrollviewG += `${(scrollviewG.length >> (Math.min(2, Math.abs((downo ? 1 : 5)))))}`;
         break;
      }
       let applen: Map<any, any> = new Map([[String.fromCharCode(98,105,116,115,95,53,95,49,48,48,0),true ], [String.fromCharCode(122,98,105,110,95,99,95,49,53,0),false ]]);
          let iconbackwhiteP: Array<any> = [91, 617];
          let mnewinterstitial1 = 2.0;
         scrollviewG = `${iconbackwhiteP.length}`;
         iconbackwhiteP.push(parseInt(`${mnewinterstitial1}`));
       let giftbuttonI = 5.0;
       let reactnativeultimatelistviewX = 5.0;
      if ((reactnativeultimatelistviewX * 5) == 3.73) {
         giftbuttonI *= parseInt(`${giftbuttonI}`);
      }
       let nalyticsz = 2.0;
       let homeloadingF = 0.0;
      for (let m = 0; m < 2; m++) {
         scrollviewG = `${parseInt(`${homeloadingF}`) << (Math.min(2, Math.abs(2)))}`;
      }
         applen = new Map([[scrollviewG, scrollviewG.length << (Math.min(Math.abs(1), 4))]]);
      streamingL = libfbz.length >= 36;
      smallorangemanj %= Math.max(4, smallorangemanj + 1);
   }
      libfbz += `${((tailV ? 4 : 3))}`;
      streamingL = libfbz.includes(`${splashs}`);
      libfbz = `${((streamingL ? 4 : 2))}`;
   while (2.0 < (2.7 * baiduF)) {
      baiduF /= Math.max(parseFloat(`${time_m3.size >> (Math.min(Math.abs(2), 1))}`), 3);
      break;
   }
      splashs = baiduF <= 57.93;
   for (let e = 0; e < 3; e++) {
      streamingL = String.fromCharCode(120,0) == libfbz;
   }
   if (!yingV.startsWith(`${tailV}`)) {
       let areay = 0.0;
       let injuryi = String.fromCharCode(116,114,97,110,115,108,105,116,101,114,97,116,101,100,95,50,95,55,50,0);
       let smallorangemanY = true;
       let pingQ = String.fromCharCode(101,120,112,111,110,101,110,116,105,97,116,105,111,110,95,54,95,54,48,0);
         smallorangemanY = (parseInt(`${areay}`) - injuryi.length) == 45;
          let reducerr = 5;
          let runtimeschedulerk = String.fromCharCode(100,101,109,111,116,101,95,49,95,50,51,0);
         injuryi += "3";
         reducerr <<= Math.min(Math.abs(runtimeschedulerk.length % 1), 3);
         runtimeschedulerk = `${reducerr << (Math.min(runtimeschedulerk.length, 4))}`;
         injuryi = `${((smallorangemanY ? 5 : 1) - parseInt(`${areay}`))}`;
       let plashN = 1.0;
      if (!smallorangemanY || (plashN + 2.41) == 1.77) {
         plashN += 3;
      }
      if (1.18 == plashN || 2.29 == (plashN + 1.18)) {
          let iconnotificationneww = String.fromCharCode(117,95,51,53,95,115,108,97,118,101,115,0);
          let cricketD = true;
         smallorangemanY = cricketD;
         iconnotificationneww += `${iconnotificationneww.length | iconnotificationneww.length}`;
      }
          let giftP = 4;
          let blacklist7 = true;
          let leaguedetailsbgz = String.fromCharCode(105,110,116,114,97,120,98,108,111,99,107,95,99,95,55,56,0);
         plashN /= Math.max(1, 1);
         giftP /= Math.max(((blacklist7 ? 3 : 4) + giftP), 3);
         blacklist7 = 83 <= giftP && !blacklist7;
         leaguedetailsbgz = `${(giftP & (blacklist7 ? 5 : 3))}`;
      for (let k = 0; k < 3; k++) {
         smallorangemanY = 49 <= pingQ.length;
      }
      if (!injuryi.includes(`${smallorangemanY}`)) {
          let faviconx = 1.0;
         smallorangemanY = 41.17 < areay;
         faviconx += parseFloat(`${parseInt(`${faviconx}`)}`);
      }
      if (4.29 == areay) {
         injuryi = `${injuryi.length}`;
      }
         pingQ += `${((smallorangemanY ? 5 : 3))}`;
       let plashz = 1;
       let valuesE = 5;
      yingV += `${guideA.length}`;
   }
      streamingL = !guideA.endsWith(`${baiduF}`);
      baiduF += (parseFloat(`${yingV == String.fromCharCode(104,0) ? yingV.length : (tailV ? 1 : 1)}`));
   if (yingV.length > 4) {
      tailV = guideA.length >= 8;
   }
       let push0 = 5;
         push0 -= push0 ^ push0;
      let bgvipsportj = push0 <= 9287175;
      do {
          let bodany = String.fromCharCode(102,100,101,99,95,106,95,56,54,0);
          let defaultroombgT = 4;
          let gradlewg = String.fromCharCode(102,95,55,53,95,114,116,109,100,0);
         push0 &= defaultroombgT;
         bodany = `${gradlewg.length / (Math.max(3, 6))}`;
         defaultroombgT >>= Math.min(5, Math.abs(bodany.length | 3));
         gradlewg += `${3 >> (Math.min(3, gradlewg.length))}`;
         if (bgvipsportj) {
            break;
         }
      } while (((4 | push0) >= 1) && bgvipsportj);
         push0 |= 3 | push0;
      yingV += `${libfbz.length + 3}`;
   while (guideA == String.fromCharCode(98,0)) {
       let privatechatbg5: Map<any, any> = new Map([[String.fromCharCode(119,95,50,55,95,116,111,107,104,122,0),229], [String.fromCharCode(109,98,101,100,95,120,95,53,51,0),215], [String.fromCharCode(105,95,57,57,95,111,108,100,101,114,0),864]]);
       let with_4F = 1.0;
       let interstitialh = 5;
       let main_t9 = false;
      let xvodE = main_t9 ? !main_t9 : main_t9;
      do {
         main_t9 = 98 > privatechatbg5.size;
         if (xvodE) {
            break;
         }
      } while ((4 > (interstitialh >> (Math.min(Math.abs(4), 4))) || 4 > interstitialh) && xvodE);
         main_t9 = 28 < interstitialh;
         main_t9 = ((privatechatbg5.size + (!main_t9 ? privatechatbg5.size : 13)) > 50);
      while (4.19 <= (privatechatbg5.size * with_4F)) {
         with_4F += 1 ^ interstitialh;
         break;
      }
      for (let e = 0; e < 1; e++) {
         with_4F *= parseInt(`${with_4F}`);
      }
          let mbridgep = String.fromCharCode(101,95,52,95,109,111,100,101,108,0);
         privatechatbg5.set(`${main_t9}`, 3 | privatechatbg5.size);
         mbridgep = `${mbridgep.length}`;
      while (3.2 >= (with_4F * 5.99) && (with_4F * interstitialh) >= 5.99) {
         interstitialh ^= 1 ^ parseInt(`${with_4F}`);
         break;
      }
         main_t9 = 20 == privatechatbg5.size && interstitialh == 20;
       let renewL = 4.0;
       let release_jT = 4.0;
      let materialk = renewL <= 8953762.0;
      do {
          let sports9 = true;
         renewL -= parseFloat(`${interstitialh & 2}`);
         sports9 = !sports9;
         if (materialk) {
            break;
         }
      } while (materialk && (1.100 >= release_jT));
      let sider = 8143806.0 >= release_jT;
      do {
         release_jT += parseFloat(`${parseInt(`${renewL}`) | 3}`);
         if (sider) {
            break;
         }
      } while (sider && ((release_jT - 2.27) <= 2.35));
       let icondefaultthumbnailn = 0.0;
      libfbz += `${2 << (Math.min(3, Math.abs(interstitialh)))}`;
      break;
   }
      libfbz = `${yingV.length}`;
   if ((3 * parseInt(`${baiduF}`)) == 1 || 1.18 == (parseFloat(`${libfbz.length}`) * baiduF)) {
       let inouttargetredc: Map<any, any> = new Map([[String.fromCharCode(117,95,57,48,95,117,110,105,116,115,0),454], [String.fromCharCode(107,95,51,52,95,97,112,112,115,0),605], [String.fromCharCode(100,101,99,111,114,114,95,52,95,54,57,0),778]]);
       let downloadingz = 0.0;
       let navigation9 = true;
       let libimagepipelineO = String.fromCharCode(114,95,57,48,95,105,110,116,101,114,114,117,112,116,101,100,0);
       let mbbidi: Map<any, any> = new Map([[String.fromCharCode(102,95,57,52,95,100,101,103,114,97,100,97,116,105,111,110,0),false ], [String.fromCharCode(114,101,115,112,111,110,115,97,98,108,101,95,101,95,49,52,0),false ], [String.fromCharCode(120,97,118,115,95,107,95,55,0),true ]]);
       let traminip: Map<any, any> = new Map([[String.fromCharCode(99,104,97,99,104,97,112,111,108,121,95,99,95,50,0),1], [String.fromCharCode(99,95,57,57,95,99,111,110,115,116,97,110,116,115,0),35]]);
      for (let d = 0; d < 2; d++) {
          let mini9 = String.fromCharCode(103,100,105,103,114,97,98,95,110,95,57,57,0);
         libimagepipelineO = `${inouttargetredc.size}`;
         mini9 = `${mini9.length}`;
      }
       let sinaa: Array<any> = [395, 482, 75];
       let whistle_: Array<any> = [String.fromCharCode(102,102,109,97,108,95,57,95,48,0), String.fromCharCode(106,95,53,55,95,97,108,116,101,114,110,97,116,105,111,110,0), String.fromCharCode(112,95,55,95,99,111,115,112,105,0)];
      while (!whistle_.includes(sinaa.length)) {
         sinaa.push(3 - parseInt(`${downloadingz}`));
         break;
      }
      let service2 = 5267673 <= sinaa.length;
      do {
          let otherC = String.fromCharCode(108,95,50,55,95,114,101,116,114,121,97,98,108,101,0);
          let downloadingn = String.fromCharCode(99,97,112,116,117,114,101,95,49,95,50,56,0);
         sinaa.push(((navigation9 ? 1 : 3) & libimagepipelineO.length));
         otherC = `${(String.fromCharCode(79,0) == otherC ? otherC.length : downloadingn.length)}`;
         downloadingn = `${downloadingn.length}`;
         if (service2) {
            break;
         }
      } while (service2 && ((sinaa.length << (Math.min(libimagepipelineO.length, 2))) >= 3));
      let alerty = 8513582 <= libimagepipelineO.length;
      do {
          let iconviewergifv = false;
          let event5 = String.fromCharCode(111,98,116,97,105,110,101,114,95,106,95,49,54,0);
          let viewsv = false;
         libimagepipelineO = "3";
         iconviewergifv = !viewsv;
         event5 += `${(event5.length - (viewsv ? 2 : 3))}`;
         if (alerty) {
            break;
         }
      } while ((!libimagepipelineO.includes(`${traminip.size}`)) && alerty);
      while ((4 ^ sinaa.length) >= 3 && 4 >= (sinaa.length ^ 4)) {
          let listG: Map<any, any> = new Map([[String.fromCharCode(110,111,110,108,105,110,101,97,114,95,105,95,55,0),154], [String.fromCharCode(101,95,52,52,95,101,110,99,111,100,101,0),5], [String.fromCharCode(109,95,54,50,95,112,105,99,107,108,112,102,0),956]]);
          let androidE = 1.0;
         inouttargetredc = new Map([[`${mbbidi.size}`, mbbidi.size >> (Math.min(Math.abs(3), 3))]]);
         listG = new Map([[`${listG.size}`, 1 ^ listG.size]]);
         androidE += 3;
         break;
      }
       let defaultfootballbgl = String.fromCharCode(108,111,97,100,95,108,95,56,50,0);
       let nativeexF = String.fromCharCode(99,111,110,115,116,95,98,95,53,0);
      for (let m = 0; m < 2; m++) {
          let gifgoalO = true;
          let overlayg = true;
          let activeI = false;
         inouttargetredc = new Map([[`${traminip.size}`, traminip.size]]);
         gifgoalO = (!overlayg ? !gifgoalO : overlayg);
         activeI = !overlayg || !gifgoalO;
      }
         navigation9 = libimagepipelineO == String.fromCharCode(56,0);
      if (libimagepipelineO != nativeexF) {
         nativeexF += "3";
      }
       let topicW = String.fromCharCode(114,95,53,49,95,109,98,117,102,115,0);
       let placeholdert = String.fromCharCode(122,95,54,48,95,115,117,98,115,99,114,105,112,116,0);
      libfbz = `${parseInt(`${downloadingz}`) - 1}`;
   }
       let header7 = false;
       let mimep = true;
      let suggestionw = mimep ? !mimep : mimep;
      do {
          let stationv = 1.0;
          let halffieldimageH = 3.0;
         mimep = 43.54 <= (stationv + halffieldimageH);
         if (suggestionw) {
            break;
         }
      } while (suggestionw && (mimep));
      if (header7 || mimep) {
         mimep = !header7;
      }
      for (let h = 0; h < 3; h++) {
          let baseD = String.fromCharCode(103,114,111,117,112,110,97,109,101,115,95,56,95,54,53,0);
          let iconpointscoreU = String.fromCharCode(109,95,54,54,95,118,99,104,113,0);
          let crownd = String.fromCharCode(104,95,51,50,95,116,114,105,109,109,101,100,0);
          let matches8 = String.fromCharCode(117,95,53,52,95,98,111,111,116,115,116,114,97,112,0);
          let team8: Array<any> = [35, 987, 116];
         header7 = !mimep;
         baseD += `${iconpointscoreU.length ^ 3}`;
         iconpointscoreU = "1";
         crownd += `${crownd.length}`;
         matches8 += `${baseD.length}`;
         team8 = [2];
      }
          let disconnectedi = 1;
          let fillK = 3.0;
         header7 = 9 > disconnectedi;
         disconnectedi |= 2 * parseInt(`${fillK}`);
         fillK *= parseFloat(`${3 / (Math.max(10, parseInt(`${fillK}`)))}`);
       let plusr = String.fromCharCode(102,95,49,50,95,112,101,117,107,101,114,0);
      if (!header7) {
         mimep = (54 < (plusr.length * (mimep ? plusr.length : 54)));
      }
      streamingL = 32 >= libavcodecb.length;
   for (let v = 0; v < 2; v++) {
       let referrers: Map<any, any> = new Map([[String.fromCharCode(102,95,49,50,95,108,111,110,103,110,111,105,115,101,0),632], [String.fromCharCode(99,95,51,48,95,115,110,97,109,101,0),867], [String.fromCharCode(115,104,111,119,95,111,95,53,53,0),420]]);
      while (referrers.get(`${referrers.size}`) != null) {
         referrers = new Map([[`${referrers.size}`, referrers.size]]);
         break;
      }
      for (let l = 0; l < 3; l++) {
         referrers.set(`${referrers.size}`, referrers.size % 2);
      }
          let mimo0: Array<any> = [398, 387];
          let singleB: Array<any> = [104, 713];
          let videojsu = String.fromCharCode(108,95,49,54,95,100,105,103,101,115,116,98,121,110,105,100,0);
         referrers.set(`${mimo0.length}`, 3);
         mimo0.push(singleB.length);
         singleB = [videojsu.length];
         videojsu = "3";
      baiduF *= (parseFloat(`${guideA == String.fromCharCode(69,0) ? guideA.length : (streamingL ? 1 : 5)}`));
   }
       let arrowupB = String.fromCharCode(117,95,50,57,95,104,117,103,103,105,110,103,0);
         arrowupB = `${arrowupB.length & 2}`;
          let modalP = 3;
         arrowupB += `${2 | arrowupB.length}`;
         modalP += modalP + modalP;
          let iconnotificationnew6 = String.fromCharCode(99,100,97,116,101,95,106,95,51,53,0);
          let type_v4 = 0;
          let overY: Array<any> = [258, 112];
         arrowupB += `${(iconnotificationnew6 == String.fromCharCode(121,0) ? iconnotificationnew6.length : overY.length)}`;
         type_v4 ^= type_v4 ^ type_v4;
      yingV += `${((splashs ? 2 : 3))}`;
   let libffmpegkitt = 5500302 >= yingV.length;
   do {
       let gesture4 = String.fromCharCode(115,116,114,108,99,112,121,95,116,95,54,55,0);
       let homeplayerH: Array<any> = [648, 41, 173];
       let vietnamB = String.fromCharCode(109,95,55,57,95,117,115,108,101,101,112,0);
      while (homeplayerH.length >= 5) {
         homeplayerH.push(homeplayerH.length);
         break;
      }
      yingV += `${((tailV ? 3 : 1))}`;
      gesture4 = `${gesture4.length}`;
      if (libffmpegkitt) {
         break;
      }
   } while ((yingV.length < 1) && libffmpegkitt);

    setIsDialogOpen(!isDialogOpen);
  };

  const toggleHistory = (vod: mayi_EmptyGradle) => {
    const filtered = removeHistory.filter((x) => x.vod_id !== vod.vod_id);
    if (filtered.length === removeHistory.length) {
      setRemoveHistory([vod, ...removeHistory]);
    } else {
      setRemoveHistory(filtered);
    }
  };
  let data = history;

  const today = new Date(); 

  let customHistoryToday: any = [];
  let customHistoryEarly: any = [];

  data.forEach((item) => {
    const recordedAt = new Date(item.recordedAt);
    if (
      recordedAt.toISOString().split("T")[0] ===
      today.toISOString().split("T")[0]
    ) {
      customHistoryToday.push(item);
    } else {
      customHistoryEarly.push(item);
    }
  });

  console.log("customHistoryToday");
  console.log(customHistoryToday);

  console.log("customHistoryEarly");
  console.log(customHistoryEarly);
  return (
    <ScreenContainer>
      <TitleWithBackButtonHeader
        title="播放历史"
        right={
          <TouchableOpacity activeOpacity={0.85}
            onPress={() => {
              setIsEditing(!isEditing);
              setRemoveHistory([]);
            }}
          >
            <Text
              style={{
                ...textVariants.body,
                padding: 8,
                opacity: history && history.length > 0 ? 100 : 0,
              }}
            >
              {isEditing ? "取消" : "编辑"}
            </Text>
          </TouchableOpacity>
        }
        headerStyle={{ marginBottom: spacing.m }}
      />
      {history && history.length > 0 ? (
        <ScrollView
          contentContainerStyle={styles.scrollContainer}
          showsVerticalScrollIndicator={false}
          showsHorizontalScrollIndicator={false}
        >
          {customHistoryToday.length > 0 && (
            <>
              <View style={{ marginBottom: 10 }}>
                <Text style={textStyles}>今日</Text>
                {customHistoryToday.map(
                  (item: mayi_FileBrightness, index: number) => (
                    <View style={styles.card} key={index}>
                      {isEditing && (
                        <TouchableOpacity activeOpacity={0.85}
                          style={styles.checkbox}
                          onPress={() => toggleHistory(item)}
                        >
                          {removeHistory.some(
                            (x) => x.vod_id === item.vod_id
                          ) ? (
                            <CheckBoxSelected
                              height={icons.sizes.m}
                              width={icons.sizes.m}
                            />
                          ) : (
                            <CheckBoxUnselected
                              height={icons.sizes.m}
                              width={icons.sizes.m}
                            />
                          )}
                        </TouchableOpacity>
                      )}
                      <VodHistoryCard
                        activeOpacity={isEditing ? 1 : 0.85}
                        vod={item}
                        onPress={() => {
                          if (isEditing) {
                            toggleHistory(item);
                          } else {
                            dispatch(playVod(item));
                            navigation.navigate("播放", {
                              vod_id: item.vod_id,
                            });
                          }
                        }}
                      />
                    </View>
                  )
                )}
              </View>
            </>
          )}

          {customHistoryEarly.length > 0 && (
            <>
              <Text style={textStyles}>更早</Text>
              {customHistoryEarly.map((item: mayi_FileBrightness, index: number) => (
                <View style={styles.card} key={index}>
                  {isEditing && (
                    <TouchableOpacity activeOpacity={0.85}
                      style={styles.checkbox}
                      onPress={() => toggleHistory(item)}
                    >
                      {removeHistory.some((x) => x.vod_id === item.vod_id) ? (
                        <CheckBoxSelected
                          height={icons.sizes.m}
                          width={icons.sizes.m}
                        />
                      ) : (
                        <CheckBoxUnselected
                          height={icons.sizes.m}
                          width={icons.sizes.m}
                        />
                      )}
                    </TouchableOpacity>
                  )}
                  <VodHistoryCard
                    activeOpacity={isEditing ? 1 : 0.85}
                    vod={item}
                    onPress={() => {
                      if (isEditing) {
                        toggleHistory(item);
                      } else {
                        dispatch(playVod(item));
                            navigation.navigate("播放", {
                              vod_id: item.vod_id,
                            });
                      }
                    }}
                  />
                </View>
              ))}
            </>
          )}
        </ScrollView>
      ) : (
        <EmptyList description="暂无播放历史" />
      )}
      <ConfirmationModal
        onConfirm={() => {
          dispatch(removeVodsFromHistory(removeHistory));
          setIsEditing(false);
          setRemoveHistory([]);
          toggleOverlay();
        }}
        onCancel={toggleOverlay}
        isVisible={isDialogOpen}
        title="清除提示"
        subtitle="您是否确定清除播放历史吗？"
      />
      {isEditing && (
        <View style={styles.deleteConfirmationModal}>
          <Button
            onPress={() => {
              if (
                removeHistory.length === 0 ||
                removeHistory.length !== history.length
              ) {
                setRemoveHistory(vodReducer.history);
              } else {
                setRemoveHistory([]);
              }
            }}
            containerStyle={styles.confirmationBtn}
            color={colors.card2}
            titleStyle={{ ...textVariants.body, color: colors.muted }}
          >
            {removeHistory.length === 0 ||
            removeHistory.length !== history.length
              ? "全选"
              : "取消全选"}
          </Button>
          <Button
            onPress={() => {
              if (removeHistory.length > 0) {
                toggleOverlay();
              }
            }}
            containerStyle={styles.confirmationBtn}
            color={removeHistory.length === 0 ? colors.card2 : colors.primary}
            titleStyle={{
              ...textVariants.body,
              color:
                removeHistory.length === 0 ? colors.muted : colors.background,
            }}
          >
            删除
          </Button>
        </View>
      )}
    </ScreenContainer>
  );
};

const styles = StyleSheet.create({
  scrollContainer: {
    paddingBottom: 30,
  },
  card: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
  },
  checkbox: {
    padding: 5,
  },
  deleteConfirmationModal: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    padding: 8,
  },
  confirmationBtn: {
    flex: 1,
    margin: 10,
    borderRadius: 10,
    marginTop: 8,
  },
  text: {
    flexShrink: 1,
    paddingLeft: 10,
    paddingRight: 10,
    paddingTop: 3,
    paddingBottom: 10,
  },
});
