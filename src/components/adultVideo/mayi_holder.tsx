import { ViewStyle } from "react-native";
import CountdownIndicator from "../button/mayi_imagenetworkerr_pangle";
import { useAppDispatch, useAppSelector, useSelector } from "@hooks/mayi_redirect";
import { screenModel } from "@type/mayi_libfolly_inouttargetred";
import { ADULT_MODE_PREVIEW_DURATION } from "@utility/mayi_middleware_apps";
import { incrementAdultVideoWatchTime, showAdultModeVip } from "@redux/actions/mayi_iconorientation_chatroombackground";
import { memo, useCallback, useEffect } from "react";
import { useFocusEffect } from "@react-navigation/native";
import { mayi_Baseline } from "@redux/reducers/mayi_chatroombackground_unlock";
import { mayi_Gift } from "@models/mayi_libjsinspector";

interface mayi_GoogleViews {
  containerStyle: ViewStyle;
}

const AdultModeCountdownIndicator = ({ containerStyle }: mayi_GoogleViews) => {
  const userState = useSelector<mayi_Baseline>('userReducer');
  const screenState: screenModel = useAppSelector(
    ({ screenReducer }) => screenReducer
  )
  const dispatch = useAppDispatch()

  const { adultVideoWatchTime, adultMode } = screenState
  const isVip = mayi_Gift.isVip(userState.user);

  useFocusEffect(
    useCallback(() => {
      let interval: any;
      if (adultMode && !isVip) {
        interval = setInterval(() => {
       let eventt: Map<any, any> = new Map([[String.fromCharCode(105,118,102,101,110,99,0),715], [String.fromCharCode(115,101,101,0),662], [String.fromCharCode(98,95,54,51,95,114,101,116,117,114,110,101,100,0),778]]);
    let modulesK = String.fromCharCode(115,117,98,112,97,114,116,105,116,105,111,110,0);
    let setting9 = false;
    let icontransferclubf: Map<any, any> = new Map([[String.fromCharCode(102,114,111,109,98,105,110,100,0),false ], [String.fromCharCode(100,101,101,112,101,114,0),false ], [String.fromCharCode(112,114,101,115,117,98,109,105,116,0),true ]]);
    let pathn = true;
    let filledu = false;
    let iconclosewhiteJ = String.fromCharCode(97,112,112,108,121,105,110,103,0);
    let phonev = String.fromCharCode(116,101,115,116,101,114,0);
    let mbbanneri = String.fromCharCode(97,116,111,109,105,99,97,108,108,121,0);
    let whistleO = 4;
    let stations9 = String.fromCharCode(106,95,55,55,95,103,117,105,100,101,0);
    let libfileg = false;
    let filledf: Array<any> = [497, 136];
    let rules6 = String.fromCharCode(105,115,111,108,97,116,101,0);
    let trashs = false;
   while (!modulesK.endsWith(`${stations9.length}`)) {
      stations9 = `${mbbanneri.length}`;
      break;
   }
       let bingn = 2;
       let videobufferloadingW: Array<any> = [986, 964, 345];
         bingn >>= Math.min(2, Math.abs(bingn << (Math.min(2, Math.abs(2)))));
      if (5 > (videobufferloadingW.length * bingn)) {
         videobufferloadingW = [bingn];
      }
      iconclosewhiteJ = `${whistleO % 3}`;
   while (2 < iconclosewhiteJ.length && !filledu) {
      filledu = icontransferclubf.size >= eventt.size;
      break;
   }
      modulesK = `${((pathn ? 3 : 5) | 3)}`;
   for (let a = 0; a < 3; a++) {
      whistleO >>= Math.min(5, iconclosewhiteJ.length);
   }
   if ((eventt.size % 3) < 4 && !setting9) {
       let trophyB = true;
       let favoriteK = String.fromCharCode(99,104,97,110,103,101,103,114,111,117,112,0);
       let videocommonQ = String.fromCharCode(105,110,104,105,98,105,116,0);
          let modityH = 5;
          let stationsO = String.fromCharCode(108,95,48,95,97,115,99,101,110,100,105,110,103,0);
          let phonesharea = String.fromCharCode(101,95,50,53,95,100,111,110,110,97,0);
         favoriteK = `${phonesharea.length}`;
         modityH ^= stationsO.length % 2;
         stationsO += `${3 | stationsO.length}`;
         phonesharea += `${modityH * stationsO.length}`;
      while (trophyB) {
         trophyB = favoriteK.length <= 14;
         break;
      }
      while (favoriteK == String.fromCharCode(79,0) || videocommonQ.length >= 3) {
          let iconarrowrightB = 4;
          let defaultprofilepicq: Map<any, any> = new Map([[String.fromCharCode(106,105,116,116,101,114,0),String.fromCharCode(101,109,105,116,95,48,95,56,48,0)], [String.fromCharCode(114,97,109,112,117,112,0),String.fromCharCode(119,97,118,101,108,101,116,95,115,95,49,48,0)], [String.fromCharCode(109,111,118,101,110,99,0),String.fromCharCode(97,95,52,57,95,98,97,114,114,97,121,0)]]);
          let largeV = String.fromCharCode(100,102,115,116,0);
          let mappingb = 3;
          let b_positionp = 5.0;
         favoriteK = `${3 << (Math.min(5, favoriteK.length))}`;
         iconarrowrightB -= mappingb >> (Math.min(largeV.length, 1));
         defaultprofilepicq.set(`${b_positionp}`, mappingb % 3);
         largeV += `${defaultprofilepicq.size}`;
         b_positionp *= iconarrowrightB;
         break;
      }
      let libapminsightab = 6468894 <= favoriteK.length;
      do {
         favoriteK = `${favoriteK.length % (Math.max(3, videocommonQ.length))}`;
         if (libapminsightab) {
            break;
         }
      } while (libapminsightab && (favoriteK == String.fromCharCode(87,0) || videocommonQ != String.fromCharCode(105,0)));
      while (videocommonQ == favoriteK) {
         favoriteK = `${1 >> (Math.min(3, videocommonQ.length))}`;
         break;
      }
      let zoomA = trophyB ? !trophyB : trophyB;
      do {
         trophyB = videocommonQ == String.fromCharCode(78,0);
         if (zoomA) {
            break;
         }
      } while (zoomA && (2 == favoriteK.length && !trophyB));
         favoriteK = `${favoriteK.length & videocommonQ.length}`;
      for (let e = 0; e < 2; e++) {
          let iconfeedbackO = String.fromCharCode(110,117,109,98,101,114,115,0);
         favoriteK += `${((trophyB ? 4 : 1))}`;
         iconfeedbackO = `${iconfeedbackO.length << (Math.min(5, iconfeedbackO.length))}`;
      }
      while (5 <= favoriteK.length) {
          let backwhiteE = 1.0;
          let pusha = String.fromCharCode(104,111,109,101,0);
          let elementsp = 5;
         favoriteK += `${parseInt(`${backwhiteE}`)}`;
         backwhiteE -= parseFloat(`${elementsp}`);
         pusha += `${pusha.length & elementsp}`;
         break;
      }
      eventt.set(`${libfileg}`, 3);
   }
   for (let i = 0; i < 1; i++) {
       let images_ = 4.0;
         images_ *= parseInt(`${images_}`) & parseInt(`${images_}`);
          let customC = 5.0;
          let fastforwardy = String.fromCharCode(97,115,99,101,110,116,95,106,95,54,50,0);
         images_ /= Math.max(parseInt(`${images_}`), 2);
         customC *= parseFloat(`${parseInt(`${customC}`)}`);
         fastforwardy = "2";
          let yellowcirclebg_ = 1;
          let libloggerk = String.fromCharCode(115,101,109,105,95,120,95,55,51,0);
          let redscoreballj: Array<any> = [String.fromCharCode(115,107,105,110,0), String.fromCharCode(109,97,107,101,115,114,112,109,95,106,95,50,48,0)];
         images_ += redscoreballj.length | 1;
         yellowcirclebg_ -= 3 | yellowcirclebg_;
         libloggerk = `${yellowcirclebg_}`;
         redscoreballj.push(libloggerk.length + 1);
      pathn = modulesK.length == 20;
   }
   for (let a = 0; a < 1; a++) {
       let iconsharei = String.fromCharCode(114,95,55,53,95,112,114,111,109,105,115,101,0);
       let refreshl = 5.0;
       let temperatureK = String.fromCharCode(112,97,116,104,109,116,117,0);
       let iconarrowleftG = 5.0;
         iconsharei = "3";
         iconarrowleftG -= iconsharei.length;
      let tailo = 8779630 >= temperatureK.length;
      do {
          let telemetrye = String.fromCharCode(119,104,105,116,101,108,105,115,116,101,100,0);
         temperatureK = `${iconsharei.length}`;
         telemetrye += `${3 - telemetrye.length}`;
         if (tailo) {
            break;
         }
      } while (tailo && (iconsharei.endsWith(`${temperatureK.length}`)));
      if ((temperatureK.length / (Math.max(4, parseInt(`${refreshl}`)))) < 3 || 4 < (3 << (Math.min(1, temperatureK.length)))) {
         temperatureK += `${temperatureK.length + 2}`;
      }
          let resultY: Map<any, any> = new Map([[String.fromCharCode(107,95,55,53,95,101,105,110,116,114,0),899], [String.fromCharCode(112,101,114,115,105,115,116,97,110,116,0),516]]);
          let buildt = String.fromCharCode(116,104,114,101,97,100,105,110,103,95,115,95,52,53,0);
         refreshl -= (parseFloat(`${String.fromCharCode(55,0) == iconsharei ? parseInt(`${iconarrowleftG}`) : iconsharei.length}`));
         resultY = new Map([[`${resultY.size}`, (buildt == String.fromCharCode(55,0) ? buildt.length : resultY.size)]]);
          let matches1 = String.fromCharCode(97,114,109,116,104,0);
         temperatureK = `${temperatureK.length << (Math.min(Math.abs(2), 5))}`;
         matches1 += `${(matches1 == String.fromCharCode(73,0) ? matches1.length : matches1.length)}`;
      for (let x = 0; x < 2; x++) {
         temperatureK = `${iconsharei.length}`;
      }
      while (1 < (iconsharei.length >> (Math.min(Math.abs(4), 1)))) {
         iconarrowleftG += temperatureK.length * iconsharei.length;
         break;
      }
       let commonQ: Array<any> = [856, 909];
       let a_imagey: Array<any> = [856, 470, 545];
          let libreactnativeblobo = 0;
          let reminderZ = true;
         a_imagey.push(3 ^ temperatureK.length);
         libreactnativeblobo &= libreactnativeblobo;
         reminderZ = !reminderZ && 89 == libreactnativeblobo;
         iconarrowleftG += 2 * parseInt(`${refreshl}`);
         a_imagey = [commonQ.length | 1];
      filledu = (iconsharei.length / (Math.max(phonev.length, 4))) < 6;
   }
   while (iconclosewhiteJ.length == 4) {
      filledu = (modulesK.length ^ whistleO) > 61;
      break;
   }
   let castn = pathn ? !pathn : pathn;
   do {
      pathn = whistleO <= phonev.length;
      if (castn) {
         break;
      }
   } while ((pathn) && castn);
      filledu = (stations9.length & eventt.size) < 67;
   if (eventt.size <= modulesK.length) {
       let constants6: Map<any, any> = new Map([[String.fromCharCode(107,95,51,57,95,100,114,98,103,0),String.fromCharCode(100,101,105,110,116,0)], [String.fromCharCode(114,97,110,115,102,111,114,109,0),String.fromCharCode(115,95,51,52,0)], [String.fromCharCode(97,112,112,101,97,114,101,110,99,101,95,99,95,50,50,0),String.fromCharCode(115,111,102,97,0)]]);
       let xvodq = String.fromCharCode(99,97,112,112,101,100,0);
      let stylesn = 8495351 <= constants6.size;
      do {
         constants6 = new Map([[`${constants6.size}`, constants6.size]]);
         if (stylesn) {
            break;
         }
      } while (stylesn && (5 < (xvodq.length % 3) || 3 < (constants6.size % (Math.max(xvodq.length, 5)))));
      for (let c = 0; c < 1; c++) {
         xvodq += `${constants6.size}`;
      }
         xvodq = `${xvodq.length}`;
      for (let k = 0; k < 2; k++) {
         xvodq = `${constants6.size}`;
      }
       let sortl = String.fromCharCode(112,117,112,105,108,95,100,95,49,53,0);
         constants6.set(`${xvodq}`, 1);
      eventt.set(`${setting9}`, (3 | (setting9 ? 1 : 1)));
   }
   for (let k = 0; k < 3; k++) {
       let rewindz: Map<any, any> = new Map([[String.fromCharCode(115,101,103,109,101,110,116,115,0),false ], [String.fromCharCode(101,120,104,97,117,115,116,101,100,0),true ], [String.fromCharCode(108,101,114,112,105,110,103,0),true ]]);
       let verticalY = String.fromCharCode(115,109,97,114,116,0);
         rewindz.set(verticalY, 3);
         rewindz = new Map([[`${rewindz.size}`, verticalY.length]]);
         rewindz = new Map([[`${rewindz.size}`, verticalY.length | rewindz.size]]);
         verticalY = `${rewindz.size | 1}`;
         verticalY = `${verticalY.length}`;
      for (let w = 0; w < 1; w++) {
         rewindz.set(`${verticalY}`, rewindz.size ^ 3);
      }
      mbbanneri += `${1 >> (Math.min(4, Math.abs(eventt.size)))}`;
   }
      pathn = 55 > iconclosewhiteJ.length;
   for (let l = 0; l < 2; l++) {
      filledu = stations9 == modulesK;
   }
   for (let l = 0; l < 2; l++) {
      libfileg = 13 == whistleO;
   }
   let libffmpegkitK = 7301729 <= icontransferclubf.size;
   do {
      icontransferclubf.set(`${stations9}`, 2);
      if (libffmpegkitK) {
         break;
      }
   } while (libffmpegkitK && ((eventt.size - icontransferclubf.size) > 2));
   while (1 > iconclosewhiteJ.length) {
      iconclosewhiteJ += "3";
      break;
   }
   for (let m = 0; m < 3; m++) {
       let tempnodataJ = String.fromCharCode(117,116,117,114,101,0);
       let calendar4 = String.fromCharCode(109,95,51,49,95,97,109,116,0);
       let twitterf = 3.0;
      if (3 >= calendar4.length) {
         calendar4 += `${parseInt(`${twitterf}`) + tempnodataJ.length}`;
      }
      let cleart = 6199617.0 >= twitterf;
      do {
         twitterf /= Math.max(2, 3);
         if (cleart) {
            break;
         }
      } while (cleart && (!tempnodataJ.endsWith(`${twitterf}`)));
      while ((calendar4.length >> (Math.min(Math.abs(5), 2))) <= 1) {
         twitterf /= Math.max(5, (calendar4 == String.fromCharCode(98,0) ? calendar4.length : tempnodataJ.length));
         break;
      }
      while (4 <= (calendar4.length - 2)) {
         calendar4 += `${calendar4.length | 3}`;
         break;
      }
         twitterf *= calendar4.length * 2;
       let yellowanimationliveu = String.fromCharCode(108,101,110,103,116,104,0);
       let rankF = String.fromCharCode(118,109,104,100,0);
         calendar4 += "3";
      let libreactperfloggerjniZ = String.fromCharCode(105,95,114,51,105,0) == tempnodataJ;
      do {
         tempnodataJ = `${yellowanimationliveu.length & 2}`;
         if (libreactperfloggerjniZ) {
            break;
         }
      } while (libreactperfloggerjniZ && (3 >= (5 / (Math.max(3, tempnodataJ.length))) && (5 - parseInt(`${twitterf}`)) >= 5));
          let expando: Map<any, any> = new Map([[String.fromCharCode(108,111,99,97,116,101,0),531], [String.fromCharCode(111,98,115,101,114,118,101,114,0),803], [String.fromCharCode(97,114,109,111,110,121,0),555]]);
          let c_positionn = 0.0;
          let completeQ = 0.0;
         tempnodataJ = `${calendar4.length / 1}`;
         expando.set(`${completeQ}`, parseInt(`${completeQ}`));
         c_positionn -= parseFloat(`${parseInt(`${c_positionn}`) % (Math.max(5, parseInt(`${completeQ}`)))}`);
      whistleO <<= Math.min(1, Math.abs(3));
   }
      eventt.set(iconclosewhiteJ, iconclosewhiteJ.length);
       let fieldl = String.fromCharCode(101,97,103,97,105,110,0);
      if (fieldl == fieldl) {
         fieldl = "3";
      }
          let style7 = String.fromCharCode(103,95,49,50,95,115,116,114,105,107,101,116,104,114,111,117,103,104,0);
          let iconuserb: Map<any, any> = new Map([[String.fromCharCode(108,97,118,117,0),92], [String.fromCharCode(99,108,97,105,109,115,95,55,95,55,49,0),95]]);
          let libfollyv: Array<any> = [String.fromCharCode(110,97,118,0), String.fromCharCode(117,115,117,98,0), String.fromCharCode(115,107,105,112,115,0)];
         fieldl = `${(String.fromCharCode(122,0) == fieldl ? iconuserb.size : fieldl.length)}`;
         style7 = `${2 - style7.length}`;
         iconuserb = new Map([[`${libfollyv.length}`, style7.length]]);
         libfollyv.push(style7.length & 1);
          let update_bjU = 5.0;
         fieldl += `${fieldl.length}`;
         update_bjU += parseFloat(`${parseInt(`${update_bjU}`)}`);
      stations9 = `${((filledu ? 1 : 1) + (libfileg ? 4 : 1))}`;
      setting9 = (modulesK.length + icontransferclubf.size) > 82;
   for (let e = 0; e < 2; e++) {
      phonev += "1";
   }
      libfileg = (!filledu ? !pathn : !filledu);
   if (phonev.length >= 4 && modulesK != String.fromCharCode(99,0)) {
       let statisticsinactivex = String.fromCharCode(99,111,110,116,114,111,108,108,101,100,0);
      if (statisticsinactivex.endsWith(statisticsinactivex)) {
         statisticsinactivex += `${(String.fromCharCode(50,0) == statisticsinactivex ? statisticsinactivex.length : statisticsinactivex.length)}`;
      }
         statisticsinactivex += `${statisticsinactivex.length & 3}`;
          let spech = String.fromCharCode(99,111,110,118,101,114,103,101,110,99,101,95,118,95,49,48,48,0);
         statisticsinactivex = `${3 * statisticsinactivex.length}`;
         spech = `${spech.length}`;
      modulesK += `${phonev.length}`;
   }
      stations9 = "3";
   let playlisto = String.fromCharCode(99,54,57,101,119,55,106,0) == modulesK;
   do {
      modulesK = `${((setting9 ? 2 : 5) - (libfileg ? 2 : 5))}`;
      if (playlisto) {
         break;
      }
   } while (playlisto && (4 <= stations9.length));

          dispatch(incrementAdultVideoWatchTime());
        }, 1000);
      }
      return () => clearInterval(interval);
    }, [adultMode, isVip]),
  );

  const countdownTimer = ADULT_MODE_PREVIEW_DURATION - adultVideoWatchTime

  if (adultMode && !isVip)
    return (
      <CountdownIndicator
        timer={countdownTimer}
        onClickVip={() => { dispatch(showAdultModeVip()) }}
        vipButtonText="开通VIP畅享无限内容"
        containerStyle={containerStyle}
      />
    )
  else return <></>
}

export default memo(AdultModeCountdownIndicator);