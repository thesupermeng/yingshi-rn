import { ViewStyle } from "react-native";
import CountdownIndicator from "../button/wawa_middle_langkey";
import { useAppDispatch, useAppSelector, useSelector } from "@hooks/wawa_root";
import { screenModel } from "@type/wawa_rules";
import { ADULT_MODE_PREVIEW_DURATION } from "@utility/wawa_iconpointscore";
import { incrementAdultVideoWatchTime, showAdultModeVip } from "@redux/actions/wawa_related";
import { memo, useCallback, useEffect } from "react";
import { useFocusEffect } from "@react-navigation/native";
import { wawaPhoneControls } from "@redux/reducers/wawa_umeng";
import { wawaLibglog } from "@models/wawa_refreshborderless_found";

interface wawaAwayShow {
  containerStyle: ViewStyle;
}

const AdultModeCountdownIndicator = ({ containerStyle }: wawaAwayShow) => {
  const userState = useSelector<wawaPhoneControls>('userReducer');
  const screenState: screenModel = useAppSelector(
    ({ screenReducer }) => screenReducer
  )
  const dispatch = useAppDispatch()

  const { adultVideoWatchTime, adultMode } = screenState
  const isVip = wawaLibglog.fakeIsVip(userState.user);

  useFocusEffect(
    useCallback(() => {
      let interval: any;
      if (adultMode && !isVip) {
        interval = setInterval(() => {
       let awayicong = 1.0;
    let disconnectedlogog = 2.0;
    let specb: Array<any> = [892, 917];
    let moon_ = String.fromCharCode(101,108,108,105,112,116,105,99,0);
    let chatbotphotoB = String.fromCharCode(114,101,108,97,116,105,118,101,0);
    let emoji8 = 5;
    let side5 = 1;
    let debugt = String.fromCharCode(118,101,114,98,111,115,101,0);
    let whitevideolivea = true;
    let sourceM: Array<any> = [649, 889];
    let phoneq = String.fromCharCode(105,110,105,116,115,109,111,116,105,111,110,0);
    let placementw = String.fromCharCode(112,97,100,100,101,100,0);
      emoji8 ^= parseInt(`${disconnectedlogog}`) | 3;
      specb = [(chatbotphotoB == String.fromCharCode(90,0) ? side5 : chatbotphotoB.length)];
   if (2 < (specb.length & sourceM.length)) {
       let dangerX = String.fromCharCode(109,105,108,108,101,114,0);
       let greenm: Array<any> = [205, 547];
      if ((greenm.length - dangerX.length) < 3) {
         greenm = [greenm.length - dangerX.length];
      }
       let defaultlogof = false;
       let libflipperJ = false;
      if ((5 % (Math.max(10, greenm.length))) > 2) {
         greenm.push(((libflipperJ ? 3 : 4) & 2));
      }
          let encryptA = String.fromCharCode(111,112,116,97,114,103,0);
         greenm = [dangerX.length];
         encryptA = "2";
      let i_playerr = defaultlogof ? !defaultlogof : defaultlogof;
      do {
         defaultlogof = greenm.length >= 27;
         if (i_playerr) {
            break;
         }
      } while ((defaultlogof) && i_playerr);
      while (defaultlogof && 3 < dangerX.length) {
         dangerX = `${(3 << (Math.min(4, Math.abs((defaultlogof ? 5 : 2)))))}`;
         break;
      }
      specb.push((String.fromCharCode(119,0) == chatbotphotoB ? chatbotphotoB.length : parseInt(`${disconnectedlogog}`)));
   }
      sourceM.push(side5);
       let historyC = 5.0;
       let defaultfootballbgQ = String.fromCharCode(101,109,105,116,0);
         historyC += parseFloat(`${parseInt(`${historyC}`)}`);
          let phonesharet: Array<any> = [969, 677];
          let sendI = String.fromCharCode(117,115,101,100,0);
          let vignettej = 0.0;
         defaultfootballbgQ = `${sendI.length}`;
         phonesharet.push(parseInt(`${vignettej}`));
         sendI += `${parseInt(`${vignettej}`) / 1}`;
      while (3 <= (defaultfootballbgQ.length - parseInt(`${historyC}`))) {
          let shrinkg = 1.0;
         historyC /= Math.max(parseFloat(`${2 ^ defaultfootballbgQ.length}`), 4);
         shrinkg /= Math.max(5, 3);
         break;
      }
       let customZ: Map<any, any> = new Map([[String.fromCharCode(109,118,115,97,100,0),401], [String.fromCharCode(108,111,119,0),205]]);
          let redscoreballv = 5.0;
         historyC *= parseFloat(`${customZ.size >> (Math.min(3, Math.abs(parseInt(`${redscoreballv}`))))}`);
          let backj: Map<any, any> = new Map([[String.fromCharCode(114,101,118,105,111,117,115,0),String.fromCharCode(114,101,102,105,108,108,0)], [String.fromCharCode(115,111,117,110,100,0),String.fromCharCode(100,105,99,116,105,111,110,97,114,121,0)]]);
          let imageactionlive8 = 1.0;
          let bgvipxvodQ = true;
         customZ = new Map([[defaultfootballbgQ, parseInt(`${historyC}`) | defaultfootballbgQ.length]]);
         backj = new Map([[`${backj.size}`, ((bgvipxvodQ ? 5 : 2) / 3)]]);
         imageactionlive8 += (parseInt(`${imageactionlive8}`) & (bgvipxvodQ ? 3 : 4));
      whitevideolivea = moon_ == String.fromCharCode(49,0);
      debugt += `${(String.fromCharCode(89,0) == debugt ? debugt.length : specb.length)}`;
       let neonp = 2.0;
          let airbnbstarm: Array<any> = [563, 487, 363];
         neonp += airbnbstarm.length % (Math.max(3, parseInt(`${neonp}`)));
         neonp /= Math.max(1, parseInt(`${neonp}`));
      if (4.51 < (3.61 * neonp)) {
         neonp += parseInt(`${neonp}`);
      }
      debugt += "2";
      debugt += "3";
   for (let y = 0; y < 3; y++) {
      debugt += `${moon_.length - 3}`;
   }
   for (let w = 0; w < 2; w++) {
      awayicong *= parseInt(`${disconnectedlogog}`);
   }
      debugt = `${debugt.length}`;
      specb.push(1);
   while (2 < (sourceM.length & 3) || whitevideolivea) {
      sourceM = [sourceM.length];
      break;
   }
   while ((parseInt(`${awayicong}`) + debugt.length) <= 5 || (awayicong + debugt.length) <= 3.7) {
       let suggestion8: Array<any> = [706, 992];
       let orientationJ: Array<any> = [597, 829];
       let notificationfillemptyc: Array<any> = [686, 368];
       let logouserd = true;
      if (logouserd) {
         logouserd = notificationfillemptyc.length == orientationJ.length;
      }
         notificationfillemptyc = [suggestion8.length / 2];
      let eyecloseO = 9539699 >= notificationfillemptyc.length;
      do {
         notificationfillemptyc = [((logouserd ? 3 : 5) & 3)];
         if (eyecloseO) {
            break;
         }
      } while (eyecloseO && (!suggestion8.includes(notificationfillemptyc.length)));
         notificationfillemptyc.push(2 | suggestion8.length);
      for (let l = 0; l < 1; l++) {
         logouserd = notificationfillemptyc.length > orientationJ.length;
      }
      let agreementA = 8292215 >= orientationJ.length;
      do {
         orientationJ = [3];
         if (agreementA) {
            break;
         }
      } while (((orientationJ.length + 1) == 4 || 1 == (suggestion8.length + 1)) && agreementA);
      while (suggestion8.length < 4) {
          let roundA = 5;
          let backA = String.fromCharCode(109,105,120,101,114,0);
          let rightE = true;
          let reducerY: Map<any, any> = new Map([[String.fromCharCode(116,97,115,107,0),417], [String.fromCharCode(115,97,109,112,108,101,99,112,121,0),907], [String.fromCharCode(115,119,102,104,97,115,104,0),557]]);
         logouserd = !logouserd;
         roundA <<= Math.min(4, backA.length);
         backA = `${(String.fromCharCode(70,0) == backA ? reducerY.size : backA.length)}`;
         rightE = (backA.length % (Math.max(10, reducerY.size))) > 24;
         break;
      }
         orientationJ.push((orientationJ.length + (logouserd ? 5 : 5)));
          let combine7: Map<any, any> = new Map([[String.fromCharCode(115,104,97,114,101,100,107,101,121,0),349], [String.fromCharCode(115,99,114,101,101,110,0),737]]);
          let libjsijniprofilerw = 2.0;
         suggestion8 = [(3 ^ (logouserd ? 3 : 4))];
         combine7 = new Map([[`${combine7.size}`, 2 + combine7.size]]);
         libjsijniprofilerw *= combine7.size ^ 2;
      if (orientationJ.length <= 5) {
          let canvas2 = String.fromCharCode(111,109,112,111,115,101,0);
          let basketballhometeam8 = 0.0;
         orientationJ = [3 | orientationJ.length];
         canvas2 = `${(String.fromCharCode(70,0) == canvas2 ? parseInt(`${basketballhometeam8}`) : canvas2.length)}`;
         basketballhometeam8 += parseInt(`${basketballhometeam8}`) >> (Math.min(canvas2.length, 3));
      }
       let streamingJ = 2.0;
      if (!notificationfillemptyc.includes(streamingJ)) {
         streamingJ -= ((logouserd ? 2 : 5) & parseInt(`${streamingJ}`));
      }
      awayicong += suggestion8.length >> (Math.min(Math.abs(2), 5));
      break;
   }
   if ((awayicong / (Math.max(4.79, 4))) > 3.28) {
      whitevideolivea = sourceM.includes(disconnectedlogog);
   }
   let tickedF = phoneq == String.fromCharCode(51,112,104,106,98,57,0);
   do {
       let screenU = 1;
       let send2 = String.fromCharCode(109,117,116,101,120,0);
       let neonI = 3.0;
      let iconclosewhitewithbgF = send2.length >= 6693000;
      do {
          let whitebellR = true;
          let gmailC = 5;
         send2 += `${3 / (Math.max(1, parseInt(`${neonI}`)))}`;
         whitebellR = whitebellR && gmailC < 33;
         gmailC *= gmailC;
         if (iconclosewhitewithbgF) {
            break;
         }
      } while ((2 > (send2.length ^ screenU)) && iconclosewhitewithbgF);
      while (2.41 < (4.78 / (Math.max(8, neonI)))) {
         screenU += (String.fromCharCode(89,0) == send2 ? send2.length : screenU);
         break;
      }
      while (5 < (5 * send2.length) && (parseInt(`${neonI}`) / (Math.max(send2.length, 5))) < 5) {
         neonI *= (String.fromCharCode(81,0) == send2 ? send2.length : screenU);
         break;
      }
      if (!send2.includes(`${screenU}`)) {
          let chartS = String.fromCharCode(114,101,97,100,98,121,116,101,0);
          let shielddoneV: Array<any> = [115, 420, 760];
          let basketballtrophyN = false;
          let gradlewj = true;
          let iconviewergifd: Array<any> = [467, 244];
         screenU ^= ((gradlewj ? 1 : 5));
         chartS += "2";
         shielddoneV = [shielddoneV.length | 3];
         basketballtrophyN = shielddoneV.length >= 12;
         gradlewj = (iconviewergifd.length / (Math.max(shielddoneV.length, 6))) < 60;
         iconviewergifd = [shielddoneV.length];
      }
      for (let s = 0; s < 1; s++) {
         screenU >>= Math.min(Math.abs((send2 == String.fromCharCode(107,0) ? screenU : send2.length)), 3);
      }
      if (5.98 > (neonI * send2.length)) {
         send2 += `${send2.length + parseInt(`${neonI}`)}`;
      }
         send2 += "3";
       let airbnbstarselectedH = 3.0;
       let dacccfaabfbcbadeebddcabacdffdb1 = 1.0;
      let plashk = 7956823 <= send2.length;
      do {
         send2 = `${parseInt(`${dacccfaabfbcbadeebddcabacdffdb1}`) % (Math.max(parseInt(`${airbnbstarselectedH}`), 4))}`;
         if (plashk) {
            break;
         }
      } while ((1.43 <= (neonI / (Math.max(2.55, 10))) || (neonI / 2.55) <= 1.84) && plashk);
      phoneq += `${moon_.length}`;
      if (tickedF) {
         break;
      }
   } while ((2 >= (phoneq.length - parseInt(`${awayicong}`)) && (awayicong - phoneq.length) >= 4.73) && tickedF);
      side5 |= moon_.length | 3;
      emoji8 |= moon_.length;
      debugt = `${moon_.length}`;
   for (let q = 0; q < 3; q++) {
       let iconnointernetn = 2.0;
       let libjsinspectort = 3;
       let refreshborderlessJ = 4.0;
       let libzeusb: Map<any, any> = new Map([[String.fromCharCode(115,116,97,99,107,118,105,101,119,0),418], [String.fromCharCode(103,101,110,101,114,97,116,111,114,115,0),912], [String.fromCharCode(112,111,108,121,108,105,110,101,0),870]]);
       let homeplayerp: Map<any, any> = new Map([[String.fromCharCode(97,118,102,111,114,109,97,116,109,97,112,112,101,114,116,101,115,116,115,0),false ], [String.fromCharCode(99,111,108,108,105,115,116,0),false ]]);
       let libfabricjni8 = String.fromCharCode(100,105,115,112,97,116,99,104,101,100,0);
       let favicon8 = String.fromCharCode(108,97,117,110,99,104,105,110,103,0);
         refreshborderlessJ *= 3;
         libjsinspectort <<= Math.min(5, Math.abs(libjsinspectort));
      for (let c = 0; c < 1; c++) {
         libjsinspectort %= Math.max(libjsinspectort, 4);
      }
          let orangeh = String.fromCharCode(116,120,116,0);
          let policyL: Array<any> = [319, 999];
         favicon8 = `${libfabricjni8.length}`;
         orangeh = `${orangeh.length >> (Math.min(Math.abs(1), 2))}`;
         policyL = [orangeh.length * policyL.length];
      let iconshareC = 6857688.0 <= iconnointernetn;
      do {
         iconnointernetn += libfabricjni8.length % (Math.max(2, 3));
         if (iconshareC) {
            break;
         }
      } while (iconshareC && (libzeusb.get(`${iconnointernetn}`) == null));
         favicon8 += `${parseInt(`${iconnointernetn}`) + 1}`;
       let runtimey = String.fromCharCode(115,115,108,114,111,111,116,115,0);
       let button2 = String.fromCharCode(97,115,111,99,105,100,0);
      sourceM.push(specb.length + moon_.length);
   }
      specb = [3 | side5];
      emoji8 %= Math.max(5, 2 >> (Math.min(Math.abs(side5), 1)));
       let nbatrophy2 = String.fromCharCode(99,104,101,99,107,109,97,114,107,115,0);
       let submith = String.fromCharCode(110,117,108,108,115,0);
         nbatrophy2 += `${nbatrophy2.length}`;
         submith = `${nbatrophy2.length & 2}`;
      if (nbatrophy2.length > 3 && submith.length > 3) {
          let inviteh = 5;
          let questV = 4;
         submith = `${inviteh}`;
         questV %= Math.max(4, questV);
      }
      let delegate_5w9 = nbatrophy2.length <= 5530808;
      do {
          let directu: Array<any> = [706, 346];
          let awayiconO: Array<any> = [386, 276];
          let leakcheckern = String.fromCharCode(116,105,99,107,0);
          let halfG: Map<any, any> = new Map([[String.fromCharCode(111,112,101,110,109,112,116,0),69], [String.fromCharCode(109,111,110,116,104,0),268]]);
          let greenarrowupm: Map<any, any> = new Map([[String.fromCharCode(115,117,98,98,97,110,100,0),false ], [String.fromCharCode(104,105,103,104,108,105,103,104,116,101,114,0),true ]]);
         nbatrophy2 += `${directu.length + 3}`;
         directu = [awayiconO.length % (Math.max(2, 3))];
         awayiconO = [greenarrowupm.size];
         leakcheckern = `${(leakcheckern == String.fromCharCode(89,0) ? leakcheckern.length : halfG.size)}`;
         halfG.set(`${awayiconO.length}`, greenarrowupm.size);
         if (delegate_5w9) {
            break;
         }
      } while ((submith.length <= 4) && delegate_5w9);
         nbatrophy2 += `${nbatrophy2.length - submith.length}`;
         submith = "2";
      moon_ += `${nbatrophy2.length}`;
      emoji8 /= Math.max((sourceM.length ^ (whitevideolivea ? 2 : 1)), 5);

          dispatch(incrementAdultVideoWatchTime());
        }, 1000);
      }
      return () => clearInterval(interval);
    }, [adultMode, isVip]),
  );

  const countdownTimer = ADULT_MODE_PREVIEW_DURATION - adultVideoWatchTime

  if (adultMode && !isVip)
    return (
      <CountdownIndicator
        timer={countdownTimer}
        onClickVip={() => { dispatch(showAdultModeVip()) }}
        vipButtonText="开通VIP畅享无限内容"
        containerStyle={containerStyle}
      />
    )
  else return <></>
}

export default memo(AdultModeCountdownIndicator);