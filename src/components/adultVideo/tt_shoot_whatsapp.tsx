import { ViewStyle } from "react-native";
import CountdownIndicator from "../button/tt_next_away";
import { useAppDispatch, useAppSelector, useSelector } from "@hooks/tt_spec_download";
import { screenModel } from "@type/tt_twitter_data";
import { ADULT_MODE_PREVIEW_DURATION } from "@utility/tt_trophy_cross";
import { incrementAdultVideoWatchTime, showAdultModeVip } from "@redux/actions/tt_copy_heji";
import { memo, useCallback, useEffect } from "react";
import { useFocusEffect } from "@react-navigation/native";
import { ttGoal } from "@redux/reducers/tt_selected";
import { ttFast } from "@models/tt_stations_right";

interface ttSmall {
  containerStyle: ViewStyle;
}

const AdultModeCountdownIndicator = ({ containerStyle }: ttSmall) => {
  const userState = useSelector<ttGoal>('userReducer');
  const screenState: screenModel = useAppSelector(
    ({ screenReducer }) => screenReducer
  )
  const dispatch = useAppDispatch()

  const { adultVideoWatchTime, adultMode } = screenState
  const isVip = ttFast.isVip(userState.user);

  useFocusEffect(
    useCallback(() => {
      let interval: any;
      if (adultMode && !isVip) {
        interval = setInterval(() => {
       let customC = 0.0;
    let configT = 3.0;
    let searchp = 2.0;
    let modulem = 5.0;
    let downloaded6 = String.fromCharCode(99,105,112,104,101,114,98,121,110,97,109,101,95,114,95,52,0);
    let product8: Map<any, any> = new Map([[String.fromCharCode(110,117,108,108,105,102,95,108,95,56,0),String.fromCharCode(99,101,114,116,105,102,105,99,97,116,101,115,95,53,95,50,50,0)], [String.fromCharCode(100,95,57,53,95,105,110,116,102,105,0),String.fromCharCode(100,117,112,99,108,95,116,95,50,50,0)], [String.fromCharCode(112,95,52,52,95,117,112,103,114,97,100,101,0),String.fromCharCode(116,95,51,57,95,104,108,105,110,101,0)]]);
    let sliderh = 2.0;
    let megaphonef = String.fromCharCode(119,95,53,54,95,116,111,107,101,110,116,120,0);
    let middleE = String.fromCharCode(121,95,57,54,95,115,111,102,97,0);
    let unread9 = 0.0;
    let detailse = String.fromCharCode(104,95,49,50,95,115,101,99,115,0);
    let halfZ = String.fromCharCode(110,109,109,105,110,116,114,105,110,95,50,95,57,55,0);
    let alertY = String.fromCharCode(112,114,101,95,55,95,54,56,0);
    let privilegeZ = false;
      searchp /= Math.max(parseFloat(`${2 * parseInt(`${modulem}`)}`), 5);
   for (let d = 0; d < 1; d++) {
      searchp += parseFloat(`${product8.size}`);
   }
      sliderh -= parseInt(`${searchp}`) / 3;
       let nalytics4: Array<any> = [396, 517];
       let favoritec = 2;
         favoritec >>= Math.min(Math.abs(favoritec), 2);
         nalytics4.push(favoritec | 3);
          let relatedC = String.fromCharCode(101,95,51,50,95,100,101,118,101,108,111,112,109,101,110,116,0);
          let hongkongP = String.fromCharCode(98,97,114,114,105,101,114,95,105,95,49,48,48,0);
          let mimoL = String.fromCharCode(113,112,102,105,108,101,95,119,95,51,50,0);
         nalytics4.push(nalytics4.length & relatedC.length);
         relatedC = `${mimoL.length - hongkongP.length}`;
         hongkongP += `${(mimoL == String.fromCharCode(98,0) ? mimoL.length : hongkongP.length)}`;
         nalytics4.push(nalytics4.length);
      for (let y = 0; y < 2; y++) {
          let otherx = true;
         nalytics4.push((nalytics4.length * (otherx ? 3 : 2)));
      }
      while ((favoritec << (Math.min(nalytics4.length, 1))) > 4 && (4 << (Math.min(3, Math.abs(favoritec)))) > 5) {
          let favorites: Array<any> = [647, 307];
         favoritec >>= Math.min(Math.abs(1 | nalytics4.length), 2);
         favorites = [1];
         break;
      }
      customC /= Math.max(parseFloat(`${parseInt(`${customC}`) & 3}`), 4);
      configT += (megaphonef == String.fromCharCode(52,0) ? parseInt(`${customC}`) : megaphonef.length);
      sliderh += downloaded6.length;
      searchp /= Math.max(parseFloat(`${megaphonef.length - 1}`), 3);
   if (sliderh == 4.1) {
      customC *= (parseFloat(`${middleE == String.fromCharCode(116,0) ? downloaded6.length : middleE.length}`));
   }
   let t_playerZ = megaphonef.length <= 9032356;
   do {
      megaphonef += "1";
      if (t_playerZ) {
         break;
      }
   } while (t_playerZ && ((product8.size % 4) < 4));
   for (let m = 0; m < 3; m++) {
       let champion3: Map<any, any> = new Map([[String.fromCharCode(104,97,112,113,97,95,107,95,53,54,0),621], [String.fromCharCode(115,111,100,101,97,108,108,111,99,95,99,95,52,55,0),303]]);
       let humidityk = 3.0;
       let holder9 = 0.0;
       let fulln = String.fromCharCode(108,95,54,49,95,118,100,115,111,0);
       let plusL = String.fromCharCode(116,116,97,101,110,99,100,115,112,95,55,95,54,51,0);
      while (humidityk > 4.17) {
         holder9 -= plusL.length - parseInt(`${holder9}`);
         break;
      }
      for (let n = 0; n < 3; n++) {
          let headerI = false;
          let overlaya: Map<any, any> = new Map([[String.fromCharCode(102,95,53,51,95,108,111,111,112,105,110,103,0),381], [String.fromCharCode(118,101,114,98,97,116,105,109,95,52,95,49,55,0),352], [String.fromCharCode(98,97,116,99,104,101,115,95,119,95,56,49,0),325]]);
          let handlern: Map<any, any> = new Map([[String.fromCharCode(118,115,99,97,108,101,95,53,95,56,50,0),String.fromCharCode(116,95,51,53,95,114,101,116,0)], [String.fromCharCode(115,109,106,112,101,103,95,100,95,56,0),String.fromCharCode(102,95,51,57,95,115,111,117,114,99,101,115,0)]]);
          let submitv = false;
          let mbbanneru = String.fromCharCode(98,95,57,50,95,100,113,99,111,101,102,102,0);
         fulln += `${handlern.size}`;
         headerI = mbbanneru.includes(`${submitv}`);
         overlaya.set(`${headerI}`, overlaya.size);
         handlern = new Map([[`${overlaya.size}`, (1 - (submitv ? 1 : 5))]]);
         mbbanneru = `${((submitv ? 4 : 2) ^ 2)}`;
      }
         holder9 /= Math.max(parseInt(`${humidityk}`), 5);
      let long_bnC = plusL.length >= 7036828;
      do {
         plusL = `${fulln.length}`;
         if (long_bnC) {
            break;
         }
      } while ((!plusL.includes(`${champion3.size}`)) && long_bnC);
         fulln = "1";
       let mbnative_ = 4;
          let rankE = String.fromCharCode(105,95,52,49,95,109,117,108,116,0);
          let sourceP = 4.0;
         fulln += `${champion3.size}`;
         rankE += `${(String.fromCharCode(52,0) == rankE ? rankE.length : parseInt(`${sourceP}`))}`;
         sourceP *= parseFloat(`${2 ^ parseInt(`${sourceP}`)}`);
      while (1 > (5 % (Math.max(1, mbnative_)))) {
          let rewinds = String.fromCharCode(105,115,115,117,105,110,103,95,115,95,50,56,0);
          let switch_b4q: Array<any> = [String.fromCharCode(115,95,50,51,95,116,109,105,120,0), String.fromCharCode(119,95,52,57,95,97,116,114,97,99,97,108,0)];
         mbnative_ &= rewinds.length;
         rewinds = `${switch_b4q.length | switch_b4q.length}`;
         break;
      }
      if ((plusL.length % 1) > 5 || 4.28 > (1.90 + humidityk)) {
         plusL += `${(fulln == String.fromCharCode(89,0) ? parseInt(`${humidityk}`) : fulln.length)}`;
      }
          let closeN = 2;
          let refreshA: Map<any, any> = new Map([[String.fromCharCode(110,95,50,56,95,112,114,111,99,101,115,115,105,110,103,0),false ], [String.fromCharCode(121,95,51,56,95,97,116,114,97,99,0),false ], [String.fromCharCode(119,101,98,115,111,99,107,101,116,95,52,95,56,49,0),true ]]);
          let injuryY = String.fromCharCode(110,95,50,51,95,97,108,108,111,119,0);
         fulln += `${closeN}`;
         closeN += refreshA.size;
         refreshA = new Map([[`${refreshA.size}`, injuryY.length + refreshA.size]]);
         injuryY += "1";
      for (let r = 0; r < 3; r++) {
         mbnative_ += plusL.length;
      }
      if (Array.from(champion3.keys()).includes(`${mbnative_}`)) {
          let episodes9 = false;
         mbnative_ &= (plusL == String.fromCharCode(53,0) ? mbnative_ : plusL.length);
         episodes9 = (episodes9 ? episodes9 : episodes9);
      }
      for (let h = 0; h < 3; h++) {
         fulln += "1";
      }
         fulln += `${3 - parseInt(`${holder9}`)}`;
         mbnative_ &= plusL.length;
      customC -= parseFloat(`${parseInt(`${humidityk}`)}`);
   }
      customC *= parseFloat(`${megaphonef.length}`);
      middleE = `${1 >> (Math.min(3, Math.abs(parseInt(`${configT}`))))}`;
      downloaded6 += `${(String.fromCharCode(107,0) == downloaded6 ? downloaded6.length : middleE.length)}`;
   if (5.76 > (5.52 + sliderh)) {
       let launch2 = String.fromCharCode(108,95,54,57,95,120,107,101,101,112,0);
       let mutedi = 3;
       let unselectedS = 0;
      let mappingc = 6128787 <= unselectedS;
      do {
         unselectedS += mutedi * launch2.length;
         if (mappingc) {
            break;
         }
      } while ((unselectedS <= mutedi) && mappingc);
      for (let p = 0; p < 1; p++) {
         mutedi <<= Math.min(4, Math.abs(mutedi | 2));
      }
         mutedi |= mutedi + unselectedS;
      if (launch2.endsWith(`${mutedi}`)) {
         mutedi -= 1 << (Math.min(1, Math.abs(mutedi)));
      }
       let materialf = true;
       let settings0 = true;
       let danger6 = String.fromCharCode(109,97,110,97,103,101,114,95,98,95,57,53,0);
       let miniR = String.fromCharCode(116,95,57,57,95,114,101,115,112,101,99,116,105,110,103,0);
         launch2 += "2";
      while (!settings0) {
          let constantsI = false;
          let feedbacku = String.fromCharCode(110,95,55,56,95,97,109,112,108,105,116,117,100,101,0);
          let search3 = String.fromCharCode(109,105,100,101,113,117,97,108,105,122,101,114,95,118,95,57,54,0);
         settings0 = search3 == feedbacku;
         constantsI = (constantsI ? !constantsI : constantsI);
         feedbacku = `${((constantsI ? 2 : 4) >> (Math.min(1, Math.abs(2))))}`;
         break;
      }
          let updatesI = 1;
         materialf = danger6.includes(`${settings0}`);
         updatesI <<= Math.min(Math.abs(updatesI + updatesI), 3);
      megaphonef += "2";
   }
      configT -= downloaded6.length >> (Math.min(Math.abs(2), 1));
   for (let z = 0; z < 2; z++) {
       let photoK = 4.0;
         photoK -= parseInt(`${photoK}`) % 3;
          let styleQ = String.fromCharCode(116,95,50,53,95,115,102,114,97,109,101,0);
          let mbnativeadvancedg = false;
          let sportsq: Map<any, any> = new Map([[String.fromCharCode(113,95,51,55,95,100,105,97,103,111,110,97,108,0),String.fromCharCode(101,95,54,54,95,109,97,114,107,117,112,0)], [String.fromCharCode(120,95,49,52,95,101,121,101,100,114,111,112,112,101,114,0),String.fromCharCode(118,95,53,54,95,112,97,99,107,101,116,104,101,97,100,101,114,0)], [String.fromCharCode(118,101,114,116,115,95,110,95,50,56,0),String.fromCharCode(104,105,103,104,108,105,103,104,116,101,100,95,105,95,55,52,0)]]);
         photoK *= 1 + styleQ.length;
         styleQ += `${((mbnativeadvancedg ? 4 : 3) << (Math.min(Math.abs(sportsq.size), 3)))}`;
         mbnativeadvancedg = sportsq.size < 1;
      let watch_ = 5700672.0 <= photoK;
      do {
         photoK += parseInt(`${photoK}`);
         if (watch_) {
            break;
         }
      } while ((2.23 > photoK) && watch_);
      megaphonef = `${2 + parseInt(`${sliderh}`)}`;
   }
      middleE = `${2 + parseInt(`${customC}`)}`;

          dispatch(incrementAdultVideoWatchTime());
        }, 1000);
      }
      return () => clearInterval(interval);
    }, [adultMode, isVip]),
  );

  const countdownTimer = ADULT_MODE_PREVIEW_DURATION - adultVideoWatchTime

  if (adultMode && !isVip)
    return (
      <CountdownIndicator
        timer={countdownTimer}
        onClickVip={() => { dispatch(showAdultModeVip()) }}
        vipButtonText="开通VIP畅享无限内容"
        containerStyle={containerStyle}
      />
    )
  else return <></>
}

export default memo(AdultModeCountdownIndicator);