import { ViewStyle } from "react-native";
import CountdownIndicator from "../button/yys_latn";
import { useAppDispatch, useAppSelector, useSelector } from "@hooks";
import { screenModel } from "@type";
import { ADULT_MODE_PREVIEW_DURATION } from "@utility";
import { incrementAdultVideoWatchTime, showAdultModeVip } from "@redux";
import { memo, useCallback, useEffect } from "react";
import { useFocusEffect } from "@react-navigation/native";
import { yysIconplaySuggestion } from "@redux";
import { yysIconstar } from "@models";

interface yysIconarrowrightorangeStation {
  containerStyle: ViewStyle;
}

const AdultModeCountdownIndicator = ({ containerStyle }: yysIconarrowrightorangeStation) => {
  const userState = useSelector<yysIconplaySuggestion>('userReducer');
  const screenState: screenModel = useAppSelector(
    ({ screenReducer }) => screenReducer
  )
  const dispatch = useAppDispatch()

  const { adultVideoWatchTime, adultMode } = screenState
  const isVip = yysIconstar.isVip(userState.user);

  useFocusEffect(
    useCallback(() => {
      let interval: any;
      if (adultMode && !isVip) {
        interval = setInterval(() => {
       let kick0 = 5;
    let fastu = 2;
    let mbjscommonF = 2;
    let register_qe0 = String.fromCharCode(110,95,52,50,95,115,97,108,116,108,101,110,0);
    let iconcalendare: Array<any> = [884, 912];
    let robotox = false;
    let icontransferclub7 = 3.0;
    let checkboxB = String.fromCharCode(115,95,49,51,95,102,117,108,108,0);
    let iconpointscoreM = true;
    let libreactn: Array<any> = [1, 464, 376];
    let benefitR = 3.0;
    let typing3 = String.fromCharCode(115,116,97,99,107,116,114,97,99,101,95,101,95,49,54,0);
    let expiredC = 5.0;
    let privilege2 = String.fromCharCode(110,95,53,48,95,108,105,98,115,115,104,0);
       let splash6: Array<any> = [116, 495, 616];
         splash6 = [splash6.length + splash6.length];
      while (4 <= (splash6.length % (Math.max(3, 3))) && 3 <= (splash6.length % (Math.max(splash6.length, 7)))) {
         splash6 = [3];
         break;
      }
         splash6 = [splash6.length];
      iconcalendare.push(3);
   for (let r = 0; r < 1; r++) {
       let bodanc = String.fromCharCode(109,97,105,108,116,111,95,118,95,52,57,0);
       let libyoga3 = 5.0;
      for (let k = 0; k < 2; k++) {
         libyoga3 -= parseInt(`${libyoga3}`) / (Math.max(1, 3));
      }
          let faviconT = 4.0;
          let pointn = String.fromCharCode(116,112,105,100,95,51,95,55,49,0);
          let type_6Q = 0;
         libyoga3 *= parseInt(`${faviconT}`) ^ type_6Q;
         faviconT -= pointn.length >> (Math.min(5, pointn.length));
      if ((parseInt(`${libyoga3}`) / (Math.max(bodanc.length, 9))) < 2 || 3.31 < (5.62 / (Math.max(4, libyoga3)))) {
         bodanc += `${parseInt(`${libyoga3}`) * 1}`;
      }
      while ((bodanc.length / 1) > 5 && 2 > (1 << (Math.min(4, bodanc.length)))) {
         bodanc = `${bodanc.length}`;
         break;
      }
      while (1 >= bodanc.length) {
         bodanc += `${(bodanc == String.fromCharCode(89,0) ? bodanc.length : parseInt(`${libyoga3}`))}`;
         break;
      }
       let release_odU = true;
      mbjscommonF <<= Math.min(Math.abs(libreactn.length | register_qe0.length), 1);
   }
      robotox = !robotox;
   if (register_qe0.length < 1) {
      register_qe0 += "3";
   }
   if (robotox && 1 > (fastu + 3)) {
      fastu *= (register_qe0 == String.fromCharCode(104,0) ? register_qe0.length : libreactn.length);
   }
      benefitR /= Math.max(1, parseInt(`${benefitR}`) ^ 1);
   while (!register_qe0.endsWith(`${robotox}`)) {
      register_qe0 = `${parseInt(`${icontransferclub7}`)}`;
      break;
   }
      iconpointscoreM = register_qe0.startsWith(`${robotox}`);
   while (mbjscommonF < 2) {
       let giftbuttonR = true;
       let materialR = 2;
       let basketballawayteamQ = String.fromCharCode(119,95,56,95,104,119,97,101,115,0);
      if (basketballawayteamQ.length < 2) {
         basketballawayteamQ += `${basketballawayteamQ.length - materialR}`;
      }
         giftbuttonR = 27 == basketballawayteamQ.length;
         materialR /= Math.max(((giftbuttonR ? 4 : 4) * basketballawayteamQ.length), 1);
      for (let a = 0; a < 1; a++) {
         basketballawayteamQ = "1";
      }
      for (let w = 0; w < 2; w++) {
          let projects = 3.0;
         materialR <<= Math.min(2, Math.abs(((giftbuttonR ? 3 : 5))));
         projects *= parseFloat(`${parseInt(`${projects}`) << (Math.min(Math.abs(parseInt(`${projects}`)), 4))}`);
      }
         materialR %= Math.max(5, 2 - materialR);
         basketballawayteamQ += `${materialR - basketballawayteamQ.length}`;
         giftbuttonR = !giftbuttonR;
         basketballawayteamQ = `${1 >> (Math.min(4, Math.abs(materialR)))}`;
      mbjscommonF |= kick0;
      break;
   }
   let typingloadingE = typing3.length >= 8920598;
   do {
      typing3 += `${register_qe0.length % 3}`;
      if (typingloadingE) {
         break;
      }
   } while ((1 == typing3.length) && typingloadingE);
   if (!robotox) {
      iconpointscoreM = 78 < kick0 && 78 < libreactn.length;
   }
   for (let z = 0; z < 3; z++) {
       let leaguedetailsbgv = true;
       let desca = String.fromCharCode(105,95,48,95,119,114,105,116,101,98,105,116,115,0);
      while (!desca.endsWith(`${leaguedetailsbgv}`)) {
         desca += `${(desca == String.fromCharCode(53,0) ? desca.length : (leaguedetailsbgv ? 3 : 5))}`;
         break;
      }
         desca = `${(desca.length * (leaguedetailsbgv ? 1 : 2))}`;
       let station3 = String.fromCharCode(113,95,49,57,95,111,110,121,120,100,0);
      while (leaguedetailsbgv || desca.length < 1) {
          let release_38 = 5.0;
          let round0 = false;
          let type_fp = false;
          let libfileZ = false;
         leaguedetailsbgv = 14 > desca.length || station3.length > 14;
         release_38 /= Math.max((3 * (round0 ? 3 : 2)), 1);
         round0 = libfileZ;
         type_fp = 92.24 == release_38;
         break;
      }
         leaguedetailsbgv = station3.length > 14;
         desca += `${((leaguedetailsbgv ? 1 : 5) + desca.length)}`;
      kick0 %= Math.max(3, parseInt(`${icontransferclub7}`) & 2);
   }
   for (let k = 0; k < 3; k++) {
       let abidetectT = true;
       let typingL: Map<any, any> = new Map([[String.fromCharCode(114,95,55,55,95,97,115,102,114,116,112,0),370], [String.fromCharCode(100,115,109,111,116,105,111,110,95,103,95,56,0),495], [String.fromCharCode(102,101,116,99,104,101,114,115,95,110,95,57,51,0),132]]);
       let watchnowbgJ: Array<any> = [String.fromCharCode(122,109,98,118,95,117,95,57,55,0), String.fromCharCode(97,95,52,51,95,102,105,108,101,112,97,116,104,0)];
         typingL = new Map([[`${watchnowbgJ.length}`, 3 << (Math.min(3, watchnowbgJ.length))]]);
          let statsnomoredatab = String.fromCharCode(120,95,55,48,95,102,105,116,115,0);
          let iconwechatq = String.fromCharCode(115,107,101,119,101,100,95,51,95,49,55,0);
          let projectb = 5.0;
         typingL = new Map([[`${projectb}`, (String.fromCharCode(115,0) == statsnomoredatab ? statsnomoredatab.length : parseInt(`${projectb}`))]]);
         iconwechatq = `${(iconwechatq == String.fromCharCode(110,0) ? iconwechatq.length : iconwechatq.length)}`;
       let predictionwinx = String.fromCharCode(100,101,113,117,101,117,101,95,114,95,52,0);
      for (let r = 0; r < 1; r++) {
         watchnowbgJ = [2 * typingL.size];
      }
       let predictionarrowa = String.fromCharCode(98,111,111,107,109,97,114,107,95,100,95,49,57,0);
       let predictionactivex = String.fromCharCode(114,95,51,52,95,105,109,112,111,114,116,97,98,108,101,0);
      for (let d = 0; d < 2; d++) {
          let iconclosewhitebgZ: Array<any> = [762, 921];
          let temperaturew: Map<any, any> = new Map([[String.fromCharCode(98,121,116,101,115,95,108,95,49,49,0),String.fromCharCode(115,95,50,57,95,115,110,100,105,111,0)], [String.fromCharCode(121,95,49,51,95,97,97,99,115,98,114,100,97,116,97,0),String.fromCharCode(105,110,116,101,114,114,117,112,116,95,119,95,51,52,0)]]);
          let iconcurrentmatchU: Array<any> = [918, 568];
         watchnowbgJ = [1];
         iconclosewhitebgZ = [temperaturew.size];
         temperaturew = new Map([[`${iconcurrentmatchU.length}`, iconclosewhitebgZ.length]]);
         iconcurrentmatchU = [iconcurrentmatchU.length >> (Math.min(Math.abs(1), 5))];
      }
          let audiencen: Array<any> = [59, 506, 161];
         typingL = new Map([[predictionarrowa, predictionactivex.length]]);
         audiencen.push(2);
      let temperaturey = abidetectT ? !abidetectT : abidetectT;
      do {
          let rightN: Map<any, any> = new Map([[String.fromCharCode(101,110,99,111,100,97,98,108,101,115,95,120,95,54,56,0),302], [String.fromCharCode(97,116,116,97,99,104,109,101,110,116,95,97,95,56,51,0),878]]);
          let confirmationR = 3.0;
         abidetectT = null == rightN.get(`${confirmationR}`);
         if (temperaturey) {
            break;
         }
      } while (temperaturey && (!abidetectT));
         predictionactivex = "3";
      iconpointscoreM = 57 < typingL.size && 57 < watchnowbgJ.length;
   }
       let benefit0 = 1;
       let icondefaultthumbnailD = String.fromCharCode(101,103,114,101,115,115,95,104,95,49,52,0);
       let unselectedC: Map<any, any> = new Map([[String.fromCharCode(101,121,99,104,97,105,110,95,51,95,49,48,0),true ], [String.fromCharCode(106,95,53,57,95,100,111,110,116,0),false ]]);
      for (let a = 0; a < 1; a++) {
          let predictionbuttonm = String.fromCharCode(118,95,50,49,95,106,112,101,103,100,119,116,0);
         unselectedC.set(`${benefit0}`, unselectedC.size);
         predictionbuttonm += "2";
      }
          let singaporeN = String.fromCharCode(98,101,114,114,105,101,115,95,115,95,54,56,0);
         icondefaultthumbnailD = `${2 - singaporeN.length}`;
      let guideJ = icondefaultthumbnailD.length <= 8971165;
      do {
          let footballtrophyo: Map<any, any> = new Map([[String.fromCharCode(119,95,51,54,95,107,95,53,52,0),228], [String.fromCharCode(114,101,108,111,97,100,105,110,103,95,107,95,57,53,0),738]]);
         icondefaultthumbnailD = "3";
         footballtrophyo = new Map([[`${footballtrophyo.size}`, footballtrophyo.size]]);
         if (guideJ) {
            break;
         }
      } while (guideJ && ((icondefaultthumbnailD.length << (Math.min(Math.abs(1), 1))) < 5 || 2 < (icondefaultthumbnailD.length << (Math.min(Math.abs(1), 5)))));
      while (Array.from(unselectedC.values()).includes(benefit0)) {
          let context0: Map<any, any> = new Map([[String.fromCharCode(98,108,111,99,107,115,95,57,95,55,51,0),true ], [String.fromCharCode(119,95,50,56,95,109,97,114,107,101,114,115,0),false ], [String.fromCharCode(97,119,97,105,116,105,110,103,95,57,95,51,53,0),true ]]);
          let wifirouterW: Map<any, any> = new Map([[String.fromCharCode(103,95,50,51,95,112,95,49,57,0),80], [String.fromCharCode(99,101,110,116,114,111,105,100,115,95,102,95,56,49,0),359], [String.fromCharCode(111,117,98,108,101,95,97,95,49,50,0),333]]);
          let rocketu = 1;
          let sheetw: Array<any> = [894, 684];
         unselectedC.set(`${unselectedC.size}`, unselectedC.size);
         context0 = new Map([[`${sheetw.length}`, sheetw.length >> (Math.min(4, Math.abs(rocketu)))]]);
         wifirouterW = new Map([[`${wifirouterW.size}`, 3]]);
         rocketu *= sheetw.length + rocketu;
         break;
      }
          let libtobG = String.fromCharCode(98,111,117,110,99,101,95,109,95,53,57,0);
         unselectedC.set(`${benefit0}`, icondefaultthumbnailD.length ^ 3);
         libtobG = `${(libtobG == String.fromCharCode(89,0) ? libtobG.length : libtobG.length)}`;
      if (unselectedC.size < 2) {
         unselectedC.set(`${benefit0}`, (icondefaultthumbnailD == String.fromCharCode(110,0) ? icondefaultthumbnailD.length : benefit0));
      }
          let commons = false;
          let notificationfillemptyf: Array<any> = [843, 278, 861];
         icondefaultthumbnailD += `${(icondefaultthumbnailD == String.fromCharCode(114,0) ? icondefaultthumbnailD.length : benefit0)}`;
         commons = (((!commons ? notificationfillemptyf.length : 4) ^ notificationfillemptyf.length) > 4);
         unselectedC.set(`${benefit0}`, 1 | icondefaultthumbnailD.length);
      for (let y = 0; y < 2; y++) {
          let eyecloseT = String.fromCharCode(97,95,57,55,95,109,100,101,99,0);
          let injuryu = String.fromCharCode(116,104,114,101,97,100,109,101,115,115,97,103,101,95,121,95,56,57,0);
          let notificationgrayL = true;
         unselectedC = new Map([[`${unselectedC.size}`, 3 | unselectedC.size]]);
         eyecloseT = `${eyecloseT.length >> (Math.min(1, injuryu.length))}`;
         injuryu = "2";
         notificationgrayL = String.fromCharCode(67,0) == eyecloseT;
      }
      register_qe0 = `${mbjscommonF}`;
   for (let p = 0; p < 1; p++) {
      libreactn.push((checkboxB.length << (Math.min(5, Math.abs((robotox ? 4 : 4))))));
   }
   let megaphoneF = iconpointscoreM ? !iconpointscoreM : iconpointscoreM;
   do {
       let homeplayeru: Map<any, any> = new Map([[String.fromCharCode(107,97,105,115,101,114,95,111,95,49,51,0),false ], [String.fromCharCode(105,110,116,114,105,110,115,105,99,95,121,95,52,51,0),true ]]);
       let basketball9 = 3.0;
       let uimanagerZ = true;
       let containerG = String.fromCharCode(119,95,55,95,101,118,101,114,121,111,110,101,0);
       let renewq = 1;
      while ((4.34 - basketball9) >= 2.90 && !uimanagerZ) {
         basketball9 *= (containerG.length + (uimanagerZ ? 4 : 4));
         break;
      }
       let paginationK = 1.0;
       let predictionbuttonf = 4.0;
         renewq &= 1 | parseInt(`${basketball9}`);
      let termso = 5396126.0 <= predictionbuttonf;
      do {
         predictionbuttonf -= parseFloat(`${2}`);
         if (termso) {
            break;
         }
      } while ((predictionbuttonf == basketball9) && termso);
       let disconnectedA: Map<any, any> = new Map([[String.fromCharCode(112,105,112,101,95,109,95,49,52,0),462], [String.fromCharCode(108,95,49,49,95,122,97,108,108,111,99,0),874]]);
         paginationK *= parseFloat(`${1 ^ homeplayeru.size}`);
          let stylef = String.fromCharCode(109,101,114,103,101,97,98,108,101,95,97,95,51,57,0);
         predictionbuttonf /= Math.max(1, parseFloat(`${parseInt(`${basketball9}`) / 2}`));
         stylef += `${stylef.length >> (Math.min(stylef.length, 2))}`;
          let launcherW = 0.0;
          let reddownarrown = String.fromCharCode(119,95,57,57,95,98,115,111,110,0);
          let register_pvm = 3;
         uimanagerZ = renewq < 83;
         launcherW -= (reddownarrown == String.fromCharCode(66,0) ? parseInt(`${launcherW}`) : reddownarrown.length);
         register_pvm &= 1 / (Math.max(3, register_pvm));
      let cast9 = 7953102.0 >= predictionbuttonf;
      do {
         predictionbuttonf -= parseFloat(`${parseInt(`${paginationK}`)}`);
         if (cast9) {
            break;
         }
      } while (cast9 && (5.0 >= (5.95 + predictionbuttonf) || 3 >= (renewq + parseInt(`${predictionbuttonf}`))));
      while (uimanagerZ) {
         uimanagerZ = String.fromCharCode(109,0) == containerG;
         break;
      }
      while ((homeplayeru.size % 1) > 5 && 3 > (homeplayeru.size * 1)) {
         homeplayeru = new Map([[`${predictionbuttonf}`, 2 * parseInt(`${basketball9}`)]]);
         break;
      }
         containerG = `${parseInt(`${paginationK}`)}`;
      for (let t = 0; t < 2; t++) {
          let unimplementedviewo = String.fromCharCode(115,95,55,95,101,108,101,118,97,116,101,100,0);
          let n_count0 = 3;
          let defaultfootballbgU = 4.0;
          let iconlogoutz: Array<any> = [903, 597];
         homeplayeru.set(`${uimanagerZ}`, ((uimanagerZ ? 1 : 5) << (Math.min(containerG.length, 2))));
         unimplementedviewo = `${parseInt(`${defaultfootballbgU}`) | iconlogoutz.length}`;
         n_count0 %= Math.max(3 ^ iconlogoutz.length, 3);
         defaultfootballbgU *= parseFloat(`${1}`);
      }
         homeplayeru = new Map([[`${renewq}`, renewq]]);
         predictionbuttonf += parseFloat(`${1 - parseInt(`${predictionbuttonf}`)}`);
      iconpointscoreM = checkboxB.length == 79 || !uimanagerZ;
      if (megaphoneF) {
         break;
      }
   } while (megaphoneF && (!iconpointscoreM));
       let pushF: Array<any> = [548, 485];
       let arrowrightK = String.fromCharCode(115,105,98,108,105,110,103,95,57,95,56,56,0);
       let yellowtoredo = 1;
       let rncorec = 1;
      if ((3 * pushF.length) >= 2) {
         pushF = [rncorec];
      }
       let v_unlockO: Array<any> = [546, 812];
       let chatbotphotod: Array<any> = [String.fromCharCode(99,98,99,114,95,101,95,53,0), String.fromCharCode(109,112,115,117,98,95,103,95,48,0)];
      while ((2 + pushF.length) > 2) {
          let sendH: Array<any> = [522, 115];
          let stylefc: Array<any> = [600, 228];
         pushF = [yellowtoredo];
         sendH = [sendH.length + stylefc.length];
         stylefc.push(sendH.length % (Math.max(10, stylefc.length)));
         break;
      }
      let iconnewsshared = 5664205 >= chatbotphotod.length;
      do {
         chatbotphotod = [rncorec];
         if (iconnewsshared) {
            break;
         }
      } while (iconnewsshared && (arrowrightK.length == 5));
          let spinner2: Array<any> = [650, 510, 197];
          let rncorek: Array<any> = [763, 95];
         arrowrightK += `${pushF.length >> (Math.min(3, rncorek.length))}`;
         spinner2.push(2 | spinner2.length);
         rncorek.push(spinner2.length);
      mbjscommonF ^= pushF.length;
   while (typing3.endsWith(`${fastu}`)) {
      typing3 = `${(typing3.length | (robotox ? 4 : 3))}`;
      break;
   }
       let downarrowv: Map<any, any> = new Map([[String.fromCharCode(101,95,53,48,0),679], [String.fromCharCode(109,95,56,48,95,106,115,105,109,100,99,112,117,0),123], [String.fromCharCode(112,97,99,107,101,116,111,117,116,95,51,95,53,48,0),279]]);
       let package_l2O = String.fromCharCode(116,95,53,95,101,120,116,114,97,99,116,0);
       let updatesp = String.fromCharCode(112,117,98,108,105,99,95,97,95,57,57,0);
      let tickn = package_l2O == String.fromCharCode(122,101,102,117,120,55,0);
      do {
         package_l2O = `${package_l2O.length << (Math.min(2, updatesp.length))}`;
         if (tickn) {
            break;
         }
      } while ((updatesp == package_l2O) && tickn);
      let lineM = package_l2O.length >= 7703050;
      do {
          let darkq: Array<any> = [String.fromCharCode(105,102,97,115,116,95,116,95,50,57,0), String.fromCharCode(101,121,98,111,97,114,100,95,118,95,50,54,0)];
          let arrowrightc = String.fromCharCode(115,112,114,105,110,103,95,109,95,52,55,0);
          let projectv = false;
         package_l2O += `${downarrowv.size >> (Math.min(updatesp.length, 3))}`;
         darkq = [arrowrightc.length];
         arrowrightc += `${(2 % (Math.max(10, (projectv ? 5 : 2))))}`;
         if (lineM) {
            break;
         }
      } while (lineM && ((package_l2O.length | downarrowv.size) >= 2));
      iconpointscoreM = String.fromCharCode(49,0) == typing3;
   while (4 <= (libreactn.length >> (Math.min(Math.abs(4), 3))) || (typing3.length >> (Math.min(Math.abs(4), 2))) <= 1) {
      libreactn.push(libreactn.length);
      break;
   }
   if (4 <= (mbjscommonF / (Math.max(1, 2))) || (1 / (Math.max(10, libreactn.length))) <= 1) {
      mbjscommonF *= 1;
   }
   while (!iconcalendare.includes(mbjscommonF)) {
      mbjscommonF ^= typing3.length;
      break;
   }
   if (!robotox) {
      fastu ^= typing3.length << (Math.min(Math.abs(2), 3));
   }
       let iconwatchnowo = 5;
          let setting9 = String.fromCharCode(115,99,105,101,110,116,105,102,105,99,95,109,95,55,57,0);
          let logob = false;
         iconwatchnowo -= ((logob ? 5 : 5) >> (Math.min(Math.abs(2), 3)));
         setting9 += `${setting9.length + setting9.length}`;
         logob = setting9 == String.fromCharCode(56,0);
          let downarrow7 = String.fromCharCode(116,97,114,103,101,116,115,95,121,95,51,55,0);
          let modalI = 4;
         iconwatchnowo >>= Math.min(1, downarrow7.length);
         downarrow7 += `${modalI ^ modalI}`;
      if (4 > (3 & iconwatchnowo) || (3 & iconwatchnowo) > 5) {
         iconwatchnowo %= Math.max(iconwatchnowo, 5);
      }
      kick0 >>= Math.min(parseInt(`${Math.abs(((robotox ? 5 : 4) >> (Math.min(Math.abs(parseInt(`${icontransferclub7}`)), 1))))}`), 3);

          dispatch(incrementAdultVideoWatchTime());
        }, 1000);
      }
      return () => clearInterval(interval);
    }, [adultMode, isVip]),
  );

  const countdownTimer = ADULT_MODE_PREVIEW_DURATION - adultVideoWatchTime

  if (adultMode && !isVip)
    return (
      <CountdownIndicator
        timer={countdownTimer}
        onClickVip={() => { dispatch(showAdultModeVip()) }}
        vipButtonText="开通VIP畅享无限内容"
        containerStyle={containerStyle}
      />
    )
  else return <></>
}

export default memo(AdultModeCountdownIndicator);