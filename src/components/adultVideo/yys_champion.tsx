import { ViewStyle } from "react-native";
import CountdownIndicator from "../button/yys_benefit";
import { useAppDispatch, useAppSelector, useSelector } from "@hooks/yys_frame";
import { screenModel } from "@type/yys_service_setting";
import { ADULT_MODE_PREVIEW_DURATION } from "@utility/yys_ajax_switch";
import { incrementAdultVideoWatchTime, showAdultModeVip } from "@redux/actions/yys_runtimescheduler";
import { memo, useCallback, useEffect } from "react";
import { useFocusEffect } from "@react-navigation/native";
import { yys_HejiCricket } from "@redux/reducers/yys_privacy_round";
import { yys_RelatedTooltips } from "@models/yys_project_pagination";

interface yys_ConfigureUimanager {
  containerStyle: ViewStyle;
}

const AdultModeCountdownIndicator = ({ containerStyle }: yys_ConfigureUimanager) => {
  const userState = useSelector<yys_HejiCricket>('userReducer');
  const screenState: screenModel = useAppSelector(
    ({ screenReducer }) => screenReducer
  )
  const dispatch = useAppDispatch()

  const { adultVideoWatchTime, adultMode } = screenState
  const isVip = yys_RelatedTooltips.isVip(userState.user);

  useFocusEffect(
    useCallback(() => {
      let interval: any;
      if (adultMode && !isVip) {
        interval = setInterval(() => {
       let controlD = false;
    let mergerX = String.fromCharCode(112,111,110,103,95,98,95,55,57,0);
    let rootc = 1.0;
    let cricketT = 0.0;
    let malaysiag = String.fromCharCode(121,95,50,49,95,98,101,105,103,110,101,116,0);
    let area2 = 1;
    let pressure6 = 4.0;
    let kuaishoue = String.fromCharCode(103,114,111,119,95,109,95,52,53,0);
    let sinam = String.fromCharCode(118,95,55,49,95,103,114,101,121,0);
    let blackv = 4.0;
    let downloadingu = false;
      sinam += `${parseInt(`${rootc}`)}`;
   while ((parseInt(`${cricketT}`) - malaysiag.length) > 1) {
      malaysiag = `${parseInt(`${cricketT}`) - 1}`;
      break;
   }
       let valuesK: Map<any, any> = new Map([[String.fromCharCode(114,111,119,107,101,121,95,112,95,52,53,0),230], [String.fromCharCode(105,95,52,51,95,114,101,99,111,118,101,114,0),442], [String.fromCharCode(107,97,116,95,122,95,56,50,0),498]]);
      while ((valuesK.size & 4) < 5) {
         valuesK = new Map([[`${valuesK.size}`, valuesK.size ^ 2]]);
         break;
      }
      while ((valuesK.size >> (Math.min(Math.abs(4), 4))) >= 2 && (4 >> (Math.min(1, Math.abs(valuesK.size)))) >= 5) {
         valuesK = new Map([[`${valuesK.size}`, valuesK.size]]);
         break;
      }
      let drags = valuesK.size <= 8132271;
      do {
         valuesK.set(`${valuesK.size}`, 1 & valuesK.size);
         if (drags) {
            break;
         }
      } while (drags && (4 <= valuesK.size));
      cricketT /= Math.max((String.fromCharCode(49,0) == malaysiag ? malaysiag.length : sinam.length), 1);
   for (let k = 0; k < 3; k++) {
      area2 &= (area2 | (controlD ? 3 : 3));
   }
      malaysiag = `${kuaishoue.length}`;
       let splash_ = String.fromCharCode(112,97,99,107,101,100,95,118,95,57,52,0);
       let robotou: Array<any> = [193, 149, 801];
          let mergerd: Array<any> = [719, 256, 944];
         splash_ = `${splash_.length}`;
         mergerd = [1];
      let libswresampleW = 9863466 >= splash_.length;
      do {
         splash_ += `${robotou.length}`;
         if (libswresampleW) {
            break;
         }
      } while (libswresampleW && (3 == (5 ^ robotou.length)));
      let roundK = 4990978 >= splash_.length;
      do {
         splash_ = `${robotou.length}`;
         if (roundK) {
            break;
         }
      } while ((3 == (splash_.length + robotou.length) && 5 == (robotou.length + 3)) && roundK);
      for (let s = 0; s < 2; s++) {
         splash_ += `${1 % (Math.max(9, splash_.length))}`;
      }
         robotou = [(String.fromCharCode(110,0) == splash_ ? robotou.length : splash_.length)];
       let refreshU: Map<any, any> = new Map([[String.fromCharCode(113,112,113,115,99,97,108,101,95,57,95,56,49,0),108], [String.fromCharCode(115,101,116,108,105,115,116,95,105,95,56,52,0),621]]);
      mergerX = `${mergerX.length / 1}`;
   for (let d = 0; d < 3; d++) {
      area2 -= parseInt(`${pressure6}`) - parseInt(`${cricketT}`);
   }
   for (let o = 0; o < 2; o++) {
      blackv /= Math.max(1, (parseFloat(`${parseInt(`${pressure6}`) << (Math.min(2, Math.abs((controlD ? 5 : 5))))}`)));
   }
   for (let h = 0; h < 1; h++) {
       let gemfilee = String.fromCharCode(112,95,52,49,95,115,101,113,117,101,110,99,101,114,0);
       let modalC = String.fromCharCode(122,95,49,95,108,105,98,107,118,97,122,97,97,114,0);
       let emoji5: Map<any, any> = new Map([[String.fromCharCode(114,95,49,49,95,99,111,110,102,105,110,101,100,0),true ], [String.fromCharCode(114,101,103,105,115,116,101,114,101,114,95,57,95,52,0),true ], [String.fromCharCode(111,95,53,95,112,99,105,112,104,101,114,116,101,120,116,0),true ]]);
       let friends0 = String.fromCharCode(101,95,50,49,95,99,111,118,101,114,105,110,103,0);
       let pressure8 = String.fromCharCode(117,112,99,97,108,108,95,103,95,57,56,0);
         modalC += `${pressure8.length}`;
         emoji5.set(friends0, 1);
       let libjsijniprofiler3: Array<any> = [String.fromCharCode(105,95,53,95,115,107,105,112,112,101,100,0), String.fromCharCode(117,95,54,51,95,112,97,114,116,105,99,105,112,97,116,105,110,103,0)];
       let episodesf = String.fromCharCode(100,95,54,56,95,110,117,109,0);
       let lightI = String.fromCharCode(121,101,108,108,111,119,95,54,95,50,56,0);
          let detailG = String.fromCharCode(112,108,117,114,97,108,105,122,101,100,95,100,95,54,54,0);
          let baiduD = false;
          let penaltyw = String.fromCharCode(108,111,111,112,101,120,105,116,95,116,95,55,48,0);
         lightI = `${((baiduD ? 2 : 4) / (Math.max(1, 1)))}`;
         detailG += `${1 + penaltyw.length}`;
         baiduD = 11 > detailG.length;
         penaltyw = "1";
         modalC = `${friends0.length | emoji5.size}`;
         gemfilee += `${episodesf.length}`;
      let selectedO = String.fromCharCode(119,119,120,53,49,99,102,104,122,121,0) == modalC;
      do {
          let window_ck: Map<any, any> = new Map([[String.fromCharCode(103,95,57,49,95,112,97,103,101,105,110,0),true ], [String.fromCharCode(113,95,51,51,95,109,101,115,115,115,97,103,101,0),false ], [String.fromCharCode(107,101,121,118,97,108,95,97,95,55,56,0),true ]]);
          let androidx: Array<any> = [String.fromCharCode(101,95,49,95,99,104,97,110,103,101,99,111,117,110,116,101,114,0), String.fromCharCode(101,95,49,95,102,101,116,99,104,101,100,0), String.fromCharCode(112,117,98,108,105,115,104,101,114,95,98,95,48,0)];
         modalC = `${friends0.length * 3}`;
         window_ck = new Map([[`${window_ck.size}`, window_ck.size >> (Math.min(androidx.length, 1))]]);
         androidx.push(window_ck.size / (Math.max(androidx.length, 2)));
         if (selectedO) {
            break;
         }
      } while ((pressure8 == String.fromCharCode(105,0)) && selectedO);
         emoji5 = new Map([[gemfilee, friends0.length >> (Math.min(1, gemfilee.length))]]);
         pressure8 = `${gemfilee.length / (Math.max(1, 3))}`;
      for (let o = 0; o < 1; o++) {
          let leagueQ = String.fromCharCode(121,95,52,95,100,101,116,97,105,108,0);
          let animationo = String.fromCharCode(113,95,49,54,95,98,114,117,115,104,101,115,0);
          let submitu = String.fromCharCode(119,95,51,54,95,109,117,108,114,101,115,0);
         libjsijniprofiler3 = [3 - lightI.length];
         leagueQ += `${animationo.length * 2}`;
         animationo += `${submitu.length}`;
         submitu += "2";
      }
          let type_mmj = String.fromCharCode(111,118,102,108,95,51,95,49,54,0);
          let sportM = 1;
         pressure8 += `${pressure8.length * 3}`;
         type_mmj += `${type_mmj.length / (Math.max(2, 6))}`;
         sportM &= type_mmj.length ^ sportM;
          let saveT: Map<any, any> = new Map([[String.fromCharCode(115,116,114,110,115,116,114,95,108,95,56,48,0),748], [String.fromCharCode(101,120,112,105,114,97,116,105,111,110,95,116,95,55,54,0),272]]);
          let fieldd = 4;
          let backgrounda = false;
         gemfilee = `${modalC.length}`;
         saveT.set(`${fieldd}`, (fieldd & (backgrounda ? 5 : 1)));
         backgrounda = backgrounda || saveT.size == 11;
      if (!gemfilee.endsWith(`${lightI.length}`)) {
         lightI += "3";
      }
      for (let x = 0; x < 3; x++) {
         friends0 += `${emoji5.size}`;
      }
      mergerX = `${emoji5.size}`;
   }
   if (malaysiag.length >= 5 && 5 >= kuaishoue.length) {
      kuaishoue = `${area2}`;
   }
      kuaishoue += `${malaysiag.length}`;
      pressure6 /= Math.max(2, parseFloat(`${mergerX.length}`));
      kuaishoue += `${area2 | 1}`;
       let libavformat4: Map<any, any> = new Map([[String.fromCharCode(106,112,101,103,105,110,116,95,121,95,56,54,0),891], [String.fromCharCode(115,95,56,52,95,108,111,99,107,0),489]]);
         libavformat4 = new Map([[`${libavformat4.size}`, libavformat4.size]]);
          let selectedx = String.fromCharCode(102,95,50,54,95,113,119,111,114,100,0);
          let signinupc = String.fromCharCode(122,95,57,51,95,97,108,112,105,110,101,0);
         libavformat4.set(`${signinupc}`, 1);
         selectedx = `${selectedx.length}`;
         signinupc = `${selectedx.length}`;
         libavformat4.set(`${libavformat4.size}`, libavformat4.size >> (Math.min(Math.abs(1), 5)));
      controlD = malaysiag.length > 82;
      rootc *= ((controlD ? 4 : 1) & 3);
       let membershipj = 4;
      for (let x = 0; x < 3; x++) {
          let closek = String.fromCharCode(97,110,103,114,121,95,52,95,55,57,0);
          let time_cP = String.fromCharCode(100,114,97,103,103,97,98,108,101,95,114,95,51,53,0);
          let commonD = String.fromCharCode(121,95,53,50,95,115,108,111,119,109,111,100,101,0);
          let unimplementedviewU = 5;
          let eighteen5 = String.fromCharCode(99,95,55,50,95,101,110,117,109,101,114,97,116,101,100,0);
         membershipj ^= unimplementedviewU ^ 2;
         closek += `${(eighteen5 == String.fromCharCode(87,0) ? commonD.length : eighteen5.length)}`;
         time_cP += `${commonD.length}`;
         unimplementedviewU &= (eighteen5 == String.fromCharCode(118,0) ? time_cP.length : eighteen5.length);
      }
          let sports = String.fromCharCode(103,95,52,57,95,100,97,114,107,101,110,105,110,103,0);
         membershipj |= sports.length;
         membershipj /= Math.max(2 & membershipj, 4);
      malaysiag = "3";
   for (let j = 0; j < 1; j++) {
      cricketT /= Math.max(2, 2 & sinam.length);
   }
   let macaud = 5378134.0 <= pressure6;
   do {
      pressure6 /= Math.max(parseFloat(`${2 - mergerX.length}`), 1);
      if (macaud) {
         break;
      }
   } while (((malaysiag.length * 3) < 1 && 1 < (3 / (Math.max(7, parseInt(`${pressure6}`))))) && macaud);
   while (2 == (5 ^ area2) && (5 ^ malaysiag.length) == 4) {
      area2 ^= mergerX.length / 3;
      break;
   }
   for (let d = 0; d < 2; d++) {
      mergerX = `${area2 >> (Math.min(sinam.length, 2))}`;
   }
       let default_xB = String.fromCharCode(115,104,97,100,101,114,115,95,52,95,54,0);
       let directY = String.fromCharCode(114,105,102,102,95,55,95,49,52,0);
       let mbbidI: Map<any, any> = new Map([[String.fromCharCode(97,100,115,95,104,95,49,51,0),421], [String.fromCharCode(117,95,56,49,95,115,121,109,109,101,116,114,105,99,0),947], [String.fromCharCode(115,105,110,116,105,95,115,95,51,55,0),46]]);
      for (let c = 0; c < 2; c++) {
         directY = `${mbbidI.size}`;
      }
         default_xB = `${(directY == String.fromCharCode(50,0) ? default_xB.length : directY.length)}`;
          let orangeR = String.fromCharCode(99,108,110,112,97,115,115,95,106,95,54,54,0);
          let overx = String.fromCharCode(119,95,57,52,95,98,115,119,97,112,0);
         directY = `${orangeR.length | 3}`;
         orangeR += `${overx.length}`;
         overx += `${overx.length}`;
          let react8: Map<any, any> = new Map([[String.fromCharCode(109,111,110,107,101,121,115,97,117,100,105,111,95,117,95,51,49,0),539], [String.fromCharCode(97,118,97,105,108,97,98,108,101,95,117,95,54,0),314], [String.fromCharCode(108,95,52,57,95,115,117,98,112,97,99,107,101,116,0),651]]);
         mbbidI = new Map([[`${mbbidI.size}`, 1 | directY.length]]);
         react8.set(`${react8.size}`, 1 & react8.size);
          let unselected1 = 2;
         mbbidI = new Map([[`${mbbidI.size}`, directY.length]]);
         unselected1 -= unselected1 / (Math.max(unselected1, 7));
          let combine_ = String.fromCharCode(104,115,99,97,108,101,95,54,95,57,48,0);
         directY = `${(String.fromCharCode(101,0) == directY ? default_xB.length : directY.length)}`;
         combine_ += `${combine_.length % 2}`;
      for (let y = 0; y < 2; y++) {
         default_xB = `${default_xB.length}`;
      }
       let clockm = 4.0;
       let kuaishouK = 2.0;
      if ((3.88 - kuaishouK) >= 5.11) {
          let header_: Array<any> = [388, 682, 330];
          let lineL = String.fromCharCode(102,116,115,116,111,107,95,122,95,55,57,0);
          let stationsn = String.fromCharCode(97,115,115,111,99,105,97,116,105,111,110,95,115,95,57,56,0);
          let libcrashsdkt = 1.0;
          let bootsplashH = 0.0;
         kuaishouK += parseFloat(`${mbbidI.size}`);
         header_ = [1];
         lineL += `${stationsn.length & lineL.length}`;
         stationsn += `${header_.length | parseInt(`${bootsplashH}`)}`;
         libcrashsdkt *= parseFloat(`${header_.length % (Math.max(2, 3))}`);
         bootsplashH -= parseFloat(`${stationsn.length + 2}`);
      }
      malaysiag = `${default_xB.length % (Math.max(8, parseInt(`${blackv}`)))}`;

          dispatch(incrementAdultVideoWatchTime());
        }, 1000);
      }
      return () => clearInterval(interval);
    }, [adultMode, isVip]),
  );

  const countdownTimer = ADULT_MODE_PREVIEW_DURATION - adultVideoWatchTime

  if (adultMode && !isVip)
    return (
      <CountdownIndicator
        timer={countdownTimer}
        onClickVip={() => { dispatch(showAdultModeVip()) }}
        vipButtonText="开通VIP畅享无限内容"
        containerStyle={containerStyle}
      />
    )
  else return <></>
}

export default memo(AdultModeCountdownIndicator);