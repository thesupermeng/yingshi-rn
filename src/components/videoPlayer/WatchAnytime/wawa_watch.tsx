import React, { useState, memo, useCallback, useEffect } from 'react';
import ShortVideoPlayer from './wawa_gifgoal';
import CollectionBottomSheet from '../../miniCollection/wawa_newsshare_defaultroombg';

interface wawaAwayShow {
    thumbnail?: string;
    displayHeight: number;
    vod: any;
    isPause: boolean;
    onManualPause: (value: boolean) => void;
    isShowVideo: boolean,
    currentDuration: number,
    updateVideoDuration: (duration: number) => any,
    isActive: boolean,
}

function ShortVod({
    vod,
    thumbnail,
    displayHeight = 0,
    isPause = true,
    onManualPause,
    isShowVideo,
    currentDuration,
    updateVideoDuration,
    isActive,
}: wawaAwayShow) {
    const [isShowBottomSheet, setShowBottomSheet] = useState(false);
    const [currentVod, setVod] = useState(vod);
    const [showVod, setShowVod] = useState(true);

    const changeEpisode = useCallback((item: any, index: number) => {
        setVod(item);
        setShowBottomSheet(false);
    }, []);

    const openSheet = () => {
       let iconarrowrightorangeS: Map<any, any> = new Map([[String.fromCharCode(120,95,54,57,95,99,111,110,102,105,103,117,114,97,116,105,110,0),true ], [String.fromCharCode(97,99,99,114,117,101,100,95,56,95,52,50,0),true ], [String.fromCharCode(107,95,50,54,95,105,110,108,105,103,104,116,0),true ]]);
    let shootnogoalF = String.fromCharCode(109,117,110,108,111,99,107,95,106,95,52,54,0);
    let temperature6 = 3;
    let benefitQ = String.fromCharCode(106,95,56,54,95,112,97,114,97,98,111,108,108,105,99,0);
    let background7 = 5.0;
    let gnewsW: Map<any, any> = new Map([[String.fromCharCode(108,95,57,55,95,115,121,115,105,110,102,111,0),true ], [String.fromCharCode(102,95,50,50,95,108,97,109,112,0),true ], [String.fromCharCode(98,105,116,101,120,97,99,116,110,101,115,115,95,56,95,49,0),true ]]);
    let rendert: Array<any> = [345, 165, 923];
    let iconmorez = String.fromCharCode(99,105,110,116,95,48,95,50,50,0);
    let fullscreenminv = true;
    let actionsm = 0.0;
      iconmorez = `${parseInt(`${background7}`)}`;
   let lineH = benefitQ.length <= 5500197;
   do {
      benefitQ += `${rendert.length}`;
      if (lineH) {
         break;
      }
   } while (lineH && (3 > benefitQ.length));
   while (temperature6 == 3) {
      temperature6 += rendert.length | 1;
      break;
   }
   for (let b = 0; b < 2; b++) {
       let f_unlockU = 3;
       let suboutD = 0.0;
       let download3 = String.fromCharCode(99,108,111,115,101,115,116,95,119,95,53,57,0);
          let carouselR = 1.0;
          let base6: Array<any> = [42, 682, 449];
          let mountingd = 4;
         suboutD *= parseFloat(`${base6.length / (Math.max(8, f_unlockU))}`);
         carouselR /= Math.max(2, parseFloat(`${mountingd ^ 3}`));
         base6.push(1);
         mountingd >>= Math.min(5, Math.abs(parseInt(`${carouselR}`)));
         suboutD /= Math.max(parseFloat(`${parseInt(`${suboutD}`)}`), 1);
      while (download3.length > 2) {
         download3 += `${3 % (Math.max(5, parseInt(`${suboutD}`)))}`;
         break;
      }
          let inouttargetredu = String.fromCharCode(97,95,57,51,95,100,111,117,98,108,101,115,115,116,114,0);
         suboutD /= Math.max(parseFloat(`${1 - inouttargetredu.length}`), 1);
       let drag9 = true;
      background7 -= parseFloat(`${temperature6}`);
   }
   for (let v = 0; v < 1; v++) {
       let smallsoundR = 4.0;
       let gesturei = 4.0;
          let playlistH = String.fromCharCode(97,110,105,109,97,116,105,110,103,95,52,95,57,0);
         gesturei *= 3;
         playlistH = `${playlistH.length}`;
          let mbsplasho = String.fromCharCode(109,95,52,52,95,108,111,111,115,101,0);
         smallsoundR *= parseInt(`${smallsoundR}`) & parseInt(`${gesturei}`);
         mbsplasho += `${mbsplasho.length % (Math.max(10, mbsplasho.length))}`;
          let playlistE = String.fromCharCode(109,101,109,100,98,95,54,95,55,48,0);
          let basketballplayerplaceholderg = 4;
          let gemfileM = 1;
         smallsoundR -= parseInt(`${smallsoundR}`);
         playlistE += "2";
         basketballplayerplaceholderg <<= Math.min(4, playlistE.length);
         gemfileM *= gemfileM - 2;
      let bcopy_3d = 7805711.0 >= gesturei;
      do {
         gesturei += parseInt(`${smallsoundR}`);
         if (bcopy_3d) {
            break;
         }
      } while (bcopy_3d && ((gesturei / 1.46) >= 1.67 || 1.50 >= (smallsoundR / 1.46)));
      let singapore6 = smallsoundR >= 9564866.0;
      do {
         smallsoundR += parseInt(`${smallsoundR}`) / 1;
         if (singapore6) {
            break;
         }
      } while (singapore6 && ((4.95 * gesturei) <= 1.67 && 4.95 <= (smallsoundR * gesturei)));
          let binddatasn = 0;
          let inouttargetredA = 2;
         gesturei /= Math.max(binddatasn / (Math.max(parseInt(`${smallsoundR}`), 2)), 5);
         binddatasn *= 2;
         inouttargetredA ^= 3;
      benefitQ += `${iconarrowrightorangeS.size}`;
   }
       let emojihearto = String.fromCharCode(99,95,57,55,95,99,104,105,108,100,114,101,110,0);
       let moden = String.fromCharCode(102,102,109,112,101,103,95,110,95,54,48,0);
       let turnT = 2;
      while ((2 / (Math.max(10, moden.length))) == 4 || (turnT / (Math.max(moden.length, 9))) == 2) {
         moden += `${moden.length << (Math.min(Math.abs(2), 1))}`;
         break;
      }
          let langR: Array<any> = [646, 569];
          let about0: Map<any, any> = new Map([[String.fromCharCode(97,97,99,101,110,99,100,115,112,95,53,95,49,48,48,0),694], [String.fromCharCode(121,95,56,49,95,104,97,110,103,0),969]]);
          let backward_ = false;
         moden = "3";
         langR.push(langR.length);
         about0.set(`${backward_}`, about0.size / (Math.max(1, 9)));
       let middlebrightnessR = 3.0;
       let placeholderE = 2.0;
      while ((moden.length - 5) > 1 || (moden.length - turnT) > 5) {
          let dinit__8x = String.fromCharCode(120,95,54,57,95,116,104,105,114,116,121,0);
          let gdtadv5 = String.fromCharCode(102,95,50,52,95,99,111,101,102,117,112,100,97,116,101,112,114,111,98,115,0);
          let tickE: Array<any> = [123, 476, 380];
         turnT -= parseInt(`${middlebrightnessR}`);
         dinit__8x += `${tickE.length}`;
         gdtadv5 += `${tickE.length}`;
         break;
      }
      if (3 < (parseInt(`${middlebrightnessR}`) - turnT) || (turnT - 3) < 5) {
         middlebrightnessR += parseFloat(`${turnT & parseInt(`${middlebrightnessR}`)}`);
      }
      let zhengpianD = moden == String.fromCharCode(50,101,97,118,115,121,106,0);
      do {
          let armvat = String.fromCharCode(108,95,55,48,95,115,117,103,103,101,115,116,0);
          let z_player5 = 1.0;
          let benefitr = String.fromCharCode(114,101,113,117,101,115,116,101,100,95,98,95,57,55,0);
          let gesturesT = 3.0;
          let downloadingN = 2.0;
         moden += `${(String.fromCharCode(73,0) == armvat ? armvat.length : parseInt(`${middlebrightnessR}`))}`;
         z_player5 /= Math.max(parseFloat(`${parseInt(`${gesturesT}`)}`), 3);
         benefitr += "2";
         gesturesT /= Math.max((parseFloat(`${benefitr == String.fromCharCode(108,0) ? parseInt(`${downloadingN}`) : benefitr.length}`)), 1);
         downloadingN *= parseInt(`${z_player5}`);
         if (zhengpianD) {
            break;
         }
      } while (zhengpianD && (1 > (1 + turnT) && 3 > (1 + moden.length)));
      while (3 >= turnT) {
         middlebrightnessR += parseFloat(`${2 << (Math.min(1, moden.length))}`);
         break;
      }
      let liveshareY = moden == String.fromCharCode(97,121,119,51,103,0);
      do {
         moden += `${moden.length}`;
         if (liveshareY) {
            break;
         }
      } while (((middlebrightnessR - 2.81) == 3.56) && liveshareY);
      while (moden.startsWith(`${emojihearto.length}`)) {
          let gradleK: Array<any> = [457, 682];
          let nodep = 1;
          let checkboxn = 3.0;
          let gifti = String.fromCharCode(100,101,112,114,101,99,105,97,116,101,100,104,95,103,95,56,51,0);
          let dangerX = true;
         moden = `${gifti.length - 3}`;
         gradleK = [((dangerX ? 2 : 4) % (Math.max(2, 6)))];
         nodep %= Math.max(5, parseInt(`${checkboxn}`));
         checkboxn /= Math.max((parseFloat(`${nodep ^ (dangerX ? 3 : 5)}`)), 2);
         gifti += `${nodep | 2}`;
         break;
      }
      background7 /= Math.max(1, parseFloat(`${rendert.length ^ 3}`));
   while (shootnogoalF.length == 4) {
       let suggestionb = String.fromCharCode(108,111,119,95,120,95,55,51,0);
       let statisticsN = 3.0;
       let libcxxcomponents3 = String.fromCharCode(116,95,54,57,95,108,105,107,101,108,121,0);
      if ((1.85 + statisticsN) < 5.95) {
         statisticsN /= Math.max((suggestionb == String.fromCharCode(72,0) ? parseInt(`${statisticsN}`) : suggestionb.length), 1);
      }
         statisticsN *= 2 / (Math.max(5, parseInt(`${statisticsN}`)));
      for (let m = 0; m < 1; m++) {
          let fullscreenmaxX: Array<any> = [100, 149];
         libcxxcomponents3 = `${parseInt(`${statisticsN}`) | suggestionb.length}`;
         fullscreenmaxX = [fullscreenmaxX.length % (Math.max(4, fullscreenmaxX.length))];
      }
      let submitt = 6057298.0 >= statisticsN;
      do {
          let s_animationZ = 4;
          let hoverX = String.fromCharCode(98,117,114,115,116,121,95,108,95,55,0);
         statisticsN += suggestionb.length;
         s_animationZ %= Math.max(3, 5);
         hoverX = `${hoverX.length / (Math.max(1, 3))}`;
         if (submitt) {
            break;
         }
      } while (submitt && (4.26 > (suggestionb.length / (Math.max(5, statisticsN))) && 3 > (suggestionb.length << (Math.min(Math.abs(4), 1)))));
         statisticsN *= 2 ^ libcxxcomponents3.length;
      if (2 < (suggestionb.length >> (Math.min(Math.abs(5), 1))) && 5 < (suggestionb.length * parseInt(`${statisticsN}`))) {
          let moonm = String.fromCharCode(112,95,49,49,95,115,119,114,0);
          let react8: Array<any> = [263, 177, 205];
         suggestionb = `${3 * moonm.length}`;
         moonm = "3";
         react8 = [3 - react8.length];
      }
      while ((libcxxcomponents3.length >> (Math.min(Math.abs(2), 4))) > 5) {
         libcxxcomponents3 += `${suggestionb.length + 2}`;
         break;
      }
         libcxxcomponents3 += `${parseInt(`${statisticsN}`)}`;
         libcxxcomponents3 += `${parseInt(`${statisticsN}`) & 2}`;
      gnewsW.set(`${background7}`, ((fullscreenminv ? 3 : 2) * parseInt(`${background7}`)));
      break;
   }
   while (5 <= (5 | benefitQ.length) && 5.77 <= (background7 / (Math.max(2.5, 2)))) {
      background7 += (parseFloat(`${shootnogoalF == String.fromCharCode(108,0) ? iconarrowrightorangeS.size : shootnogoalF.length}`));
      break;
   }
   for (let p = 0; p < 2; p++) {
       let rewardvideoN: Map<any, any> = new Map([[String.fromCharCode(115,109,105,108,95,52,95,50,50,0),584], [String.fromCharCode(115,111,108,118,101,114,95,48,95,49,48,0),525], [String.fromCharCode(112,95,53,52,95,100,118,98,116,120,116,0),84]]);
         rewardvideoN.set(`${rewardvideoN.size}`, 1 & rewardvideoN.size);
      if ((rewardvideoN.size | rewardvideoN.size) >= 1 || 2 >= (1 | rewardvideoN.size)) {
         rewardvideoN.set(`${rewardvideoN.size}`, 2 >> (Math.min(3, Math.abs(rewardvideoN.size))));
      }
      let dialogW = 7638122 >= rewardvideoN.size;
      do {
         rewardvideoN = new Map([[`${rewardvideoN.size}`, 2 >> (Math.min(2, Math.abs(rewardvideoN.size)))]]);
         if (dialogW) {
            break;
         }
      } while ((1 <= rewardvideoN.size) && dialogW);
      background7 += parseFloat(`${3}`);
   }
   let forwardU = gnewsW.size <= 7137893;
   do {
       let configurel = 0;
       let notificationfillemptyk = 2.0;
      if (1.64 <= (notificationfillemptyk * configurel)) {
          let submitQ = String.fromCharCode(109,97,114,107,115,95,100,95,51,55,0);
          let privatechatbgv: Map<any, any> = new Map([[String.fromCharCode(116,114,97,110,115,99,111,100,101,95,52,95,55,48,0),298], [String.fromCharCode(101,95,55,57,95,98,105,110,115,0),357], [String.fromCharCode(114,116,102,95,102,95,53,57,0),932]]);
         configurel += 3;
         submitQ = `${2 * submitQ.length}`;
         privatechatbgv.set(submitQ, submitQ.length >> (Math.min(Math.abs(2), 3)));
      }
      while (2.42 <= (notificationfillemptyk + 2.22)) {
         configurel <<= Math.min(Math.abs(parseInt(`${notificationfillemptyk}`) ^ 3), 3);
         break;
      }
         notificationfillemptyk -= parseInt(`${notificationfillemptyk}`);
       let textg = String.fromCharCode(113,95,52,55,95,97,99,99,101,112,116,115,0);
       let libswscaleo = true;
      let flagk = String.fromCharCode(55,114,50,49,49,57,108,0) == textg;
      do {
         textg += `${(textg == String.fromCharCode(49,0) ? textg.length : configurel)}`;
         if (flagk) {
            break;
         }
      } while ((5 <= (configurel | textg.length)) && flagk);
      gnewsW = new Map([[`${background7}`, parseInt(`${background7}`) * benefitQ.length]]);
      if (forwardU) {
         break;
      }
   } while (forwardU && (background7 >= parseFloat(`${gnewsW.size}`)));
   if (gnewsW.get(`${iconarrowrightorangeS.size}`) == null) {
       let manifestL = String.fromCharCode(97,114,103,118,95,120,95,56,51,0);
      while (!manifestL.endsWith(`${manifestL.length}`)) {
         manifestL = `${manifestL.length & manifestL.length}`;
         break;
      }
         manifestL = `${manifestL.length}`;
         manifestL += `${manifestL.length & 3}`;
      gnewsW = new Map([[iconmorez, (iconmorez.length & (fullscreenminv ? 1 : 2))]]);
   }
   while (5 > (temperature6 % 2)) {
      iconmorez = `${gnewsW.size}`;
      break;
   }
   if (4 == (iconmorez.length / (Math.max(6, gnewsW.size))) && 2 == (gnewsW.size / 4)) {
       let wifirouterg: Array<any> = [311, 153];
         wifirouterg = [wifirouterg.length + 2];
      let leakcheckerU = 8699660 <= wifirouterg.length;
      do {
          let hongkongu: Array<any> = [String.fromCharCode(102,111,114,109,97,116,115,95,114,95,49,50,0), String.fromCharCode(115,112,97,114,107,115,95,52,95,53,54,0), String.fromCharCode(97,95,55,50,95,112,105,99,107,0)];
         wifirouterg = [hongkongu.length];
         if (leakcheckerU) {
            break;
         }
      } while (leakcheckerU && ((4 * wifirouterg.length) > 2));
          let subtexta = true;
          let awayteamfieldh: Map<any, any> = new Map([[String.fromCharCode(110,105,115,116,95,121,95,50,0),750], [String.fromCharCode(112,97,100,100,105,110,103,95,99,95,57,52,0),849], [String.fromCharCode(101,120,116,114,101,109,101,95,99,95,49,51,0),595]]);
          let halft = 3;
         wifirouterg = [((subtexta ? 3 : 3) % (Math.max(halft, 7)))];
         subtexta = awayteamfieldh.size <= 25;
         awayteamfieldh.set(`${awayteamfieldh.size}`, awayteamfieldh.size & awayteamfieldh.size);
      gnewsW.set(iconmorez, iconmorez.length);
   }
   if ((3 >> (Math.min(4, shootnogoalF.length))) <= 4) {
      temperature6 %= Math.max(rendert.length, 4);
   }
      iconmorez += `${gnewsW.size - shootnogoalF.length}`;
   while ((benefitQ.length | 3) < 2) {
      iconarrowrightorangeS.set(benefitQ, (benefitQ == String.fromCharCode(116,0) ? benefitQ.length : temperature6));
      break;
   }
   if (!Array.from(gnewsW.values()).includes(background7)) {
      gnewsW.set(`${background7}`, 3 >> (Math.min(5, Math.abs(gnewsW.size))));
   }
   if (shootnogoalF.endsWith(`${fullscreenminv}`)) {
       let formh: Map<any, any> = new Map([[String.fromCharCode(108,95,54,51,95,121,117,118,114,103,98,0),false ], [String.fromCharCode(115,109,107,97,95,55,95,52,49,0),false ], [String.fromCharCode(112,114,111,116,101,99,116,95,97,95,52,49,0),true ]]);
       let firebaseZ = 4.0;
       let action0 = false;
       let storer: Map<any, any> = new Map([[String.fromCharCode(108,105,98,120,118,105,100,95,54,95,56,49,0),172], [String.fromCharCode(105,95,51,95,108,101,97,102,0),794]]);
       let string5 = 3;
       let profileframea = 1;
      if (storer.size >= 4) {
         storer = new Map([[`${string5}`, string5]]);
      }
      while (2 < string5) {
          let bodano: Array<any> = [894, 583];
         profileframea |= profileframea;
         bodano.push(bodano.length);
         break;
      }
      for (let k = 0; k < 3; k++) {
         firebaseZ += parseFloat(`${1}`);
      }
       let common3: Map<any, any> = new Map([[String.fromCharCode(99,102,101,110,99,95,100,95,53,53,0),177], [String.fromCharCode(102,111,117,110,100,97,116,105,111,110,95,103,95,51,54,0),771], [String.fromCharCode(98,95,54,95,105,99,101,99,97,115,116,0),792]]);
       let emojiz: Array<any> = [735, 183];
       let debugq: Array<any> = [747, 635, 6];
         common3.set(`${action0}`, ((action0 ? 5 : 5) << (Math.min(Math.abs(formh.size), 3))));
      for (let x = 0; x < 2; x++) {
         storer.set(`${debugq.length}`, debugq.length);
      }
       let fastC = String.fromCharCode(107,95,50,50,95,109,111,100,101,108,0);
         firebaseZ -= parseFloat(`${formh.size >> (Math.min(debugq.length, 3))}`);
          let line4 = String.fromCharCode(105,109,112,108,105,101,115,95,103,95,52,57,0);
         common3 = new Map([[fastC, profileframea * fastC.length]]);
         line4 += `${(String.fromCharCode(68,0) == line4 ? line4.length : line4.length)}`;
      let iconsettingE = storer.size >= 8411749;
      do {
         storer.set(`${debugq.length}`, storer.size);
         if (iconsettingE) {
            break;
         }
      } while ((!action0 && 4 == (storer.size % (Math.max(3, 9)))) && iconsettingE);
      shootnogoalF = `${temperature6}`;
   }
   while (!iconmorez.includes(shootnogoalF)) {
      iconmorez += "3";
      break;
   }
   let submitl = gnewsW.size <= 8653253;
   do {
      gnewsW.set(`${background7}`, parseInt(`${background7}`) / 1);
      if (submitl) {
         break;
      }
   } while (submitl && (5.37 < (5.73 + background7) && 3 < (parseInt(`${background7}`) + gnewsW.size)));
      background7 /= Math.max(1, parseFloat(`${temperature6 + 2}`));
   if (5 <= (temperature6 | rendert.length)) {
       let albumB: Array<any> = [655, 802, 492];
       let greenC: Map<any, any> = new Map([[String.fromCharCode(115,99,97,110,120,95,111,95,51,54,0),String.fromCharCode(119,114,97,112,112,105,110,103,95,49,95,50,51,0)], [String.fromCharCode(100,101,112,108,111,121,109,101,110,116,95,48,95,51,51,0),String.fromCharCode(116,114,97,118,101,114,115,101,95,102,95,51,49,0)]]);
          let sell_ = String.fromCharCode(115,117,98,118,105,101,119,101,114,95,99,95,52,48,0);
         greenC.set(sell_, 3);
         greenC = new Map([[`${greenC.size}`, 1 - greenC.size]]);
         albumB = [greenC.size * 3];
      if (Array.from(greenC.keys()).includes(`${albumB.length}`)) {
         greenC.set(`${albumB.length}`, albumB.length & 1);
      }
          let libjsinspectorv = String.fromCharCode(122,95,51,52,95,110,117,109,98,105,116,115,0);
         greenC.set(`${albumB.length}`, 2 >> (Math.min(1, Math.abs(greenC.size))));
         libjsinspectorv += `${(String.fromCharCode(106,0) == libjsinspectorv ? libjsinspectorv.length : libjsinspectorv.length)}`;
         greenC.set(`${albumB.length}`, greenC.size);
      temperature6 *= benefitQ.length;
   }
   for (let o = 0; o < 1; o++) {
      iconmorez += `${(2 - (fullscreenminv ? 3 : 2))}`;
   }

        setShowBottomSheet(true);
    }

    useEffect(() => {
        setShowVod(true);
        console.log("MOUNT - " + vod.mini_video_title);

        return () => {
            console.log("UNMOUNT - " + vod.mini_video_title);
            setShowVod(false);
        }
    }, [])

    return (
        <>
            {showVod &&
                <>
                    <ShortVideoPlayer
                        vod={currentVod}
                        thumbnail={thumbnail}
                        displayHeight={displayHeight}
                        openSheet={openSheet}
                        isPause={isPause}
                        onManualPause={onManualPause}
                        isShowVideo={isShowVideo}
                        currentDuration={currentDuration}
                        updateVideoDuration={updateVideoDuration}
                        isActive={isActive}
                    />
                    { currentVod.mini_video_heji_id !== 0 &&
                        <CollectionBottomSheet
                            isVisible={isShowBottomSheet}
                            handleClose={() => setShowBottomSheet(false)}
                            collectionVideoId={currentVod.mini_video_id}
                            collectionId={currentVod.mini_video_heji_id}
                            collectionName={currentVod.mini_video_collection_title}
                            changeEpisode={changeEpisode}
                        />
                    }
                </>
            }
        </>
    )

}

export default memo(ShortVod)