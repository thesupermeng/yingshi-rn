import React, { useState, memo, useCallback, useEffect } from 'react';
import ShortVideoPlayer from './maf_invite';
import CollectionBottomSheet from '../../miniCollection/l_injury';

interface XFillButton {
    thumbnail?: string;
    displayHeight: number;
    vod: any;
    isPause: boolean;
    onManualPause: (value: boolean) => void;
    isShowVideo: boolean,
    currentDuration: number,
    updateVideoDuration: (duration: number) => any,
    isActive: boolean,
}

function ShortVod({
    vod,
    thumbnail,
    displayHeight = 0,
    isPause = true,
    onManualPause,
    isShowVideo,
    currentDuration,
    updateVideoDuration,
    isActive,
}: XFillButton) {
    const [isShowBottomSheet, setShowBottomSheet] = useState(false);
    const [currentVod, setVod] = useState(vod);
    const [showVod, setShowVod] = useState(true);

    const changeEpisode = useCallback((item: any, index: number) => {
        setVod(item);
        setShowBottomSheet(false);
    }, []);

    const openSheet = () => {
       let ewardedm = String.fromCharCode(107,95,50,52,95,115,117,98,99,111,101,102,115,0);
    let historyw: Array<any> = [String.fromCharCode(110,95,56,49,95,103,114,97,112,104,105,99,0), String.fromCharCode(108,111,116,116,105,101,118,105,101,119,95,118,95,51,48,0), String.fromCharCode(99,97,110,100,105,100,97,116,101,115,95,98,95,50,55,0)];
    let halfG = 3;
    let temperaturec = String.fromCharCode(99,114,105,116,105,99,97,108,95,55,95,49,56,0);
    let renewb = false;
    let mathn = String.fromCharCode(114,101,116,114,105,101,118,105,110,103,95,50,95,52,51,0);
    let success5 = 2;
    let downloadedK = 1.0;
    let hnewsg = String.fromCharCode(103,95,52,53,95,118,109,104,100,0);
    let leaguek = 0.0;
      downloadedK /= Math.max(mathn.length, 3);
   let temperaturem = 8831267 >= halfG;
   do {
      halfG >>= Math.min(2, Math.abs(parseInt(`${downloadedK}`)));
      if (temperaturem) {
         break;
      }
   } while (temperaturem && (halfG <= 4));
       let favoritez: Map<any, any> = new Map([[String.fromCharCode(105,110,118,105,116,101,114,95,102,95,55,53,0),String.fromCharCode(121,95,57,95,99,111,114,101,115,0)], [String.fromCharCode(112,114,105,110,116,101,100,95,111,95,53,55,0),String.fromCharCode(113,95,54,57,95,98,101,97,116,0)]]);
      if (4 > (favoritez.size * 1)) {
         favoritez.set(`${favoritez.size}`, 1 | favoritez.size);
      }
      let trophyd = 5365822 <= favoritez.size;
      do {
         favoritez = new Map([[`${favoritez.size}`, favoritez.size]]);
         if (trophyd) {
            break;
         }
      } while ((favoritez.get(`${favoritez.size}`) != null) && trophyd);
      while ((favoritez.size ^ favoritez.size) == 4 || 3 == (4 ^ favoritez.size)) {
         favoritez.set(`${favoritez.size}`, 1);
         break;
      }
      halfG <<= Math.min(2, Math.abs(1 & ewardedm.length));
   for (let d = 0; d < 1; d++) {
       let entrym = String.fromCharCode(111,102,102,115,101,116,115,105,122,101,95,52,95,55,48,0);
       let videog = String.fromCharCode(108,95,50,54,95,99,111,108,111,99,97,116,101,100,0);
       let hookK = false;
       let dangerW = String.fromCharCode(112,95,49,55,95,115,101,109,105,0);
       let countryR = true;
      for (let w = 0; w < 3; w++) {
         videog += `${entrym.length | 2}`;
      }
      if (!hookK || 4 <= videog.length) {
          let r_players = String.fromCharCode(114,101,99,105,112,105,101,110,116,115,95,48,95,56,51,0);
          let userr = 5.0;
         hookK = !r_players.includes(`${userr}`);
      }
         videog += `${(entrym == String.fromCharCode(112,0) ? entrym.length : (hookK ? 1 : 4))}`;
      let grayi = videog == String.fromCharCode(104,98,101,54,98,0);
      do {
          let yellowK = false;
          let zhubo8 = 0.0;
          let detailP = false;
          let crossK = String.fromCharCode(115,116,115,100,95,118,95,53,48,0);
         videog += `${(parseInt(`${zhubo8}`) * (hookK ? 4 : 3))}`;
         yellowK = detailP || yellowK;
         zhubo8 -= ((yellowK ? 3 : 1));
         detailP = crossK.length >= 64;
         crossK += `${(2 + (yellowK ? 2 : 1))}`;
         if (grayi) {
            break;
         }
      } while ((dangerW == String.fromCharCode(52,0)) && grayi);
      while (!entrym.includes(dangerW)) {
          let tickN = true;
         dangerW += `${((tickN ? 1 : 5) ^ dangerW.length)}`;
         break;
      }
          let rankm: Map<any, any> = new Map([[String.fromCharCode(116,114,97,110,115,102,111,114,109,95,121,95,50,51,0),false ], [String.fromCharCode(121,95,57,49,95,105,110,105,118,105,116,101,100,0),true ], [String.fromCharCode(114,111,116,97,116,105,111,110,97,110,103,108,101,95,110,95,50,50,0),false ]]);
          let langkeyp = String.fromCharCode(115,95,55,50,95,99,100,110,0);
          let listx = true;
         dangerW = "1";
         rankm = new Map([[`${rankm.size}`, 2]]);
         langkeyp += `${(String.fromCharCode(104,0) == langkeyp ? langkeyp.length : rankm.size)}`;
         listx = String.fromCharCode(88,0) == langkeyp;
          let share3: Array<any> = [875, 595, 620];
          let sheeti = String.fromCharCode(97,117,116,104,101,110,116,105,99,97,116,101,95,109,95,53,53,0);
         countryR = share3.includes(countryR);
         share3 = [sheeti.length];
         sheeti = `${sheeti.length}`;
         dangerW += "1";
       let feedbackf = String.fromCharCode(112,111,115,116,95,50,95,53,48,0);
       let arrowt = String.fromCharCode(115,110,97,112,112,101,100,95,118,95,54,50,0);
      if (countryR) {
         countryR = entrym.length > 72;
      }
      if (arrowt != feedbackf) {
         feedbackf += `${(entrym == String.fromCharCode(119,0) ? videog.length : entrym.length)}`;
      }
         hookK = (feedbackf.length ^ arrowt.length) == 8;
      if (videog.length > 4) {
         videog = `${dangerW.length | 3}`;
      }
          let default_qdV = 4.0;
          let disconnectedn = 1;
          let china_: Map<any, any> = new Map([[String.fromCharCode(102,97,100,101,100,95,118,95,50,52,0),500], [String.fromCharCode(117,110,112,105,110,110,101,100,95,98,95,48,0),641], [String.fromCharCode(109,95,54,57,95,112,117,114,112,111,115,101,0),636]]);
         videog = `${china_.size}`;
         default_qdV /= Math.max(parseFloat(`${disconnectedn}`), 4);
         disconnectedn -= parseInt(`${default_qdV}`) - disconnectedn;
         china_ = new Map([[`${default_qdV}`, parseInt(`${default_qdV}`)]]);
       let configX = String.fromCharCode(112,114,105,110,116,95,49,95,54,52,0);
      renewb = videog.length == mathn.length;
   }
   let downloading_ = 6034400.0 <= downloadedK;
   do {
      downloadedK += historyw.length;
      if (downloading_) {
         break;
      }
   } while ((1.3 < (5.81 * downloadedK)) && downloading_);
   for (let y = 0; y < 2; y++) {
      downloadedK *= 1 << (Math.min(Math.abs(parseInt(`${downloadedK}`)), 1));
   }
   for (let k = 0; k < 3; k++) {
      ewardedm += `${ewardedm.length >> (Math.min(Math.abs(3), 1))}`;
   }
      historyw.push(historyw.length);
      mathn = `${((renewb ? 3 : 1) % (Math.max(historyw.length, 10)))}`;
   let streamingv = 7610479 >= halfG;
   do {
       let text_ = String.fromCharCode(119,95,52,56,95,115,105,103,110,112,111,115,116,0);
       let cornerC = String.fromCharCode(98,117,102,115,112,97,99,101,95,120,95,51,52,0);
       let gestureE = String.fromCharCode(116,97,103,98,105,116,95,119,95,50,54,0);
      if (cornerC.length < text_.length) {
         cornerC += `${(text_ == String.fromCharCode(71,0) ? text_.length : cornerC.length)}`;
      }
         text_ = `${gestureE.length / (Math.max(2, 4))}`;
         cornerC += `${gestureE.length}`;
      if (text_.length > 4 && cornerC != String.fromCharCode(104,0)) {
         cornerC += `${text_.length | cornerC.length}`;
      }
      let detailB = 7232883 <= cornerC.length;
      do {
          let calendaro = 4.0;
          let eighteenH = false;
          let clockd = String.fromCharCode(105,110,116,101,103,114,105,116,121,95,54,95,57,48,0);
          let shootF = true;
          let overlaye = false;
         cornerC = `${text_.length >> (Math.min(Math.abs(2), 3))}`;
         calendaro += (clockd.length + (eighteenH ? 2 : 4));
         eighteenH = calendaro < 31.5;
         clockd += `${((overlaye ? 3 : 3) - (eighteenH ? 5 : 3))}`;
         shootF = overlaye;
         if (detailB) {
            break;
         }
      } while (detailB && (1 == cornerC.length));
       let bootsplashP = 0.0;
          let club_ = false;
          let short_v7 = 4;
          let m_lockH = true;
         cornerC = `${1 | parseInt(`${bootsplashP}`)}`;
         club_ = 68 <= short_v7;
         short_v7 *= short_v7 % 1;
         m_lockH = 43 >= short_v7;
      for (let m = 0; m < 3; m++) {
         text_ += `${parseInt(`${bootsplashP}`)}`;
      }
      while (!text_.startsWith(`${bootsplashP}`)) {
          let container_ = 5.0;
          let closeo = true;
          let kickS = 5.0;
         bootsplashP -= parseFloat(`${cornerC.length * 1}`);
         container_ /= Math.max(4, parseInt(`${container_}`) % 1);
         closeo = (kickS / (Math.max(1, container_))) == 8.22;
         kickS *= 3 + parseInt(`${container_}`);
         break;
      }
      halfG <<= Math.min(3, Math.abs(3));
      if (streamingv) {
         break;
      }
   } while ((halfG <= 4) && streamingv);
   while (mathn.includes(`${halfG}`)) {
       let ticki = false;
       let tickO = String.fromCharCode(110,95,49,55,95,110,97,118,0);
       let anytimen = 2.0;
      let match6 = tickO.length >= 7775705;
      do {
         tickO = "1";
         if (match6) {
            break;
         }
      } while (match6 && (tickO.length == 3));
          let circleu = String.fromCharCode(120,95,53,54,95,109,101,115,97,103,101,115,0);
          let chartO = String.fromCharCode(117,110,109,97,114,115,104,97,108,95,117,95,57,51,0);
         anytimen += (parseFloat(`${(ticki ? 2 : 3) + 2}`));
         circleu += `${circleu.length ^ 1}`;
         chartO += "3";
          let friendsC = true;
         ticki = !friendsC || anytimen > 29.58;
      let blackM = anytimen <= 5628605.0;
      do {
         anytimen -= parseFloat(`${2 * tickO.length}`);
         if (blackM) {
            break;
         }
      } while (((1.28 * anytimen) == 2.91) && blackM);
         tickO = `${2 - tickO.length}`;
      let ewardeds = ticki ? !ticki : ticki;
      do {
          let teamx = String.fromCharCode(112,95,49,53,95,99,111,109,112,97,114,101,112,111,119,0);
          let giftB = 3.0;
          let teamV: Array<any> = [String.fromCharCode(114,101,103,105,111,110,115,95,105,95,57,49,0), String.fromCharCode(121,95,50,95,99,111,109,112,97,114,0)];
         ticki = parseFloat(`${tickO.length}`) <= anytimen;
         teamx += `${teamV.length << (Math.min(teamx.length, 3))}`;
         giftB *= parseFloat(`${teamx.length}`);
         teamV.push(1 - parseInt(`${giftB}`));
         if (ewardeds) {
            break;
         }
      } while (ewardeds && ((3.29 - anytimen) > 5.44));
         ticki = 71 == tickO.length;
         tickO = `${((ticki ? 2 : 1) & parseInt(`${anytimen}`))}`;
      if (3 > tickO.length || ticki) {
          let renewK = String.fromCharCode(105,95,55,49,95,103,101,116,105,110,116,0);
          let photo7 = String.fromCharCode(115,105,109,100,95,103,95,56,53,0);
         ticki = renewK == photo7;
      }
      halfG *= parseInt(`${anytimen}`) >> (Math.min(5, Math.abs(3)));
      break;
   }
   for (let h = 0; h < 1; h++) {
      downloadedK /= Math.max(3, temperaturec.length);
   }
      hnewsg += `${temperaturec.length % 3}`;
   if ((halfG & historyw.length) < 4 || (historyw.length & halfG) < 4) {
       let o_countv = String.fromCharCode(99,108,111,115,105,110,103,95,113,95,54,48,0);
       let gesturesz = 3.0;
       let emojiR = 3.0;
       let transfer4 = String.fromCharCode(109,105,100,101,113,117,97,108,105,122,101,114,95,99,95,54,51,0);
       let volumej = String.fromCharCode(104,95,54,49,95,99,111,109,112,97,114,101,114,115,0);
          let q_playerA = 0.0;
          let overN: Array<any> = [22, 680];
         transfer4 = `${(String.fromCharCode(90,0) == transfer4 ? parseInt(`${gesturesz}`) : transfer4.length)}`;
         q_playerA /= Math.max(overN.length, 2);
         overN.push(parseInt(`${q_playerA}`));
         volumej = `${2 | parseInt(`${gesturesz}`)}`;
         emojiR *= (parseFloat(`${volumej == String.fromCharCode(55,0) ? volumej.length : parseInt(`${emojiR}`)}`));
         transfer4 = `${(volumej == String.fromCharCode(110,0) ? volumej.length : transfer4.length)}`;
      if ((5.11 * gesturesz) < 2.26 && 5.11 < (gesturesz * emojiR)) {
         emojiR += parseFloat(`${volumej.length ^ 3}`);
      }
         gesturesz *= (String.fromCharCode(75,0) == volumej ? volumej.length : parseInt(`${gesturesz}`));
         volumej = `${transfer4.length | parseInt(`${emojiR}`)}`;
       let placementc = String.fromCharCode(115,101,97,100,95,50,95,56,49,0);
       let rightc = String.fromCharCode(115,99,97,108,101,115,95,100,95,54,55,0);
      let customJ = String.fromCharCode(103,103,121,115,104,117,103,0) == placementc;
      do {
          let ewardedm1 = String.fromCharCode(97,117,116,111,114,101,103,114,101,115,115,105,111,110,95,49,95,52,49,0);
          let subsE = String.fromCharCode(111,95,56,48,95,115,100,112,0);
          let memberU = String.fromCharCode(97,95,56,52,95,116,111,109,98,117,102,0);
          let mapping6 = 4.0;
         placementc = `${parseInt(`${mapping6}`) * 1}`;
         ewardedm1 += `${memberU.length}`;
         subsE += `${memberU.length}`;
         mapping6 *= parseFloat(`${ewardedm1.length}`);
         if (customJ) {
            break;
         }
      } while ((!placementc.endsWith(`${emojiR}`)) && customJ);
       let leagueJ: Map<any, any> = new Map([[String.fromCharCode(102,105,108,116,101,114,102,95,106,95,54,0),String.fromCharCode(122,111,111,109,105,110,103,95,108,95,51,49,0)], [String.fromCharCode(121,95,51,57,95,101,108,98,103,0),String.fromCharCode(114,95,50,48,95,109,116,97,102,0)]]);
       let tickedF: Map<any, any> = new Map([[String.fromCharCode(111,95,50,48,95,101,115,115,105,111,110,0),true ], [String.fromCharCode(97,99,116,105,118,97,116,105,111,110,95,50,95,53,54,0),false ], [String.fromCharCode(117,95,49,48,48,95,102,97,115,116,102,105,114,115,116,112,97,115,115,0),true ]]);
      let gesturesm = 5975124 >= volumej.length;
      do {
         volumej += `${2 / (Math.max(8, tickedF.size))}`;
         if (gesturesm) {
            break;
         }
      } while (gesturesm && ((volumej.length - parseInt(`${emojiR}`)) > 5 || (volumej.length - 5) > 5));
      let selectionR = 6400733 >= rightc.length;
      do {
         rightc += `${rightc.length}`;
         if (selectionR) {
            break;
         }
      } while ((rightc.length >= gesturesz) && selectionR);
         volumej = "2";
       let clearx = String.fromCharCode(107,95,50,57,95,110,101,119,101,114,0);
      halfG <<= Math.min(Math.abs(parseInt(`${downloadedK}`) / 2), 4);
      o_countv = `${(String.fromCharCode(54,0) == o_countv ? o_countv.length : o_countv.length)}`;
   }
   while (3 >= success5) {
      success5 &= historyw.length;
      break;
   }
      downloadedK -= (temperaturec.length + (renewb ? 4 : 2));
   for (let x = 0; x < 1; x++) {
      temperaturec = `${temperaturec.length >> (Math.min(Math.abs(2), 3))}`;
   }
   let themeb = ewardedm == String.fromCharCode(98,120,48,51,0);
   do {
       let historyu = String.fromCharCode(113,95,50,56,95,115,101,103,109,97,112,0);
       let form_ = true;
      if (!historyu.endsWith(`${form_}`)) {
         form_ = (2 > ((!form_ ? historyu.length : 2) | historyu.length));
      }
         historyu += `${((form_ ? 3 : 1) >> (Math.min(historyu.length, 3)))}`;
       let largeD = 2.0;
       let pagep = 0.0;
      if (4.96 <= largeD && (4.96 + largeD) <= 5.24) {
         form_ = pagep <= 10.57;
      }
       let catagoryi = 5.0;
       let incidentd = 1.0;
      if (4.75 <= (largeD + 1.89)) {
         largeD += parseInt(`${incidentd}`);
      }
      ewardedm += "1";
      if (themeb) {
         break;
      }
   } while (((ewardedm.length * success5) > 2 && (2 * ewardedm.length) > 5) && themeb);
   if ((hnewsg.length + parseInt(`${downloadedK}`)) < 2 && (hnewsg.length + parseInt(`${downloadedK}`)) < 2) {
       let layout9 = 0.0;
       let confirmation3 = 4.0;
         layout9 += parseFloat(`${parseInt(`${confirmation3}`)}`);
         layout9 /= Math.max(parseFloat(`${1 >> (Math.min(Math.abs(parseInt(`${layout9}`)), 5))}`), 4);
         layout9 *= parseFloat(`${parseInt(`${layout9}`) / 3}`);
      if (2.95 < (layout9 - confirmation3) && (layout9 - 2.95) < 3.79) {
         confirmation3 -= parseInt(`${layout9}`);
      }
      while (confirmation3 < layout9) {
          let trophym = 5.0;
          let speca = 1;
          let condensedj = true;
          let selects = 4.0;
         layout9 /= Math.max(4, parseFloat(`${speca}`));
         trophym *= (parseFloat(`${parseInt(`${trophym}`) >> (Math.min(1, Math.abs((condensedj ? 5 : 2))))}`));
         speca &= parseInt(`${selects}`) * parseInt(`${trophym}`);
         condensedj = (trophym * selects) > 43.85;
         break;
      }
       let shrinkU = String.fromCharCode(98,95,52,50,95,109,101,114,103,105,110,103,0);
       let router5 = String.fromCharCode(100,101,99,111,100,101,114,115,95,51,95,50,54,0);
      downloadedK /= Math.max(1, 2);
   }
      success5 &= historyw.length;
       let overlay3 = String.fromCharCode(107,115,101,116,95,104,95,52,53,0);
       let long_5K = false;
       let sharedK = String.fromCharCode(100,98,104,97,110,100,108,101,95,101,95,56,53,0);
         sharedK = `${(overlay3 == String.fromCharCode(82,0) ? overlay3.length : sharedK.length)}`;
          let tempd = String.fromCharCode(109,111,100,101,110,97,109,101,95,105,95,56,55,0);
          let matchesB: Map<any, any> = new Map([[String.fromCharCode(106,95,54,57,95,108,117,109,105,110,97,110,99,101,0),820], [String.fromCharCode(97,95,54,55,95,111,98,106,101,99,116,115,0),271], [String.fromCharCode(104,95,50,49,95,115,116,114,110,105,99,109,112,0),131]]);
         long_5K = matchesB.size > 25;
         tempd += `${tempd.length + 2}`;
         matchesB = new Map([[tempd, (tempd == String.fromCharCode(97,0) ? tempd.length : tempd.length)]]);
       let anner2: Array<any> = [247, 654, 785];
       let acceptedR: Array<any> = [735, 527];
      if (!sharedK.includes(`${long_5K}`)) {
         sharedK += `${acceptedR.length - 1}`;
      }
         acceptedR.push(anner2.length);
         overlay3 += `${((long_5K ? 4 : 3) - 1)}`;
      for (let x = 0; x < 2; x++) {
         long_5K = (anner2.length % (Math.max(4, overlay3.length))) == 94;
      }
         anner2 = [overlay3.length];
          let reminderl = 2.0;
          let pressure7 = String.fromCharCode(102,101,110,99,95,115,95,53,50,0);
         acceptedR.push(acceptedR.length - 1);
         reminderl /= Math.max(3, parseInt(`${reminderl}`));
         pressure7 = `${parseInt(`${reminderl}`) / (Math.max(pressure7.length, 1))}`;
      renewb = (overlay3.length << (Math.min(temperaturec.length, 4))) < 87;

        setShowBottomSheet(true);
    }

    useEffect(() => {
        setShowVod(true);
        console.log("MOUNT - " + vod.mini_video_title);

        return () => {
            console.log("UNMOUNT - " + vod.mini_video_title);
            setShowVod(false);
        }
    }, [])

    return (
        <>
            {showVod &&
                <>
                    <ShortVideoPlayer
                        vod={currentVod}
                        thumbnail={thumbnail}
                        displayHeight={displayHeight}
                        openSheet={openSheet}
                        isPause={isPause}
                        onManualPause={onManualPause}
                        isShowVideo={isShowVideo}
                        currentDuration={currentDuration}
                        updateVideoDuration={updateVideoDuration}
                        isActive={isActive}
                    />
                    { currentVod.mini_video_heji_id !== 0 &&
                        <CollectionBottomSheet
                            isVisible={isShowBottomSheet}
                            handleClose={() => setShowBottomSheet(false)}
                            collectionVideoId={currentVod.mini_video_id}
                            collectionId={currentVod.mini_video_heji_id}
                            collectionName={currentVod.mini_video_collection_title}
                            changeEpisode={changeEpisode}
                        />
                    }
                </>
            }
        </>
    )

}

export default memo(ShortVod)