import React, { useState, memo, useCallback, useEffect } from 'react';
import ShortVideoPlayer from './yys_playlist_icondownimg';
import CollectionBottomSheet from '../../miniCollection/yys_logo_launch';

interface yysIconarrowrightorangeStation {
    thumbnail?: string;
    displayHeight: number;
    vod: any;
    isPause: boolean;
    onManualPause: (value: boolean) => void;
    isShowVideo: boolean,
    currentDuration: number,
    updateVideoDuration: (duration: number) => any,
    isActive: boolean,
}

function ShortVod({
    vod,
    thumbnail,
    displayHeight = 0,
    isPause = true,
    onManualPause,
    isShowVideo,
    currentDuration,
    updateVideoDuration,
    isActive,
}: yysIconarrowrightorangeStation) {
    const [isShowBottomSheet, setShowBottomSheet] = useState(false);
    const [currentVod, setVod] = useState(vod);
    const [showVod, setShowVod] = useState(true);

    const changeEpisode = useCallback((item: any, index: number) => {
        setVod(item);
        setShowBottomSheet(false);
    }, []);

    const openSheet = () => {
       let fullscreenmaxW = String.fromCharCode(103,109,116,105,109,101,95,100,95,55,49,0);
    let gemfileD = 2;
    let notificationgrayW = String.fromCharCode(99,95,57,50,95,110,97,118,105,0);
    let predictiono = String.fromCharCode(111,118,101,114,114,105,100,105,110,103,95,55,95,53,0);
    let privilegeZ = String.fromCharCode(101,120,112,108,105,99,105,116,108,121,95,50,95,56,0);
    let auto_r3: Map<any, any> = new Map([[String.fromCharCode(97,108,108,101,116,95,114,95,51,53,0),true ], [String.fromCharCode(100,97,114,119,105,110,95,121,95,56,51,0),false ], [String.fromCharCode(97,117,116,111,105,110,99,114,101,109,101,110,116,95,107,95,49,51,0),false ]]);
    let pushg: Map<any, any> = new Map([[String.fromCharCode(115,95,49,48,48,95,98,111,111,116,104,0),String.fromCharCode(98,114,111,119,115,101,95,100,95,49,53,0)], [String.fromCharCode(122,95,55,95,100,105,114,101,99,116,111,114,121,0),String.fromCharCode(102,95,57,50,95,112,114,101,112,114,111,99,101,115,115,0)], [String.fromCharCode(109,118,99,111,109,112,111,110,101,110,116,95,54,95,51,50,0),String.fromCharCode(97,115,115,101,114,116,95,57,95,57,55,0)]]);
    let time_xU = 0.0;
    let rulesL = String.fromCharCode(112,111,115,116,112,114,111,99,114,101,115,95,111,95,51,48,0);
    let downloadedE = 2.0;
       let whitew = 1.0;
       let ajaxX = 1.0;
       let libfbM: Array<any> = [981, 721, 950];
         libfbM.push(2 / (Math.max(parseInt(`${ajaxX}`), 8)));
      while (2 >= (3 & libfbM.length) || (parseInt(`${whitew}`) / (Math.max(libfbM.length, 5))) >= 3) {
          let libruntimeexecutor0 = String.fromCharCode(107,95,52,52,95,98,111,117,110,100,115,112,101,99,105,102,105,99,0);
          let videocommonh = 2.0;
         libfbM.push(parseInt(`${whitew}`));
         libruntimeexecutor0 += `${parseInt(`${videocommonh}`) / (Math.max(libruntimeexecutor0.length, 3))}`;
         videocommonh += libruntimeexecutor0.length | 1;
         break;
      }
      if (libfbM.length >= 1) {
         libfbM.push(parseInt(`${ajaxX}`));
      }
          let bridger = 5.0;
          let distV = String.fromCharCode(107,95,51,50,95,107,102,119,114,105,116,101,0);
          let inouttargetredz = String.fromCharCode(119,95,51,95,105,109,112,108,105,99,105,116,101,108,121,0);
         libfbM = [parseInt(`${ajaxX}`) / (Math.max(distV.length, 6))];
         bridger -= parseInt(`${bridger}`) ^ inouttargetredz.length;
         distV += `${inouttargetredz.length | parseInt(`${bridger}`)}`;
       let logouser8 = 0;
      for (let k = 0; k < 1; k++) {
         whitew *= 2 - parseInt(`${ajaxX}`);
      }
      let upgrade8 = 9334291.0 >= whitew;
      do {
          let viewsS = String.fromCharCode(99,95,57,52,95,97,99,99,117,109,117,108,97,116,101,0);
          let showM: Array<any> = [748, 700, 769];
         whitew -= viewsS.length;
         viewsS = `${showM.length / (Math.max(1, 1))}`;
         showM.push(showM.length % (Math.max(showM.length, 9)));
         if (upgrade8) {
            break;
         }
      } while (((whitew * logouser8) >= 5.0 || 5.0 >= (whitew * logouser8)) && upgrade8);
      let redgoalR = 7564640 <= libfbM.length;
      do {
         libfbM = [parseInt(`${ajaxX}`)];
         if (redgoalR) {
            break;
         }
      } while (redgoalR && (!libfbM.includes(whitew)));
      while ((ajaxX - whitew) == 4.19 || 4.19 == (whitew - ajaxX)) {
         ajaxX += 3 + parseInt(`${ajaxX}`);
         break;
      }
      privilegeZ += `${libfbM.length * gemfileD}`;
       let sider: Map<any, any> = new Map([[String.fromCharCode(110,111,110,110,117,108,108,105,110,99,111,109,105,110,103,95,122,95,52,53,0),860], [String.fromCharCode(97,112,116,120,104,100,95,117,95,51,0),44]]);
       let privatechatbgI = 5.0;
      let internetp = privatechatbgI >= 5636264.0;
      do {
         privatechatbgI /= Math.max(parseFloat(`${2 + parseInt(`${privatechatbgI}`)}`), 5);
         if (internetp) {
            break;
         }
      } while (internetp && ((2.63 * privatechatbgI) < 3.60 || 2 < (1 >> (Math.min(2, Math.abs(sider.size))))));
      while (!Array.from(sider.keys()).includes(`${privatechatbgI}`)) {
          let friendsv = String.fromCharCode(112,116,115,101,115,95,53,95,49,0);
         privatechatbgI /= Math.max(parseFloat(`${1}`), 2);
         friendsv += `${friendsv.length}`;
         break;
      }
      let libavcodecQ = 7322914.0 <= privatechatbgI;
      do {
         privatechatbgI /= Math.max(parseFloat(`${parseInt(`${privatechatbgI}`) >> (Math.min(Math.abs(3), 1))}`), 4);
         if (libavcodecQ) {
            break;
         }
      } while (libavcodecQ && ((3.22 * privatechatbgI) == 3.6 && (parseInt(`${privatechatbgI}`) * sider.size) == 1));
      while (sider.get(`${privatechatbgI}`) != null) {
          let libreanimatedr = 3;
          let memberT: Array<any> = [933, 303];
          let whistle9: Array<any> = [862, 231, 413];
         sider = new Map([[`${memberT.length}`, memberT.length]]);
         libreanimatedr *= libreanimatedr;
         whistle9 = [1];
         break;
      }
         privatechatbgI -= parseFloat(`${parseInt(`${privatechatbgI}`) - 3}`);
          let watchnowbgk = 5;
          let footballfielda: Array<any> = [218, 208, 851];
         privatechatbgI -= parseFloat(`${sider.size}`);
         watchnowbgk *= watchnowbgk / 3;
         footballfielda = [3];
      notificationgrayW = "3";
      predictiono += `${fullscreenmaxW.length + 1}`;
      pushg.set(`${predictiono}`, 1);
       let iconP = 2.0;
       let matchg = 0.0;
          let componentregistryS = true;
          let cnews0 = 0;
          let statisticsactivez: Map<any, any> = new Map([[String.fromCharCode(98,111,120,101,100,95,122,95,50,54,0),637], [String.fromCharCode(118,105,115,117,97,108,105,122,97,116,105,111,110,95,50,95,52,49,0),799], [String.fromCharCode(112,114,101,99,105,115,105,111,110,95,57,95,51,56,0),954]]);
         iconP -= parseFloat(`${cnews0}`);
         componentregistryS = null == statisticsactivez.get(`${componentregistryS}`);
         cnews0 *= (1 >> (Math.min(5, Math.abs((componentregistryS ? 5 : 5)))));
         statisticsactivez = new Map([[`${statisticsactivez.size}`, statisticsactivez.size * 2]]);
         matchg += parseFloat(`${2}`);
         iconP -= parseFloat(`${1 ^ parseInt(`${iconP}`)}`);
      let chatj = 5013889.0 <= matchg;
      do {
          let launch3 = String.fromCharCode(100,101,108,116,97,115,95,102,95,49,51,0);
          let bnewinterstitialV = 1.0;
         matchg /= Math.max(parseFloat(`${parseInt(`${bnewinterstitialV}`)}`), 3);
         launch3 = `${launch3.length | 2}`;
         if (chatj) {
            break;
         }
      } while ((4.8 > iconP) && chatj);
      for (let b = 0; b < 3; b++) {
         iconP += parseFloat(`${2 ^ parseInt(`${iconP}`)}`);
      }
          let libtoba = String.fromCharCode(105,115,109,101,109,115,101,116,95,122,95,55,55,0);
          let yinit_266: Array<any> = [597, 577];
         matchg *= parseFloat(`${1 - libtoba.length}`);
         libtoba += `${yinit_266.length >> (Math.min(2, yinit_266.length))}`;
      notificationgrayW += `${privilegeZ.length}`;
   let stringE = String.fromCharCode(119,48,108,0) == privilegeZ;
   do {
       let changeF: Array<any> = [804, 460, 455];
      if (4 == (changeF.length & 1)) {
          let switch_2p: Map<any, any> = new Map([[String.fromCharCode(114,95,53,48,95,115,116,105,99,107,101,114,115,0),String.fromCharCode(116,95,49,53,95,116,103,99,97,108,108,115,0)], [String.fromCharCode(116,119,114,112,95,120,95,55,53,0),String.fromCharCode(114,108,111,116,116,105,101,95,108,95,51,54,0)], [String.fromCharCode(103,105,103,97,103,114,111,117,112,95,106,95,51,55,0),String.fromCharCode(121,95,52,50,95,105,110,116,114,97,120,109,98,117,118,0)]]);
          let confirmation_ = String.fromCharCode(99,111,112,121,97,100,100,95,100,95,53,53,0);
         changeF = [1 >> (Math.min(1, Math.abs(switch_2p.size)))];
         switch_2p = new Map([[confirmation_, confirmation_.length]]);
      }
      for (let u = 0; u < 2; u++) {
          let iconorientationv = String.fromCharCode(104,95,55,95,115,109,101,97,114,0);
          let controlsi = 5;
          let cancela = String.fromCharCode(100,95,52,53,95,104,101,120,100,117,109,112,0);
         changeF.push(changeF.length);
         iconorientationv += `${2 ^ iconorientationv.length}`;
         controlsi ^= cancela.length - 2;
         cancela += `${iconorientationv.length}`;
      }
      if (5 < (1 * changeF.length)) {
          let thailandi = String.fromCharCode(111,102,102,108,105,110,101,95,113,95,54,48,0);
          let defaultteam3 = 3.0;
          let righth = String.fromCharCode(103,95,55,50,95,119,104,101,116,104,101,114,0);
          let iconuserM = String.fromCharCode(119,95,49,56,95,105,102,102,116,0);
         changeF = [(iconuserM == String.fromCharCode(80,0) ? parseInt(`${defaultteam3}`) : iconuserM.length)];
         thailandi += `${righth.length & 3}`;
         defaultteam3 -= (righth == String.fromCharCode(77,0) ? thailandi.length : righth.length);
      }
      privilegeZ = `${2 >> (Math.min(5, changeF.length))}`;
      if (stringE) {
         break;
      }
   } while ((privilegeZ.length <= 1) && stringE);
   for (let a = 0; a < 2; a++) {
       let mimez = false;
       let libimagepipeline4 = String.fromCharCode(103,95,54,52,95,110,101,116,0);
       let anytimed = String.fromCharCode(101,109,117,108,97,116,111,114,95,102,95,51,49,0);
      for (let n = 0; n < 3; n++) {
          let airbnbstar1 = String.fromCharCode(118,95,51,55,95,105,99,101,0);
          let emojim: Map<any, any> = new Map([[String.fromCharCode(115,117,109,109,97,114,121,95,100,95,55,49,0),147], [String.fromCharCode(110,117,108,108,105,102,95,119,95,49,53,0),876], [String.fromCharCode(115,95,56,56,95,104,97,115,104,116,97,103,0),984]]);
          let switch_2m = String.fromCharCode(112,105,120,108,101,116,95,108,95,50,56,0);
          let sharewhite6: Map<any, any> = new Map([[String.fromCharCode(100,97,115,104,98,111,97,114,100,95,100,95,52,53,0),751], [String.fromCharCode(113,95,57,53,95,100,101,99,111,114,97,116,101,0),614], [String.fromCharCode(102,95,49,55,95,115,105,103,105,108,108,0),212]]);
          let profilec = 2.0;
         libimagepipeline4 += `${2 + libimagepipeline4.length}`;
         airbnbstar1 += `${3 ^ switch_2m.length}`;
         emojim = new Map([[switch_2m, switch_2m.length]]);
         sharewhite6 = new Map([[switch_2m, (String.fromCharCode(99,0) == switch_2m ? parseInt(`${profilec}`) : switch_2m.length)]]);
         profilec *= switch_2m.length | 3;
      }
         libimagepipeline4 += "1";
         mimez = (anytimed.length - libimagepipeline4.length) > 25;
      if (!libimagepipeline4.endsWith(`${anytimed.length}`)) {
          let typesv = 2.0;
         libimagepipeline4 += `${(2 & (mimez ? 2 : 2))}`;
         typesv -= parseFloat(`${parseInt(`${typesv}`)}`);
      }
      if (2 < libimagepipeline4.length) {
          let network0 = String.fromCharCode(117,95,55,55,95,116,105,109,101,100,0);
         libimagepipeline4 += `${(libimagepipeline4 == String.fromCharCode(73,0) ? (mimez ? 5 : 5) : libimagepipeline4.length)}`;
         network0 += `${(network0 == String.fromCharCode(102,0) ? network0.length : network0.length)}`;
      }
      let playlistF = anytimed == String.fromCharCode(102,118,48,0);
      do {
          let anewst: Map<any, any> = new Map([[String.fromCharCode(101,95,55,57,95,116,105,109,101,0),true ], [String.fromCharCode(108,95,56,49,95,109,97,110,97,103,101,115,0),true ]]);
          let footballtrophy1: Map<any, any> = new Map([[String.fromCharCode(99,104,97,115,101,95,103,95,49,50,0),716], [String.fromCharCode(121,95,52,52,95,116,114,97,110,115,112,111,114,116,0),106], [String.fromCharCode(111,112,116,105,109,105,122,101,114,95,120,95,52,56,0),431]]);
          let mapbufferr = true;
          let nativemodules = String.fromCharCode(117,95,55,54,95,98,117,114,110,0);
         anytimed += `${nativemodules.length}`;
         anewst = new Map([[`${footballtrophy1.size}`, 2 + anewst.size]]);
         footballtrophy1.set(`${anewst.size}`, anewst.size);
         mapbufferr = 10 < anewst.size;
         nativemodules = `${anewst.size}`;
         if (playlistF) {
            break;
         }
      } while ((!mimez) && playlistF);
      while (3 > libimagepipeline4.length) {
         libimagepipeline4 += `${anytimed.length}`;
         break;
      }
         libimagepipeline4 = `${(anytimed == String.fromCharCode(113,0) ? (mimez ? 2 : 5) : anytimed.length)}`;
      if (!mimez) {
         libimagepipeline4 = `${anytimed.length}`;
      }
      predictiono += `${auto_r3.size % (Math.max(fullscreenmaxW.length, 9))}`;
   }
   while (fullscreenmaxW.length < 4) {
      fullscreenmaxW += `${(String.fromCharCode(68,0) == fullscreenmaxW ? gemfileD : fullscreenmaxW.length)}`;
      break;
   }
   for (let s = 0; s < 3; s++) {
       let smallsoundj = 5.0;
       let airbnbstar_: Array<any> = [String.fromCharCode(107,98,100,119,105,110,95,110,95,57,48,0), String.fromCharCode(97,115,121,110,99,104,114,111,110,111,117,115,108,121,95,109,95,50,55,0), String.fromCharCode(101,116,104,95,54,95,51,52,0)];
       let calendarW = 3;
      if (calendarW <= 3) {
          let quest3 = String.fromCharCode(99,111,108,108,97,116,105,110,103,95,106,95,51,57,0);
          let arrowselectdownk = 3;
         airbnbstar_ = [2 - arrowselectdownk];
         quest3 += `${1 & quest3.length}`;
         arrowselectdownk += 3;
      }
      while ((calendarW ^ airbnbstar_.length) > 1) {
         airbnbstar_ = [2];
         break;
      }
         airbnbstar_ = [calendarW];
         airbnbstar_ = [airbnbstar_.length << (Math.min(Math.abs(3), 2))];
          let unselectedR = String.fromCharCode(103,101,116,120,118,97,114,95,101,95,53,52,0);
         airbnbstar_ = [airbnbstar_.length];
         unselectedR = `${(String.fromCharCode(84,0) == unselectedR ? unselectedR.length : unselectedR.length)}`;
      for (let t = 0; t < 2; t++) {
          let fastv = 1;
          let sharewhitef = false;
          let sideS = 3.0;
          let expandH = String.fromCharCode(115,117,98,112,101,108,95,105,95,56,54,0);
          let iconorientationh = String.fromCharCode(118,105,115,105,116,111,114,95,104,95,52,49,0);
         calendarW <<= Math.min(5, Math.abs(fastv ^ 1));
         fastv -= expandH.length ^ 1;
         sharewhitef = !sharewhitef;
         sideS *= parseFloat(`${parseInt(`${sideS}`) >> (Math.min(expandH.length, 1))}`);
         iconorientationh = `${((sharewhitef ? 2 : 5) % (Math.max(7, iconorientationh.length)))}`;
      }
      let disconnectedlogoO = smallsoundj <= 6051621.0;
      do {
          let greenL = 4.0;
          let orangez = String.fromCharCode(97,95,55,95,115,105,110,100,101,120,0);
          let iconvieweru = String.fromCharCode(110,101,103,97,116,101,95,104,95,55,54,0);
          let interstitialQ = 3;
         smallsoundj += (parseFloat(`${String.fromCharCode(49,0) == iconvieweru ? iconvieweru.length : calendarW}`));
         greenL += 2;
         orangez += `${orangez.length}`;
         interstitialQ *= (String.fromCharCode(65,0) == orangez ? parseInt(`${greenL}`) : orangez.length);
         if (disconnectedlogoO) {
            break;
         }
      } while (disconnectedlogoO && (3 == (airbnbstar_.length * 2) && (airbnbstar_.length / 2) == 1));
         smallsoundj *= parseFloat(`${airbnbstar_.length}`);
      while (5.34 < (5.14 + smallsoundj) || 4.59 < (smallsoundj + 5.14)) {
         smallsoundj /= Math.max(parseFloat(`${airbnbstar_.length + 3}`), 3);
         break;
      }
      fullscreenmaxW += `${auto_r3.size}`;
   }
   while (auto_r3.size > notificationgrayW.length) {
      notificationgrayW += `${parseInt(`${time_xU}`) + notificationgrayW.length}`;
      break;
   }
      auto_r3 = new Map([[predictiono, 3]]);
      fullscreenmaxW += `${pushg.size << (Math.min(privilegeZ.length, 3))}`;
      time_xU += fullscreenmaxW.length;
   if (5.97 < (rulesL.length + time_xU) || (parseInt(`${time_xU}`) + rulesL.length) < 1) {
      time_xU *= 1;
   }
      auto_r3.set(fullscreenmaxW, notificationgrayW.length);

        setShowBottomSheet(true);
    }

    useEffect(() => {
        setShowVod(true);
        console.log("MOUNT - " + vod.mini_video_title);

        return () => {
            console.log("UNMOUNT - " + vod.mini_video_title);
            setShowVod(false);
        }
    }, [])

    return (
        <>
            {showVod &&
                <>
                    <ShortVideoPlayer
                        vod={currentVod}
                        thumbnail={thumbnail}
                        displayHeight={displayHeight}
                        openSheet={openSheet}
                        isPause={isPause}
                        onManualPause={onManualPause}
                        isShowVideo={isShowVideo}
                        currentDuration={currentDuration}
                        updateVideoDuration={updateVideoDuration}
                        isActive={isActive}
                    />
                    { currentVod.mini_video_heji_id !== 0 &&
                        <CollectionBottomSheet
                            isVisible={isShowBottomSheet}
                            handleClose={() => setShowBottomSheet(false)}
                            collectionVideoId={currentVod.mini_video_id}
                            collectionId={currentVod.mini_video_heji_id}
                            collectionName={currentVod.mini_video_collection_title}
                            changeEpisode={changeEpisode}
                        />
                    }
                </>
            }
        </>
    )

}

export default memo(ShortVod)