import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { wawaWithCrown, wawaSellProfileinactive } from '@type/wawa_gradlew';
import { playVod, viewPlaylistDetails } from '@redux/actions/wawa_indicator';
import { View, StyleSheet, Text, TouchableOpacity, FlatList } from 'react-native';
import RightIcon from '@static/images/combinePredictionbuttonSelect.svg';
import VodCard from '../vod/wawa_mimo_footballtrophy';
import { useAppDispatch } from '@hooks/wawa_root';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import wawa_dacccfaabfbcbadeebddcabacdffdbc_video from '../../../Umeng/wawa_dacccfaabfbcbadeebddcabacdffdbc_video';

interface wawaAwayShow {
  playlist: wawaWithCrown;
  titleStyle?: TextStyle;
}

type wawaBellreminderDisconnected = {
  item: wawaSellProfileinactive;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: wawaAwayShow) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let penaltyshootnogoal1 = true;
    let gradleV = String.fromCharCode(112,95,56,50,0);
    let overN = String.fromCharCode(108,115,112,108,112,99,95,98,95,57,54,0);
    let penaltyshoott = false;
    let megaphone2 = true;
    let sharedM: Map<any, any> = new Map([[String.fromCharCode(109,95,54,54,95,109,97,120,101,100,0),String.fromCharCode(113,117,101,114,121,95,119,95,52,52,0)], [String.fromCharCode(117,95,54,48,0),String.fromCharCode(119,95,52,49,95,97,97,99,115,98,114,100,97,116,97,0)], [String.fromCharCode(114,101,112,111,115,105,116,105,111,110,95,104,95,57,0),String.fromCharCode(108,97,112,112,101,100,95,115,95,53,49,0)]]);
    let hooksc = 3;
    let launcher7 = String.fromCharCode(114,111,116,97,116,101,95,97,95,51,52,0);
    let whiteanimationlivei = 0.0;
    let launchP = String.fromCharCode(98,95,51,48,95,115,116,97,108,101,0);
    let roomN: Map<any, any> = new Map([[String.fromCharCode(106,95,56,49,95,120,121,119,104,0),12], [String.fromCharCode(105,95,50,95,104,97,110,100,111,118,101,114,0),828]]);
    let policy6 = String.fromCharCode(119,95,53,49,95,115,121,109,98,111,108,105,99,97,116,101,0);
    let shootd = 4.0;
   let matchesC = overN == String.fromCharCode(119,120,95,55,115,48,0);
   do {
      overN = `${sharedM.size | 3}`;
      if (matchesC) {
         break;
      }
   } while ((megaphone2) && matchesC);
   for (let k = 0; k < 3; k++) {
      hooksc += 2 << (Math.min(5, launcher7.length));
   }
       let iconpointscorer: Array<any> = [281, 532];
       let statsnomoredatal = false;
       let bgvipxvodG = 4.0;
       let libfbf = 5.0;
       let mbjscommonc = 0.0;
      for (let r = 0; r < 1; r++) {
         iconpointscorer = [1];
      }
         libfbf += parseInt(`${mbjscommonc}`);
         mbjscommonc += (2 + (statsnomoredatal ? 4 : 5));
       let backwardA = String.fromCharCode(103,101,111,99,111,100,101,114,95,114,95,50,0);
       let pathj = String.fromCharCode(115,99,97,108,101,114,95,111,95,53,53,0);
      while (statsnomoredatal && (bgvipxvodG * 2.9) >= 4.21) {
         bgvipxvodG -= ((statsnomoredatal ? 2 : 1) | 1);
         break;
      }
      let headerg = 7196993 >= backwardA.length;
      do {
          let securityo = 4.0;
         backwardA += `${parseInt(`${libfbf}`) << (Math.min(Math.abs(parseInt(`${bgvipxvodG}`)), 2))}`;
         securityo += 1;
         if (headerg) {
            break;
         }
      } while (headerg && (bgvipxvodG == 5.60));
      if (mbjscommonc <= 3.10 || (mbjscommonc * 3.10) <= 2.86) {
          let playw = 4.0;
          let orangedownarrowj = 2.0;
         statsnomoredatal = (playw * libfbf) == 25.94;
         playw *= parseFloat(`${parseInt(`${orangedownarrowj}`) % 2}`);
         orangedownarrowj -= parseFloat(`${3 ^ parseInt(`${orangedownarrowj}`)}`);
      }
          let navigation8 = 4.0;
         statsnomoredatal = 63.30 > (navigation8 + bgvipxvodG);
      gradleV += `${(launchP.length >> (Math.min(4, Math.abs((megaphone2 ? 3 : 3)))))}`;
      hooksc >>= Math.min(2, Math.abs(parseInt(`${whiteanimationlivei}`) - 2));
   for (let f = 0; f < 1; f++) {
      penaltyshoott = launcher7 == String.fromCharCode(80,0);
   }

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

      sharedM = new Map([[overN, (overN.length - (penaltyshoott ? 5 : 3))]]);
   let qaag8 = 5286733.0 <= whiteanimationlivei;
   do {
       let wnewsshareF: Array<any> = [String.fromCharCode(114,101,100,105,114,101,99,116,111,114,95,108,95,52,54,0), String.fromCharCode(102,105,110,100,101,114,95,56,95,52,57,0), String.fromCharCode(100,105,115,116,114,97,99,116,97,98,108,101,95,50,95,53,53,0)];
       let indicatorO = String.fromCharCode(99,104,97,114,109,97,112,95,112,95,50,48,0);
       let bellv = 2;
      while (!indicatorO.startsWith(`${wnewsshareF.length}`)) {
         indicatorO += `${wnewsshareF.length}`;
         break;
      }
         indicatorO += "2";
          let ksad3 = 2.0;
         wnewsshareF = [1];
         ksad3 /= Math.max(parseFloat(`${parseInt(`${ksad3}`) << (Math.min(5, Math.abs(3)))}`), 1);
       let chinasameA = true;
       let iconwatchr = true;
       let libavformate = 3.0;
       let livem = 1.0;
      let backiconj = bellv >= 8966170;
      do {
          let flagk = String.fromCharCode(109,111,118,101,110,99,99,101,110,99,95,53,95,57,49,0);
          let playercommonf = false;
         bellv %= Math.max(((playercommonf ? 3 : 2) & parseInt(`${livem}`)), 3);
         flagk = `${flagk.length}`;
         playercommonf = flagk.length <= flagk.length;
         if (backiconj) {
            break;
         }
      } while ((3 < (bellv << (Math.min(indicatorO.length, 5))) && (bellv << (Math.min(indicatorO.length, 2))) < 3) && backiconj);
         bellv += indicatorO.length - 1;
      let ewardedA = iconwatchr ? !iconwatchr : iconwatchr;
      do {
          let typingloading5 = String.fromCharCode(118,95,55,55,95,97,116,116,97,99,104,109,101,110,116,0);
          let malaysia2: Array<any> = [824, 342, 84];
         iconwatchr = !chinasameA && iconwatchr;
         typingloading5 = `${typingloading5.length}`;
         malaysia2 = [typingloading5.length / (Math.max(7, malaysia2.length))];
         if (ewardedA) {
            break;
         }
      } while ((3.42 == (livem + 1.83) || livem == 1.83) && ewardedA);
       let league3 = 0;
       let smallC = 2;
      whiteanimationlivei /= Math.max(1, (hooksc + (megaphone2 ? 4 : 4)));
      if (qaag8) {
         break;
      }
   } while ((penaltyshoott) && qaag8);
      penaltyshoott = !megaphone2;
      megaphone2 = gradleV.length >= 60;
   while ((launcher7.length / (Math.max(6, parseInt(`${whiteanimationlivei}`)))) < 5 || 5 < (parseInt(`${whiteanimationlivei}`) / (Math.max(launcher7.length, 3)))) {
      launcher7 += `${((penaltyshoott ? 1 : 1) ^ (megaphone2 ? 3 : 2))}`;
      break;
   }
    wawa_dacccfaabfbcbadeebddcabacdffdbc_video.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: wawaBellreminderDisconnected) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放', {
          vod_id: item.vod_id,
        });

        
        wawa_dacccfaabfbcbadeebddcabacdffdbc_video.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
      vod_pic_list={item.vod_pic_list}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <RightIcon
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
