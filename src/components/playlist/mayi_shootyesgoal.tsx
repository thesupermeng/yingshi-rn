import React, { useEffect, useState, useCallback, useMemo, memo } from 'react';
import { useNavigation, useTheme } from '@react-navigation/native';
import { mayi_Runtime, mayi_EmptyGradle } from '@type/mayi_green';
import { playVod, viewPlaylistDetails } from '@redux/actions/mayi_goallogo';
import { View, StyleSheet, Text, TouchableOpacity, FlatList } from 'react-native';
import RightIcon from '@static/images/scorepopsoundDefaultprofilepicDycreator.svg';
import VodCard from '../vod/mayi_pressure_footballfiledlayout';
import { useAppDispatch } from '@hooks/mayi_redirect';
import { TextStyle } from 'react-native';
import appsFlyer from 'react-native-appsflyer';
import mayi_push from '../../../Umeng/mayi_push';

interface mayi_GoogleViews {
  playlist: mayi_Runtime;
  titleStyle?: TextStyle;
}

type mayi_EventLibnms = {
  item: mayi_EmptyGradle;
  index: number;
};

function VodPlaylist({ playlist, titleStyle }: mayi_GoogleViews) {
  const { textVariants, spacing, colors, icons } = useTheme();
  const navigator = useNavigation();
  const dispatch = useAppDispatch();

  const viewMore = () => {
       let upgradeE = 4;
    let crownm = 2.0;
    let starw = 3;
    let exampleimageq: Map<any, any> = new Map([[String.fromCharCode(116,95,56,57,95,115,99,116,112,99,111,110,110,0),388], [String.fromCharCode(100,95,53,54,95,115,111,117,114,99,101,115,0),742], [String.fromCharCode(117,95,53,50,95,109,105,110,102,0),806]]);
    let connectionb = 5.0;
    let bottomk = 1;
    let traminiF = String.fromCharCode(115,95,55,52,95,99,111,110,110,0);
    let grayY = 1.0;
    let pageJ: Map<any, any> = new Map([[String.fromCharCode(116,114,97,110,115,112,111,115,101,120,95,111,95,49,50,0),772], [String.fromCharCode(109,95,55,50,95,105,102,111,114,119,97,114,100,0),58], [String.fromCharCode(113,95,50,54,95,114,101,100,118,0),618]]);
    let gifgoalbgz = String.fromCharCode(118,95,52,50,95,99,97,110,99,101,108,0);
    let shirta = 4;
    let iconnotificationnewv = 4.0;
    let libjsim: Array<any> = [548, 498];
    let connectionz = 4.0;
   let sigmobd = traminiF.length >= 9772015;
   do {
      traminiF += `${parseInt(`${grayY}`) & exampleimageq.size}`;
      if (sigmobd) {
         break;
      }
   } while (sigmobd && ((bottomk - 1) > 5 && 2 > (1 - traminiF.length)));
       let successM = String.fromCharCode(103,95,52,50,95,109,101,114,103,101,100,0);
       let overP = true;
       let buildi = false;
      if (buildi) {
          let gpayZ = true;
          let alertR = String.fromCharCode(108,95,50,53,95,97,120,105,120,0);
          let libapminsightb7: Map<any, any> = new Map([[String.fromCharCode(105,95,51,53,95,107,117,107,105,0),934], [String.fromCharCode(99,111,114,114,101,99,116,95,102,95,57,53,0),819]]);
          let unreadz = 4;
         successM = "1";
         gpayZ = 65 <= unreadz && 65 <= alertR.length;
         alertR = `${libapminsightb7.size}`;
         libapminsightb7 = new Map([[`${libapminsightb7.size}`, libapminsightb7.size ^ 1]]);
         unreadz /= Math.max(4, 2 | unreadz);
      }
         overP = !buildi;
         overP = successM.length <= 39;
          let logor: Array<any> = [240, 333, 968];
          let securityS = String.fromCharCode(107,100,102,95,49,95,52,55,0);
          let whistle0 = 2.0;
         buildi = !overP;
         logor = [securityS.length];
         securityS = `${securityS.length}`;
         whistle0 /= Math.max(parseInt(`${whistle0}`), 2);
       let matchdetailbga = 1.0;
      while (5.89 < matchdetailbga) {
         matchdetailbga += 2;
         break;
      }
         buildi = !buildi || !overP;
         overP = !successM.endsWith(`${matchdetailbga}`);
          let emojid = 3;
          let imagenetworkerrx = String.fromCharCode(115,105,110,107,115,95,121,95,53,55,0);
          let matchinactiveW = true;
         successM += `${(String.fromCharCode(69,0) == imagenetworkerrx ? imagenetworkerrx.length : (matchinactiveW ? 3 : 1))}`;
         emojid &= 2;
      bottomk ^= 1 * pageJ.size;
      traminiF = `${parseInt(`${connectionb}`)}`;
      grayY -= pageJ.size - 2;

    dispatch(viewPlaylistDetails(playlist));
    navigator.navigate('PlaylistDetail', { topic_id: playlist.topic_id });

    

   let downloaderI = 7077340 >= upgradeE;
   do {
      upgradeE -= parseInt(`${crownm}`) + 3;
      if (downloaderI) {
         break;
      }
   } while (downloaderI && (2 == (upgradeE & gifgoalbgz.length)));
       let pointJ = String.fromCharCode(118,95,53,54,95,98,111,111,107,0);
       let libglogJ = 0.0;
      let z_countG = libglogJ >= 7879546.0;
      do {
         libglogJ *= parseFloat(`${3}`);
         if (z_countG) {
            break;
         }
      } while ((parseInt(`${libglogJ}`) < pointJ.length) && z_countG);
          let carouselY = String.fromCharCode(107,95,57,49,95,97,110,115,105,0);
         libglogJ -= parseFloat(`${parseInt(`${libglogJ}`)}`);
         carouselY = `${carouselY.length}`;
          let smallorangemane = 2.0;
          let textlayoutmanagerV = String.fromCharCode(109,95,53,56,95,117,110,104,105,100,101,0);
         pointJ += "2";
         smallorangemane += parseFloat(`${2}`);
         textlayoutmanagerV += `${(String.fromCharCode(121,0) == textlayoutmanagerV ? textlayoutmanagerV.length : parseInt(`${smallorangemane}`))}`;
          let combiner = 1.0;
         pointJ += `${pointJ.length & parseInt(`${libglogJ}`)}`;
         combiner /= Math.max(parseFloat(`${parseInt(`${combiner}`)}`), 4);
      let schedulerJ = libglogJ >= 7295781.0;
      do {
         libglogJ -= parseFloat(`${pointJ.length}`);
         if (schedulerJ) {
            break;
         }
      } while ((3.17 < libglogJ) && schedulerJ);
      while ((1 | pointJ.length) > 1) {
          let rewardvideov = 2.0;
          let basketballtrophyQ = 2.0;
         pointJ += `${parseInt(`${libglogJ}`) << (Math.min(1, Math.abs(1)))}`;
         rewardvideov -= parseInt(`${basketballtrophyQ}`);
         break;
      }
      starw ^= 1 ^ parseInt(`${grayY}`);
   for (let o = 0; o < 3; o++) {
      traminiF = "3";
   }
      grayY *= upgradeE ^ starw;
    mayi_push.playlistClickAnalytics({
      topic_id: playlist.topic_id.toString(),
      topic_name: playlist.topic_name,
    });
    
  };

  useEffect(() => {
    const eventName = 'topic';
    const eventValues = {
      topic_name: playlist.topic_name,
    };

    
    
    
    
    
    
    
    
    
    
  }, []);

  const renderItem = useCallback(({ item, index }: mayi_EventLibnms) => (
    <VodCard
      vod_name={item.vod_name}
      vodImageStyle={{ width: 120, height: 180 }}
      vod_pic={item.vod_pic}
      onPress={() => {
        dispatch(playVod(item));
        navigator.navigate('播放', {
          vod_id: item.vod_id,
        });

        
        mayi_push.playlistClickAnalytics({
          topic_id: playlist.topic_id.toString(),
          topic_name: playlist.topic_name,
        });
        
      }}
      index={index}
      vod_pic_list={item.vod_pic_list}
    />
  ), []);

  return (
    <View style={{ ...styles.playlist, gap: spacing.m }}>
      <TouchableOpacity onPress={viewMore}>
        <View
          style={{
            paddingLeft: spacing.sideOffset,
            paddingRight: spacing.sideOffset,
            gap: spacing.s,
          }}>
          <View style={styles.header}>
            <Text style={{ ...textVariants.bigHeader, ...titleStyle }}>
              {playlist.topic_name}
            </Text>

            <RightIcon
              color={colors.text}
              height={icons.sizes.l}
              width={icons.sizes.l}
            />
          </View>
          <Text
            numberOfLines={3}
            style={{ ...textVariants.small, color: colors.text, flex: 1 }}>
            {playlist.topic_blurb}
          </Text>
        </View>
      </TouchableOpacity>
      <View style={{ paddingLeft: spacing.sideOffset }}>
        <FlatList
          initialNumToRender={3}
          maxToRenderPerBatch={3}
          windowSize={5}
          data={playlist?.vod_list}
          horizontal
          showsHorizontalScrollIndicator={false}
          renderItem={renderItem}
        />
      </View>
    </View>
  );
}

export default memo(VodPlaylist);

const styles = StyleSheet.create({
  playlist: {
    marginBottom: 12,
  },
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
