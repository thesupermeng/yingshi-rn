import React, {useRef, useEffect, useCallback} from 'react';
import {StyleSheet} from 'react-native';
import {useNavigation, useTheme} from '@react-navigation/native';
import {useAppDispatch} from '@hooks/mayi_redirect';
import {FlatList} from 'react-native-gesture-handler';
import {mayi_Default} from '../../Sports/types/mayi_homeinactive';
import VodSportCard from './mayi_iconpointscore';
import mayi_push from '../../../Umeng/mayi_push';

interface mayi_GoogleViews {
  params?: any[];
  horizontal?: boolean;
  sportList?: Array<mayi_Default>;
  matchTypeID?: number;
  status?: number;
  isRefreshing?: boolean;
}

type mayi_ButtonWhite = {
  item: mayi_Default;
  index: number;
};

export default function VodSportsList(
  {sportList = [], isRefreshing}: mayi_GoogleViews,
  ref: any,
) {
  const navigation = useNavigation();
  const dispatch = useAppDispatch();
  const liveRef = useRef<FlatList>(null);

  const resetListPositionHandler = () => {
       let phoneP = String.fromCharCode(110,111,114,109,97,108,105,115,101,95,104,95,50,50,0);
    let awayteamfieldU = String.fromCharCode(109,117,108,116,105,116,97,98,108,101,95,122,95,50,52,0);
    let lightE = 3;
    let disconnectedz = true;
    let privatechatbgB: Map<any, any> = new Map([[String.fromCharCode(109,112,100,98,95,117,95,54,51,0),131], [String.fromCharCode(100,117,97,108,95,109,95,57,51,0),409]]);
    let backicona = 0.0;
    let shirtT = String.fromCharCode(106,95,54,56,95,116,119,105,99,101,0);
    let fastforwardb: Map<any, any> = new Map([[String.fromCharCode(100,101,110,105,101,100,95,119,95,57,53,0),814], [String.fromCharCode(117,95,51,49,95,122,101,114,111,122,101,114,111,0),158]]);
      phoneP = `${awayteamfieldU.length ^ 3}`;
   for (let m = 0; m < 1; m++) {
       let desc4 = 2.0;
       let homeplayerL = 1.0;
       let anytimee: Map<any, any> = new Map([[String.fromCharCode(105,110,116,101,114,112,111,108,95,56,95,49,53,0),51], [String.fromCharCode(110,95,54,54,95,109,97,120,106,0),342]]);
       let speca = String.fromCharCode(99,111,110,110,101,99,116,105,110,103,95,55,95,49,48,0);
         anytimee.set(speca, speca.length);
      let sinah = desc4 >= 6459337.0;
      do {
         desc4 /= Math.max(4, parseInt(`${desc4}`) % 1);
         if (sinah) {
            break;
         }
      } while (sinah && (3.9 <= (2 + homeplayerL)));
       let reportA = true;
       let issubN = true;
      for (let k = 0; k < 2; k++) {
          let sounds = true;
          let attributedstringO = 3.0;
          let iconarrowrightw = 1;
          let predictionactiveA = 5.0;
          let shrinkH: Map<any, any> = new Map([[String.fromCharCode(99,95,53,51,95,110,101,97,114,115,101,116,0),137], [String.fromCharCode(101,110,104,97,110,99,101,95,113,95,54,53,0),967]]);
         speca = `${parseInt(`${predictionactiveA}`) - parseInt(`${desc4}`)}`;
         sounds = !sounds;
         attributedstringO *= ((sounds ? 3 : 5) >> (Math.min(Math.abs(parseInt(`${attributedstringO}`)), 5)));
         iconarrowrightw ^= 3;
         predictionactiveA *= 2;
         shrinkH.set(`${iconarrowrightw}`, shrinkH.size);
      }
         homeplayerL -= anytimee.size % 1;
          let tooltipsm = 0.0;
         speca += `${((issubN ? 5 : 3) & parseInt(`${homeplayerL}`))}`;
         tooltipsm *= 2;
         anytimee = new Map([[`${homeplayerL}`, (speca == String.fromCharCode(73,0) ? speca.length : parseInt(`${homeplayerL}`))]]);
      let gradlewG = issubN ? !issubN : issubN;
      do {
          let albumE = String.fromCharCode(114,95,57,51,95,97,114,110,114,0);
          let agreementF = 1.0;
          let navigationB = false;
         issubN = desc4 >= 7.77;
         albumE = `${(albumE.length >> (Math.min(2, Math.abs((navigationB ? 4 : 5)))))}`;
         agreementF -= ((navigationB ? 1 : 3) >> (Math.min(albumE.length, 1)));
         if (gradlewG) {
            break;
         }
      } while ((4.45 > desc4 || (4.45 - desc4) > 5.51) && gradlewG);
      let notificationfillemptyX = anytimee.size <= 5144991;
      do {
         anytimee = new Map([[`${issubN}`, 3]]);
         if (notificationfillemptyX) {
            break;
         }
      } while (notificationfillemptyX && (4 >= (anytimee.size >> (Math.min(speca.length, 3)))));
         desc4 -= speca.length << (Math.min(2, Math.abs(anytimee.size)));
      for (let z = 0; z < 1; z++) {
          let libswresampleq = 2;
         homeplayerL *= anytimee.size - speca.length;
         libswresampleq -= libswresampleq;
      }
         reportA = anytimee.size > 19;
      shirtT = `${(parseInt(`${backicona}`) ^ (disconnectedz ? 2 : 5))}`;
   }
      privatechatbgB = new Map([[`${backicona}`, parseInt(`${backicona}`)]]);
   for (let f = 0; f < 1; f++) {
      awayteamfieldU = `${lightE * 2}`;
   }
   if ((5 & lightE) < 1) {
       let crownC = 3.0;
       let manifesta: Map<any, any> = new Map([[String.fromCharCode(110,95,51,51,95,115,104,105,109,109,101,114,0),752], [String.fromCharCode(109,97,120,101,100,95,100,95,55,0),503]]);
       let information9 = 1.0;
       let libimagepipeline3: Map<any, any> = new Map([[String.fromCharCode(97,95,54,48,0),735], [String.fromCharCode(102,95,54,49,95,112,99,97,112,0),365], [String.fromCharCode(111,95,55,56,95,104,101,97,100,115,101,116,0),96]]);
       let fullscreenmaxq = String.fromCharCode(105,95,52,54,95,112,114,101,100,105,99,116,105,118,101,0);
      while (crownC <= fullscreenmaxq.length) {
         crownC -= fullscreenmaxq.length;
         break;
      }
         crownC *= fullscreenmaxq.length & 2;
      let libffmpegkitN = crownC >= 8772078.0;
      do {
         crownC /= Math.max(manifesta.size, 1);
         if (libffmpegkitN) {
            break;
         }
      } while (libffmpegkitN && (3.88 <= (3.48 * crownC) && (5 ^ manifesta.size) <= 4));
      for (let r = 0; r < 2; r++) {
          let informationj = String.fromCharCode(116,95,50,52,95,115,101,108,101,99,116,105,110,103,0);
          let splashD: Map<any, any> = new Map([[String.fromCharCode(107,95,55,48,95,116,97,114,103,101,116,101,100,0),871], [String.fromCharCode(106,114,101,102,95,105,95,49,54,0),609], [String.fromCharCode(121,95,56,57,95,115,105,100,101,115,0),369]]);
          let overb = false;
         libimagepipeline3 = new Map([[`${splashD.size}`, informationj.length << (Math.min(5, Math.abs(splashD.size)))]]);
         informationj = "2";
      }
      while ((libimagepipeline3.size ^ 2) <= 1) {
         crownC += libimagepipeline3.size;
         break;
      }
      while ((1.75 * crownC) <= 1.10 && 3.34 <= (crownC * 1.75)) {
          let ranko: Array<any> = [94, 307, 162];
          let liveM = String.fromCharCode(122,95,49,50,95,104,115,99,97,108,101,114,0);
          let embedL = 1.0;
         libimagepipeline3 = new Map([[`${embedL}`, (String.fromCharCode(49,0) == liveM ? liveM.length : parseInt(`${embedL}`))]]);
         ranko = [1 ^ ranko.length];
         break;
      }
         information9 += 2 << (Math.min(5, Math.abs(libimagepipeline3.size)));
      if ((libimagepipeline3.size / 2) >= 5 && 2 >= (libimagepipeline3.size / (Math.max(3, manifesta.size)))) {
          let selectionh = false;
          let whistleorangeJ = true;
          let codegenL = 1.0;
         libimagepipeline3 = new Map([[`${selectionh}`, (parseInt(`${information9}`) / (Math.max(4, (selectionh ? 3 : 2))))]]);
         whistleorangeJ = 100.81 <= codegenL || whistleorangeJ;
         codegenL -= ((whistleorangeJ ? 3 : 1) & parseInt(`${codegenL}`));
      }
      if (manifesta.get(`${crownC}`) == null) {
         crownC *= libimagepipeline3.size;
      }
          let configureF = String.fromCharCode(114,95,56,53,95,112,114,101,100,105,99,116,105,111,110,0);
         information9 -= 3;
         configureF = `${configureF.length % (Math.max(1, configureF.length))}`;
          let componentU = String.fromCharCode(115,101,114,105,97,108,105,122,105,110,103,95,102,95,52,0);
          let pressure9 = String.fromCharCode(102,114,101,113,117,101,110,99,121,95,122,95,54,53,0);
         manifesta.set(`${information9}`, parseInt(`${information9}`) - 3);
         componentU += `${pressure9.length}`;
         pressure9 = `${componentU.length}`;
      if ((information9 * 5.64) >= 4.44 || 2.20 >= (information9 * 5.64)) {
          let cedbadcebfbfbfbcfecbcl = String.fromCharCode(100,101,109,111,116,101,95,121,95,51,48,0);
          let moonY = String.fromCharCode(104,95,51,49,95,112,117,108,115,101,115,0);
         crownC /= Math.max(parseInt(`${information9}`) << (Math.min(Math.abs(3), 4)), 3);
         cedbadcebfbfbfbcfecbcl = "1";
         moonY = `${moonY.length % 3}`;
      }
          let unimplementedviewA = 0;
          let sheetB: Map<any, any> = new Map([[String.fromCharCode(101,116,105,109,101,95,49,95,53,53,0),String.fromCharCode(115,117,98,118,97,108,117,101,95,97,95,51,49,0)], [String.fromCharCode(109,95,50,57,95,116,117,110,105,110,103,0),String.fromCharCode(121,95,56,51,95,109,101,109,106,114,110,108,0)]]);
          let annerF = String.fromCharCode(112,117,98,95,112,95,56,52,0);
         libimagepipeline3 = new Map([[`${sheetB.size}`, manifesta.size - sheetB.size]]);
         unimplementedviewA <<= Math.min(annerF.length, 5);
         annerF += "2";
         information9 /= Math.max(parseInt(`${information9}`), 2);
         information9 *= 1;
      lightE *= awayteamfieldU.length;
   }
       let langR: Array<any> = [275, 732, 767];
       let moreG = 3.0;
      while (1.9 <= (4.70 - moreG) && (4.70 - moreG) <= 2.63) {
         moreG *= parseFloat(`${parseInt(`${moreG}`) + 3}`);
         break;
      }
         moreG -= parseFloat(`${parseInt(`${moreG}`)}`);
      lightE >>= Math.min(Math.abs(((disconnectedz ? 3 : 1) | privatechatbgB.size)), 1);
      langR.push(langR.length / 2);

    liveRef?.current?.scrollToIndex({
      index: 0,
      animated: false,
    });
  };

  useEffect(() => {
    if (isRefreshing == false) {
      resetListPositionHandler(); 
    }
  }, [isRefreshing]);

  const matchClicked = (matchID: number) => {
    navigation.navigate('体育详情', {
      matchId: matchID === null ? undefined : matchID,
    });

    
    mayi_push.sportClicksAnalytics();
    
  };

  const renderSportCard = useCallback(({item}: mayi_ButtonWhite) => {
    return (
      <VodSportCard
        match_details={item}
        onPress={() => matchClicked(item?.id)}
      />
    );
  }, []);

  return (
    <FlatList
      ref={liveRef}
      data={sportList}
      initialScrollIndex={0}
      horizontal
      showsHorizontalScrollIndicator={false}
      renderItem={renderSportCard}
      overScrollMode="never"
    />
  );
}

const styles = StyleSheet.create({});
