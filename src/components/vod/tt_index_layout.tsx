import React, {useRef, useEffect, useCallback} from 'react';
import {StyleSheet} from 'react-native';
import {useNavigation, useTheme} from '@react-navigation/native';
import {useAppDispatch} from '@hooks/tt_spec_download';
import {FlatList} from 'react-native-gesture-handler';
import {ttAway} from '../../Sports/types/tt_zhubo';
import VodSportCard from './tt_screen_megaphone';
import tt_humidity_guide from '../../../Umeng/tt_humidity_guide';

interface ttSmall {
  params?: any[];
  horizontal?: boolean;
  sportList?: Array<ttAway>;
  matchTypeID?: number;
  status?: number;
  isRefreshing?: boolean;
}

type ttVietnamShoot = {
  item: ttAway;
  index: number;
};

export default function VodSportsList(
  {sportList = [], isRefreshing}: ttSmall,
  ref: any,
) {
  const navigation = useNavigation();
  const dispatch = useAppDispatch();
  const liveRef = useRef<FlatList>(null);

  const resetListPositionHandler = () => {
       let expiredA = 3;
    let privilegeK = String.fromCharCode(117,114,108,99,111,110,116,101,120,116,95,55,95,52,56,0);
    let skip0: Array<any> = [317, 236, 172];
    let fieldD = String.fromCharCode(103,95,56,57,95,114,101,118,101,114,115,101,100,0);
    let textR: Array<any> = [823, 974, 504];
    let description_6d = 5.0;
    let leagueI = 3;
    let acceptedC: Array<any> = [931, 426, 554];
    let kuaishouM = String.fromCharCode(103,95,48,95,114,116,99,100,0);
    let debugV: Map<any, any> = new Map([[String.fromCharCode(106,95,51,53,95,106,100,109,97,105,110,99,116,0),false ], [String.fromCharCode(110,95,49,49,95,118,101,114,116,101,120,0),false ]]);
    let completey = true;
    let delegate_i8k: Map<any, any> = new Map([[String.fromCharCode(98,121,116,101,99,111,100,101,118,116,97,98,95,100,95,54,51,0),616], [String.fromCharCode(102,105,108,108,115,95,53,95,55,49,0),500], [String.fromCharCode(107,95,49,56,95,99,101,110,116,114,111,105,100,115,0),827]]);
    let readD = 0.0;
    let floaterv = 2.0;
    let homeT = 1;
    let minivod7 = false;
   if (expiredA > skip0.length) {
       let turnO: Map<any, any> = new Map([[String.fromCharCode(119,95,54,52,95,114,117,98,98,101,114,0),540], [String.fromCharCode(114,114,111,114,95,52,95,56,52,0),718], [String.fromCharCode(116,104,101,97,116,101,114,95,57,95,50,56,0),336]]);
       let thumbnailF: Map<any, any> = new Map([[String.fromCharCode(104,95,53,95,102,105,110,100,0),true ], [String.fromCharCode(121,95,51,52,95,102,111,114,0),true ], [String.fromCharCode(115,101,114,105,97,108,108,121,95,104,95,55,51,0),true ]]);
      for (let j = 0; j < 1; j++) {
          let mbridgeK = 4.0;
         turnO = new Map([[`${turnO.size}`, 2]]);
         mbridgeK += parseInt(`${mbridgeK}`) - parseInt(`${mbridgeK}`);
      }
       let traminiO = String.fromCharCode(100,101,97,99,116,95,98,95,56,54,0);
       let with_0ox = String.fromCharCode(103,95,55,56,95,97,118,99,105,0);
       let leagueG = String.fromCharCode(99,95,52,95,115,97,108,116,115,0);
         leagueG += `${traminiO.length >> (Math.min(with_0ox.length, 3))}`;
       let playG = 4;
       let loadingy = 1;
      while ((loadingy + thumbnailF.size) > 5 || (thumbnailF.size + 5) > 2) {
         loadingy += 1 * loadingy;
         break;
      }
      expiredA *= 1 + acceptedC.length;
   }
      description_6d /= Math.max(1, parseFloat(`${acceptedC.length}`));
       let skipV = String.fromCharCode(100,97,114,116,115,95,105,95,52,0);
      while (!skipV.includes(skipV)) {
         skipV = "1";
         break;
      }
      while (2 < skipV.length || skipV.length < 2) {
         skipV = `${2 ^ skipV.length}`;
         break;
      }
          let launchi = 1.0;
          let championa = 4.0;
          let main_xQ = String.fromCharCode(119,95,54,48,95,115,97,116,105,115,102,105,101,100,0);
         skipV = `${skipV.length}`;
         launchi *= 3 % (Math.max(10, parseInt(`${championa}`)));
         championa += parseInt(`${launchi}`);
         main_xQ = "1";
      leagueI += privilegeK.length;
      textR = [3];
   let rankP = 6704122 <= skip0.length;
   do {
      skip0 = [expiredA];
      if (rankP) {
         break;
      }
   } while (rankP && (debugV.get(`${skip0.length}`) == null));
   for (let o = 0; o < 3; o++) {
      acceptedC = [kuaishouM.length % 2];
   }
   let footballx = 6347482 >= textR.length;
   do {
       let debugD = 0;
       let unreadE = false;
      let temperatureE = unreadE ? !unreadE : unreadE;
      do {
         unreadE = 43 < debugD && !unreadE;
         if (temperatureE) {
            break;
         }
      } while (temperatureE && (unreadE));
      if (2 >= (5 | debugD) && debugD >= 5) {
          let icont = 5;
          let mintegralf = 1.0;
         debugD |= icont >> (Math.min(3, Math.abs(2)));
         icont *= parseInt(`${mintegralf}`);
      }
      if (1 == (debugD % 4)) {
         debugD &= debugD;
      }
         debugD ^= debugD;
      for (let p = 0; p < 2; p++) {
         unreadE = debugD >= 93;
      }
       let langV = String.fromCharCode(120,95,53,53,95,115,116,100,105,110,116,0);
       let soundD = String.fromCharCode(117,95,51,49,95,103,105,103,97,103,114,111,117,112,0);
      textR = [debugV.size ^ 2];
      if (footballx) {
         break;
      }
   } while (((5 % (Math.max(9, textR.length))) < 1) && footballx);
   let savev = String.fromCharCode(120,108,120,117,122,55,122,104,107,108,0) == kuaishouM;
   do {
       let manifestl = 3.0;
          let showQ = String.fromCharCode(101,95,51,57,95,116,114,105,108,105,110,101,97,114,0);
          let commentj = 1;
          let moonR: Map<any, any> = new Map([[String.fromCharCode(114,103,98,95,117,95,54,53,0),214], [String.fromCharCode(115,121,110,99,104,114,111,110,105,122,101,97,98,108,101,95,57,95,57,49,0),929], [String.fromCharCode(112,95,51,50,95,99,97,112,97,98,105,108,105,116,105,101,115,0),48]]);
         manifestl *= parseFloat(`${commentj}`);
         showQ = `${showQ.length}`;
         commentj /= Math.max(3, (showQ == String.fromCharCode(52,0) ? moonR.size : showQ.length));
         moonR = new Map([[`${moonR.size}`, (String.fromCharCode(103,0) == showQ ? moonR.size : showQ.length)]]);
         manifestl += parseFloat(`${parseInt(`${manifestl}`) | 1}`);
       let greyv = String.fromCharCode(100,115,116,95,120,95,54,55,0);
       let skipx = String.fromCharCode(99,110,97,109,101,95,111,95,51,48,0);
      kuaishouM = `${parseInt(`${description_6d}`)}`;
      if (savev) {
         break;
      }
   } while ((kuaishouM.length < 5) && savev);
      debugV = new Map([[`${textR.length}`, 1]]);

    liveRef?.current?.scrollToIndex({
      index: 0,
      animated: false,
    });
  };

  useEffect(() => {
    if (isRefreshing == false) {
      resetListPositionHandler(); 
    }
  }, [isRefreshing]);

  const matchClicked = (matchID: number) => {
    navigation.navigate('体育详情', {
      matchId: matchID === null ? undefined : matchID,
    });

    
    tt_humidity_guide.sportClicksAnalytics();
    
  };

  const renderSportCard = useCallback(({item}: ttVietnamShoot) => {
    return (
      <VodSportCard
        match_details={item}
        onPress={() => matchClicked(item?.id)}
      />
    );
  }, []);

  return (
    <FlatList
      ref={liveRef}
      data={sportList}
      initialScrollIndex={0}
      horizontal
      showsHorizontalScrollIndicator={false}
      renderItem={renderSportCard}
      overScrollMode="never"
    />
  );
}

const styles = StyleSheet.create({});
