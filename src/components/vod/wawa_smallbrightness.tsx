import {useEffect, useRef, useState} from 'react';
import {StyleSheet, TouchableOpacity, Image, ViewStyle} from 'react-native';
import {useNavigation, useTheme} from '@react-navigation/native';
import {useQuery} from '@tanstack/react-query';
import {wawaSellProfileinactive} from '@type/wawa_gradlew';
import VodCard from './wawa_mimo_footballtrophy';
import {useAppDispatch} from '@hooks/wawa_root';
import {playVod} from '@redux/actions/wawa_indicator';
import {wawaGuideSelect} from '@redux/reducers/wawa_quest_ping';
import {FlatList} from 'react-native-gesture-handler';
interface wawaAwayShow {
  params?: any[];
  vodStyle?: ViewStyle;
  horizontal?: boolean;
  vodList?: Array<wawaGuideSelect>;
  showInfo?: 'none' | 'watch_progress';
  isRefreshing?: boolean;
}

type wawaEwardedEmoji = {
  list: Array<wawaGuideSelect>;
};

type wawaBellreminderDisconnected = {
  item: wawaGuideSelect;
};
export default function VodHistoryList({
  vodStyle,
  horizontal = true,
  vodList = [],
  showInfo = 'none',
  isRefreshing = false,
}: wawaAwayShow) {
  const navigation = useNavigation();
  const dispatch = useAppDispatch();

  const historyRef = useRef<FlatList>(null);

  const resetListPositionHandler = () => {
       let smallsound0 = 2.0;
    let g_count7 = 2.0;
    let iconsubssuccess8: Array<any> = [399, 539];
    let networkI: Array<any> = [897, 873];
    let weatherm = String.fromCharCode(97,118,118,115,95,98,95,51,53,0);
    let iconpipexpando = 2.0;
    let flag9: Array<any> = [304, 603];
    let bgvipxvodm = 4.0;
   while ((iconsubssuccess8.length & 4) > 3) {
      smallsound0 /= Math.max(parseFloat(`${parseInt(`${iconpipexpando}`) | parseInt(`${g_count7}`)}`), 3);
      break;
   }
   for (let f = 0; f < 2; f++) {
      iconpipexpando /= Math.max(2, parseInt(`${g_count7}`) | iconsubssuccess8.length);
   }
      iconsubssuccess8 = [3 * flag9.length];
   for (let f = 0; f < 3; f++) {
      iconpipexpando *= weatherm.length | parseInt(`${iconpipexpando}`);
   }
   while (parseInt(`${iconpipexpando}`) >= iconsubssuccess8.length) {
       let nterstitialF = 4;
       let loadingv = 3.0;
       let predictionwinE: Map<any, any> = new Map([[String.fromCharCode(102,95,53,54,95,107,101,99,99,97,107,0),704], [String.fromCharCode(101,109,109,105,110,116,114,105,110,95,112,95,49,48,0),787], [String.fromCharCode(105,110,115,116,97,108,108,105,110,103,95,118,95,50,53,0),706]]);
      let private_haz = 8016989.0 >= loadingv;
      do {
         loadingv /= Math.max(4, parseInt(`${loadingv}`) & 3);
         if (private_haz) {
            break;
         }
      } while ((1.71 <= (1.4 + loadingv) && 4 <= (predictionwinE.size / 4)) && private_haz);
       let huaweiH = String.fromCharCode(122,95,56,52,95,114,101,99,101,105,118,101,114,115,0);
      while ((nterstitialF / (Math.max(7, loadingv))) <= 5.4 || 5.89 <= (5.4 / (Math.max(10, loadingv)))) {
         nterstitialF *= (String.fromCharCode(121,0) == huaweiH ? huaweiH.length : nterstitialF);
         break;
      }
         nterstitialF %= Math.max(2, (String.fromCharCode(121,0) == huaweiH ? huaweiH.length : predictionwinE.size));
      if (3 >= nterstitialF) {
         nterstitialF *= predictionwinE.size;
      }
       let showlessy: Map<any, any> = new Map([[String.fromCharCode(103,111,101,114,108,105,95,54,95,56,54,0),String.fromCharCode(114,101,116,117,114,110,115,95,117,95,49,52,0)], [String.fromCharCode(117,116,102,116,111,95,119,95,57,56,0),String.fromCharCode(102,99,104,111,119,110,95,97,95,55,48,0)]]);
       let colorsN: Map<any, any> = new Map([[String.fromCharCode(109,95,53,55,95,110,111,114,109,0),true ], [String.fromCharCode(103,101,116,104,111,115,116,98,121,97,100,100,114,95,51,95,54,57,0),false ]]);
      if (3 < huaweiH.length) {
         nterstitialF /= Math.max(5, 2);
      }
       let episodesj = String.fromCharCode(109,95,56,57,95,100,120,118,97,0);
       let iconclosee = String.fromCharCode(97,115,115,101,116,115,95,99,95,55,55,0);
         showlessy.set(huaweiH, huaweiH.length + predictionwinE.size);
      iconsubssuccess8.push((String.fromCharCode(120,0) == weatherm ? weatherm.length : parseInt(`${g_count7}`)));
      break;
   }
   if ((g_count7 + weatherm.length) <= 2.48 || (1 % (Math.max(3, weatherm.length))) <= 2) {
       let whitetickn = true;
       let iconsharefriendsk = 0;
       let internet0 = String.fromCharCode(115,117,98,115,99,114,105,98,97,98,108,101,95,50,95,52,54,0);
       let gradlewK = String.fromCharCode(117,95,53,51,95,114,101,115,116,111,114,97,116,105,111,110,0);
       let optionsG = String.fromCharCode(122,95,52,54,95,117,112,100,97,116,101,115,0);
      while (internet0.length == 1) {
         iconsharefriendsk += 1 + iconsharefriendsk;
         break;
      }
      let libreactnativeblobP = internet0 == String.fromCharCode(112,119,114,109,54,48,104,0);
      do {
         internet0 = `${3 / (Math.max(6, internet0.length))}`;
         if (libreactnativeblobP) {
            break;
         }
      } while ((whitetickn) && libreactnativeblobP);
         whitetickn = internet0 == String.fromCharCode(100,0);
       let libflipperE: Array<any> = [484, 116, 208];
       let owngoalr: Array<any> = [845, 651];
      let sheet_ = 5889370 >= libflipperE.length;
      do {
          let hejij = String.fromCharCode(109,95,49,52,95,116,105,99,107,105,110,103,0);
          let refreshI = 4.0;
         libflipperE = [3 / (Math.max(3, parseInt(`${refreshI}`)))];
         hejij = `${hejij.length}`;
         refreshI += parseFloat(`${2 - hejij.length}`);
         if (sheet_) {
            break;
         }
      } while (((libflipperE.length ^ 4) <= 4 || whitetickn) && sheet_);
       let uploade = String.fromCharCode(101,95,50,55,95,117,110,105,111,110,0);
      for (let o = 0; o < 2; o++) {
         optionsG += `${optionsG.length}`;
      }
          let hongkongS = String.fromCharCode(105,112,104,111,110,101,95,50,95,54,49,0);
         owngoalr = [iconsharefriendsk];
         hongkongS = `${hongkongS.length / 1}`;
         uploade += `${libflipperE.length * owngoalr.length}`;
      if (!whitetickn) {
          let nativeG: Map<any, any> = new Map([[String.fromCharCode(101,120,112,101,99,116,115,95,55,95,56,50,0),215], [String.fromCharCode(115,117,114,114,111,117,110,100,95,57,95,51,49,0),668]]);
         whitetickn = nativeG.get(`${iconsharefriendsk}`) != null;
      }
         internet0 = `${((whitetickn ? 5 : 2) ^ 1)}`;
         libflipperE = [iconsharefriendsk << (Math.min(Math.abs(3), 4))];
         iconsharefriendsk -= 3;
          let dycreatorU = 5.0;
          let selectl = 2.0;
          let topicQ = 1;
         owngoalr = [libflipperE.length % (Math.max(owngoalr.length, 6))];
         dycreatorU += 1;
         selectl -= parseFloat(`${topicQ >> (Math.min(5, Math.abs(3)))}`);
         topicQ *= 3;
         libflipperE.push(((whitetickn ? 3 : 2) * gradlewK.length));
      g_count7 /= Math.max(5, optionsG.length);
   }
   if (5 == flag9.length) {
      networkI.push(flag9.length);
   }

    historyRef?.current?.scrollToIndex({
      index: 0,
      animated: false,
    });
  };

  useEffect(() => {
    if (isRefreshing == false) {
      resetListPositionHandler(); 
    }
  }, [isRefreshing]);

  return (
    <FlatList
      ref={historyRef}
      data={vodList}
      horizontal
      showsHorizontalScrollIndicator={false}
      keyExtractor={(item) => item.vod_id.toString()}
      renderItem={({item, index}: wawaBellreminderDisconnected) => {
        return (
          <VodCard
            showPlayIcon={true}
            vodImageStyle={vodStyle}
            shadowBottom={true}
            vod_name={item.vod_name}
            vod_pic={item.vod_pic}
            showInfo={
              showInfo === 'none'
                ? ''
                : `观看至 ${new Date(1000 * item.timeWatched)
                    .toISOString()
                    .substr(11, 8)}`
            }
            onPress={() => {
              dispatch(playVod(item));
              navigation.navigate('播放', {vod_id: item.vod_id});
            }}
            index={index}
          />
        );
      }}
    />
  );
}

const styles = StyleSheet.create({});
