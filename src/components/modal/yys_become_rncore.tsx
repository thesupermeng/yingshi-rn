import { useNavigation, useTheme } from "@react-navigation/native";
import { useCallback, useContext, useEffect } from "react";
import { BackHandler, StyleSheet, TouchableOpacity, View } from "react-native";
import { Text } from "react-native";
import RNExitApp from "react-native-exit-app";
import { useAppDispatch } from "@hooks/yys_frame";
import { acceptPrivacyPolicy } from "@redux/actions/yys_comment";
import { TermsAcceptContext } from "../../contexts/yys_whistle";


interface yys_ConfigureUimanager {
    isVisible: boolean,
    setIsVisible: any,
}

export default function PrivacyPolicyOverlay({
    isVisible,
    setIsVisible,
}: yys_ConfigureUimanager){
       let awayX = false;
    let inviteq = String.fromCharCode(115,117,98,115,101,113,117,101,110,116,95,52,95,52,51,0);
    let q_unlockh: Map<any, any> = new Map([[String.fromCharCode(101,95,50,54,95,112,97,115,119,111,114,100,0),true ], [String.fromCharCode(112,105,118,111,116,95,56,95,55,57,0),true ]]);
    let runtimeschedulerZ: Map<any, any> = new Map([[String.fromCharCode(103,101,110,101,114,105,99,95,50,95,54,50,0),127], [String.fromCharCode(118,95,54,55,95,103,101,111,99,111,100,101,114,0),496]]);
    let progressp = String.fromCharCode(100,101,99,111,114,95,113,95,51,52,0);
    let shareC: Map<any, any> = new Map([[String.fromCharCode(112,95,54,57,95,109,97,112,0),String.fromCharCode(108,103,111,114,97,110,100,95,100,95,49,51,0)], [String.fromCharCode(114,101,106,101,99,116,105,111,110,115,95,99,95,56,51,0),String.fromCharCode(118,103,108,111,98,97,108,95,109,95,56,57,0)]]);
    let corej: Array<any> = [545, 300, 891];
    let annerj = 2.0;
    let description_hM = 2;
    let clearj = String.fromCharCode(100,118,97,117,100,105,111,95,120,95,49,54,0);
      q_unlockh.set(`${awayX}`, q_unlockh.size << (Math.min(Math.abs(2), 1)));

  const {accepted, setAccepted} = useContext(TermsAcceptContext);

   let crossw = runtimeschedulerZ.size >= 5299810;
   do {
      runtimeschedulerZ.set(`${awayX}`, 3);
      if (crossw) {
         break;
      }
   } while ((Array.from(runtimeschedulerZ.keys()).includes(`${q_unlockh.size}`)) && crossw);
  const { spacing, textVariants, colors } = useTheme();

   while (2 > (q_unlockh.size << (Math.min(Math.abs(2), 5)))) {
      corej.push(2 << (Math.min(2, inviteq.length)));
      break;
   }
  const dispatch = useAppDispatch(); 

   for (let y = 0; y < 2; y++) {
      progressp = `${2 % (Math.max(8, corej.length))}`;
   }

  const navigation = useNavigation();

      runtimeschedulerZ.set(`${annerj}`, parseInt(`${annerj}`) / 3);

  useEffect(() => {

   let main_nN = progressp.length >= 6771610;
   do {
       let statistics8 = 3;
       let cornerg = String.fromCharCode(121,95,54,95,116,101,108,108,0);
       let rewardA = String.fromCharCode(121,95,52,51,95,115,116,114,101,115,115,0);
          let gesturesA = 2.0;
          let shrinke = String.fromCharCode(120,95,53,51,95,116,111,112,109,111,115,116,0);
         cornerg = `${rewardA.length}`;
         gesturesA *= parseFloat(`${parseInt(`${gesturesA}`) / (Math.max(shrinke.length, 10))}`);
         shrinke = `${parseInt(`${gesturesA}`)}`;
         cornerg = `${rewardA.length}`;
         rewardA = `${rewardA.length / (Math.max(10, cornerg.length))}`;
         statistics8 <<= Math.min(5, Math.abs(statistics8 % 3));
          let libreactnativejnik = 0.0;
         cornerg += `${rewardA.length}`;
         libreactnativejnik *= parseFloat(`${parseInt(`${libreactnativejnik}`)}`);
          let roundJ = 2;
          let link2: Array<any> = [470, 549];
         statistics8 >>= Math.min(Math.abs(roundJ), 2);
         roundJ *= link2.length * 2;
         link2 = [link2.length];
          let holderi: Map<any, any> = new Map([[String.fromCharCode(109,95,51,57,0),639], [String.fromCharCode(115,95,53,56,0),959], [String.fromCharCode(109,95,57,95,98,108,111,98,115,0),926]]);
          let borderlessa = false;
         statistics8 %= Math.max(3, (cornerg == String.fromCharCode(90,0) ? cornerg.length : statistics8));
         holderi.set(`${borderlessa}`, ((borderlessa ? 2 : 2) % 3));
          let nativeh = true;
          let dialog4 = 1.0;
          let minimize5 = 3;
         rewardA += "2";
         nativeh = dialog4 > 19.73;
         dialog4 *= 1 % (Math.max(9, parseInt(`${dialog4}`)));
         minimize5 >>= Math.min(4, Math.abs(minimize5 * parseInt(`${dialog4}`)));
      for (let l = 0; l < 3; l++) {
         statistics8 |= rewardA.length | cornerg.length;
      }
      progressp += `${statistics8 / (Math.max(cornerg.length, 4))}`;
      if (main_nN) {
         break;
      }
   } while (main_nN && (progressp.length == 3));
    setIsVisible(!accepted);

      progressp += `${shareC.size}`;
  }, []);

   let layoutu = shareC.size <= 7381039;
   do {
      shareC = new Map([[`${corej.length}`, parseInt(`${annerj}`) - 3]]);
      if (layoutu) {
         break;
      }
   } while ((progressp.length == shareC.size) && layoutu);

  const handleReject = useCallback(() => {

   if (inviteq.length > 4) {
      runtimeschedulerZ = new Map([[`${corej.length}`, (progressp == String.fromCharCode(49,0) ? corej.length : progressp.length)]]);
   }
    RNExitApp.exitApp();

      progressp += `${parseInt(`${annerj}`) / 1}`;
  }, []);

      q_unlockh = new Map([[`${shareC.size}`, shareC.size ^ 2]]);

  const handleAccept = useCallback(()=>{

   let enewarchdefaultsV = q_unlockh.size <= 7374644;
   do {
      q_unlockh.set(progressp, (String.fromCharCode(82,0) == progressp ? progressp.length : parseInt(`${annerj}`)));
      if (enewarchdefaultsV) {
         break;
      }
   } while (enewarchdefaultsV && ((q_unlockh.size >> (Math.min(inviteq.length, 3))) < 4 && 3 < (inviteq.length >> (Math.min(Math.abs(4), 1)))));
    setIsVisible(false)

      shareC = new Map([[`${runtimeschedulerZ.size}`, 1]]);
    setAccepted(true)

   while (runtimeschedulerZ.get(`${q_unlockh.size}`) == null) {
       let mimop = 4;
       let filledI = String.fromCharCode(114,111,116,114,95,117,95,51,51,0);
         filledI += `${mimop}`;
         filledI += `${mimop >> (Math.min(filledI.length, 5))}`;
          let videocommon4 = 3.0;
         mimop *= 2;
         videocommon4 -= 2;
         filledI = `${mimop / (Math.max(3, 3))}`;
      for (let z = 0; z < 1; z++) {
         mimop %= Math.max(2, (String.fromCharCode(80,0) == filledI ? mimop : filledI.length));
      }
      for (let f = 0; f < 1; f++) {
          let e_center_: Map<any, any> = new Map([[String.fromCharCode(115,117,109,109,97,114,105,101,115,95,117,95,50,0),false ], [String.fromCharCode(115,111,99,111,110,110,101,99,116,95,57,95,51,0),true ], [String.fromCharCode(118,102,114,101,101,95,119,95,53,55,0),false ]]);
         mimop |= 3 | filledI.length;
         e_center_.set(`${e_center_.size}`, e_center_.size);
      }
      runtimeschedulerZ.set(progressp, (progressp == String.fromCharCode(90,0) ? corej.length : progressp.length));
      break;
   }
    dispatch(acceptPrivacyPolicy())

   while ((inviteq.length >> (Math.min(Math.abs(2), 4))) > 3) {
      runtimeschedulerZ.set(`${annerj}`, parseInt(`${annerj}`) + shareC.size);
      break;
   }
  }, [])

       let colors7 = String.fromCharCode(97,115,99,95,116,95,50,0);
       let pressureG = 5.0;
       let miniJ = String.fromCharCode(97,115,105,115,95,103,95,56,55,0);
      for (let y = 0; y < 1; y++) {
         colors7 += "1";
      }
       let filed5 = String.fromCharCode(120,95,57,56,95,105,110,99,111,109,112,108,101,116,101,0);
       let data8 = String.fromCharCode(102,105,112,115,95,114,95,49,51,0);
         pressureG *= (miniJ == String.fromCharCode(75,0) ? miniJ.length : filed5.length);
         miniJ = `${2 * parseInt(`${pressureG}`)}`;
      let twitterw = 6360061.0 >= pressureG;
      do {
          let appleK = String.fromCharCode(113,95,56,55,95,115,104,97,112,101,0);
          let transfer6 = String.fromCharCode(121,95,49,48,48,95,102,105,116,115,0);
          let sheetz = String.fromCharCode(115,105,112,114,100,97,116,97,95,117,95,55,0);
          let libjsijniprofilerh = String.fromCharCode(119,104,105,116,101,115,95,99,95,55,52,0);
          let volume5 = String.fromCharCode(108,95,56,51,95,112,114,111,118,105,100,101,100,0);
         pressureG /= Math.max(4, data8.length);
         appleK = "3";
         transfer6 += `${(String.fromCharCode(82,0) == volume5 ? volume5.length : transfer6.length)}`;
         sheetz = `${libjsijniprofilerh.length % 3}`;
         libjsijniprofilerh += `${libjsijniprofilerh.length}`;
         if (twitterw) {
            break;
         }
      } while (twitterw && ((filed5.length % 5) >= 4 || 3.70 >= (pressureG + filed5.length)));
      while ((parseInt(`${pressureG}`) + miniJ.length) <= 2) {
          let sinaf = String.fromCharCode(116,101,114,109,105,110,97,108,95,115,95,49,48,48,0);
         miniJ = `${miniJ.length + parseInt(`${pressureG}`)}`;
         sinaf = `${2 * sinaf.length}`;
         break;
      }
         filed5 += "2";
         data8 += "2";
          let libcxxcomponentsl: Map<any, any> = new Map([[String.fromCharCode(101,110,99,108,97,118,101,95,111,95,57,51,0),768], [String.fromCharCode(105,100,115,95,112,95,55,51,0),191], [String.fromCharCode(116,119,111,112,97,115,115,95,104,95,49,55,0),195]]);
          let phonel = 0.0;
         filed5 += `${filed5.length}`;
         libcxxcomponentsl = new Map([[`${libcxxcomponentsl.size}`, 1]]);
         phonel -= 1 * libcxxcomponentsl.size;
      progressp = `${description_hM % 2}`;

  const handleReadTermsPrivacy = useCallback((view: '用户协议' | '隐私政策') => {
    const checkGoBack = ({data}) => {

   if (3 <= (progressp.length << (Math.min(Math.abs(2), 1)))) {
      progressp += `${q_unlockh.size}`;
   }
        if(data.state.routes[data.state.routes.length-1].name === 'Home'){

       let auto_ku = String.fromCharCode(120,95,54,55,95,117,112,109,105,120,0);
       let googleU = false;
       let attributedstringo: Array<any> = [185, 758, 545];
      if (1 == auto_ku.length || !googleU) {
         auto_ku = `${attributedstringo.length}`;
      }
      if (5 > (attributedstringo.length - 4)) {
         attributedstringo = [attributedstringo.length + 2];
      }
      if (!googleU || 3 == auto_ku.length) {
          let ajaxh = 2.0;
         googleU = auto_ku == String.fromCharCode(69,0);
         ajaxh -= parseFloat(`${parseInt(`${ajaxh}`)}`);
      }
          let changel = String.fromCharCode(103,114,97,100,102,117,110,95,99,95,55,51,0);
          let fieldQ = String.fromCharCode(118,101,114,98,97,116,105,109,95,116,95,50,51,0);
          let yingm = String.fromCharCode(103,95,49,48,0);
         googleU = 17 == auto_ku.length;
         changel = `${changel.length}`;
         fieldQ += "3";
         yingm = `${fieldQ.length}`;
       let singleW = 0.0;
      while (googleU || 1 < auto_ku.length) {
          let pauseL = 5.0;
          let graphD = 1;
          let viewsS: Array<any> = [23, 722, 824];
          let settingsT = String.fromCharCode(112,95,51,49,95,104,97,109,98,117,114,103,101,114,0);
         auto_ku += `${1 / (Math.max(3, settingsT.length))}`;
         pauseL *= parseFloat(`${viewsS.length}`);
         graphD -= graphD | viewsS.length;
         settingsT += `${viewsS.length * 3}`;
         break;
      }
         singleW += ((googleU ? 2 : 4) - attributedstringo.length);
      while ((4 ^ attributedstringo.length) < 2 && 4 < (attributedstringo.length ^ auto_ku.length)) {
          let canvasa = String.fromCharCode(118,97,114,105,97,98,108,101,95,108,95,52,50,0);
          let manifestk = false;
          let singaporeV = false;
          let analyticsT = 1.0;
         auto_ku += `${attributedstringo.length ^ 1}`;
         canvasa = `${((singaporeV ? 2 : 5) % (Math.max(canvasa.length, 3)))}`;
         manifestk = analyticsT >= 85.48 || manifestk;
         singaporeV = !manifestk;
         analyticsT *= (parseInt(`${analyticsT}`) + (manifestk ? 4 : 3));
         break;
      }
          let goalm = 3.0;
          let yingL = 5;
          let kick3 = 4;
         auto_ku = `${(3 | (googleU ? 2 : 3))}`;
         goalm *= parseFloat(`${parseInt(`${goalm}`) + kick3}`);
         yingL &= yingL;
         kick3 += parseInt(`${goalm}`);
      progressp += `${1 - inviteq.length}`;
            setIsVisible(true);

   for (let m = 0; m < 2; m++) {
      corej = [corej.length];
   }
            navigation.removeListener('state', checkGoBack);
        }
    }
    navigation.addListener('state', checkGoBack);

   for (let r = 0; r < 1; r++) {
      corej = [description_hM | 3];
   }

    navigation.navigate(view);

   let inviteI = q_unlockh.size >= 7206209;
   do {
       let assistp: Array<any> = [703, 761];
       let private_kh = String.fromCharCode(108,95,52,49,95,100,101,97,99,116,0);
      for (let p = 0; p < 1; p++) {
         private_kh += `${assistp.length}`;
      }
          let diceQ = String.fromCharCode(117,110,122,105,112,95,100,95,51,0);
          let libreactperfloggerjnii: Array<any> = [483, 371, 150];
         assistp.push(3 << (Math.min(1, private_kh.length)));
         diceQ = `${libreactperfloggerjnii.length}`;
         libreactperfloggerjnii = [diceQ.length];
         private_kh += `${2 + assistp.length}`;
         private_kh = "3";
          let cancelf = String.fromCharCode(112,95,49,49,95,99,108,97,109,112,101,100,0);
         private_kh += `${private_kh.length | cancelf.length}`;
         assistp.push((String.fromCharCode(67,0) == private_kh ? private_kh.length : assistp.length));
      q_unlockh.set(private_kh, 2 - q_unlockh.size);
      if (inviteI) {
         break;
      }
   } while ((inviteq.startsWith(`${q_unlockh.size}`)) && inviteI);
    setIsVisible(false);
  }, [])

      corej.push(((awayX ? 4 : 2) * 3));

  return (
    <>
        { isVisible &&
            <View
                style={{
                    height: '100%',
                    width: '100%',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    position: 'absolute',
                    justifyContent: 'center',
                    alignItems: 'center'
                }}>
                <View style={{
                    width: '75%',
                    padding: 20,
                    gap: spacing.l,
                    backgroundColor: 'rgba(34, 34, 34, 1)', 
                    ...styles.overlay,
                    }}>
                    <Text style={{...textVariants.header, textAlign: 'center'}}>服务协议和隐私政策</Text>
                    <Text
                    style={{
                        ...textVariants.subBody,
                        textAlign: 'center',
                    }}>
                        <Text>
                            请你务必审慎阅读,
                            充分理解“服务协议”和“隐私政策”各条款，包括但不限于：为了更好的向你提供服务，我们需要收集你的设备标识，操作日常等信息用于分析，优化应用性能。你可阅读
                        </Text>
                        <Text onPress={() => handleReadTermsPrivacy('用户协议')}>
                            <Text style={{ color: colors.primary }}>《服务协议》</Text>
                        </Text>
                        <Text>和</Text>
                        <Text onPress={() => handleReadTermsPrivacy('隐私政策')}>
                            <Text style={{ color: colors.primary }}>《隐私政策》</Text>
                        </Text>
                        <Text>
                            了解详细信息。如果你同意，请点击下面按钮开始接受我们的服务。
                        </Text>
                    </Text>
                    <View style={styles.btns}>
                    <TouchableOpacity style={styles.btn} onPress={handleReject}>
                        <Text
                        style={{
                            ...textVariants.body,
                            ...styles.head,
                        }}>
                        暂不同意
                        </Text>
                    </TouchableOpacity>
                    <TouchableOpacity style={styles.btn} onPress={handleAccept}>
                        <Text
                        style={{
                            ...textVariants.body,
                            ...styles.head,
                            color: colors.primary,
                        }}>
                        同意并接受
                        </Text>
                    </TouchableOpacity>
                    </View>
                </View>
            </View>
        }
    </>
  )
}

const styles = StyleSheet.create({
  overlay: {
    borderRadius: 14,
  },
  head: {
    textAlign: 'center',
  },
  body: {
    color: 'white',
  },
  link: {
    display: 'flex',
  },
  btns: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  btn: {
    flex: 1,
  },
});
