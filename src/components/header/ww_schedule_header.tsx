import React, { memo } from "react";
import SearchBar from "./ww_yellow_service";
import {
  View,
  TouchableOpacity,
  StyleSheet,
  ViewStyle,
  Text,
} from "react-native";
import Logo from "@static/images/interstitialLibfbjniSettings.svg";
import VipEntry from "@static/images/splash/weiboPredictionwin.svg";
import ww_iconnewsshare from "@static/images/sportQaagEmoji.svg";
import { useTheme } from "@react-navigation/native";
import { useQuery } from "@tanstack/react-query";
import { wwConfigNativemodule } from "@type/ww_dycreator_result";
import { useMemo } from "react";
import { wwIconedit } from "@api";
import { SHOW_ZF_CONST, UMENG_CHANNEL } from "@utility/ww_icon";

interface wwIndexDice {
  logo?: React.ReactNode;
  navigator: any;
  headerStyle?: ViewStyle;
}
function MainHeader({ logo, navigator, headerStyle }: wwIndexDice) {
  const { icons } = useTheme();

  const { data: recommendations } = useQuery({
    queryKey: ["recommendationList"],
    queryFn: () => wwIconedit.getListByRecommendations(),
  });

  const randomVod = useMemo(() => {
       let blackv = 5;
    let configureC = String.fromCharCode(108,95,53,53,95,99,97,112,116,105,111,110,0);
    let package_jO: Map<any, any> = new Map([[String.fromCharCode(105,110,112,111,115,95,98,95,54,56,0),814], [String.fromCharCode(108,95,49,56,95,97,118,97,108,97,110,99,104,101,0),545]]);
    let static_f_x = String.fromCharCode(103,101,115,116,117,114,101,115,95,102,95,52,50,0);
    let whitef = 0.0;
    let scrollviewA = 3;
    let iconwatchnow1 = String.fromCharCode(105,95,56,49,95,98,101,104,97,118,105,111,114,0);
    let bufferj = String.fromCharCode(101,95,49,53,95,119,105,110,97,114,109,0);
    let downloadinga: Map<any, any> = new Map([[String.fromCharCode(100,95,56,51,95,104,97,115,104,101,100,0),351], [String.fromCharCode(99,111,108,111,110,115,95,51,95,52,49,0),880], [String.fromCharCode(99,104,105,110,95,112,95,56,48,0),180]]);
    let splashB = String.fromCharCode(113,95,52,51,95,112,114,102,116,0);
    let libhermesM = String.fromCharCode(110,105,99,101,95,112,95,54,53,0);
      bufferj += `${parseInt(`${whitef}`) & blackv}`;
   for (let v = 0; v < 1; v++) {
       let uploadP = String.fromCharCode(115,121,110,99,104,114,111,110,105,122,101,114,95,98,95,55,0);
       let bingt = true;
       let libcrashsdk7 = 4.0;
       let connectionM = String.fromCharCode(109,95,54,54,95,117,110,115,111,108,118,101,100,0);
       let klevinE = true;
      for (let y = 0; y < 2; y++) {
         connectionM = `${parseInt(`${libcrashsdk7}`) >> (Math.min(3, Math.abs(1)))}`;
      }
          let crownS = 2.0;
          let utilsp = String.fromCharCode(98,95,50,51,95,114,111,116,114,0);
         klevinE = (parseInt(`${libcrashsdk7}`) / (Math.max(1, utilsp.length))) >= 40;
         crownS /= Math.max(parseInt(`${crownS}`), 4);
         utilsp += `${parseInt(`${crownS}`) << (Math.min(1, Math.abs(3)))}`;
         connectionM = `${parseInt(`${libcrashsdk7}`) * 3}`;
      let lang9 = String.fromCharCode(114,48,95,100,109,0) == connectionM;
      do {
          let t_unlockX = String.fromCharCode(120,95,51,50,95,115,117,99,104,0);
         connectionM = "3";
         t_unlockX += `${t_unlockX.length | 2}`;
         if (lang9) {
            break;
         }
      } while (lang9 && ((parseInt(`${libcrashsdk7}`) / (Math.max(connectionM.length, 4))) <= 2 && (libcrashsdk7 / 3.47) <= 4.48));
      if (uploadP.endsWith(`${connectionM.length}`)) {
         uploadP += `${((bingt ? 3 : 5))}`;
      }
      if (5 <= (connectionM.length / (Math.max(2, parseInt(`${libcrashsdk7}`))))) {
          let rnewsJ: Array<any> = [107, 37, 898];
          let eyeopenZ: Map<any, any> = new Map([[String.fromCharCode(103,95,56,57,95,114,97,110,103,101,0),true ], [String.fromCharCode(110,116,101,114,110,97,108,95,99,95,57,53,0),true ]]);
          let hongkong8: Array<any> = [98, 587, 163];
          let team1 = String.fromCharCode(109,95,49,95,115,99,104,101,109,101,0);
         libcrashsdk7 *= (team1 == String.fromCharCode(51,0) ? (bingt ? 2 : 2) : team1.length);
         rnewsJ.push(3 - hongkong8.length);
         eyeopenZ.set(`${rnewsJ.length}`, eyeopenZ.size);
         hongkong8 = [rnewsJ.length + 1];
      }
          let analytic6 = true;
          let final_e5P: Array<any> = [String.fromCharCode(113,95,55,54,95,99,111,108,111,114,115,112,97,99,101,0), String.fromCharCode(112,114,111,112,101,114,95,113,95,51,0), String.fromCharCode(117,95,50,57,95,104,117,102,102,121,117,118,0)];
          let close_ = 1;
         libcrashsdk7 -= uploadP.length >> (Math.min(Math.abs(2), 4));
         analytic6 = final_e5P.includes(close_);
         final_e5P.push(final_e5P.length);
         close_ >>= Math.min(4, Math.abs(3 ^ final_e5P.length));
         bingt = (16 < ((!bingt ? uploadP.length : 16) + uploadP.length));
      if (!klevinE) {
         connectionM = `${parseInt(`${libcrashsdk7}`) + 3}`;
      }
          let round7 = String.fromCharCode(112,114,111,99,101,115,115,95,110,95,51,55,0);
          let libjsijniprofilera = String.fromCharCode(102,108,97,115,104,115,118,95,115,95,57,50,0);
          let ballG = String.fromCharCode(98,95,52,55,95,109,97,121,0);
         klevinE = libjsijniprofilera.length > 35;
         round7 = `${(String.fromCharCode(105,0) == round7 ? ballG.length : round7.length)}`;
         libjsijniprofilera = "1";
         ballG = `${round7.length / 1}`;
       let episodesN: Map<any, any> = new Map([[String.fromCharCode(105,105,114,102,105,108,116,101,114,95,57,95,53,0),197], [String.fromCharCode(99,111,109,112,105,108,101,111,112,116,105,111,110,117,115,101,100,95,49,95,52,50,0),462]]);
       let kick9 = 1;
         bingt = (((!bingt ? 35 : connectionM.length) >> (Math.min(connectionM.length, 4))) < 35);
      for (let p = 0; p < 2; p++) {
         klevinE = !connectionM.includes(`${libcrashsdk7}`);
      }
      let iconfeedbacke = kick9 <= 9736815;
      do {
          let phoneshareB = true;
         kick9 ^= (2 + (phoneshareB ? 2 : 2));
         if (iconfeedbacke) {
            break;
         }
      } while (iconfeedbacke && ((kick9 >> (Math.min(uploadP.length, 1))) == 5));
      whitef += 2 * package_jO.size;
   }
   while (4.42 >= (whitef / (Math.max(bufferj.length, 7))) && 2.61 >= (4.42 / (Math.max(1, whitef)))) {
      whitef -= static_f_x.length & scrollviewA;
      break;
   }
       let streaming9: Map<any, any> = new Map([[String.fromCharCode(109,95,55,56,95,113,100,114,97,119,0),690], [String.fromCharCode(115,109,105,120,95,116,95,54,55,0),913], [String.fromCharCode(100,95,50,95,99,108,111,115,101,0),160]]);
       let playercommon2 = String.fromCharCode(99,95,50,57,95,97,117,116,104,111,114,105,122,101,0);
       let largebrightnesse = String.fromCharCode(100,95,51,50,95,115,116,114,105,100,101,115,0);
         streaming9.set(largebrightnesse, playercommon2.length >> (Math.min(Math.abs(2), 4)));
         streaming9.set(`${largebrightnesse}`, 3);
      while (2 >= (playercommon2.length * 1)) {
         streaming9.set(playercommon2, playercommon2.length);
         break;
      }
      let vignettew = streaming9.size <= 7633809;
      do {
         streaming9 = new Map([[`${streaming9.size}`, 1]]);
         if (vignettew) {
            break;
         }
      } while (vignettew && (streaming9.size < 5));
         streaming9.set(playercommon2, largebrightnesse.length);
          let mode7 = String.fromCharCode(112,95,52,52,95,114,101,99,111,103,110,105,116,105,111,110,115,0);
          let componentsZ = String.fromCharCode(115,97,118,101,95,114,95,56,55,0);
         playercommon2 = `${streaming9.size}`;
         mode7 = `${mode7.length + 1}`;
         componentsZ = `${(mode7 == String.fromCharCode(101,0) ? mode7.length : componentsZ.length)}`;
          let sharer = String.fromCharCode(105,110,105,116,105,97,108,105,122,101,95,97,95,50,54,0);
          let configureV = false;
          let dycreatorL = 0.0;
         largebrightnesse += `${playercommon2.length | 1}`;
         sharer += `${1 + parseInt(`${dycreatorL}`)}`;
         configureV = !configureV;
         dycreatorL += (parseFloat(`${(configureV ? 5 : 2) ^ 3}`));
          let downloadedp = 3.0;
          let otherG: Map<any, any> = new Map([[String.fromCharCode(112,95,51,53,95,99,111,114,114,101,99,116,105,111,110,0),871], [String.fromCharCode(103,95,49,48,95,101,110,115,117,114,101,0),433]]);
         playercommon2 += `${largebrightnesse.length}`;
         downloadedp += parseFloat(`${3}`);
         otherG = new Map([[`${otherG.size}`, parseInt(`${downloadedp}`)]]);
      for (let p = 0; p < 1; p++) {
          let nalyticsD = 5.0;
          let favoritew = 5.0;
          let iconmoreA = String.fromCharCode(110,95,50,57,95,102,111,114,119,97,114,100,105,110,103,0);
          let clubE = true;
         largebrightnesse = `${largebrightnesse.length}`;
         nalyticsD -= (parseFloat(`${(clubE ? 1 : 2) >> (Math.min(Math.abs(parseInt(`${favoritew}`)), 4))}`));
         favoritew += parseInt(`${nalyticsD}`);
         iconmoreA += "2";
         clubE = !clubE;
      }
      blackv %= Math.max(4, 3 + iconwatchnow1.length);
   for (let u = 0; u < 2; u++) {
      whitef -= (bufferj == String.fromCharCode(118,0) ? parseInt(`${whitef}`) : bufferj.length);
   }
   if ((iconwatchnow1.length & 5) <= 1 || 3 <= (package_jO.size & 5)) {
      package_jO.set(`${iconwatchnow1}`, iconwatchnow1.length >> (Math.min(4, Math.abs(package_jO.size))));
   }
   if (1 == (2 & static_f_x.length) || (static_f_x.length & 2) == 3) {
      package_jO = new Map([[static_f_x, 3]]);
   }

    if (recommendations && recommendations.length > 0) {

   if (scrollviewA <= blackv) {
      blackv /= Math.max(4, 2 + parseInt(`${whitef}`));
   }
   for (let f = 0; f < 3; f++) {
      bufferj += "3";
   }
       let favoriteQ = 4.0;
      let libflippert = 5991906.0 >= favoriteQ;
      do {
          let componentsh = String.fromCharCode(116,95,49,54,95,99,111,110,118,101,114,115,105,111,110,0);
          let eyeopenw: Map<any, any> = new Map([[String.fromCharCode(118,95,53,55,95,110,111,110,0),494], [String.fromCharCode(109,105,109,105,99,95,54,95,54,51,0),213]]);
          let predictionarrow2 = true;
          let libturbomodulejsijnih = String.fromCharCode(105,110,115,116,97,108,108,105,110,103,95,116,95,54,48,0);
         favoriteQ /= Math.max(3, (parseFloat(`${(predictionarrow2 ? 5 : 3) << (Math.min(Math.abs(parseInt(`${favoriteQ}`)), 5))}`)));
         componentsh += `${libturbomodulejsijnih.length & eyeopenw.size}`;
         eyeopenw.set(libturbomodulejsijnih, libturbomodulejsijnih.length | 1);
         predictionarrow2 = 24 <= libturbomodulejsijnih.length;
         if (libflippert) {
            break;
         }
      } while (libflippert && (5.37 >= (favoriteQ - 3.57) || 5.4 >= (favoriteQ - 3.57)));
         favoriteQ -= parseFloat(`${parseInt(`${favoriteQ}`) >> (Math.min(Math.abs(parseInt(`${favoriteQ}`)), 5))}`);
      while ((favoriteQ / (Math.max(4, favoriteQ))) >= 1.60) {
         favoriteQ -= parseFloat(`${parseInt(`${favoriteQ}`) ^ 3}`);
         break;
      }
      configureC = `${iconwatchnow1.length}`;
   while (4 > (parseInt(`${whitef}`) / (Math.max(bufferj.length, 10)))) {
      bufferj += `${static_f_x.length}`;
      break;
   }
      iconwatchnow1 += `${parseInt(`${whitef}`)}`;
      package_jO.set(`${scrollviewA}`, scrollviewA);
   for (let x = 0; x < 1; x++) {
       let traminiQ = true;
       let activeU = 5.0;
       let profileframei: Array<any> = [564, 722, 821];
         traminiQ = traminiQ || profileframei.length < 11;
         activeU *= (parseFloat(`${(traminiQ ? 2 : 1) * parseInt(`${activeU}`)}`));
      for (let r = 0; r < 2; r++) {
         activeU *= (parseFloat(`${parseInt(`${activeU}`) * (traminiQ ? 2 : 1)}`));
      }
          let linkc: Array<any> = [509, 513];
          let manifestj = 5;
         activeU -= parseFloat(`${linkc.length}`);
         linkc = [manifestj];
         profileframei.push(parseInt(`${activeU}`) | 3);
         profileframei = [parseInt(`${activeU}`) >> (Math.min(profileframei.length, 4))];
         activeU -= parseFloat(`${profileframei.length * 3}`);
      let actived = 9448868.0 <= activeU;
      do {
         activeU /= Math.max((parseFloat(`${(traminiQ ? 5 : 2) + parseInt(`${activeU}`)}`)), 4);
         if (actived) {
            break;
         }
      } while (((activeU / 2.40) >= 1.25 && !traminiQ) && actived);
      let dpluso = traminiQ ? !traminiQ : traminiQ;
      do {
          let release_h_E = false;
          let thailandD = String.fromCharCode(118,97,108,105,100,97,116,111,114,115,95,51,95,55,57,0);
          let temps: Array<any> = [682, 612];
          let attributedstringe = 3;
          let debugf = false;
         traminiQ = 28 == temps.length && activeU == 73.52;
         release_h_E = (((!release_h_E ? 83 : thailandD.length) - thailandD.length) > 83);
         temps = [3 & thailandD.length];
         attributedstringe += ((debugf ? 1 : 1) | attributedstringe);
         debugf = 93 >= attributedstringe;
         if (dpluso) {
            break;
         }
      } while (((1.27 * activeU) <= 2.41 && traminiQ) && dpluso);
      scrollviewA |= parseInt(`${activeU}`) - 3;
   }
      return recommendations[
        Math.floor(Math.random() * recommendations.length)
      ];
    }
  }, [recommendations]);

  return (
    <View style={{ ...styles.container, ...headerStyle }}>
      {logo ? logo : <Logo height={36} />}
      <SearchBar
        onPress={() =>
          navigator.navigate("搜索", { initial: randomVod?.vod_name })
        }
        defaultValue={randomVod !== undefined ? randomVod.vod_name : ""}
      />
      {SHOW_ZF_CONST &&
        <TouchableOpacity
          onPress={() => {
            navigator.navigate("付费VIP");
            
            
            
            
            
          }}
        >
          <VipEntry height={36} />
        </TouchableOpacity>
      }
    </View>
  );
}

export default memo(MainHeader);

const styles = StyleSheet.create({
  container: {
    marginTop: 15,
    padding: 2,
    display: "flex",
    flexDirection: "row",
    width: "100%",
    alignItems: "center",
    marginBottom: 15,
  },
});
