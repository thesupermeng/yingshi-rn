import React, { memo } from "react";
import SearchBar from "./tt_title_stations";
import {
  View,
  TouchableOpacity,
  StyleSheet,
  ViewStyle,
  Text,
} from "react-native";
import Logo from "@static/images/rewindPromotion.svg";
import VipEntry from "@static/images/splash/mbbannerLogout.svg";
import tt_skip_gmail from "@static/images/hoverInterstitial.svg";
import { useTheme } from "@react-navigation/native";
import { useQuery } from "@tanstack/react-query";
import { ttZoom } from "@type/tt_line_borderless";
import { useMemo } from "react";
import { ttConfirmationChinasame } from "@api";
import { SHOW_ZF_CONST, UMENG_CHANNEL } from "@utility/tt_trophy_cross";
import { useSelector } from "@hooks/tt_spec_download";

interface ttSmall {
  logo?: React.ReactNode;
  navigator: any;
  headerStyle?: ViewStyle;
}
function MainHeader({ logo, navigator, headerStyle }: ttSmall) {
  const { icons, colors } = useTheme();
  const themeState = useSelector<{ theme: boolean }>('themeReducer');
  const isDark = themeState.theme === true;

  const { data: recommendations } = useQuery({
    queryKey: ["recommendationList"],
    queryFn: () => ttConfirmationChinasame.getListByRecommendations(),
  });

  const randomVod = useMemo(() => {
       let right_ = String.fromCharCode(112,95,50,54,95,98,101,110,99,104,115,0);
    let single_ = 3.0;
    let previewt = String.fromCharCode(99,95,51,51,95,115,117,98,115,116,114,105,110,103,0);
    let rules2 = 5;
    let right1 = String.fromCharCode(100,105,115,112,95,122,95,57,53,0);
    let e_countI = false;
    let gmailf: Map<any, any> = new Map([[String.fromCharCode(111,95,51,55,95,108,97,115,116,0),437], [String.fromCharCode(114,95,50,57,95,116,97,112,112,101,100,0),159], [String.fromCharCode(100,111,119,110,114,105,103,104,116,95,113,95,55,53,0),110]]);
    let configureM = 3.0;
    let langP = 1.0;
    let dropdownK = String.fromCharCode(116,95,56,95,115,117,98,116,114,101,101,115,0);
    let modelb = 3.0;
   let gesturej = 5406064.0 >= configureM;
   do {
      configureM /= Math.max(2, right_.length % (Math.max(2, 3)));
      if (gesturej) {
         break;
      }
   } while (gesturej && (configureM == 4.54));
      right_ = `${parseInt(`${configureM}`) << (Math.min(Math.abs(1), 5))}`;
       let firebase5 = String.fromCharCode(103,95,54,57,95,108,101,116,116,101,114,115,0);
       let styleH = String.fromCharCode(105,95,55,51,95,111,105,100,97,110,121,0);
       let overf = String.fromCharCode(100,99,116,101,108,101,109,95,107,95,56,53,0);
      if (firebase5.includes(`${styleH.length}`)) {
         firebase5 = `${firebase5.length + overf.length}`;
      }
      let calendarI = styleH == String.fromCharCode(122,110,110,105,95,95,113,113,107,52,0);
      do {
         styleH += `${1 | firebase5.length}`;
         if (calendarI) {
            break;
         }
      } while ((overf.length < 5) && calendarI);
      previewt = `${(previewt == String.fromCharCode(115,0) ? right1.length : previewt.length)}`;
       let modelsH: Array<any> = [225, 254, 381];
       let reads = 1;
          let bridged = 5;
         reads %= Math.max(3, 2);
         bridged *= bridged;
      for (let c = 0; c < 3; c++) {
         reads *= 1;
      }
       let playlist2 = 1;
       let checkboxp = 1;
      let lightV = 5331869 <= playlist2;
      do {
          let grayO = 4.0;
          let bootsplasht = true;
          let expiredK: Array<any> = [854, 534];
          let roundS = 3.0;
         playlist2 /= Math.max(5, playlist2 >> (Math.min(Math.abs(1), 4)));
         grayO *= 1;
         bootsplasht = 44.26 == (grayO - roundS);
         expiredK.push(3);
         roundS *= (parseFloat(`${(bootsplasht ? 2 : 4) % 3}`));
         if (lightV) {
            break;
         }
      } while ((checkboxp <= playlist2) && lightV);
          let temperaturey: Map<any, any> = new Map([[String.fromCharCode(99,95,54,48,95,112,105,99,107,101,114,0),705], [String.fromCharCode(109,95,54,55,95,114,117,110,108,111,111,112,0),651], [String.fromCharCode(99,95,53,49,95,100,105,118,105,100,101,114,0),292]]);
          let typingT = 0.0;
         modelsH.push(3);
         temperaturey = new Map([[`${temperaturey.size}`, parseInt(`${typingT}`)]]);
         typingT *= parseFloat(`${3 - temperaturey.size}`);
          let championy = 2.0;
          let renewx = true;
          let whistlep = 5;
         playlist2 |= playlist2 & checkboxp;
         championy += whistlep;
         renewx = 14.60 > championy;
         whistlep &= 3 / (Math.max(parseInt(`${championy}`), 8));
      gmailf = new Map([[`${reads}`, parseInt(`${configureM}`) / (Math.max(9, reads))]]);
   if ((configureM - 2.8) >= 4.75 || e_countI) {
      configureM /= Math.max(right1.length, 3);
   }
   for (let f = 0; f < 3; f++) {
      langP += previewt.length;
   }
   for (let s = 0; s < 2; s++) {
       let stringsu: Array<any> = [699, 557];
       let searchbarK = false;
       let layoutX = 5;
       let castingz = 3.0;
       let becomeM = String.fromCharCode(110,101,105,103,104,98,111,114,115,95,110,95,54,57,0);
      while ((layoutX + 5) == 3 && 5 == (layoutX + becomeM.length)) {
         becomeM = `${(becomeM == String.fromCharCode(87,0) ? becomeM.length : layoutX)}`;
         break;
      }
      if ((2.49 * castingz) == 4.34) {
         castingz /= Math.max(parseFloat(`${parseInt(`${castingz}`)}`), 4);
      }
         becomeM += "2";
         layoutX *= (layoutX - (searchbarK ? 5 : 2));
      let agreementz = 8284805.0 <= castingz;
      do {
         castingz *= parseFloat(`${stringsu.length}`);
         if (agreementz) {
            break;
         }
      } while (((becomeM.length - parseInt(`${castingz}`)) <= 4 || (castingz - parseFloat(`${becomeM.length}`)) <= 1.97) && agreementz);
         searchbarK = 72 == becomeM.length;
          let expandX = String.fromCharCode(110,95,54,50,95,99,111,108,117,109,110,108,105,115,116,0);
          let lefto = false;
          let chart_ = String.fromCharCode(117,95,55,53,95,112,114,101,100,111,119,110,108,111,97,100,0);
         becomeM += `${parseInt(`${castingz}`) - layoutX}`;
         expandX += "1";
         lefto = expandX.length == 51;
         chart_ = `${((lefto ? 2 : 2) >> (Math.min(Math.abs(3), 1)))}`;
      for (let h = 0; h < 3; h++) {
         stringsu.push(3);
      }
         castingz -= parseFloat(`${parseInt(`${castingz}`) - stringsu.length}`);
          let notificationE = 2.0;
         stringsu.push(2);
         notificationE -= parseFloat(`${parseInt(`${notificationE}`)}`);
      let settingsn = 8698708 <= stringsu.length;
      do {
         stringsu = [layoutX % 3];
         if (settingsn) {
            break;
         }
      } while ((4 > (4 >> (Math.min(2, stringsu.length)))) && settingsn);
       let j_managerz = 1;
       let profileu = 3;
      while (j_managerz >= 4) {
          let leagueA: Map<any, any> = new Map([[String.fromCharCode(112,95,48,95,97,118,100,101,118,105,99,101,114,101,115,0),610], [String.fromCharCode(98,95,55,55,95,111,114,112,104,97,110,0),364]]);
          let photoR = 1;
          let dropdown5 = 4.0;
          let sellj: Map<any, any> = new Map([[String.fromCharCode(102,114,101,113,115,95,119,95,57,57,0),true ], [String.fromCharCode(120,95,55,52,95,101,99,114,101,116,0),false ]]);
         j_managerz |= 2 & leagueA.size;
         leagueA.set(`${photoR}`, photoR / (Math.max(parseInt(`${dropdown5}`), 8)));
         dropdown5 /= Math.max(parseFloat(`${photoR + 2}`), 1);
         sellj.set(`${photoR}`, 1 | photoR);
         break;
      }
      while (5.66 >= (castingz * 3.30) || 4 >= (5 >> (Math.min(4, Math.abs(layoutX))))) {
          let iconi = 4.0;
          let eactS = String.fromCharCode(112,95,50,55,95,114,101,115,101,116,0);
          let kickc = String.fromCharCode(118,95,52,53,95,97,118,99,111,100,101,99,114,101,115,0);
          let penalty1 = String.fromCharCode(97,118,102,111,114,109,97,116,109,97,112,112,101,114,116,101,115,116,115,95,121,95,53,57,0);
          let analyticsN: Array<any> = [26, 384, 564];
         castingz += parseFloat(`${becomeM.length + 3}`);
         iconi -= parseFloat(`${eactS.length}`);
         eactS = "2";
         kickc = "1";
         penalty1 += "1";
         analyticsN = [3 * penalty1.length];
         break;
      }
      while (2 == (j_managerz >> (Math.min(becomeM.length, 1)))) {
         j_managerz &= stringsu.length;
         break;
      }
      rules2 /= Math.max((String.fromCharCode(121,0) == right1 ? parseInt(`${castingz}`) : right1.length), 4);
   }
      rules2 -= 3;

    if (recommendations && recommendations.length > 0) {

   while (3.58 > single_) {
      single_ -= (right1 == String.fromCharCode(102,0) ? right1.length : (e_countI ? 4 : 2));
      break;
   }
      rules2 &= (previewt == String.fromCharCode(119,0) ? gmailf.size : previewt.length);
       let sportsy = true;
       let adult5 = String.fromCharCode(115,117,98,115,99,114,105,112,116,95,49,95,49,52,0);
       let mbnativeadvancedJ = String.fromCharCode(118,105,115,105,98,108,101,95,51,95,50,50,0);
      let mathY = mbnativeadvancedJ == String.fromCharCode(49,50,54,115,100,111,109,49,120,0);
      do {
         mbnativeadvancedJ = `${adult5.length | 2}`;
         if (mathY) {
            break;
         }
      } while ((adult5.endsWith(mbnativeadvancedJ)) && mathY);
      while (mbnativeadvancedJ.length == 2 && !sportsy) {
         mbnativeadvancedJ = `${((sportsy ? 2 : 4))}`;
         break;
      }
       let stepn = String.fromCharCode(119,97,108,107,95,56,95,52,51,0);
         adult5 += `${mbnativeadvancedJ.length / 1}`;
          let black3: Array<any> = [175, 21, 673];
         sportsy = (((!sportsy ? 13 : stepn.length) % (Math.max(stepn.length, 2))) < 13);
         black3.push(black3.length & 3);
         stepn += `${((sportsy ? 4 : 3) + 1)}`;
          let readg = String.fromCharCode(108,95,49,53,95,110,101,120,116,0);
          let shootI = 1.0;
         mbnativeadvancedJ += `${1 * parseInt(`${shootI}`)}`;
         readg = `${readg.length}`;
         shootI /= Math.max(5, readg.length);
      if (mbnativeadvancedJ.startsWith(`${sportsy}`)) {
         mbnativeadvancedJ = `${mbnativeadvancedJ.length >> (Math.min(1, stepn.length))}`;
      }
      for (let x = 0; x < 1; x++) {
         mbnativeadvancedJ += "1";
      }
      right1 = `${gmailf.size}`;
      langP += parseInt(`${configureM}`) % 1;
   if (1.78 < configureM) {
       let theme6 = String.fromCharCode(111,95,52,53,95,103,114,97,109,115,0);
       let bootsplashm = 0.0;
      if (3 > (4 ^ theme6.length)) {
         theme6 = `${theme6.length >> (Math.min(Math.abs(2), 3))}`;
      }
      if ((theme6.length - parseInt(`${bootsplashm}`)) <= 4 && 4 <= (parseInt(`${bootsplashm}`) - theme6.length)) {
          let emojir = 0;
          let malaysiaY = 0;
          let long_ukI = String.fromCharCode(100,101,98,108,111,99,107,95,51,95,52,52,0);
          let shrinkd = 3;
         bootsplashm += parseFloat(`${parseInt(`${bootsplashm}`) | 1}`);
         emojir -= (String.fromCharCode(75,0) == long_ukI ? shrinkd : long_ukI.length);
         malaysiaY += emojir << (Math.min(Math.abs(shrinkd), 5));
      }
      if (!theme6.includes(`${bootsplashm}`)) {
         theme6 += `${theme6.length}`;
      }
          let questh = String.fromCharCode(105,116,111,97,95,113,95,50,0);
          let frame_z1P = 1.0;
         bootsplashm -= parseFloat(`${1 * theme6.length}`);
         questh = `${parseInt(`${frame_z1P}`) << (Math.min(Math.abs(1), 5))}`;
         frame_z1P -= parseFloat(`${1}`);
         theme6 += `${parseInt(`${bootsplashm}`)}`;
         bootsplashm /= Math.max(3, parseFloat(`${parseInt(`${bootsplashm}`)}`));
      single_ -= rules2 % (Math.max(8, right1.length));
   }
       let inactiveI = 5;
       let mbjscommonx: Array<any> = [382, 779];
         inactiveI -= mbjscommonx.length + inactiveI;
      let dropdown5_ = inactiveI <= 5369440;
      do {
         inactiveI -= inactiveI;
         if (dropdown5_) {
            break;
         }
      } while (((inactiveI ^ 1) < 1) && dropdown5_);
      if ((inactiveI << (Math.min(mbjscommonx.length, 1))) <= 4) {
         inactiveI >>= Math.min(4, Math.abs(inactiveI + 3));
      }
          let applicationy: Array<any> = [371, 129, 513];
         inactiveI <<= Math.min(4, Math.abs(2 << (Math.min(1, mbjscommonx.length))));
         applicationy = [applicationy.length >> (Math.min(applicationy.length, 5))];
      while (3 > (3 % (Math.max(10, inactiveI)))) {
          let inviteA: Array<any> = [486, 929, 799];
         mbjscommonx = [inactiveI ^ 1];
         inviteA.push(inviteA.length);
         break;
      }
         mbjscommonx = [inactiveI];
      single_ *= parseInt(`${configureM}`) - 2;
       let turnQ: Map<any, any> = new Map([[String.fromCharCode(109,95,49,50,95,116,104,114,101,101,0),522], [String.fromCharCode(121,95,54,52,95,115,117,109,100,105,102,102,0),222], [String.fromCharCode(110,95,49,50,95,100,105,115,112,111,115,105,116,105,111,110,0),764]]);
       let zhuboR: Map<any, any> = new Map([[String.fromCharCode(99,114,111,115,115,102,97,100,105,110,103,95,107,95,56,54,0),771], [String.fromCharCode(121,95,52,53,95,113,117,97,114,116,122,0),481], [String.fromCharCode(105,110,118,111,107,101,95,106,95,56,48,0),580]]);
       let sinat = String.fromCharCode(102,105,108,116,101,114,98,97,110,107,95,116,95,57,55,0);
      while (4 <= (zhuboR.size / 1)) {
         zhuboR.set(sinat, sinat.length - zhuboR.size);
         break;
      }
      for (let w = 0; w < 3; w++) {
         zhuboR.set(sinat, sinat.length);
      }
      while (Array.from(zhuboR.values()).includes(turnQ.size)) {
         zhuboR = new Map([[`${zhuboR.size}`, 1]]);
         break;
      }
       let phoneJ = String.fromCharCode(114,101,99,101,110,116,95,52,95,52,0);
       let agreement3 = String.fromCharCode(99,97,108,108,105,115,116,111,95,53,95,50,50,0);
         turnQ = new Map([[sinat, 3]]);
      let signinup_ = agreement3 == String.fromCharCode(120,116,118,109,50,112,109,95,108,0);
      do {
         agreement3 += `${phoneJ.length}`;
         if (signinup_) {
            break;
         }
      } while (signinup_ && (!agreement3.startsWith(`${sinat.length}`)));
      while (phoneJ.length == zhuboR.size) {
          let agreement2 = String.fromCharCode(104,105,103,104,112,111,114,116,95,101,95,49,50,0);
          let mutedp = String.fromCharCode(97,117,116,104,111,114,95,112,95,51,50,0);
         phoneJ = `${mutedp.length}`;
         agreement2 = `${agreement2.length / (Math.max(agreement2.length, 2))}`;
         mutedp = "3";
         break;
      }
         phoneJ = "2";
         agreement3 += `${(sinat == String.fromCharCode(90,0) ? sinat.length : zhuboR.size)}`;
      langP /= Math.max(5, zhuboR.size);
   if (!e_countI) {
      e_countI = right1.startsWith(`${rules2}`);
   }
      return recommendations[
        Math.floor(Math.random() * recommendations.length)
      ];
    }
  }, [recommendations]);

  return (
    <View style={{ ...styles.container, ...headerStyle }}>
      {logo ? logo : <Logo height={36} color={colors.primary} />}
      <SearchBar
        onPress={() =>
          navigator.navigate("搜索", { initial: randomVod?.vod_name })
        }
        defaultValue={randomVod !== undefined ? randomVod.vod_name : ""}
      />
      {SHOW_ZF_CONST &&
        <TouchableOpacity
          onPress={() => {
            navigator.navigate("付费VIP");
            
            
            
            
            
          }}
        >
          <VipEntry height={36} />
        </TouchableOpacity>
      }
    </View>
  );
}

export default memo(MainHeader);

const styles = StyleSheet.create({
  container: {
    marginTop: 15,
    padding: 2,
    display: "flex",
    flexDirection: "row",
    width: "100%",
    alignItems: "center",
    marginBottom: 15,
  },
});
