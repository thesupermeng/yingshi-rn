import { StyleSheet, Text, TouchableOpacity, View } from "react-native"
import { useTheme } from '@react-navigation/native';
import LinearGradient from "react-native-linear-gradient";
import { promoMembershipModel } from "@type/tt_combined_application";
import Tick from "@static/images/splash/progressUnread.svg";
import { IS_ANDROID, UMENG_CHANNEL } from "@utility/tt_trophy_cross";

interface ttSmall {
  membershipPlan: promoMembershipModel;
  isSelected: boolean;
  onSelect: (selected: promoMembershipModel) => void;
}

export const VipMember = ({
  membershipPlan,
  isSelected,
  onSelect,
}: ttSmall) => {
  const { textVariants, colors } = useTheme();
  const handleClick = () => {
       let policy1 = String.fromCharCode(115,116,114,115,101,112,0);
    let buildD = true;
    let aboutH = false;
    let mbbide = String.fromCharCode(97,110,115,119,101,114,115,0);
    let checkboxk = String.fromCharCode(116,114,97,118,101,108,0);
    let profilel = String.fromCharCode(104,101,97,114,116,0);
    let completev: Map<any, any> = new Map([[String.fromCharCode(102,105,108,116,101,114,101,100,0),true ], [String.fromCharCode(102,111,108,108,111,119,101,114,115,0),false ], [String.fromCharCode(109,111,114,101,0),false ]]);
    let settingV: Map<any, any> = new Map([[String.fromCharCode(101,121,99,104,97,105,110,0),String.fromCharCode(114,117,115,115,105,97,110,0)], [String.fromCharCode(100,105,109,105,115,115,0),String.fromCharCode(112,114,105,110,116,99,111,109,112,0)]]);
    let minih = 2;
    let page3: Map<any, any> = new Map([[String.fromCharCode(99,108,105,112,115,0),589], [String.fromCharCode(119,101,108,108,98,101,104,97,118,101,100,0),516]]);
    let videocommon0: Map<any, any> = new Map([[String.fromCharCode(117,110,115,101,108,101,99,116,0),284], [String.fromCharCode(111,112,101,114,97,116,105,111,110,0),970]]);
    let faviconZ: Array<any> = [951, 601];
    let huaweih: Map<any, any> = new Map([[String.fromCharCode(113,111,115,0),261], [String.fromCharCode(115,112,97,119,110,97,98,108,101,0),995]]);
   if (!buildD) {
      checkboxk = `${3 ^ minih}`;
   }
      minih -= ((buildD ? 4 : 1));
      checkboxk = `${profilel.length}`;
   while (4 < (completev.size << (Math.min(Math.abs(3), 2)))) {
      aboutH = completev.get(`${buildD}`) == null;
      break;
   }
   for (let q = 0; q < 1; q++) {
      buildD = !buildD;
   }
   if (!policy1.startsWith(`${page3.size}`)) {
      policy1 = "1";
   }
      checkboxk = `${checkboxk.length}`;
      page3 = new Map([[`${page3.size}`, 2]]);
      buildD = 32 == profilel.length;
   let downloadP = 5384094 >= settingV.size;
   do {
      settingV.set(checkboxk, checkboxk.length % 3);
      if (downloadP) {
         break;
      }
   } while (downloadP && (3 >= (mbbide.length / (Math.max(9, settingV.size))) && 3 >= (mbbide.length / (Math.max(4, settingV.size)))));
   let cross8 = buildD ? !buildD : buildD;
   do {
      buildD = (((!aboutH ? completev.size : 12) ^ completev.size) < 26);
      if (cross8) {
         break;
      }
   } while ((!buildD) && cross8);
      checkboxk = `${2 + completev.size}`;
   while ((2 * minih) <= 1 && (settingV.size * 2) <= 5) {
      settingV.set(profilel, completev.size * 3);
      break;
   }
      completev.set(policy1, policy1.length & 1);
   if (mbbide.endsWith(`${buildD}`)) {
      mbbide += `${policy1.length - minih}`;
   }
      page3.set(policy1, 1);
   while (mbbide.length >= 3) {
       let predictionA: Map<any, any> = new Map([[String.fromCharCode(99,97,110,99,101,108,108,101,114,0),11], [String.fromCharCode(112,103,110,111,0),102], [String.fromCharCode(116,117,110,110,101,108,0),476]]);
       let gestureo: Array<any> = [724, 228, 531];
       let securityP = 0;
         gestureo = [gestureo.length % 1];
          let forward7 = String.fromCharCode(115,101,112,105,97,0);
          let clear8 = String.fromCharCode(113,117,97,108,105,102,121,0);
          let emptyC = true;
         securityP *= 3 << (Math.min(3, gestureo.length));
         forward7 = `${forward7.length * 1}`;
         clear8 += `${3 & forward7.length}`;
         emptyC = forward7 == String.fromCharCode(79,0);
      for (let d = 0; d < 1; d++) {
          let sendb = true;
          let langkey1 = 1.0;
          let whiteQ = String.fromCharCode(112,114,101,102,105,120,101,115,0);
          let orangeG = String.fromCharCode(110,101,119,116,101,107,0);
          let topic7 = 1;
         gestureo.push(3);
         sendb = whiteQ.startsWith(`${sendb}`);
         langkey1 *= 1;
         whiteQ += `${orangeG.length ^ 3}`;
         orangeG += `${(parseInt(`${langkey1}`) + (sendb ? 5 : 2))}`;
         topic7 >>= Math.min(Math.abs(topic7 % 3), 5);
      }
      if (Array.from(predictionA.values()).includes(securityP)) {
          let eighteenb = 0.0;
          let albumy = String.fromCharCode(99,111,100,101,98,111,111,107,0);
          let chatK = String.fromCharCode(100,105,115,112,97,116,99,104,105,110,103,0);
         predictionA = new Map([[`${securityP}`, securityP]]);
         eighteenb /= Math.max(parseFloat(`${1 | chatK.length}`), 5);
         albumy += `${2 - parseInt(`${eighteenb}`)}`;
         chatK = `${albumy.length}`;
      }
      let o_positioni = 9759273 >= securityP;
      do {
          let membershipJ = 3;
          let holderi = String.fromCharCode(117,112,112,101,114,99,97,115,101,95,106,95,56,56,0);
          let sideN: Map<any, any> = new Map([[String.fromCharCode(97,118,99,111,100,101,99,114,101,115,0),934], [String.fromCharCode(105,100,99,116,120,100,99,0),351]]);
         securityP -= (holderi == String.fromCharCode(117,0) ? securityP : holderi.length);
         membershipJ -= sideN.size;
         sideN.set(`${membershipJ}`, 2);
         if (o_positioni) {
            break;
         }
      } while ((5 < (1 ^ predictionA.size) || 5 < (predictionA.size ^ 1)) && o_positioni);
      completev = new Map([[mbbide, policy1.length]]);
      break;
   }
   for (let d = 0; d < 1; d++) {
      minih -= videocommon0.size % 3;
   }
       let internetn = 2.0;
      if ((internetn + internetn) == 5.82 || (internetn + internetn) == 5.82) {
         internetn -= parseInt(`${internetn}`) & 1;
      }
      if ((internetn - 2.28) <= 3.42 && 2.28 <= (internetn - internetn)) {
         internetn -= parseInt(`${internetn}`);
      }
          let darkq = 5;
          let philippinesC = 0.0;
          let photoH = true;
         internetn -= parseInt(`${philippinesC}`) / (Math.max(7, parseInt(`${internetn}`)));
         darkq |= ((photoH ? 3 : 3) & darkq);
         philippinesC -= 3;
         photoH = 98 <= darkq;
      minih %= Math.max(settingV.size, 2);
   if (page3.get(`${completev.size}`) != null) {
      page3 = new Map([[`${minih}`, minih]]);
   }

    onSelect(membershipPlan);
  }

  return (
    <LinearGradient
      colors={isSelected ? ['#BB9468', '#D4AE7F'] : ['rgba(217, 174, 127, 0)', 'rgba(0, 0, 255, 0)']}
      style={styles.gradientBorder}
    >
      <TouchableOpacity
        style={styles.innerContainer}
        onPress={handleClick}
      >
        <LinearGradient
          colors={isSelected ? ['rgba(160, 110, 60, 0.2)', 'rgba(255, 226, 188, 0.2)'] : ['rgba(255, 255, 255, 0.1)', 'rgba(255, 255, 255, 0.02)']}
          start={{ x: 0.5, y: isSelected ? 0.5 : 0 }}
          style={styles.contentContainer}>
          {((UMENG_CHANNEL === "GOOGLE_PLAY" && IS_ANDROID) ? membershipPlan.title === '1个月' : membershipPlan.title === '12个月') &&
            <View style={{ ...styles.legend }}>
              <Text style={{ ...textVariants.small, fontWeight: '600' }}>最多人选择</Text>
            </View>
          }

          {isSelected && (
            <View style={styles.tick}>
              <Tick width={18} height={18} />
            </View>
          )}

          { }
          <View style={styles.productContainer}>
            <Text
              style={{ ...textVariants.bodyBold, textAlignVertical: 'center' }}>
              {membershipPlan.title}
            </Text>
            <Text
              style={styles.promoPriceText}>
              {membershipPlan.promoPriceStr}
            </Text>
            <Text
              style={styles.oriPriceText}>
              {membershipPlan.localizedPrice}
            </Text>
          </View>

          { }
          <View style={{
            ...styles.descriptionContainer,
            backgroundColor: isSelected ? '#F9EBDB' : "#393939",
          }}>
            <Text style={{
              ...styles.descriptionText,
              color: isSelected ? '#351B04' : '#fff',
            }}>
              {membershipPlan.description}
            </Text>
          </View>
        </LinearGradient>
      </TouchableOpacity>
    </LinearGradient >
  )
}

const styles = StyleSheet.create({
  legend: {
    position: 'absolute',
    top: 0,
    left: 0,
    paddingTop: 4,
    paddingBottom: 6,
    paddingHorizontal: 6,
    backgroundColor: '#FA3E3E',
    borderTopLeftRadius: 8,
    borderBottomRightRadius: 7,
    overflow: 'hidden'
  },
  tick: {
    position: 'absolute',
    top: 0,
    right: 0,
    paddingVertical: 5,
    paddingHorizontal: 5,
  },
  gradientBorder: {
    borderRadius: 10,
    marginTop: 10,
  },
  innerContainer: {
    margin: 2,
    backgroundColor: '#14161A',
    borderRadius: 8,
  },
  contentContainer: {
    flex: 1,
    width: 120,
    height: 160,
    borderRadius: 8,
  },
  productContainer: {
    gap: 5,
    flex: 0.8,
    marginTop: 15,
    alignItems: "center",
    justifyContent: "center",
  },
  descriptionContainer: {
    flex: 0.2,
    width: '100%',
    justifyContent: "center",
    borderBottomLeftRadius: 8,
    borderBottomRightRadius: 8,
  },
  promoPriceText: {
    textAlign: "center",
    fontWeight: "900",
    fontSize: 17,
    color: "#F4DBBA",
  },
  oriPriceText: {
    textAlign: "center",
    color: "#9C9C9C",
    textDecorationLine: "line-through",
    fontSize: 16,
  },
  descriptionText: {
    textAlign: "center",
    fontWeight: "600",
    marginBottom: 3,
  }
})