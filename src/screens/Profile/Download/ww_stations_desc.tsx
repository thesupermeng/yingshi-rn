import { RootStackScreenProps } from "@type/ww_tempnodatagif_description"
import ScreenContainer from "../../../components/container/ww_collection"
import TitleWithBackButtonHeader from "../../../components/header/ww_react_predictionwin_header"
import { FlatList, Pressable, StyleSheet, Text, TouchableOpacity, View } from "react-native"
import { useCallback, useState } from "react"
import { useTheme } from "@react-navigation/native"
import { useAppDispatch, useAppSelector } from "@hooks/ww_catagory_neon"
import { wwEighteenShirt } from "@redux/ww_small"
import { wwTextinputDirect } from "@type/ww_skip"
import EmptyList from "../../../components/common/ww_reducer_libreact"
import DownloadVodCard from "../../../components/download/ww_humidity"
import CheckBoxSelected from "@static/images/androidSigmob.svg";
import CheckBoxUnselected from "@static/images/twitterNbatrophy.svg";
import { wwControl } from "@type/ww_dycreator_result"
import ConfirmationModal from "../../../components/modal/ww_upgrade"
import { Button } from "@rneui/themed"
import { removeVodFromDownloadThunk } from "@redux/actions/ww_benefit_filled"
import { IS_OTHER_SKIN } from "@utility/ww_icon"

const DownloadCatalog = ({ navigation }: RootStackScreenProps<"我的下载">) => {
  const { colors, textVariants, icons, spacing } = useTheme();
  const [isEditing, setIsEditing] = useState(false);
  const [removeHistory, setRemoveHistory] = useState<wwControl[]>([]);
  const allDownloads = useAppSelector(({ downloadVideoReducer }: wwEighteenShirt) => downloadVideoReducer.downloads)
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const dispatch = useAppDispatch();


  const toggleHistory = (vod: wwControl) => {
    const filtered = removeHistory.filter((x) => x.vod_id !== vod.vod_id);
    if (filtered.length === removeHistory.length) {
      setRemoveHistory([vod, ...removeHistory]);
    } else {
      setRemoveHistory(filtered);
    }
  };

  const toggleOverlay = useCallback(() => {
       let macauX: Array<any> = [String.fromCharCode(118,95,57,57,95,115,97,118,105,110,103,0), String.fromCharCode(108,105,110,107,105,110,103,95,117,95,57,55,0)];
    let whiteanimationlivee = String.fromCharCode(121,95,49,56,95,109,100,112,114,0);
    let mappingd = String.fromCharCode(106,95,53,51,95,115,117,114,101,0);
    let customD: Array<any> = [126, 48];
    let watchnowbgc = String.fromCharCode(107,95,49,50,95,97,118,103,115,97,100,0);
    let l_viewJ = String.fromCharCode(104,95,55,52,95,115,104,105,109,0);
    let kickj = true;
    let trophyL = String.fromCharCode(99,111,110,118,101,114,116,105,98,108,101,95,101,95,54,52,0);
    let loadingt = String.fromCharCode(119,101,98,112,95,110,95,53,52,0);
    let minimize1 = 3;
    let tickW = false;
    let nalyticsx = String.fromCharCode(118,105,115,117,97,108,105,122,97,116,105,111,110,95,48,95,57,50,0);
    let flipperr = String.fromCharCode(110,95,51,51,95,118,105,115,98,108,101,0);
    let signinupn = String.fromCharCode(110,95,55,51,95,101,109,98,101,100,100,101,100,0);
   if (4 == loadingt.length) {
      trophyL = "2";
   }
   let static_qxc = whiteanimationlivee == String.fromCharCode(50,105,51,49,112,118,122,106,0);
   do {
       let valuesf = 4;
       let acceptedx = 1.0;
      let leakchecker1 = 9701785.0 >= acceptedx;
      do {
          let videos = String.fromCharCode(97,100,106,117,115,116,109,101,110,116,115,95,107,95,50,53,0);
          let awayteamfieldk: Array<any> = [893, 152, 598];
          let iconsaveimagee = String.fromCharCode(116,114,101,101,115,95,104,95,56,0);
         acceptedx *= parseFloat(`${1 % (Math.max(8, videos.length))}`);
         videos = `${1 & awayteamfieldk.length}`;
         awayteamfieldk.push(awayteamfieldk.length % (Math.max(iconsaveimagee.length, 10)));
         iconsaveimagee = "2";
         if (leakchecker1) {
            break;
         }
      } while (leakchecker1 && ((3 ^ valuesf) == 5));
      while ((parseFloat(`${valuesf}`) * acceptedx) > 4.3 && 4 > (2 ^ valuesf)) {
         acceptedx -= parseFloat(`${valuesf}`);
         break;
      }
         valuesf >>= Math.min(3, Math.abs(valuesf + parseInt(`${acceptedx}`)));
         valuesf |= 1;
         acceptedx /= Math.max(parseFloat(`${3}`), 5);
         valuesf -= valuesf;
      whiteanimationlivee += `${mappingd.length + 3}`;
      if (static_qxc) {
         break;
      }
   } while ((loadingt != whiteanimationlivee) && static_qxc);
   if (trophyL == mappingd) {
      mappingd = `${customD.length % (Math.max(3, 1))}`;
   }
       let historyu: Map<any, any> = new Map([[String.fromCharCode(116,114,97,105,108,101,114,95,52,95,52,49,0),107], [String.fromCharCode(100,101,115,99,95,101,95,51,53,0),505], [String.fromCharCode(100,105,97,108,111,103,117,101,115,95,117,95,51,48,0),744]]);
       let singlez = String.fromCharCode(113,95,55,57,95,116,111,116,97,108,115,0);
       let screenv = String.fromCharCode(119,101,108,115,100,101,99,100,101,109,111,95,101,95,49,52,0);
      for (let p = 0; p < 3; p++) {
         screenv += `${3 + singlez.length}`;
      }
          let apples = String.fromCharCode(116,105,109,101,115,95,54,95,56,50,0);
          let aboutZ = 5;
         singlez += `${(apples == String.fromCharCode(120,0) ? aboutZ : apples.length)}`;
      while (5 <= screenv.length) {
         screenv = `${singlez.length % 3}`;
         break;
      }
      if (screenv.includes(`${historyu.size}`)) {
         screenv += `${historyu.size}`;
      }
          let gemfilet = String.fromCharCode(119,114,97,112,95,102,95,49,48,48,0);
          let questicono = String.fromCharCode(108,95,49,57,95,97,108,108,114,103,98,0);
          let typings = String.fromCharCode(101,95,57,95,97,100,106,117,115,116,109,101,110,116,0);
         singlez += `${typings.length * gemfilet.length}`;
         gemfilet += `${questicono.length}`;
         questicono = "2";
      let libreactperfloggerjni9 = singlez == String.fromCharCode(119,52,118,120,114,52,120,97,100,0);
      do {
         singlez = `${singlez.length + screenv.length}`;
         if (libreactperfloggerjni9) {
            break;
         }
      } while (((historyu.size / (Math.max(singlez.length, 6))) > 3 && (historyu.size / 3) > 5) && libreactperfloggerjni9);
          let sourceN: Map<any, any> = new Map([[String.fromCharCode(111,102,102,115,101,116,115,105,122,101,95,100,95,51,48,0),String.fromCharCode(97,116,114,97,99,112,108,117,115,95,103,95,49,57,0)], [String.fromCharCode(105,110,116,101,114,97,116,105,111,110,95,102,95,51,50,0),String.fromCharCode(97,97,99,101,110,99,100,115,112,95,102,95,53,56,0)], [String.fromCharCode(101,95,57,57,95,116,114,97,110,115,109,105,116,0),String.fromCharCode(107,95,57,56,95,98,114,97,110,99,104,0)]]);
          let minivod3 = 0.0;
         singlez += `${(singlez == String.fromCharCode(65,0) ? singlez.length : parseInt(`${minivod3}`))}`;
         sourceN = new Map([[`${sourceN.size}`, 3 / (Math.max(9, sourceN.size))]]);
         minivod3 /= Math.max(5, 2);
         historyu = new Map([[`${historyu.size}`, historyu.size | screenv.length]]);
      while (4 >= (historyu.size / (Math.max(singlez.length, 1)))) {
         singlez = `${3 * screenv.length}`;
         break;
      }
      watchnowbgc += `${2 / (Math.max(2, trophyL.length))}`;
       let launcher4 = 2;
         launcher4 /= Math.max(4, launcher4 << (Math.min(Math.abs(1), 1)));
      while (3 <= launcher4) {
         launcher4 >>= Math.min(Math.abs(launcher4 + launcher4), 2);
         break;
      }
         launcher4 |= launcher4;
      kickj = 14 > whiteanimationlivee.length;
   for (let z = 0; z < 2; z++) {
       let downarrowU = String.fromCharCode(110,101,119,115,108,101,116,116,101,114,95,111,95,52,50,0);
         downarrowU = `${downarrowU.length}`;
      while (downarrowU.length > 1) {
         downarrowU = `${(String.fromCharCode(78,0) == downarrowU ? downarrowU.length : downarrowU.length)}`;
         break;
      }
         downarrowU = `${downarrowU.length}`;
      kickj = tickW;
   }
   for (let w = 0; w < 1; w++) {
      watchnowbgc += `${(whiteanimationlivee == String.fromCharCode(69,0) ? whiteanimationlivee.length : watchnowbgc.length)}`;
   }
      tickW = String.fromCharCode(122,0) == loadingt;
   if (!mappingd.endsWith(`${tickW}`)) {
       let arrowupK = true;
       let selectionX: Map<any, any> = new Map([[String.fromCharCode(117,95,51,53,95,99,111,118,101,114,105,110,103,0),495], [String.fromCharCode(97,95,53,50,95,109,101,109,99,112,121,0),539]]);
      if (5 == selectionX.size && (5 | selectionX.size) == 4) {
         selectionX.set(`${arrowupK}`, 3 & selectionX.size);
      }
      while (!arrowupK) {
         selectionX.set(`${arrowupK}`, 2 & selectionX.size);
         break;
      }
      let penaltygoalV = selectionX.size >= 6998992;
      do {
         selectionX = new Map([[`${selectionX.size}`, selectionX.size]]);
         if (penaltygoalV) {
            break;
         }
      } while ((selectionX.size > 4) && penaltygoalV);
       let sliderv = false;
          let greytick9 = 5;
         sliderv = arrowupK;
         greytick9 *= greytick9 & greytick9;
         selectionX = new Map([[`${selectionX.size}`, (selectionX.size + (arrowupK ? 1 : 3))]]);
      tickW = 87 >= mappingd.length;
   }
   let lives = trophyL == String.fromCharCode(105,100,113,106,113,111,119,107,117,100,0);
   do {
       let iconarrowrightF = String.fromCharCode(116,95,57,50,95,99,97,108,108,98,97,99,107,115,0);
       let chatb = String.fromCharCode(98,105,110,97,114,121,95,109,95,53,54,0);
       let albumS: Array<any> = [170, 20, 599];
      let gradlewT = 9758911 >= albumS.length;
      do {
         albumS.push(3);
         if (gradlewT) {
            break;
         }
      } while ((iconarrowrightF.length <= albumS.length) && gradlewT);
         albumS.push(iconarrowrightF.length / 3);
      if (iconarrowrightF == String.fromCharCode(101,0) || chatb == String.fromCharCode(69,0)) {
          let nativeZ = String.fromCharCode(113,95,49,49,95,99,101,114,116,115,0);
          let stylesh: Array<any> = [78, 880];
          let hiadW = 5.0;
          let configureZ = false;
          let u_hashd: Map<any, any> = new Map([[String.fromCharCode(98,121,116,101,115,95,108,95,50,54,0),true ], [String.fromCharCode(100,114,97,119,97,98,108,101,95,52,95,50,52,0),false ], [String.fromCharCode(99,97,108,99,117,108,97,116,101,95,118,95,50,52,0),false ]]);
         iconarrowrightF += `${stylesh.length}`;
         nativeZ = `${u_hashd.size * 3}`;
         stylesh = [((configureZ ? 5 : 3) | nativeZ.length)];
         hiadW *= 2 % (Math.max(parseInt(`${hiadW}`), 9));
         u_hashd.set(`${configureZ}`, ((configureZ ? 5 : 3) * parseInt(`${hiadW}`)));
      }
         chatb = `${albumS.length}`;
       let guided: Array<any> = [849, 938, 716];
       let orientationH: Array<any> = [71, 631, 126];
       let related_: Array<any> = [916, 332];
       let videoK: Array<any> = [880, 971];
         videoK = [2 % (Math.max(10, related_.length))];
      while ((5 & orientationH.length) >= 1 || 5 >= (orientationH.length & albumS.length)) {
         orientationH = [albumS.length >> (Math.min(Math.abs(1), 3))];
         break;
      }
         videoK.push(related_.length / (Math.max(2, 6)));
      trophyL = `${iconarrowrightF.length}`;
      if (lives) {
         break;
      }
   } while ((trophyL.includes(`${l_viewJ.length}`)) && lives);
   let footballfiledlayoutx = 6882983 <= macauX.length;
   do {
      macauX.push((loadingt == String.fromCharCode(70,0) ? loadingt.length : trophyL.length));
      if (footballfiledlayoutx) {
         break;
      }
   } while (footballfiledlayoutx && ((macauX.length - 2) >= 2 || (2 - macauX.length) >= 5));
   for (let a = 0; a < 2; a++) {
       let livenodatabgimgv = String.fromCharCode(111,112,116,105,109,117,109,95,52,95,57,49,0);
       let loginsuccessX = 1.0;
       let form3 = String.fromCharCode(101,116,104,101,114,110,101,116,95,56,95,52,53,0);
       let projectN = true;
         form3 = `${((projectN ? 2 : 5) >> (Math.min(livenodatabgimgv.length, 1)))}`;
         form3 += `${((projectN ? 5 : 5) | parseInt(`${loginsuccessX}`))}`;
      if ((5 ^ form3.length) <= 2) {
         loginsuccessX *= (String.fromCharCode(55,0) == form3 ? form3.length : (projectN ? 2 : 1));
      }
      while (form3.length > 5) {
         projectN = !projectN;
         break;
      }
         form3 += `${((projectN ? 3 : 4) + parseInt(`${loginsuccessX}`))}`;
      if ((parseInt(`${loginsuccessX}`) - form3.length) <= 4 && (parseInt(`${loginsuccessX}`) - form3.length) <= 4) {
          let catalogG = String.fromCharCode(113,95,53,57,95,97,108,103,111,0);
          let reactE: Array<any> = [858, 860, 191];
         loginsuccessX *= livenodatabgimgv.length >> (Math.min(Math.abs(1), 1));
         catalogG += "1";
         reactE.push(3);
      }
       let popupq = 5.0;
          let iconfeedbackk = 0.0;
          let blackd = String.fromCharCode(120,95,56,54,95,99,117,115,116,111,109,105,122,101,0);
         livenodatabgimgv = `${1 * livenodatabgimgv.length}`;
         iconfeedbackk /= Math.max(parseFloat(`${blackd.length >> (Math.min(Math.abs(2), 3))}`), 1);
         blackd = `${parseInt(`${iconfeedbackk}`) >> (Math.min(blackd.length, 2))}`;
          let sharemodalS = 3;
          let umengv: Array<any> = [324, 564, 734];
         form3 = `${livenodatabgimgv.length * 3}`;
         sharemodalS >>= Math.min(Math.abs(sharemodalS), 4);
         umengv = [sharemodalS | 2];
       let type_vn = String.fromCharCode(98,111,114,100,101,114,95,114,95,49,51,0);
      for (let e = 0; e < 3; e++) {
          let contextV = String.fromCharCode(109,95,54,56,95,108,105,102,101,99,121,99,108,101,0);
          let rightH: Map<any, any> = new Map([[String.fromCharCode(112,114,101,115,115,101,115,95,48,95,56,49,0),968], [String.fromCharCode(114,101,108,97,116,105,118,101,108,121,95,120,95,56,49,0),246]]);
          let typesI = 0.0;
          let traminiM = true;
         popupq -= contextV.length & rightH.size;
         contextV += `${(parseInt(`${typesI}`) * (traminiM ? 4 : 1))}`;
         rightH = new Map([[`${traminiM}`, parseInt(`${typesI}`) % 2]]);
      }
      for (let e = 0; e < 1; e++) {
         livenodatabgimgv = `${3 | livenodatabgimgv.length}`;
      }
      customD = [1];
   }
   for (let s = 0; s < 2; s++) {
      macauX = [whiteanimationlivee.length | macauX.length];
   }
   let gestureK = kickj ? !kickj : kickj;
   do {
       let activitys = 3.0;
       let screen6: Map<any, any> = new Map([[String.fromCharCode(115,117,98,112,101,108,95,108,95,56,0),false ], [String.fromCharCode(110,95,51,55,95,109,117,108,116,105,100,101,115,99,114,105,112,116,111,114,0),true ], [String.fromCharCode(102,95,53,50,95,101,118,100,110,115,0),true ]]);
       let handler4: Array<any> = [675, 28];
      let matchactiveR = screen6.size >= 9105010;
      do {
         screen6.set(`${activitys}`, handler4.length);
         if (matchactiveR) {
            break;
         }
      } while (matchactiveR && (screen6.size >= 5));
         screen6 = new Map([[`${screen6.size}`, screen6.size / 2]]);
      let placeholder2 = 5105324 >= handler4.length;
      do {
          let bridge1: Array<any> = [997, 267];
          let dropdownC = String.fromCharCode(109,117,116,97,98,105,108,105,116,121,95,52,95,52,56,0);
          let countdownA = String.fromCharCode(114,95,54,49,95,105,109,112,108,101,109,101,110,116,115,0);
          let sigmob9 = String.fromCharCode(119,95,52,56,95,108,97,116,0);
          let auto_hV = 0.0;
         handler4 = [screen6.size];
         bridge1.push(dropdownC.length ^ sigmob9.length);
         dropdownC += "3";
         countdownA += `${(String.fromCharCode(122,0) == dropdownC ? dropdownC.length : countdownA.length)}`;
         sigmob9 = `${3 - sigmob9.length}`;
         auto_hV *= parseFloat(`${sigmob9.length >> (Math.min(2, countdownA.length))}`);
         if (placeholder2) {
            break;
         }
      } while (placeholder2 && (Array.from(screen6.values()).includes(handler4.length)));
         screen6 = new Map([[`${handler4.length}`, 1 >> (Math.min(Math.abs(parseInt(`${activitys}`)), 1))]]);
      for (let n = 0; n < 1; n++) {
         screen6 = new Map([[`${screen6.size}`, 3 & parseInt(`${activitys}`)]]);
      }
          let profileactivee = String.fromCharCode(120,95,50,95,105,115,115,101,116,117,103,105,100,0);
          let helperT: Map<any, any> = new Map([[String.fromCharCode(119,105,100,116,104,95,99,95,56,57,0),284], [String.fromCharCode(110,95,54,55,95,112,117,108,108,113,117,111,116,101,0),31]]);
          let libjsib: Array<any> = [496, 934, 652];
         activitys += parseFloat(`${3}`);
         profileactivee = "1";
         helperT.set(profileactivee, libjsib.length + profileactivee.length);
         libjsib = [2];
      for (let m = 0; m < 2; m++) {
         handler4 = [2];
      }
      if (3 <= (screen6.size << (Math.min(3, handler4.length))) || (screen6.size << (Math.min(2, handler4.length))) <= 3) {
          let statistics4 = String.fromCharCode(112,114,117,110,105,110,103,95,107,95,49,53,0);
          let megaphone0 = 3;
          let formC: Array<any> = [368, 395, 145];
          let runtimeschedulera: Map<any, any> = new Map([[String.fromCharCode(112,97,115,112,95,121,95,49,55,0),770], [String.fromCharCode(121,95,56,57,95,99,97,112,0),310]]);
          let minimizea = String.fromCharCode(104,95,57,52,95,99,111,112,121,0);
         screen6 = new Map([[statistics4, 2]]);
         statistics4 = "1 | megaphone0";
         megaphone0 %= Math.max(minimizea.length >> (Math.min(Math.abs(1), 3)), 2);
         formC.push(3);
         runtimeschedulera.set(`${formC.length}`, formC.length % 1);
         minimizea = `${minimizea.length}`;
      }
         screen6.set(`${handler4.length}`, screen6.size);
      kickj = customD.length > 25;
      if (gestureK) {
         break;
      }
   } while ((!tickW) && gestureK);
   while (5 >= (minimize1 - 3) || (3 - minimize1) >= 5) {
       let splashc = String.fromCharCode(99,95,52,50,95,102,108,116,112,0);
       let guide7 = String.fromCharCode(98,95,48,95,112,114,101,115,115,105,110,103,0);
       let holdery = String.fromCharCode(112,97,105,110,116,105,110,103,95,107,95,51,50,0);
      for (let k = 0; k < 1; k++) {
          let executorp = String.fromCharCode(115,101,108,102,105,101,95,107,95,49,49,0);
         guide7 = `${(holdery == String.fromCharCode(70,0) ? splashc.length : holdery.length)}`;
         executorp = `${executorp.length}`;
      }
         guide7 = `${guide7.length}`;
       let mbnativeadvancedf = true;
       let analyticsY = false;
       let backgroundO = 3.0;
       let t_positionZ = 1.0;
         guide7 = `${2 & parseInt(`${backgroundO}`)}`;
      mappingd = `${minimize1}`;
      break;
   }
      macauX.push(((kickj ? 5 : 2)));
       let clubS = 4;
          let profileframeD: Array<any> = [276, 861];
         clubS *= clubS / (Math.max(profileframeD.length, 8));
          let darkp = String.fromCharCode(103,114,101,103,111,114,105,97,110,95,112,95,52,0);
          let footballfieldt = 1.0;
         clubS ^= parseInt(`${footballfieldt}`);
         darkp = `${darkp.length}`;
         footballfieldt *= parseFloat(`${darkp.length}`);
      for (let l = 0; l < 1; l++) {
         clubS /= Math.max(2, clubS);
      }
      macauX.push(minimize1 % 1);
   for (let f = 0; f < 1; f++) {
      nalyticsx += `${((tickW ? 1 : 5) - customD.length)}`;
   }
   if (5 <= (minimize1 ^ watchnowbgc.length) || 5 <= (5 ^ minimize1)) {
      watchnowbgc += `${(mappingd == String.fromCharCode(76,0) ? watchnowbgc.length : mappingd.length)}`;
   }
   let forwardV = whiteanimationlivee == String.fromCharCode(114,99,110,121,97,109,48,103,53,0);
   do {
      whiteanimationlivee = `${whiteanimationlivee.length + 1}`;
      if (forwardV) {
         break;
      }
   } while (forwardV && (1 > whiteanimationlivee.length));
      macauX.push(whiteanimationlivee.length / (Math.max(l_viewJ.length, 1)));
   while (mappingd == l_viewJ) {
       let overlayA = 2.0;
         overlayA -= 1 / (Math.max(5, parseInt(`${overlayA}`)));
      if ((3 / (Math.max(8, overlayA))) > 2.91) {
         overlayA *= parseInt(`${overlayA}`);
      }
      if ((overlayA + overlayA) <= 4.5) {
         overlayA /= Math.max(parseInt(`${overlayA}`), 4);
      }
      l_viewJ = "2";
      break;
   }
   let buildN = kickj ? !kickj : kickj;
   do {
      kickj = 47 >= macauX.length;
      if (buildN) {
         break;
      }
   } while ((watchnowbgc.length == 1) && buildN);
   if (l_viewJ.length >= 1) {
      l_viewJ = `${((kickj ? 2 : 3) % (Math.max(10, (tickW ? 3 : 5))))}`;
   }
      loadingt = "3";

    setIsDialogOpen(!isDialogOpen);
  }, [isDialogOpen])

  const renderItem = useCallback(({ item, index }: { item: wwTextinputDirect, index: number }) => {
    return (
      <View style={styles.downloadItem}>
        {isEditing && (
          <TouchableOpacity
            style={styles.checkbox}
            onPress={() => toggleHistory(item.vod)}>
            {removeHistory.some(x => x.vod_id === item.vod.vod_id) ? (
              <CheckBoxSelected height={icons.sizes.m} width={icons.sizes.m} color={IS_OTHER_SKIN ? colors.success : colors.primary} />
            ) : (
              <CheckBoxUnselected
                height={icons.sizes.m}
                width={icons.sizes.m}
              />
            )}
          </TouchableOpacity>
        )}
        <DownloadVodCard
          activeOpacity={isEditing ? 1 : 0.2}
          download={item}
          index={index}
          vod_pic_list={[]}
          imgOrientation="horizontal"
          onPress={() => {
            if (isEditing) {
              toggleHistory(item.vod)
            } else {
              navigation.navigate('下载详情', { vodId: item.vod.vod_id })
            }
          }}
        />
      </View>
    );


  }, [isEditing, removeHistory])

  const handleSeeMore = useCallback(() => {
       let type_gec: Map<any, any> = new Map([[String.fromCharCode(100,105,115,107,95,54,95,52,52,0),145], [String.fromCharCode(122,95,53,56,95,114,101,99,111,110,115,116,114,117,99,116,0),270], [String.fromCharCode(112,114,105,110,99,105,112,97,108,95,112,95,52,55,0),447]]);
    let guidel: Array<any> = [552, 97];
    let giflivestreamingo = 4.0;
    let penaltyX = false;
    let trophy8 = 3;
    let malaysiai = true;
    let release_w6: Array<any> = [710, 67];
    let moong = 0;
   while ((guidel.length >> (Math.min(5, Math.abs(moong)))) == 1 || 4 == (1 >> (Math.min(1, Math.abs(moong))))) {
      guidel.push(type_gec.size);
      break;
   }
       let textlayoutmanager5 = 4.0;
       let circleD = 4.0;
      let iconwechatH = textlayoutmanager5 <= 5264057.0;
      do {
         textlayoutmanager5 -= parseInt(`${circleD}`);
         if (iconwechatH) {
            break;
         }
      } while (iconwechatH && (2.60 > (circleD * textlayoutmanager5) && 4.35 > (2.60 * textlayoutmanager5)));
         circleD *= parseFloat(`${parseInt(`${textlayoutmanager5}`) & parseInt(`${circleD}`)}`);
          let shirtQ = false;
         textlayoutmanager5 += (parseInt(`${circleD}`) & (shirtQ ? 3 : 1));
      for (let d = 0; d < 1; d++) {
          let trashD = String.fromCharCode(109,111,100,105,102,105,101,114,95,122,95,57,48,0);
          let renew0 = String.fromCharCode(98,97,99,107,103,114,111,117,110,100,95,48,95,55,55,0);
         circleD += parseFloat(`${2 >> (Math.min(2, Math.abs(parseInt(`${textlayoutmanager5}`))))}`);
         trashD = `${renew0.length % (Math.max(trashD.length, 9))}`;
         renew0 += `${1 - renew0.length}`;
      }
          let libavfilter4: Map<any, any> = new Map([[String.fromCharCode(97,108,109,111,115,116,95,54,95,56,48,0),String.fromCharCode(105,109,112,111,115,115,105,98,108,101,95,98,95,52,50,0)], [String.fromCharCode(114,101,99,111,110,102,105,103,95,99,95,52,57,0),String.fromCharCode(109,98,109,111,100,101,95,109,95,50,55,0)]]);
         circleD *= parseFloat(`${1 << (Math.min(2, Math.abs(parseInt(`${textlayoutmanager5}`))))}`);
         libavfilter4.set(`${libavfilter4.size}`, libavfilter4.size);
         circleD *= parseFloat(`${2 >> (Math.min(Math.abs(parseInt(`${textlayoutmanager5}`)), 3))}`);
      penaltyX = giflivestreamingo < 46.55;
   let yingY = 8719443 <= trophy8;
   do {
       let codegenI = false;
       let vipsporta = 3.0;
         codegenI = 80.24 <= vipsporta;
         vipsporta /= Math.max(3 % (Math.max(parseInt(`${vipsporta}`), 3)), 4);
      if ((5.92 + vipsporta) < 2.48) {
         codegenI = !codegenI;
      }
          let recommendationi = String.fromCharCode(100,105,102,102,97,98,108,101,95,53,95,55,56,0);
          let twitterG = String.fromCharCode(109,97,116,99,104,105,110,102,111,95,115,95,49,48,48,0);
          let libavutilD = 5;
         codegenI = 65 < recommendationi.length;
         recommendationi = `${(twitterG == String.fromCharCode(52,0) ? libavutilD : twitterG.length)}`;
         libavutilD -= twitterG.length;
         codegenI = vipsporta < 31.79;
         vipsporta -= ((codegenI ? 4 : 2) / (Math.max(parseInt(`${vipsporta}`), 4)));
      trophy8 %= Math.max(5, 3);
      if (yingY) {
         break;
      }
   } while (yingY && (penaltyX));
   for (let t = 0; t < 1; t++) {
      trophy8 %= Math.max(((malaysiai ? 4 : 2) ^ release_w6.length), 5);
   }
   let homel = release_w6.length >= 9816186;
   do {
      release_w6 = [parseInt(`${giflivestreamingo}`) + 2];
      if (homel) {
         break;
      }
   } while (homel && ((moong * 5) >= 4 && (release_w6.length * 5) >= 5));
      type_gec = new Map([[`${release_w6.length}`, release_w6.length / (Math.max(1, 9))]]);
   while (3 <= (parseInt(`${giflivestreamingo}`) + guidel.length)) {
       let libavutild = String.fromCharCode(118,95,52,55,95,110,111,104,119,0);
         libavutild += `${libavutild.length}`;
      let xnewssharel = String.fromCharCode(99,99,114,99,121,53,54,103,0) == libavutild;
      do {
         libavutild = "1";
         if (xnewssharel) {
            break;
         }
      } while ((!libavutild.includes(`${libavutild.length}`)) && xnewssharel);
         libavutild += `${libavutild.length}`;
      guidel.push(2 + type_gec.size);
      break;
   }
   if (!penaltyX) {
      penaltyX = 7 <= (moong & trophy8);
   }
   let iconl = 9879397 >= guidel.length;
   do {
      guidel.push((type_gec.size - (malaysiai ? 2 : 4)));
      if (iconl) {
         break;
      }
   } while ((guidel.length == type_gec.size) && iconl);
      giflivestreamingo /= Math.max(5, 3);
   let team9 = 7826700 >= moong;
   do {
      moong |= ((malaysiai ? 3 : 4) - trophy8);
      if (team9) {
         break;
      }
   } while ((5 >= (type_gec.size / 2) || 1 >= (2 / (Math.max(4, type_gec.size)))) && team9);
   let countdownQ = release_w6.length <= 7817478;
   do {
       let chate = 5.0;
       let proxyN: Map<any, any> = new Map([[String.fromCharCode(99,112,108,115,99,97,108,101,115,95,116,95,52,0),String.fromCharCode(115,119,105,116,99,104,101,100,95,100,95,53,56,0)], [String.fromCharCode(113,95,57,54,95,97,98,115,120,0),String.fromCharCode(104,95,56,55,95,99,108,101,97,110,0)]]);
       let iconfeedbackE = 1;
       let pointS = String.fromCharCode(103,95,52,52,95,113,117,111,116,105,101,110,116,0);
       let recommendation_ = 1;
         proxyN.set(`${recommendation_}`, proxyN.size);
      let eventsplashB = 9196679 >= pointS.length;
      do {
         pointS += `${1 << (Math.min(2, Math.abs(recommendation_)))}`;
         if (eventsplashB) {
            break;
         }
      } while (eventsplashB && (5.74 >= (4.85 + chate)));
          let commong = String.fromCharCode(100,95,49,48,95,114,115,97,122,0);
         proxyN = new Map([[`${iconfeedbackE}`, iconfeedbackE + 1]]);
         commong = `${2 ^ commong.length}`;
      if (!Array.from(proxyN.values()).includes(iconfeedbackE)) {
         proxyN.set(`${iconfeedbackE}`, recommendation_);
      }
      if ((recommendation_ >> (Math.min(Math.abs(3), 4))) < 3 && 5 < (3 >> (Math.min(2, Math.abs(proxyN.size))))) {
         proxyN = new Map([[`${iconfeedbackE}`, iconfeedbackE]]);
      }
      if (iconfeedbackE <= 5) {
         iconfeedbackE ^= iconfeedbackE / 1;
      }
      let philippinesV = pointS.length <= 7619660;
      do {
         pointS += `${pointS.length}`;
         if (philippinesV) {
            break;
         }
      } while (philippinesV && (pointS.length == 5));
      for (let x = 0; x < 1; x++) {
         pointS += "1";
      }
         iconfeedbackE -= iconfeedbackE;
         proxyN.set(`${chate}`, parseInt(`${chate}`));
      if (chate == pointS.length) {
          let incident8: Array<any> = [157, 766];
          let confirmation3: Array<any> = [873, 694];
         pointS = `${incident8.length}`;
         incident8 = [confirmation3.length - 1];
         confirmation3.push(confirmation3.length);
      }
       let adulty: Array<any> = [334, 826];
       let short_3yD: Array<any> = [221, 160];
         pointS = "3";
          let becomea = String.fromCharCode(99,104,97,110,103,101,114,95,120,95,53,50,0);
         proxyN = new Map([[`${adulty.length}`, adulty.length - recommendation_]]);
         becomea += `${becomea.length}`;
      let proxym = adulty.length <= 6302407;
      do {
         adulty.push(pointS.length << (Math.min(Math.abs(2), 2)));
         if (proxym) {
            break;
         }
      } while (proxym && ((adulty.length >> (Math.min(Math.abs(4), 4))) > 3 && (adulty.length >> (Math.min(Math.abs(4), 1))) > 3));
      release_w6 = [release_w6.length];
      if (countdownQ) {
         break;
      }
   } while (countdownQ && (3 > moong));
      trophy8 ^= 1 ^ parseInt(`${giflivestreamingo}`);
       let appleg: Map<any, any> = new Map([[String.fromCharCode(115,95,51,48,95,99,108,97,105,109,115,0),String.fromCharCode(112,108,111,116,95,111,95,53,56,0)], [String.fromCharCode(100,101,109,111,95,111,95,57,55,0),String.fromCharCode(116,104,97,116,95,119,95,49,50,0)]]);
       let fieldg = 3.0;
       let abidetectw = 4.0;
      for (let i = 0; i < 1; i++) {
         appleg.set(`${fieldg}`, 3);
      }
       let sellz = 4;
      if ((3.59 - fieldg) >= 3.14 && (fieldg - 3.59) >= 3.83) {
         sellz <<= Math.min(3, Math.abs(3));
      }
      if (1.91 <= abidetectw) {
         fieldg -= appleg.size;
      }
      while ((3.91 + fieldg) >= 4.64 || 2.52 >= (abidetectw / 3.91)) {
         abidetectw /= Math.max(appleg.size / (Math.max(9, parseInt(`${fieldg}`))), 2);
         break;
      }
      let viewsn = 8739859.0 >= abidetectw;
      do {
         abidetectw += 1 + parseInt(`${abidetectw}`);
         if (viewsn) {
            break;
         }
      } while (viewsn && ((appleg.size / (Math.max(3, abidetectw))) == 2.46));
      while (Array.from(appleg.keys()).includes(`${sellz}`)) {
         sellz *= 2;
         break;
      }
      let fastforwardA = abidetectw <= 7787772.0;
      do {
          let preview3 = String.fromCharCode(111,118,97,108,95,55,95,57,54,0);
         abidetectw *= (String.fromCharCode(106,0) == preview3 ? preview3.length : parseInt(`${abidetectw}`));
         if (fastforwardA) {
            break;
         }
      } while (fastforwardA && ((abidetectw / (Math.max(4, fieldg))) < 2.70));
         fieldg *= sellz;
      moong %= Math.max(4, 2);
   if (!penaltyX) {
      trophy8 &= 1 * parseInt(`${giflivestreamingo}`);
   }
      type_gec = new Map([[`${type_gec.size}`, release_w6.length & type_gec.size]]);
      moong |= 1;
      release_w6 = [type_gec.size / 3];
      malaysiai = 38.45 > giflivestreamingo;

    navigation.navigate("Home", { screen: '首页' })
  }, [])

  return (
    <ScreenContainer>
      <TitleWithBackButtonHeader
        title="我的下载"
        right={
          <Pressable
            onPress={() => {
              setIsEditing(!isEditing);
            }}
          >
            <Text
              style={{
                ...textVariants.body,
                
                opacity: allDownloads && allDownloads.length > 0 ? 100 : 0,
              }}
            >
              {isEditing ? "取消" : "编辑"}
            </Text>
          </Pressable>
        }
      />
      <View style={styles.contentContainer}>
        {
          allDownloads.length > 0 ?
            <>
              <FlatList
                data={allDownloads.sort((a, b) => a.vod.vod_id - b.vod.vod_id)}
                renderItem={renderItem}
                keyExtractor={(item, index) => item.vod.vod_id.toString()}
                showsVerticalScrollIndicator={false}
              />
              <ConfirmationModal
                onConfirm={() => {
                  for (const item of removeHistory) {
                    dispatch(removeVodFromDownloadThunk(item, 0, 0))
                  }
                  setIsEditing(false);
                  setRemoveHistory([]);
                  toggleOverlay();
                }}
                onCancel={toggleOverlay}
                isVisible={isDialogOpen}
                title="清除提示"
                subtitle="您是否确定清除？"
              />
              {isEditing && (
                <View style={styles.deleteConfirmationModal}>
                  <Button
                    onPress={() => {
                      if (
                        removeHistory.length === 0 ||
                        removeHistory.length !== allDownloads.length
                      ) {
                        setRemoveHistory(allDownloads.map(download => download.vod));
                      } else {
                        setRemoveHistory([]);
                      }
                    }}
                    containerStyle={styles.confirmationBtn}
                    color={colors.card2}
                    titleStyle={{ ...textVariants.body, color: colors.muted }}
                  >
                    {removeHistory.length === 0 ||
                      removeHistory.length !== allDownloads.length
                      ? "全选"
                      : "取消全选"}
                  </Button>
                  <Button
                    onPress={() => {
                      if (removeHistory.length > 0) {
                        toggleOverlay();
                      }
                    }}
                    containerStyle={styles.confirmationBtn}
                    color={removeHistory.length === 0 ? colors.card2 : (IS_OTHER_SKIN ? colors.error : colors.primary)}
                    titleStyle={{
                      ...textVariants.body,
                      color:
                        removeHistory.length === 0 ? colors.muted : (IS_OTHER_SKIN ? 'white' : colors.primaryContrast),
                    }}
                  >
                    删除
                  </Button>
                </View>
              )}
            </>
            :
            <View style={styles.emptyListContainer}>
              <EmptyList
                description="暂无下载视频"
                additionalElement={
                  <Pressable style={{ ...styles.seeMoreBtn, backgroundColor: IS_OTHER_SKIN ? 'white' : colors.primary }} onPress={handleSeeMore}>
                    <Text style={styles.seeMoreBtnText}>查看精彩视频</Text>
                  </Pressable>
                } />
            </View>
        }
      </View>
    </ScreenContainer>
  )
}

const styles = StyleSheet.create({
  contentContainer: {
    flex: 1,
  },
  emptyListContainer: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center'
  },
  seeMoreBtn: {
    backgroundColor: '#FAC33D',
    borderRadius: 22,
    paddingHorizontal: 12,
    paddingVertical: 6
  },
  seeMoreBtnText: {
    color: '#1D2023',
    fontSize: 12,
    fontWeight: '500',
    height: 16,
    lineHeight: 16
  },
  checkbox: {
    padding: 5,
  },
  downloadItem: {
    flexDirection: "row",
    alignItems: 'center'
  },
  confirmationBtn: {
    flex: 1,
    margin: 10,
    borderRadius: 10,
    marginTop: 8,
  },
  deleteConfirmationModal: {
    display: "flex",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    padding: 8,
  },
})

export default DownloadCatalog