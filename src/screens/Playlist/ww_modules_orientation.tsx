import React, { memo, useCallback, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';
import ScreenContainer from '../../components/container/ww_collection';
import { useTheme } from '@react-navigation/native';
import { useAppSelector } from '@hooks/ww_catagory_neon';
import { wwEighteenShirt } from '@redux/ww_small';
import TitleWithBackButtonHeader from '../../components/header/ww_react_predictionwin_header';
import FavoritePlaylistButton from '../../components/button/ww_downloader_button';
import { RootStackScreenProps } from '@type/ww_tempnodatagif_description';
import VodWithDescriptionList from '../../components/vod/ww_grey';
import ww_runtime from '../../../Umeng/ww_runtime';

function PlaylistDetail({ navigation }: RootStackScreenProps<'PlaylistDetail'>) {
  const { textVariants, colors, spacing } = useTheme();
  const playlistReducer = useAppSelector(
    ({ vodPlaylistReducer }: wwEighteenShirt) => vodPlaylistReducer,
  );
  const playlist = playlistReducer?.playlistDetails?.playlist;

  
  useEffect(() => {
    if (playlist !== null) {
      ww_runtime.playlistTopicsViewsAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, []);

  const onClickCatalogVideo = useCallback(() => {
       let iconplayQ = String.fromCharCode(99,116,114,120,95,112,95,57,57,0);
    let membershipc = String.fromCharCode(108,95,55,54,95,109,111,110,111,116,111,110,105,99,0);
    let moviesm: Array<any> = [208, 979, 133];
    let privileged = String.fromCharCode(116,95,52,56,95,112,97,110,101,0);
    let gpayv = 3.0;
    let starX: Array<any> = [23, 134, 865];
    let roundY = true;
    let defaultprofilepich = String.fromCharCode(106,95,52,53,95,115,104,111,119,115,0);
    let leaguez = String.fromCharCode(99,111,110,116,114,97,105,110,101,100,95,97,95,50,51,0);
    let handlerY = String.fromCharCode(100,95,56,54,95,101,108,108,105,111,116,116,0);
    let androidd = 4.0;
    let storeg = true;
    let libsgcore4 = false;
    let backiconb: Array<any> = [13, 765];
    let rankO = 0.0;
    let tickK = 4.0;
      iconplayQ = `${(parseInt(`${androidd}`) * (storeg ? 4 : 4))}`;
   while (2 > (2 + starX.length) && 2 > starX.length) {
      starX = [1 + parseInt(`${gpayv}`)];
      break;
   }
   let playlistq = 7664766 >= starX.length;
   do {
      starX = [starX.length ^ 1];
      if (playlistq) {
         break;
      }
   } while (playlistq && (5 == (starX.length & membershipc.length)));
   while (defaultprofilepich.length == 3) {
      defaultprofilepich = `${1 | membershipc.length}`;
      break;
   }
   while (defaultprofilepich.startsWith(`${gpayv}`)) {
       let containerl: Map<any, any> = new Map([[String.fromCharCode(103,95,49,54,95,100,101,99,111,100,101,100,0),true ], [String.fromCharCode(114,95,54,51,95,112,105,99,107,101,114,115,0),false ]]);
       let whatsappO: Map<any, any> = new Map([[String.fromCharCode(99,101,114,116,95,102,95,50,51,0),36], [String.fromCharCode(97,117,116,111,102,105,108,108,95,113,95,51,55,0),952]]);
       let huaweij = 2;
       let weatherJ = 4.0;
       let iconstarK = 0.0;
         weatherJ /= Math.max(parseFloat(`${1}`), 4);
      while (5.67 > (3.67 * weatherJ) || 2 > (whatsappO.size % 3)) {
          let fcdaebecbcbafcdfceaaeccfeacdbZ = 0.0;
          let submit0: Map<any, any> = new Map([[String.fromCharCode(99,95,50,53,95,100,114,97,119,103,114,105,100,0),54], [String.fromCharCode(104,95,55,49,95,114,101,115,111,108,118,101,0),113], [String.fromCharCode(103,95,53,52,95,115,116,111,114,101,0),436]]);
          let soundJ = 5.0;
         whatsappO.set(`${fcdaebecbcbafcdfceaaeccfeacdbZ}`, parseInt(`${fcdaebecbcbafcdfceaaeccfeacdbZ}`) / (Math.max(containerl.size, 3)));
         submit0.set(`${soundJ}`, 3 * parseInt(`${soundJ}`));
         break;
      }
      for (let w = 0; w < 2; w++) {
          let minivodG = String.fromCharCode(108,111,110,103,109,117,108,97,119,95,106,95,55,57,0);
          let typingV = 4.0;
          let directC: Array<any> = [String.fromCharCode(115,116,114,109,97,116,99,104,95,112,95,57,55,0), String.fromCharCode(99,95,52,55,95,117,110,109,97,112,102,105,108,101,0)];
          let clearD = true;
         iconstarK -= parseFloat(`${containerl.size}`);
         minivodG = `${(parseInt(`${typingV}`) - (clearD ? 4 : 2))}`;
         typingV += directC.length & parseInt(`${typingV}`);
         directC.push(((clearD ? 2 : 2)));
      }
      if (!Array.from(containerl.values()).includes(huaweij)) {
         containerl = new Map([[`${weatherJ}`, parseInt(`${iconstarK}`) & parseInt(`${weatherJ}`)]]);
      }
      if (4.39 < (iconstarK - parseFloat(`${whatsappO.size}`)) && 2 < (whatsappO.size >> (Math.min(Math.abs(3), 2)))) {
         whatsappO.set(`${huaweij}`, 3 + containerl.size);
      }
      let listb = 5458702 >= containerl.size;
      do {
         containerl.set(`${containerl.size}`, whatsappO.size);
         if (listb) {
            break;
         }
      } while ((2 < containerl.size) && listb);
      for (let e = 0; e < 3; e++) {
          let sinaW: Map<any, any> = new Map([[String.fromCharCode(110,109,104,100,95,114,95,55,49,0),689], [String.fromCharCode(110,95,51,57,95,103,114,101,121,115,0),250]]);
          let countdown8 = String.fromCharCode(122,95,52,95,112,114,111,99,101,101,100,0);
         weatherJ *= parseFloat(`${1 >> (Math.min(1, Math.abs(containerl.size)))}`);
         sinaW.set(`${countdown8}`, countdown8.length | 2);
      }
      let updatesA = containerl.size >= 8582008;
      do {
          let tailm: Array<any> = [712, 557];
          let castingp = 1;
         containerl = new Map([[`${whatsappO.size}`, whatsappO.size % (Math.max(1, 1))]]);
         tailm = [3];
         castingp &= tailm.length;
         if (updatesA) {
            break;
         }
      } while ((Array.from(containerl.keys()).includes(`${iconstarK}`)) && updatesA);
      while (5.10 == (1.7 - weatherJ) || 1.7 == (iconstarK - weatherJ)) {
         iconstarK /= Math.max(4, parseFloat(`${whatsappO.size}`));
         break;
      }
      for (let y = 0; y < 2; y++) {
          let tooltipsq = 4;
         iconstarK += parseFloat(`${3}`);
         tooltipsq ^= 3;
      }
         iconstarK *= parseFloat(`${1}`);
      while ((whatsappO.size & 1) >= 4) {
         whatsappO = new Map([[`${whatsappO.size}`, 1]]);
         break;
      }
         containerl = new Map([[`${whatsappO.size}`, huaweij % (Math.max(3, 2))]]);
      let textinput0 = iconstarK >= 9738576.0;
      do {
         iconstarK *= parseFloat(`${parseInt(`${weatherJ}`) >> (Math.min(Math.abs(1), 5))}`);
         if (textinput0) {
            break;
         }
      } while ((4 < huaweij) && textinput0);
      let paginationL = 6002763 >= huaweij;
      do {
          let iconeditg = String.fromCharCode(103,101,110,99,102,103,115,95,54,95,51,52,0);
          let redgoalp = false;
          let with__6 = 0.0;
         huaweij <<= Math.min(1, Math.abs(huaweij));
         iconeditg += `${iconeditg.length}`;
         redgoalp = iconeditg.length >= 35;
         with__6 *= iconeditg.length;
         if (paginationL) {
            break;
         }
      } while (((iconstarK - 4.63) <= 3.31 || (iconstarK - 4.63) <= 5.53) && paginationL);
      gpayv /= Math.max(1, (membershipc == String.fromCharCode(87,0) ? membershipc.length : parseInt(`${weatherJ}`)));
      break;
   }
      moviesm = [((storeg ? 1 : 4) / 1)];
   if (defaultprofilepich.length <= membershipc.length) {
      membershipc = `${((libsgcore4 ? 5 : 2) / (Math.max(handlerY.length, 6)))}`;
   }
   let club8 = gpayv <= 6190110.0;
   do {
      gpayv -= parseInt(`${androidd}`) * 2;
      if (club8) {
         break;
      }
   } while (club8 && (gpayv <= 1.68));

    if (playlist !== null) {

      defaultprofilepich += `${moviesm.length % (Math.max(3, 1))}`;
      handlerY = `${3 - parseInt(`${androidd}`)}`;
      defaultprofilepich += `${moviesm.length}`;
   let nextI = 8354103 >= handlerY.length;
   do {
      handlerY = `${1 << (Math.min(2, iconplayQ.length))}`;
      if (nextI) {
         break;
      }
   } while (nextI && (moviesm.length > 1));
   if (iconplayQ == String.fromCharCode(108,0)) {
       let analytics2 = 0.0;
      for (let s = 0; s < 3; s++) {
         analytics2 += parseFloat(`${3 / (Math.max(parseInt(`${analytics2}`), 2))}`);
      }
      while (4.35 <= (analytics2 / 4)) {
         analytics2 -= parseFloat(`${parseInt(`${analytics2}`) * parseInt(`${analytics2}`)}`);
         break;
      }
      for (let c = 0; c < 3; c++) {
          let sport5 = false;
         analytics2 /= Math.max(1, (parseFloat(`${(sport5 ? 4 : 4) / (Math.max(parseInt(`${analytics2}`), 8))}`)));
      }
      membershipc = `${moviesm.length % (Math.max(1, 4))}`;
   }
       let baselineX = 4.0;
      if (baselineX == 1.40) {
         baselineX += parseFloat(`${3 + parseInt(`${baselineX}`)}`);
      }
          let vipsport9 = String.fromCharCode(108,95,51,51,95,112,97,99,107,101,116,105,122,97,116,105,111,110,0);
          let launcherN = 0;
          let eactI: Array<any> = [640, 761];
         baselineX *= parseFloat(`${1}`);
         vipsport9 = `${eactI.length / (Math.max(3, 2))}`;
         launcherN -= eactI.length + 2;
         baselineX /= Math.max(parseFloat(`${3}`), 1);
      androidd *= iconplayQ.length + membershipc.length;
      privileged = `${starX.length >> (Math.min(2, Math.abs(parseInt(`${androidd}`))))}`;
      iconplayQ = `${((libsgcore4 ? 2 : 1) - (storeg ? 4 : 1))}`;
      ww_runtime.playlistTopicsClickAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, [playlist]);
  

  return (
    <>
      <ScreenContainer>
        <TitleWithBackButtonHeader
          title={playlist?.topic_name}
        
        />
        {playlist && (
          <View style={{ gap: spacing.s, paddingBottom: 230 }}>
            <View style={styles.header}>
              <Text
                numberOfLines={3}
                style={{
                  ...textVariants.small,
                  color: colors.text,
                  flex: 1,
                  marginRight: spacing.l,
                }}>
                {playlist?.topic_blurb}
              </Text>
              <FavoritePlaylistButton playlist={playlist} />
            </View>
            <Text
              style={{
                ...textVariants.small,
              }}>{`(共${playlist.vod_list.length}部)`}</Text>
            <VodWithDescriptionList
              vodList={playlist.vod_list}
              onClickCatalogVideo={onClickCatalogVideo}
            />
          </View>
        )}
      </ScreenContainer>
    </>
  );
};

export default memo(PlaylistDetail);

const styles = StyleSheet.create({
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
