import React, { memo, useCallback, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';
import ScreenContainer from '../../components/container/mayi_save';
import { useTheme } from '@react-navigation/native';
import { useAppSelector } from '@hooks/mayi_redirect';
import { mayi_Libapminsightb } from '@redux/mayi_live_tumbnail';
import TitleWithBackButtonHeader from '../../components/header/mayi_predictiondefault_header';
import FavoritePlaylistButton from '../../components/button/mayi_sheet_cornershoot_button';
import { RootStackScreenProps } from '@type/mayi_video_binddatas';
import VodWithDescriptionList from '../../components/vod/mayi_background_imagenetworkerr';
import mayi_push from '../../../Umeng/mayi_push';

function PlaylistDetail({ navigation }: RootStackScreenProps<'PlaylistDetail'>) {
  const { textVariants, colors, spacing } = useTheme();
  const playlistReducer = useAppSelector(
    ({ vodPlaylistReducer }: mayi_Libapminsightb) => vodPlaylistReducer,
  );
  const playlist = playlistReducer?.playlistDetails?.playlist;

  
  useEffect(() => {
    if (playlist !== null) {
      mayi_push.playlistTopicsViewsAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, []);

  const onClickCatalogVideo = useCallback(() => {
       let crown6: Array<any> = [111, 368];
    let philippinesQ: Array<any> = [313, 82];
    let floaterv: Array<any> = [932, 508];
    let controlJ = String.fromCharCode(112,95,54,56,95,111,117,116,112,111,105,110,116,0);
    let container6 = 0;
    let malaysiaF = String.fromCharCode(102,114,101,105,114,95,121,95,51,50,0);
    let infol = String.fromCharCode(122,95,50,56,95,100,101,112,101,110,100,115,0);
    let greyI = 1.0;
    let footballfieldw: Map<any, any> = new Map([[String.fromCharCode(100,105,114,101,99,116,100,95,50,95,52,48,0),672], [String.fromCharCode(118,95,57,50,95,105,111,115,117,114,102,97,99,101,0),469]]);
    let klevinC = String.fromCharCode(97,114,109,118,116,101,95,111,95,56,54,0);
    let redirectR = String.fromCharCode(103,95,52,51,95,114,101,106,111,105,110,0);
      crown6 = [container6 * floaterv.length];
   let flipperX = 8443252 >= infol.length;
   do {
      infol = "1";
      if (flipperX) {
         break;
      }
   } while ((malaysiaF != String.fromCharCode(70,0)) && flipperX);
   if (1 == (parseInt(`${greyI}`) - malaysiaF.length) || 5.0 == (greyI - malaysiaF.length)) {
      greyI -= floaterv.length;
   }
       let iconlogoutJ = String.fromCharCode(110,95,54,51,95,109,117,108,116,105,115,116,101,112,0);
      if (iconlogoutJ == String.fromCharCode(119,0)) {
         iconlogoutJ += `${iconlogoutJ.length}`;
      }
         iconlogoutJ = `${(iconlogoutJ == String.fromCharCode(86,0) ? iconlogoutJ.length : iconlogoutJ.length)}`;
      let s_positionA = 9062250 >= iconlogoutJ.length;
      do {
          let eabafadfadddbafeddddeeefeaafg = false;
          let whiteF = 2.0;
         iconlogoutJ = `${(iconlogoutJ == String.fromCharCode(48,0) ? (eabafadfadddbafeddddeeefeaafg ? 2 : 2) : iconlogoutJ.length)}`;
         eabafadfadddbafeddddeeefeaafg = 91.48 > (whiteF + whiteF);
         if (s_positionA) {
            break;
         }
      } while ((iconlogoutJ.includes(iconlogoutJ)) && s_positionA);
      infol = `${parseInt(`${greyI}`) | 2}`;
   let sigmobG = 6482096 >= floaterv.length;
   do {
      floaterv = [(malaysiaF == String.fromCharCode(77,0) ? malaysiaF.length : parseInt(`${greyI}`))];
      if (sigmobG) {
         break;
      }
   } while (sigmobG && (klevinC.length > 5));
      container6 %= Math.max(2, controlJ.length ^ floaterv.length);
       let utils_ = 4;
       let gifgoalJ: Map<any, any> = new Map([[String.fromCharCode(115,116,111,119,95,105,95,57,51,0),95], [String.fromCharCode(109,95,53,52,95,112,101,114,109,117,116,97,116,105,111,110,115,0),186], [String.fromCharCode(97,95,50,52,95,116,101,115,116,111,114,105,103,0),281]]);
         gifgoalJ.set(`${utils_}`, gifgoalJ.size | utils_);
      while (5 >= (gifgoalJ.size >> (Math.min(Math.abs(4), 3))) && 5 >= (4 >> (Math.min(1, Math.abs(utils_))))) {
         utils_ <<= Math.min(Math.abs(2 % (Math.max(10, gifgoalJ.size))), 2);
         break;
      }
          let rocketn = String.fromCharCode(115,109,105,120,95,120,95,57,57,0);
         utils_ /= Math.max(4, gifgoalJ.size);
         rocketn = `${rocketn.length}`;
      while ((gifgoalJ.size - utils_) <= 1) {
         utils_ *= gifgoalJ.size << (Math.min(3, Math.abs(utils_)));
         break;
      }
          let hoverq = String.fromCharCode(97,95,53,53,95,108,111,115,115,121,0);
          let previewF = String.fromCharCode(103,95,50,50,95,105,110,100,101,120,111,102,0);
          let homeinactivey: Array<any> = [680, 896];
         gifgoalJ = new Map([[`${gifgoalJ.size}`, gifgoalJ.size >> (Math.min(Math.abs(3), 4))]]);
         hoverq += `${homeinactivey.length * hoverq.length}`;
         previewF = "2";
         homeinactivey = [hoverq.length - 3];
      while ((1 % (Math.max(8, utils_))) == 5 && 1 == (gifgoalJ.size % (Math.max(2, utils_)))) {
          let eabafadfadddbafeddddeeefeaafb = true;
          let iconorientationL = 1.0;
          let awayteamfieldd = 0.0;
          let encrypto = 0;
         utils_ -= 3;
         eabafadfadddbafeddddeeefeaafb = awayteamfieldd == 1.84;
         iconorientationL -= parseFloat(`${2}`);
         awayteamfieldd -= parseInt(`${iconorientationL}`) + 3;
         encrypto *= parseInt(`${awayteamfieldd}`) | 2;
         break;
      }
      klevinC += `${2 + crown6.length}`;

    if (playlist !== null) {

   if ((3 + footballfieldw.size) == 2) {
      footballfieldw.set(`${container6}`, container6 & 2);
   }
       let sportn = 3.0;
       let debugs = String.fromCharCode(98,108,101,110,100,109,111,100,101,95,104,95,51,51,0);
      let statsnomoredatan = sportn <= 8562123.0;
      do {
          let mbridgek = String.fromCharCode(102,97,115,116,115,115,105,109,95,99,95,51,50,0);
          let plusm = String.fromCharCode(116,95,51,52,95,115,101,118,101,114,105,116,121,0);
          let trophy6 = String.fromCharCode(114,95,49,57,95,115,107,101,121,108,105,115,116,0);
         sportn *= parseFloat(`${debugs.length - 3}`);
         mbridgek += `${(String.fromCharCode(52,0) == trophy6 ? trophy6.length : plusm.length)}`;
         plusm = `${plusm.length / (Math.max(trophy6.length, 7))}`;
         if (statsnomoredatan) {
            break;
         }
      } while ((4.75 == (sportn / (Math.max(parseFloat(`${debugs.length}`), 6))) && (sportn / 4.75) == 5.4) && statsnomoredatan);
          let orientationr = true;
          let feedbackF: Array<any> = [780, 21];
         sportn -= parseFloat(`${feedbackF.length}`);
         orientationr = !orientationr;
         feedbackF.push(((orientationr ? 2 : 4)));
      let policyT = 7566283 >= debugs.length;
      do {
         debugs = `${(String.fromCharCode(85,0) == debugs ? parseInt(`${sportn}`) : debugs.length)}`;
         if (policyT) {
            break;
         }
      } while (policyT && (1.0 == (1.46 + sportn) && (sportn + parseFloat(`${debugs.length}`)) == 1.46));
      let whatsapp6 = debugs == String.fromCharCode(95,110,113,0);
      do {
         debugs = `${debugs.length}`;
         if (whatsapp6) {
            break;
         }
      } while (whatsapp6 && (1 >= debugs.length));
      while ((sportn + parseFloat(`${debugs.length}`)) == 1.41 || 4 == (debugs.length % 4)) {
         sportn *= parseFloat(`${2}`);
         break;
      }
      if ((3 & debugs.length) >= 3 && (sportn - parseFloat(`${debugs.length}`)) >= 4.1) {
          let chatroombackgroundm = true;
          let bootsplashh = 3.0;
          let videocommont = String.fromCharCode(99,101,114,116,95,107,95,57,50,0);
          let downloadz: Map<any, any> = new Map([[String.fromCharCode(107,95,50,55,95,97,116,116,105,98,117,116,101,0),true ], [String.fromCharCode(103,95,49,55,95,102,105,110,100,0),false ]]);
          let u_unlocko = 4;
         debugs += `${downloadz.size | parseInt(`${bootsplashh}`)}`;
         chatroombackgroundm = videocommont.length >= 65;
         bootsplashh /= Math.max(5, (u_unlocko % (Math.max(9, (chatroombackgroundm ? 1 : 4)))));
         videocommont = `${(u_unlocko | (chatroombackgroundm ? 5 : 3))}`;
         downloadz = new Map([[videocommont, (2 / (Math.max(1, (chatroombackgroundm ? 5 : 4))))]]);
      }
      malaysiaF = `${klevinC.length}`;
      infol += `${crown6.length}`;
   for (let q = 0; q < 3; q++) {
       let footballfieldY: Map<any, any> = new Map([[String.fromCharCode(117,95,57,57,95,121,117,118,109,112,101,103,0),383], [String.fromCharCode(108,95,56,50,95,102,119,114,105,116,101,0),325], [String.fromCharCode(117,112,103,114,97,100,101,115,95,97,95,55,53,0),897]]);
       let iconclosewhiteh: Array<any> = [String.fromCharCode(99,95,55,52,95,98,105,116,109,97,115,107,0), String.fromCharCode(105,95,51,49,95,101,108,108,105,112,116,105,99,97,108,0), String.fromCharCode(97,112,105,99,95,121,95,49,0)];
       let update_wM = String.fromCharCode(99,111,109,112,97,114,101,95,56,95,57,49,0);
       let huaweiJ = 1.0;
       let encryptorD = true;
         iconclosewhiteh.push(parseInt(`${huaweiJ}`));
         update_wM += `${update_wM.length}`;
      for (let a = 0; a < 3; a++) {
         update_wM = `${update_wM.length}`;
      }
         iconclosewhiteh.push(1);
       let iconnewsshareZ = String.fromCharCode(100,105,114,101,99,116,105,111,110,97,108,95,118,95,52,54,0);
       let libreactnativejniP = String.fromCharCode(99,101,114,116,115,95,98,95,56,48,0);
      if (!iconnewsshareZ.startsWith(`${libreactnativejniP.length}`)) {
         iconnewsshareZ += `${(parseInt(`${huaweiJ}`) << (Math.min(3, Math.abs((encryptorD ? 1 : 2)))))}`;
      }
      if (encryptorD) {
          let predictionbannersharedr = 2.0;
          let eighteenK = 0;
          let helperN = String.fromCharCode(100,101,108,97,117,110,97,121,95,102,95,50,53,0);
          let yellowtoredI = 2.0;
         huaweiJ /= Math.max(3, parseFloat(`${parseInt(`${huaweiJ}`)}`));
         predictionbannersharedr /= Math.max(parseInt(`${yellowtoredI}`) << (Math.min(3, Math.abs(eighteenK))), 1);
         eighteenK *= 1;
         helperN = `${eighteenK - 2}`;
         yellowtoredI /= Math.max(4, parseFloat(`${helperN.length}`));
      }
         footballfieldY = new Map([[`${huaweiJ}`, ((encryptorD ? 5 : 3) - parseInt(`${huaweiJ}`))]]);
      if ((huaweiJ / 2.84) == 1.73) {
         encryptorD = 14 <= iconnewsshareZ.length;
      }
       let basketballO = String.fromCharCode(97,95,52,95,112,97,114,99,111,114,0);
       let navigationm = String.fromCharCode(122,95,52,50,95,112,114,105,110,116,0);
      if (huaweiJ <= 1.72) {
         huaweiJ += (parseFloat(`${String.fromCharCode(104,0) == navigationm ? parseInt(`${huaweiJ}`) : navigationm.length}`));
      }
         encryptorD = !encryptorD;
         update_wM = "2";
       let x_hashA = String.fromCharCode(115,99,113,117,101,114,121,95,104,95,54,52,0);
         iconnewsshareZ += `${3 & libreactnativejniP.length}`;
      floaterv = [(malaysiaF == String.fromCharCode(102,0) ? malaysiaF.length : infol.length)];
   }
      klevinC = `${(malaysiaF == String.fromCharCode(104,0) ? malaysiaF.length : philippinesQ.length)}`;
       let iconviewergifE = 0.0;
       let yellowanimationlivek = String.fromCharCode(116,95,52,55,95,119,105,110,99,101,0);
      for (let l = 0; l < 1; l++) {
          let ticked2 = String.fromCharCode(99,111,110,103,101,115,116,105,111,110,95,108,95,57,53,0);
          let result4: Array<any> = [43, 944];
          let readA = 2.0;
          let foregroundA = String.fromCharCode(97,117,100,105,111,105,110,116,101,114,108,101,97,118,101,95,52,95,57,51,0);
         iconviewergifE += parseFloat(`${yellowanimationlivek.length * 2}`);
         ticked2 += `${1 | parseInt(`${readA}`)}`;
         result4 = [parseInt(`${readA}`)];
         foregroundA += `${3 + foregroundA.length}`;
      }
      if ((yellowanimationlivek.length % (Math.max(2, 2))) < 2) {
         iconviewergifE += parseFloat(`${1 + parseInt(`${iconviewergifE}`)}`);
      }
         iconviewergifE /= Math.max(parseFloat(`${parseInt(`${iconviewergifE}`)}`), 4);
      for (let r = 0; r < 3; r++) {
         iconviewergifE -= parseFloat(`${yellowanimationlivek.length}`);
      }
      let firebasey = 6591200.0 <= iconviewergifE;
      do {
          let chinasameE = String.fromCharCode(111,95,51,48,95,99,105,114,99,108,101,0);
          let indicatorM = String.fromCharCode(104,111,116,95,99,95,51,48,0);
          let hookI = String.fromCharCode(115,95,52,48,95,103,97,109,101,115,0);
          let rncoreJ = String.fromCharCode(114,101,102,112,116,114,95,106,95,54,52,0);
          let libavutilu = 3;
         iconviewergifE += (parseFloat(`${indicatorM == String.fromCharCode(77,0) ? hookI.length : indicatorM.length}`));
         chinasameE += `${libavutilu}`;
         hookI = `${(String.fromCharCode(51,0) == rncoreJ ? libavutilu : rncoreJ.length)}`;
         if (firebasey) {
            break;
         }
      } while ((yellowanimationlivek.length == 3) && firebasey);
         iconviewergifE /= Math.max(parseFloat(`${2 >> (Math.min(4, yellowanimationlivek.length))}`), 5);
      controlJ += `${parseInt(`${iconviewergifE}`) | footballfieldw.size}`;
       let defaultplayerimgO = String.fromCharCode(100,101,99,108,105,110,101,95,114,95,51,52,0);
      for (let t = 0; t < 1; t++) {
         defaultplayerimgO += `${defaultplayerimgO.length >> (Math.min(defaultplayerimgO.length, 1))}`;
      }
      if (defaultplayerimgO.length >= 3) {
         defaultplayerimgO += `${defaultplayerimgO.length}`;
      }
      let storec = defaultplayerimgO == String.fromCharCode(121,101,99,122,56,0);
      do {
          let neon4 = 0.0;
          let iconarrowrightwhiteG: Map<any, any> = new Map([[String.fromCharCode(109,101,116,97,100,97,116,97,115,95,108,95,49,50,0),443], [String.fromCharCode(109,112,101,103,118,105,100,101,111,95,115,95,49,49,0),771], [String.fromCharCode(101,95,50,54,95,99,117,116,0),193]]);
         defaultplayerimgO = "3";
         neon4 /= Math.max(parseFloat(`${parseInt(`${neon4}`)}`), 2);
         iconarrowrightwhiteG.set(`${neon4}`, 1);
         if (storec) {
            break;
         }
      } while ((defaultplayerimgO == String.fromCharCode(57,0) && defaultplayerimgO != String.fromCharCode(120,0)) && storec);
      footballfieldw.set(`${crown6.length}`, 2);
      mayi_push.playlistTopicsClickAnalytics({
        topic_id: playlist.topic_id.toString(),
        topic_name: playlist.topic_name,
      });
    }
  }, [playlist]);
  

  return (
    <>
      <ScreenContainer>
        <TitleWithBackButtonHeader
          title={playlist?.topic_name}
        
        />
        {playlist && (
          <View style={{ gap: spacing.s, paddingBottom: 230 }}>
            <View style={styles.header}>
              <Text
                numberOfLines={3}
                style={{
                  ...textVariants.small,
                  color: colors.text,
                  flex: 1,
                  marginRight: spacing.l,
                }}>
                {playlist?.topic_blurb}
              </Text>
              <FavoritePlaylistButton playlist={playlist} />
            </View>
            <Text
              style={{
                ...textVariants.small,
              }}>{`(共${playlist.vod_list.length}部)`}</Text>
            <VodWithDescriptionList
              vodList={playlist.vod_list}
              onClickCatalogVideo={onClickCatalogVideo}
            />
          </View>
        )}
      </ScreenContainer>
    </>
  );
};

export default memo(PlaylistDetail);

const styles = StyleSheet.create({
  header: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
});
